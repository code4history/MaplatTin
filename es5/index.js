/*! @maplat/tin v0.7.1 | Kohei Otsuka, Code for History | license: Apache-2.0 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("fs"),require("flatbush"),require("child_process")):"function"==typeof define&&define.amd?define(["fs","flatbush","child_process"],e):"object"==typeof exports?exports.Tin=e(require("fs"),require("flatbush"),require("child_process")):t.Tin=e(t.fs,t.flatbush,t.child_process)}(this,(function(t,e,n){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=286)}([function(t,e,n){var r=n(1),i=n(22).f,o=n(14),a=n(18),s=n(70),u=n(97),c=n(53);t.exports=function(t,e){var n,l,f,p,h,d=t.target,g=t.global,y=t.stat;if(n=g?r:y?r[d]||s(d,{}):(r[d]||{}).prototype)for(l in e){if(p=e[l],f=t.noTargetGet?(h=i(n,l))&&h.value:n[l],!c(g?l:d+(y?".":"#")+l,t.forced)&&void 0!==f){if(typeof p==typeof f)continue;u(p,f)}(t.sham||f&&f.sham)&&o(p,"sham",!0),a(n,l,p,t)}}},function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||function(){return this}()||Function("return this")()}).call(this,n(51))},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){"use strict";var r,i=n(131),o=n(7),a=n(1),s=n(6),u=n(8),c=n(57),l=n(14),f=n(18),p=n(9).f,h=n(60),d=n(49),g=n(4),y=n(39),m=a.Int8Array,v=m&&m.prototype,_=a.Uint8ClampedArray,b=_&&_.prototype,x=m&&h(m),w=v&&h(v),E=Object.prototype,S=E.isPrototypeOf,I=g("toStringTag"),C=y("TYPED_ARRAY_TAG"),N=i&&!!d&&"Opera"!==c(a.opera),A=!1,O={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},P={BigInt64Array:8,BigUint64Array:8},T=function(t){if(!s(t))return!1;var e=c(t);return u(O,e)||u(P,e)};for(r in O)a[r]||(N=!1);if((!N||"function"!=typeof x||x===Function.prototype)&&(x=function(){throw TypeError("Incorrect invocation")},N))for(r in O)a[r]&&d(a[r],x);if((!N||!w||w===E)&&(w=x.prototype,N))for(r in O)a[r]&&d(a[r].prototype,w);if(N&&h(b)!==w&&d(b,w),o&&!u(w,I))for(r in A=!0,p(w,I,{get:function(){return s(this)?this[C]:void 0}}),O)a[r]&&l(a[r],C,r);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:N,TYPED_ARRAY_TAG:A&&C,aTypedArray:function(t){if(T(t))return t;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(t){if(d){if(S.call(x,t))return t}else for(var e in O)if(u(O,r)){var n=a[e];if(n&&(t===n||S.call(n,t)))return t}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(t,e,n){if(o){if(n)for(var r in O){var i=a[r];i&&u(i.prototype,t)&&delete i.prototype[t]}w[t]&&!n||f(w,t,n?e:N&&v[t]||e)}},exportTypedArrayStaticMethod:function(t,e,n){var r,i;if(o){if(d){if(n)for(r in O)(i=a[r])&&u(i,t)&&delete i[t];if(x[t]&&!n)return;try{return f(x,t,n?e:N&&m[t]||e)}catch(t){}}for(r in O)!(i=a[r])||i[t]&&!n||f(i,t,e)}},isView:function(t){if(!s(t))return!1;var e=c(t);return"DataView"===e||u(O,e)||u(P,e)},isTypedArray:T,TypedArray:x,TypedArrayPrototype:w}},function(t,e,n){var r=n(1),i=n(73),o=n(8),a=n(39),s=n(76),u=n(100),c=i("wks"),l=r.Symbol,f=u?l:l&&l.withoutSetter||a;t.exports=function(t){return o(c,t)||(s&&o(l,t)?c[t]=l[t]:c[t]=f("Symbol."+t)),c[t]}},function(t,e,n){var r=n(15),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var r=n(2);t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(7),i=n(96),o=n(10),a=n(28),s=Object.defineProperty;e.f=r?s:function(t,e,n){if(o(t),e=a(e,!0),o(n),i)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(6);t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},function(t,e,n){var r=n(13);t.exports=function(t){return Object(r(t))}},function(t,e,n){var r=n(32),i=n(38),o=n(11),a=n(5),s=n(55),u=[].push,c=function(t){var e=1==t,n=2==t,c=3==t,l=4==t,f=6==t,p=7==t,h=5==t||f;return function(d,g,y,m){for(var v,_,b=o(d),x=i(b),w=r(g,y,3),E=a(x.length),S=0,I=m||s,C=e?I(d,E):n||p?I(d,0):void 0;E>S;S++)if((h||S in x)&&(_=w(v=x[S],S,b),t))if(e)C[S]=_;else if(_)switch(t){case 3:return!0;case 5:return v;case 6:return S;case 2:u.call(C,v)}else switch(t){case 4:return!1;case 7:u.call(C,v)}return f?-1:c||l?l:C}};t.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterOut:c(7)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},function(t,e,n){var r=n(7),i=n(9),o=n(27);t.exports=r?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(e,n){e.exports=t},function(t,e,n){!function(t){"use strict";function e(){}function n(t){this.message=t||""}function r(t){this.message=t||""}function i(t){this.message=t||""}function o(){}function a(t){return null===t?Rt:t.color}function s(t){return null===t?null:t.parent}function u(t,e){null!==t&&(t.color=e)}function c(t){return null===t?null:t.left}function l(t){return null===t?null:t.right}function f(){this.root_=null,this.size_=0}function p(){}function h(){this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}function d(){}function g(t){this.message=t||""}function y(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var m=function(){};m.prototype.interfaces_=function(){return[]},m.prototype.getClass=function(){return m},m.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var v=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),_=function(){},b={MAX_VALUE:{configurable:!0}};_.isNaN=function(t){return Number.isNaN(t)},_.doubleToLongBits=function(t){return t},_.longBitsToDouble=function(t){return t},_.isInfinite=function(t){return!Number.isFinite(t)},b.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(_,b);var x=function(){},w=function(){},E=function(){},S=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},I={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};S.prototype.setOrdinate=function(t,e){switch(t){case S.X:this.x=e;break;case S.Y:this.y=e;break;case S.Z:this.z=e;break;default:throw new v("Invalid ordinate index: "+t)}},S.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!m.equalsWithTolerance(this.x,e.x,n)&&!!m.equalsWithTolerance(this.y,e.y,n)}},S.prototype.getOrdinate=function(t){switch(t){case S.X:return this.x;case S.Y:return this.y;case S.Z:return this.z}throw new v("Invalid ordinate index: "+t)},S.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||_.isNaN(this.z))&&_.isNaN(t.z)},S.prototype.equals=function(t){return t instanceof S&&this.equals2D(t)},S.prototype.equalInZ=function(t,e){return m.equalsWithTolerance(this.z,t.z,e)},S.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},S.prototype.clone=function(){},S.prototype.copy=function(){return new S(this)},S.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},S.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},S.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},S.prototype.hashCode=function(){var t=17;return 37*(t=37*t+S.hashCode(this.x))+S.hashCode(this.y)},S.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},S.prototype.interfaces_=function(){return[x,w,e]},S.prototype.getClass=function(){return S},S.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=_.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},I.DimensionalComparator.get=function(){return C},I.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},I.NULL_ORDINATE.get=function(){return _.NaN},I.X.get=function(){return 0},I.Y.get=function(){return 1},I.Z.get=function(){return 2},Object.defineProperties(S,I);var C=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new v("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};C.prototype.compare=function(t,e){var n=t,r=e,i=C.compare(n.x,r.x);if(0!==i)return i;var o=C.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:C.compare(n.z,r.z)},C.prototype.interfaces_=function(){return[E]},C.prototype.getClass=function(){return C},C.compare=function(t,e){return t<e?-1:t>e?1:_.isNaN(t)?_.isNaN(e)?0:-1:_.isNaN(e)?1:0};var N=function(){};N.prototype.create=function(){},N.prototype.interfaces_=function(){return[]},N.prototype.getClass=function(){return N};var A=function(){},O={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};A.prototype.interfaces_=function(){return[]},A.prototype.getClass=function(){return A},A.toLocationSymbol=function(t){switch(t){case A.EXTERIOR:return"e";case A.BOUNDARY:return"b";case A.INTERIOR:return"i";case A.NONE:return"-"}throw new v("Unknown location value: "+t)},O.INTERIOR.get=function(){return 0},O.BOUNDARY.get=function(){return 1},O.EXTERIOR.get=function(){return 2},O.NONE.get=function(){return-1},Object.defineProperties(A,O);var P=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},T=function(){},M={LOG_10:{configurable:!0}};T.prototype.interfaces_=function(){return[]},T.prototype.getClass=function(){return T},T.log10=function(t){var e=Math.log(t);return _.isInfinite(e)||_.isNaN(e)?e:e/T.LOG_10},T.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},T.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}},T.wrap=function(t,e){return t<0?e- -t%e:t%e},T.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=t;return e>r&&(r=e),n>r&&(r=n),r}if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],u=i;return o>u&&(u=o),a>u&&(u=a),s>u&&(u=s),u}},T.average=function(t,e){return(t+e)/2},M.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(T,M);var L=function(t){this.str=t};L.prototype.append=function(t){this.str+=t},L.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},L.prototype.toString=function(t){return this.str};var R=function(t){this.value=t};R.prototype.intValue=function(){return this.value},R.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},R.isNaN=function(t){return Number.isNaN(t)};var D=function(){};D.isWhitespace=function(t){return t<=32&&t>=0||127===t},D.toUpperCase=function(t){return t.toUpperCase()};var F=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else if("string"==typeof arguments[0]){var r=arguments[0];t.call(this,t.parse(r))}}else if(2===arguments.length){var i=arguments[0],o=arguments[1];this.init(i,o)}},k={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};F.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},F.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=F.magnitude(n._hi),i=F.TEN.pow(r);(n=n.divide(i)).gt(F.TEN)?(n=n.divide(F.TEN),r+=1):n.lt(F.ONE)&&(n=n.multiply(F.TEN),r-=1);for(var o=r+1,a=new L,s=F.MAX_PRINT_DIGITS-1,u=0;u<=s;u++){t&&u===o&&a.append(".");var c=Math.trunc(n._hi);if(c<0)break;var l=!1,f=0;c>9?(l=!0,f="9"):f="0"+c,a.append(f),n=n.subtract(F.valueOf(c)).multiply(F.TEN),l&&n.selfAdd(F.TEN);var p=!0,h=F.magnitude(n._hi);if(h<0&&Math.abs(h)>=s-u&&(p=!1),!p)break}return e[0]=r,a.toString()},F.prototype.sqr=function(){return this.multiply(this)},F.prototype.doubleValue=function(){return this._hi+this._lo},F.prototype.subtract=function(){if(arguments[0]instanceof F){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},F.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},F.prototype.isZero=function(){return 0===this._hi&&0===this._lo},F.prototype.selfSubtract=function(){if(arguments[0]instanceof F){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},F.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},F.prototype.min=function(t){return this.le(t)?this:t},F.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof F){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,u=null,c=null,l=null,f=null;return u=this._hi/n,f=(i=(c=F.SPLIT*u)-(i=c-u))*(a=(f=F.SPLIT*n)-(a=f-n))-(l=u*n)+i*(s=n-a)+(o=u-i)*a+o*s,f=u+(c=(this._hi-l-f+this._lo-u*r)/n),this._hi=f,this._lo=u-f+c,this}},F.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},F.prototype.divide=function(){if(arguments[0]instanceof F){var t=arguments[0],e=null,n=null,r=null,i=null,o=null,a=null,s=null,u=null;return n=(o=this._hi/t._hi)-(e=(a=F.SPLIT*o)-(e=a-o)),u=e*(r=(u=F.SPLIT*t._hi)-(r=u-t._hi))-(s=o*t._hi)+e*(i=t._hi-r)+n*r+n*i,a=(this._hi-s-u+this._lo-o*t._lo)/t._hi,new F(u=o+a,o-u+a)}if("number"==typeof arguments[0]){var c=arguments[0];return _.isNaN(c)?F.createNaN():F.copy(this).selfDivide(c,0)}},F.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},F.prototype.pow=function(t){if(0===t)return F.valueOf(1);var e=new F(this),n=F.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},F.prototype.ceil=function(){if(this.isNaN())return F.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new F(t,e)},F.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},F.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},F.prototype.setValue=function(){if(arguments[0]instanceof F){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},F.prototype.max=function(t){return this.ge(t)?this:t},F.prototype.sqrt=function(){if(this.isZero())return F.valueOf(0);if(this.isNegative())return F.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=F.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},F.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof F){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,r=null,i=null,o=null,a=null,s=null;return o=(i=this._hi+e)-(a=i-this._hi),r=(s=(o=e-a+(this._hi-o))+this._lo)+(i-(n=i+s)),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var u=arguments[0],c=arguments[1],l=null,f=null,p=null,h=null,d=null,g=null,y=null;h=this._hi+u,f=this._lo+c,d=h-(g=h-this._hi),p=f-(y=f-this._lo);var m=(l=h+(g=(d=u-g+(this._hi-d))+f))+(g=(p=c-y+(this._lo-p))+(g+(h-l))),v=g+(l-m);return this._hi=m,this._lo=v,this}},F.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof F){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,u=null,c=null;i=(u=F.SPLIT*this._hi)-this._hi,c=F.SPLIT*n,i=u-i,o=this._hi-i,a=c-n;var l=(u=this._hi*n)+(c=i*(a=c-a)-u+i*(s=n-a)+o*a+o*s+(this._hi*r+this._lo*n)),f=c+(i=u-l);return this._hi=l,this._lo=f,this}},F.prototype.selfSqr=function(){return this.selfMultiply(this)},F.prototype.floor=function(){if(this.isNaN())return F.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new F(t,e)},F.prototype.negate=function(){return this.isNaN()?this:new F(-this._hi,-this._lo)},F.prototype.clone=function(){},F.prototype.multiply=function(){if(arguments[0]instanceof F){var t=arguments[0];return t.isNaN()?F.createNaN():F.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return _.isNaN(e)?F.createNaN():F.copy(this).selfMultiply(e,0)}},F.prototype.isNaN=function(){return _.isNaN(this._hi)},F.prototype.intValue=function(){return Math.trunc(this._hi)},F.prototype.toString=function(){var t=F.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},F.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+F.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+F.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},F.prototype.reciprocal=function(){var t,e,n,r,i=null,o=null,a=null,s=null;t=(n=1/this._hi)-(i=(a=F.SPLIT*n)-(i=a-n)),o=(s=F.SPLIT*this._hi)-this._hi;var u=n+(a=(1-(r=n*this._hi)-(s=i*(o=s-o)-r+i*(e=this._hi-o)+t*o+t*e)-n*this._lo)/this._hi);return new F(u,n-u+a)},F.prototype.toSciNotation=function(){if(this.isZero())return F.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=F.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},F.prototype.abs=function(){return this.isNaN()?F.NaN:this.isNegative()?this.negate():new F(this)},F.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},F.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},F.prototype.add=function(){if(arguments[0]instanceof F){var t=arguments[0];return F.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return F.copy(this).selfAdd(e)}},F.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof F){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}},F.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},F.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},F.prototype.trunc=function(){return this.isNaN()?F.NaN:this.isPositive()?this.floor():this.ceil()},F.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},F.prototype.interfaces_=function(){return[e,x,w]},F.prototype.getClass=function(){return F},F.sqr=function(t){return F.valueOf(t).selfMultiply(t)},F.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return F.parse(t)}if("number"==typeof arguments[0]){var e=arguments[0];return new F(e)}},F.sqrt=function(t){return F.valueOf(t).sqrt()},F.parse=function(t){for(var e=0,n=t.length;D.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new F,a=0,s=0,u=0;!(e>=n);){var c=t.charAt(e);if(e++,D.isDigit(c)){var l=c-"0";o.selfMultiply(F.TEN),o.selfAdd(l),a++}else{if("."!==c){if("e"===c||"E"===c){var f=t.substring(e);try{u=R.parseInt(f)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+f+" in string "+t):e}break}throw new Error("Unexpected character '"+c+"' at position "+e+" in string "+t)}s=a}}var p=o,h=a-s-u;if(0===h)p=o;else if(h>0){var d=F.TEN.pow(h);p=o.divide(d)}else if(h<0){var g=F.TEN.pow(-h);p=o.multiply(g)}return r?p.negate():p},F.createNaN=function(){return new F(_.NaN,_.NaN)},F.copy=function(t){return new F(t)},F.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},F.stringOfChar=function(t,e){for(var n=new L,r=0;r<e;r++)n.append(t);return n.toString()},k.PI.get=function(){return new F(3.141592653589793,12246467991473532e-32)},k.TWO_PI.get=function(){return new F(6.283185307179586,24492935982947064e-32)},k.PI_2.get=function(){return new F(1.5707963267948966,6123233995736766e-32)},k.E.get=function(){return new F(2.718281828459045,14456468917292502e-32)},k.NaN.get=function(){return new F(_.NaN,_.NaN)},k.EPS.get=function(){return 123259516440783e-46},k.SPLIT.get=function(){return 134217729},k.MAX_PRINT_DIGITS.get=function(){return 32},k.TEN.get=function(){return F.valueOf(10)},k.ONE.get=function(){return F.valueOf(1)},k.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},k.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(F,k);var j=function(){},B={DP_SAFE_EPSILON:{configurable:!0}};j.prototype.interfaces_=function(){return[]},j.prototype.getClass=function(){return j},j.orientationIndex=function(t,e,n){var r=j.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=F.valueOf(e.x).selfAdd(-t.x),o=F.valueOf(e.y).selfAdd(-t.y),a=F.valueOf(n.x).selfAdd(-e.x),s=F.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()},j.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},j.intersection=function(t,e,n,r){var i=F.valueOf(r.y).selfSubtract(n.y).selfMultiply(F.valueOf(e.x).selfSubtract(t.x)),o=F.valueOf(r.x).selfSubtract(n.x).selfMultiply(F.valueOf(e.y).selfSubtract(t.y)),a=i.subtract(o),s=F.valueOf(r.x).selfSubtract(n.x).selfMultiply(F.valueOf(t.y).selfSubtract(n.y)),u=F.valueOf(r.y).selfSubtract(n.y).selfMultiply(F.valueOf(t.x).selfSubtract(n.x)),c=s.subtract(u).selfDivide(a).doubleValue(),l=F.valueOf(t.x).selfAdd(F.valueOf(e.x).selfSubtract(t.x).selfMultiply(c)).doubleValue(),f=F.valueOf(e.x).selfSubtract(t.x).selfMultiply(F.valueOf(t.y).selfSubtract(n.y)),p=F.valueOf(e.y).selfSubtract(t.y).selfMultiply(F.valueOf(t.x).selfSubtract(n.x)),h=f.subtract(p).selfDivide(a).doubleValue(),d=F.valueOf(n.y).selfAdd(F.valueOf(r.y).selfSubtract(n.y).selfMultiply(h)).doubleValue();return new S(l,d)},j.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),a=i-o;if(i>0){if(o<=0)return j.signum(a);r=i+o}else{if(!(i<0))return j.signum(a);if(o>=0)return j.signum(a);r=-i-o}var s=j.DP_SAFE_EPSILON*r;return a>=s||-a>=s?j.signum(a):2},j.signum=function(t){return t>0?1:t<0?-1:0},B.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(j,B);var G=function(){},U={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};U.X.get=function(){return 0},U.Y.get=function(){return 1},U.Z.get=function(){return 2},U.M.get=function(){return 3},G.prototype.setOrdinate=function(t,e,n){},G.prototype.size=function(){},G.prototype.getOrdinate=function(t,e){},G.prototype.getCoordinate=function(){},G.prototype.getCoordinateCopy=function(t){},G.prototype.getDimension=function(){},G.prototype.getX=function(t){},G.prototype.clone=function(){},G.prototype.expandEnvelope=function(t){},G.prototype.copy=function(){},G.prototype.getY=function(t){},G.prototype.toCoordinateArray=function(){},G.prototype.interfaces_=function(){return[w]},G.prototype.getClass=function(){return G},Object.defineProperties(G,U);var z=function(){},q=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(z),V=function(){};V.arraycopy=function(t,e,n,r,i){for(var o=0,a=e;a<e+i;a++)n[r+o]=t[a],o++},V.getProperty=function(t){return{"line.separator":"\n"}[t]};var Y=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof S&&arguments[1]instanceof S){var a=arguments[0],s=arguments[1];this.x=a.y-s.y,this.y=s.x-a.x,this.w=a.x*s.y-s.x*a.y}}else if(3===arguments.length){var u=arguments[0],c=arguments[1],l=arguments[2];this.x=u,this.y=c,this.w=l}else if(4===arguments.length){var f=arguments[0],p=arguments[1],h=arguments[2],d=arguments[3],g=f.y-p.y,y=p.x-f.x,m=f.x*p.y-p.x*f.y,v=h.y-d.y,_=d.x-h.x,b=h.x*d.y-d.x*h.y;this.x=y*b-_*m,this.y=v*m-g*b,this.w=g*_-v*y}};Y.prototype.getY=function(){var t=this.y/this.w;if(_.isNaN(t)||_.isInfinite(t))throw new q;return t},Y.prototype.getX=function(){var t=this.x/this.w;if(_.isNaN(t)||_.isInfinite(t))throw new q;return t},Y.prototype.getCoordinate=function(){var t=new S;return t.x=this.getX(),t.y=this.getY(),t},Y.prototype.interfaces_=function(){return[]},Y.prototype.getClass=function(){return Y},Y.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,a=t.x*e.y-e.x*t.y,s=n.y-r.y,u=r.x-n.x,c=n.x*r.y-r.x*n.y,l=i*u-s*o,f=(o*c-u*a)/l,p=(s*a-i*c)/l;if(_.isNaN(f)||_.isInfinite(f)||_.isNaN(p)||_.isInfinite(p))throw new q;return new S(f,p)};var X=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof S){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],u=arguments[3];this.init(o,a,s,u)}},J={serialVersionUID:{configurable:!0}};X.prototype.getArea=function(){return this.getWidth()*this.getHeight()},X.prototype.equals=function(t){if(!(t instanceof X))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},X.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new X;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new X(e,r,n,i)},X.prototype.isNull=function(){return this._maxx<this._minx},X.prototype.getMaxX=function(){return this._maxx},X.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof X){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},X.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof X){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof S){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},X.prototype.getMinY=function(){return this._miny},X.prototype.getMinX=function(){return this._minx},X.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof X){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},X.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},X.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},X.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},X.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},X.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},X.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},X.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},X.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},X.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},X.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof X){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof S){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},X.prototype.centre=function(){return this.isNull()?null:new S((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},X.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof X){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),a<s?(this._miny=a,this._maxy=s):(this._miny=s,this._maxy=a)}},X.prototype.getMaxY=function(){return this._maxy},X.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},X.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+S.hashCode(this._minx))+S.hashCode(this._maxx))+S.hashCode(this._miny))+S.hashCode(this._maxy)},X.prototype.interfaces_=function(){return[x,e]},X.prototype.getClass=function(){return X},X.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=Math.min(o.x,a.x),u=Math.max(o.x,a.x),c=Math.min(r.x,i.x),l=Math.max(r.x,i.x);return!(c>u||l<s||(s=Math.min(o.y,a.y),u=Math.max(o.y,a.y),c=Math.min(r.y,i.y),l=Math.max(r.y,i.y),c>u||l<s))}},J.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(X,J);var W={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},H=function(t){this.geometryFactory=t||new me};H.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=W.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=W.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],K[n]&&(e=K[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},H.prototype.write=function(t){return this.extractGeometry(t)},H.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!$[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+$[e].apply(this,[t])+")"};var $={coordinate:function(t){return t.x+" "+t.y},point:function(t){return $.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+$.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push($.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push($.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+$.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+$.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+$.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+$.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},K={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(W.spaces);return this.geometryFactory.createPoint(new S(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(W.trimParens,"$1"),r.push(K.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(W.spaces),r.push(new S(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(W.spaces),r.push(new S(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(W.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(W.trimParens,"$1"),r.push(K.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,r,i,o=t.trim().split(W.parenComma),a=[],s=0,u=o.length;s<u;++s)e=o[s].replace(W.trimParens,"$1"),n=K.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===s?i=r:a.push(r);return this.geometryFactory.createPolygon(i,a)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(W.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(W.trimParens,"$1"),r.push(K.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},Z=function(t){this.parser=new H(t)};Z.prototype.write=function(t){return this.parser.write(t)},Z.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var Q=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),tt=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Q),et=function(){};et.prototype.interfaces_=function(){return[]},et.prototype.getClass=function(){return et},et.shouldNeverReachHere=function(){if(0===arguments.length)et.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new tt("Should never reach here"+(null!==t?": "+t:""))}},et.isTrue=function(){var t;if(1===arguments.length)et.isTrue(arguments[0],null);else if(2===arguments.length&&(t=arguments[1],!arguments[0]))throw null===t?new tt:new tt(t)},et.equals=function(){var t,e,n;if(2===arguments.length)et.equals(t=arguments[0],e=arguments[1],null);else if(3===arguments.length&&(t=arguments[0],n=arguments[2],!(e=arguments[1]).equals(t)))throw new tt("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var nt=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new S,this._intPt[1]=new S,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},rt={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};nt.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},nt.prototype.getTopologySummary=function(){var t=new L;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},nt.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},nt.prototype.getIntersectionNum=function(){return this._result},nt.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},nt.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},nt.prototype.setPrecisionModel=function(t){this._precisionModel=t},nt.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},nt.prototype.getIntersection=function(t){return this._intPt[t]},nt.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},nt.prototype.hasIntersection=function(){return this._result!==nt.NO_INTERSECTION},nt.prototype.getEdgeDistance=function(t,e){return nt.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},nt.prototype.isCollinear=function(){return this._result===nt.COLLINEAR_INTERSECTION},nt.prototype.toString=function(){return Z.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Z.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},nt.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},nt.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},nt.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},nt.prototype.interfaces_=function(){return[]},nt.prototype.getClass=function(){return nt},nt.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var a=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);0!==(o=r>i?a:s)||t.equals(e)||(o=Math.max(a,s))}return et.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},nt.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return et.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},rt.DONT_INTERSECT.get=function(){return 0},rt.DO_INTERSECT.get=function(){return 1},rt.COLLINEAR.get=function(){return 2},rt.NO_INTERSECTION.get=function(){return 0},rt.POINT_INTERSECTION.get=function(){return 1},rt.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(nt,rt);var it=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new X(this._inputLines[0][0],this._inputLines[0][1]),n=new X(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,X.intersects(n,r,e)&&0===st.orientationIndex(n,r,e)&&0===st.orientationIndex(r,n,e))return this._isProper=!0,(e.equals(n)||e.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,n,r,i){var o=null;try{o=Y.intersection(t,n,r,i)}catch(a){if(!(a instanceof q))throw a;o=e.nearestEndpoint(t,n,r,i)}return o},e.prototype.intersection=function(t,n,r,i){var o=this.intersectionWithNormalization(t,n,r,i);return this.isInSegmentEnvelopes(o)||(o=new S(e.nearestEndpoint(t,n,r,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},e.prototype.checkDD=function(t,e,n,r,i){var o=j.intersection(t,e,n,r),a=this.isInSegmentEnvelopes(o);V.out.println("DD in env = "+a+"  --------------------- "+o),i.distance(o)>1e-4&&V.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new S(t),o=new S(e),a=new S(n),s=new S(r),u=new S;this.normalizeToEnvCentre(i,o,a,s,u);var c=this.safeHCoordinateIntersection(i,o,a,s);return c.x+=u.x,c.y+=u.y,c},e.prototype.computeCollinearIntersection=function(e,n,r,i){var o=X.intersects(e,n,r),a=X.intersects(e,n,i),s=X.intersects(r,i,e),u=X.intersects(r,i,n);return o&&a?(this._intPt[0]=r,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):s&&u?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&s?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||a||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&u?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||a||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&s?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&u?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||o||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,a=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,c=n.x<r.x?n.x:r.x,l=n.y<r.y?n.y:r.y,f=n.x>r.x?n.x:r.x,p=n.y>r.y?n.y:r.y,h=((o>c?o:c)+(s<f?s:f))/2,d=((a>l?a:l)+(u<p?u:p))/2;i.x=h,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.computeIntersect=function(e,n,r,i){if(this._isProper=!1,!X.intersects(e,n,r,i))return t.NO_INTERSECTION;var o=st.orientationIndex(e,n,r),a=st.orientationIndex(e,n,i);if(o>0&&a>0||o<0&&a<0)return t.NO_INTERSECTION;var s=st.orientationIndex(r,i,e),u=st.orientationIndex(r,i,n);return s>0&&u>0||s<0&&u<0?t.NO_INTERSECTION:0===o&&0===a&&0===s&&0===u?this.computeCollinearIntersection(e,n,r,i):(0===o||0===a||0===s||0===u?(this._isProper=!1,e.equals2D(r)||e.equals2D(i)?this._intPt[0]=e:n.equals2D(r)||n.equals2D(i)?this._intPt[0]=n:0===o?this._intPt[0]=new S(r):0===a?this._intPt[0]=new S(i):0===s?this._intPt[0]=new S(e):0===u&&(this._intPt[0]=new S(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,r,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,r){var i=t,o=st.distancePointLine(t,n,r),a=st.distancePointLine(e,n,r);return a<o&&(o=a,i=e),(a=st.distancePointLine(n,t,e))<o&&(o=a,i=n),(a=st.distancePointLine(r,t,e))<o&&(o=a,i=r),i},e}(nt),ot=function(){};ot.prototype.interfaces_=function(){return[]},ot.prototype.getClass=function(){return ot},ot.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,a=n.y-e.y;return ot.signOfDet2x2(r,i,o,a)},ot.signOfDet2x2=function(t,e,n,r){var i=null,o=null,a=null;if(i=1,0===t||0===r)return 0===e||0===n?0:e>0?n>0?-i:i:n>0?i:-i;if(0===e||0===n)return r>0?t>0?i:-i:t>0?-i:i;if(e>0?r>0?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0){if(!(n>0))return i;if(!(t<=n))return i}else{if(n>0)return-i;if(!(t>=n))return-i;i=-i,t=-t,n=-n}for(;;){if((r-=(a=Math.floor(n/t))*e)<0)return-i;if(r>e)return i;if(t>(n-=a*t)+n){if(e<r+r)return i}else{if(e>r+r)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if((e-=(a=Math.floor(t/n))*r)<0)return i;if(e>r)return-i;if(n>(t-=a*n)+t){if(r<e+e)return-i}else{if(r>e+e)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var at=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};at.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,a=e.x-this._p.x,s=e.y-this._p.y,u=ot.signOfDet2x2(i,o,a,s);if(0===u)return this._isPointOnSegment=!0,null;s<o&&(u=-u),u>0&&this._crossingCount++}},at.prototype.isPointInPolygon=function(){return this.getLocation()!==A.EXTERIOR},at.prototype.getLocation=function(){return this._isPointOnSegment?A.BOUNDARY:this._crossingCount%2==1?A.INTERIOR:A.EXTERIOR},at.prototype.isOnSegment=function(){return this._isPointOnSegment},at.prototype.interfaces_=function(){return[]},at.prototype.getClass=function(){return at},at.locatePointInRing=function(){if(arguments[0]instanceof S&&P(arguments[1],G)){for(var t=arguments[0],e=arguments[1],n=new at(t),r=new S,i=new S,o=1;o<e.size();o++)if(e.getCoordinate(o,r),e.getCoordinate(o-1,i),n.countSegment(r,i),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof S&&arguments[1]instanceof Array){for(var a=arguments[0],s=arguments[1],u=new at(a),c=1;c<s.length;c++){var l=s[c],f=s[c-1];if(u.countSegment(l,f),u.isOnSegment())return u.getLocation()}return u.getLocation()}};var st=function(){},ut={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};st.prototype.interfaces_=function(){return[]},st.prototype.getClass=function(){return st},st.orientationIndex=function(t,e,n){return j.orientationIndex(t,e,n)},st.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y;e+=i*(t[r-1].y-o)}return e/2}if(P(arguments[0],G)){var a=arguments[0],s=a.size();if(s<3)return 0;var u=new S,c=new S,l=new S;a.getCoordinate(0,c),a.getCoordinate(1,l);var f=c.x;l.x-=f;for(var p=0,h=1;h<s-1;h++)u.y=c.y,c.x=l.x,c.y=l.y,a.getCoordinate(h+1,l),l.x-=f,p+=c.x*(u.y-l.y);return p/2}},st.distanceLineLine=function(t,e,n,r){if(t.equals(e))return st.distancePointLine(t,n,r);if(n.equals(r))return st.distancePointLine(r,t,e);var i=!1;if(X.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var a=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),s=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,u=a/o;(u<0||u>1||s<0||s>1)&&(i=!0)}}else i=!0;return i?T.min(st.distancePointLine(t,n,r),st.distancePointLine(e,n,r),st.distancePointLine(n,t,e),st.distancePointLine(r,t,e)):0},st.isPointInRing=function(t,e){return st.locatePointInRing(t,e)!==A.EXTERIOR},st.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new S;t.getCoordinate(0,r);for(var i=r.x,o=r.y,a=1;a<e;a++){t.getCoordinate(a,r);var s=r.x,u=r.y,c=s-i,l=u-o;n+=Math.sqrt(c*c+l*l),i=s,o=u}return n},st.isCCW=function(t){var e=t.length-1;if(e<3)throw new v("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}var a=r;do{(a-=1)<0&&(a=e)}while(t[a].equals2D(n)&&a!==r);var s=r;do{s=(s+1)%e}while(t[s].equals2D(n)&&s!==r);var u=t[a],c=t[s];if(u.equals2D(n)||c.equals2D(n)||u.equals2D(c))return!1;var l=st.computeOrientation(u,n,c);return 0===l?u.x>c.x:l>0},st.locatePointInRing=function(t,e){return at.locatePointInRing(t,e)},st.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},st.computeOrientation=function(t,e,n){return st.orientationIndex(t,e,n)},st.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new v("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=st.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];if(a.x===s.x&&a.y===s.y)return o.distance(a);var u=(s.x-a.x)*(s.x-a.x)+(s.y-a.y)*(s.y-a.y),c=((o.x-a.x)*(s.x-a.x)+(o.y-a.y)*(s.y-a.y))/u;if(c<=0)return o.distance(a);if(c>=1)return o.distance(s);var l=((a.y-o.y)*(s.x-a.x)-(a.x-o.x)*(s.y-a.y))/u;return Math.abs(l)*Math.sqrt(u)}},st.isOnLine=function(t,e){for(var n=new it,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},ut.CLOCKWISE.get=function(){return-1},ut.RIGHT.get=function(){return st.CLOCKWISE},ut.COUNTERCLOCKWISE.get=function(){return 1},ut.LEFT.get=function(){return st.COUNTERCLOCKWISE},ut.COLLINEAR.get=function(){return 0},ut.STRAIGHT.get=function(){return st.COLLINEAR},Object.defineProperties(st,ut);var ct=function(){};ct.prototype.filter=function(t){},ct.prototype.interfaces_=function(){return[]},ct.prototype.getClass=function(){return ct};var lt=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},ft={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};lt.prototype.isGeometryCollection=function(){return this.getSortIndex()===lt.SORTINDEX_GEOMETRYCOLLECTION},lt.prototype.getFactory=function(){return this._factory},lt.prototype.getGeometryN=function(t){return this},lt.prototype.getArea=function(){return 0},lt.prototype.isRectangle=function(){return!1},lt.prototype.equals=function(){if(arguments[0]instanceof lt){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof lt))return!1;var n=e;return this.equalsExact(n)}},lt.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},lt.prototype.geometryChanged=function(){this.apply(lt.geometryChangedFilter)},lt.prototype.geometryChangedAction=function(){this._envelope=null},lt.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},lt.prototype.getLength=function(){return 0},lt.prototype.getNumGeometries=function(){return 1},lt.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},lt.prototype.getUserData=function(){return this._userData},lt.prototype.getSRID=function(){return this._SRID},lt.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},lt.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===lt.SORTINDEX_GEOMETRYCOLLECTION)throw new v("This method does not support GeometryCollection arguments")},lt.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},lt.prototype.norm=function(){var t=this.copy();return t.normalize(),t},lt.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},lt.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new X(this._envelope)},lt.prototype.setSRID=function(t){this._SRID=t},lt.prototype.setUserData=function(t){this._userData=t},lt.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),a=i.compareTo(o);if(0!==a)return a}return n.hasNext()?1:r.hasNext()?-1:0},lt.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},lt.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===lt.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===lt.SORTINDEX_MULTIPOINT||this.getSortIndex()===lt.SORTINDEX_MULTILINESTRING||this.getSortIndex()===lt.SORTINDEX_MULTIPOLYGON},lt.prototype.interfaces_=function(){return[w,x,e]},lt.prototype.getClass=function(){return lt},lt.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},lt.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},ft.serialVersionUID.get=function(){return 0x799ea46522854c00},ft.SORTINDEX_POINT.get=function(){return 0},ft.SORTINDEX_MULTIPOINT.get=function(){return 1},ft.SORTINDEX_LINESTRING.get=function(){return 2},ft.SORTINDEX_LINEARRING.get=function(){return 3},ft.SORTINDEX_MULTILINESTRING.get=function(){return 4},ft.SORTINDEX_POLYGON.get=function(){return 5},ft.SORTINDEX_MULTIPOLYGON.get=function(){return 6},ft.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},ft.geometryChangedFilter.get=function(){return pt},Object.defineProperties(lt,ft);var pt=function(){};pt.interfaces_=function(){return[ct]},pt.filter=function(t){t.geometryChangedAction()};var ht=function(){};ht.prototype.filter=function(t){},ht.prototype.interfaces_=function(){return[]},ht.prototype.getClass=function(){return ht};var dt=function(){},gt={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};dt.prototype.isInBoundary=function(t){},dt.prototype.interfaces_=function(){return[]},dt.prototype.getClass=function(){return dt},gt.Mod2BoundaryNodeRule.get=function(){return yt},gt.EndPointBoundaryNodeRule.get=function(){return mt},gt.MultiValentEndPointBoundaryNodeRule.get=function(){return vt},gt.MonoValentEndPointBoundaryNodeRule.get=function(){return _t},gt.MOD2_BOUNDARY_RULE.get=function(){return new yt},gt.ENDPOINT_BOUNDARY_RULE.get=function(){return new mt},gt.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new vt},gt.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new _t},gt.OGC_SFS_BOUNDARY_RULE.get=function(){return dt.MOD2_BOUNDARY_RULE},Object.defineProperties(dt,gt);var yt=function(){};yt.prototype.isInBoundary=function(t){return t%2==1},yt.prototype.interfaces_=function(){return[dt]},yt.prototype.getClass=function(){return yt};var mt=function(){};mt.prototype.isInBoundary=function(t){return t>0},mt.prototype.interfaces_=function(){return[dt]},mt.prototype.getClass=function(){return mt};var vt=function(){};vt.prototype.isInBoundary=function(t){return t>1},vt.prototype.interfaces_=function(){return[dt]},vt.prototype.getClass=function(){return vt};var _t=function(){};_t.prototype.isInBoundary=function(t){return 1===t},_t.prototype.interfaces_=function(){return[dt]},_t.prototype.getClass=function(){return _t};var bt=function(){};bt.prototype.add=function(){},bt.prototype.addAll=function(){},bt.prototype.isEmpty=function(){},bt.prototype.iterator=function(){},bt.prototype.size=function(){},bt.prototype.toArray=function(){},bt.prototype.remove=function(){},(n.prototype=new Error).name="IndexOutOfBoundsException";var xt=function(){};xt.prototype.hasNext=function(){},xt.prototype.next=function(){},xt.prototype.remove=function(){};var wt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(bt);(r.prototype=new Error).name="NoSuchElementException";var Et=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,bt]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new St(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new n;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(wt),St=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new r;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(xt),It=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=!1,i=e.iterator();i.hasNext();)this.add(i.next(),n),r=!0;return r}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0];t.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],r=arguments[1];return this.add(n,r,!0),!0}if(arguments[0]instanceof S&&"boolean"==typeof arguments[1]){var i=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(i))return null;t.prototype.add.call(this,i)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1];return this.add(o,a),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var s=arguments[0],u=arguments[1];if(arguments[2])for(var c=0;c<s.length;c++)this.add(s[c],u);else for(var l=s.length-1;l>=0;l--)this.add(s[l],u);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof S){var f=arguments[0],p=arguments[1];if(!arguments[2]){var h=this.size();if(h>0){if(f>0&&this.get(f-1).equals2D(p))return null;if(f<h&&this.get(f).equals2D(p))return null}}t.prototype.add.call(this,f,p)}}else if(4===arguments.length){var d=arguments[0],g=arguments[1],y=arguments[2],m=arguments[3],v=1;y>m&&(v=-1);for(var _=y;_!==m;_+=v)this.add(d[_],g);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new S(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(Et),Ct=function(){},Nt={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Nt.ForwardComparator.get=function(){return At},Nt.BidirectionalComparator.get=function(){return Ot},Nt.coordArrayType.get=function(){return new Array(0).fill(null)},Ct.prototype.interfaces_=function(){return[]},Ct.prototype.getClass=function(){return Ct},Ct.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},Ct.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(Ct.indexOf(r,e)<0)return r}return null},Ct.scroll=function(t,e){var n=Ct.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);V.arraycopy(t,n,r,0,t.length-n),V.arraycopy(t,0,r,t.length-n,n),V.arraycopy(r,0,t,0,t.length)},Ct.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(0!==o.compare(r[a],i[a]))return!1;return!0}},Ct.intersection=function(t,e){for(var n=new It,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},Ct.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Ct.removeRepeatedPoints=function(t){return Ct.hasRepeatedPoints(t)?new It(t,!1).toCoordinateArray():t},Ct.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},Ct.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},Ct.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new S(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],u=0;u<s;u++)o[a+u]=new S(r[i+u])},Ct.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},Ct.envelope=function(t){for(var e=new X,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},Ct.toCoordinateArray=function(t){return t.toArray(Ct.coordArrayType)},Ct.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Ct.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},Ct.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},Ct.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},Ct.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},Ct.extract=function(t,e,n){e=T.clamp(e,0,t.length);var r=(n=T.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,a=e;a<=n;a++)i[o++]=t[a];return i},Object.defineProperties(Ct,Nt);var At=function(){};At.prototype.compare=function(t,e){return Ct.compare(t,e)},At.prototype.interfaces_=function(){return[E]},At.prototype.getClass=function(){return At};var Ot=function(){};Ot.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=Ct.compare(n,r);return Ct.isEqualReversed(n,r)?0:i},Ot.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=Ct.increasingDirection(n),o=Ct.increasingDirection(r),a=i>0?0:n.length-1,s=o>0?0:n.length-1,u=0;u<n.length;u++){var c=n[a].compareTo(r[s]);if(0!==c)return c;a+=i,s+=o}return 0},Ot.prototype.interfaces_=function(){return[E]},Ot.prototype.getClass=function(){return Ot};var Pt=function(){};Pt.prototype.get=function(){},Pt.prototype.put=function(){},Pt.prototype.size=function(){},Pt.prototype.values=function(){},Pt.prototype.entrySet=function(){};var Tt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pt);(i.prototype=new Error).name="OperationNotSupported",(o.prototype=new bt).contains=function(){};var Mt=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new Lt(this)},e}(o),Lt=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new r;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new i},e}(xt),Rt=0;(f.prototype=new Tt).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},f.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:Rt,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var a={key:t,left:null,right:null,value:e,parent:n,color:Rt,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null},f.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(s(t)===c(s(s(t)))){var e=l(s(s(t)));1===a(e)?(u(s(t),Rt),u(e,Rt),u(s(s(t)),1),t=s(s(t))):(t===l(s(t))&&(t=s(t),this.rotateLeft(t)),u(s(t),Rt),u(s(s(t)),1),this.rotateRight(s(s(t))))}else{var n=c(s(s(t)));1===a(n)?(u(s(t),Rt),u(n,Rt),u(s(s(t)),1),t=s(s(t))):(t===c(s(t))&&(t=s(t),this.rotateRight(t)),u(s(t),Rt),u(s(s(t)),1),this.rotateLeft(s(s(t))))}this.root_.color=Rt},f.prototype.values=function(){var t=new Et,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=f.successor(e));)t.add(e.value);return t},f.prototype.entrySet=function(){var t=new Mt,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=f.successor(e));)t.add(e);return t},f.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},f.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},f.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},f.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)r=n,n=n.parent;return n},f.prototype.size=function(){return this.size_};var Dt=function(){};Dt.prototype.interfaces_=function(){return[]},Dt.prototype.getClass=function(){return Dt},p.prototype=new o,(h.prototype=new p).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},h.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},h.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},h.prototype.remove=function(t){throw new i},h.prototype.size=function(){return this.array_.length},h.prototype.isEmpty=function(){return 0===this.array_.length},h.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},h.prototype.iterator=function(){return new Ft(this)};var Ft=function(t){this.treeSet_=t,this.position_=0};Ft.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new r;return this.treeSet_.array_[this.position_++]},Ft.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Ft.prototype.remove=function(){throw new i};var kt=function(){};kt.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},kt.asList=function(t){for(var e=new Et,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var jt=function(){},Bt={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Bt.P.get=function(){return 0},Bt.L.get=function(){return 1},Bt.A.get=function(){return 2},Bt.FALSE.get=function(){return-1},Bt.TRUE.get=function(){return-2},Bt.DONTCARE.get=function(){return-3},Bt.SYM_FALSE.get=function(){return"F"},Bt.SYM_TRUE.get=function(){return"T"},Bt.SYM_DONTCARE.get=function(){return"*"},Bt.SYM_P.get=function(){return"0"},Bt.SYM_L.get=function(){return"1"},Bt.SYM_A.get=function(){return"2"},jt.prototype.interfaces_=function(){return[]},jt.prototype.getClass=function(){return jt},jt.toDimensionSymbol=function(t){switch(t){case jt.FALSE:return jt.SYM_FALSE;case jt.TRUE:return jt.SYM_TRUE;case jt.DONTCARE:return jt.SYM_DONTCARE;case jt.P:return jt.SYM_P;case jt.L:return jt.SYM_L;case jt.A:return jt.SYM_A}throw new v("Unknown dimension value: "+t)},jt.toDimensionValue=function(t){switch(D.toUpperCase(t)){case jt.SYM_FALSE:return jt.FALSE;case jt.SYM_TRUE:return jt.TRUE;case jt.SYM_DONTCARE:return jt.DONTCARE;case jt.SYM_P:return jt.P;case jt.SYM_L:return jt.L;case jt.SYM_A:return jt.A}throw new v("Unknown dimension symbol: "+t)},Object.defineProperties(jt,Bt);var Gt=function(){};Gt.prototype.filter=function(t){},Gt.prototype.interfaces_=function(){return[]},Gt.prototype.getClass=function(){return Gt};var Ut=function(){};Ut.prototype.filter=function(t,e){},Ut.prototype.isDone=function(){},Ut.prototype.isGeometryChanged=function(){},Ut.prototype.interfaces_=function(){return[]},Ut.prototype.getClass=function(){return Ut};var zt=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new v("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new X,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._geometries.length!==r._geometries.length)return!1;for(var i=0;i<this._geometries.length;i++)if(!this._geometries[i].equalsExact(r._geometries[i],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();kt.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=jt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=jt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new h(kt.asList(this._geometries)),n=new h(kt.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o=r,a=this.getNumGeometries(),s=o.getNumGeometries(),u=0;u<a&&u<s;){var c=this.getGeometryN(u),l=o.getGeometryN(u),f=c.compareToSameClass(l,i);if(0!==f)return f;u++}return u<a?1:u<s?-1:0}},e.prototype.apply=function(){if(P(arguments[0],ht))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(P(arguments[0],Ut)){var n=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(this._geometries[r].apply(n),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(P(arguments[0],Gt)){var i=arguments[0];i.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(i)}else if(P(arguments[0],ct)){var a=arguments[0];a.filter(this);for(var s=0;s<this._geometries.length;s++)this._geometries[s].apply(a)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),et.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(lt),qt=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return lt.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?jt.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new Vt(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Dt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(zt),Vt=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=dt.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};Vt.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},Vt.prototype.getBoundary=function(){return this._geom instanceof Ht?this.boundaryLineString(this._geom):this._geom instanceof qt?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Vt.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},Vt.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Vt.prototype.computeBoundaryCoordinates=function(t){var e=new Et;this._endpointMap=new f;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),a=o.getValue().count;this._bnRule.isInBoundary(a)&&e.add(o.getKey())}return Ct.toCoordinateArray(e)},Vt.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Yt,this._endpointMap.put(t,e)),e.count++},Vt.prototype.interfaces_=function(){return[]},Vt.prototype.getClass=function(){return Vt},Vt.getBoundary=function(){if(1===arguments.length){var t=arguments[0];return new Vt(t).getBoundary()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return new Vt(e,n).getBoundary()}};var Yt=function(){this.count=null};Yt.prototype.interfaces_=function(){return[]},Yt.prototype.getClass=function(){return Yt};var Xt=function(){},Jt={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Xt.prototype.interfaces_=function(){return[]},Xt.prototype.getClass=function(){return Xt},Xt.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},Xt.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o="",a=new function(){}(new function(){}(Xt.getStackTrace(r))),s=0;s<i;s++)try{o+=a.readLine()+Xt.NEWLINE}catch(t){if(!(t instanceof d))throw t;et.shouldNeverReachHere()}return o}},Xt.split=function(t,e){for(var n=e.length,r=new Et,i=""+t,o=i.indexOf(e);o>=0;){var a=i.substring(0,o);r.add(a),o=(i=i.substring(o+n)).indexOf(e)}i.length>0&&r.add(i);for(var s=new Array(r.size()).fill(null),u=0;u<s.length;u++)s[u]=r.get(u);return s},Xt.toString=function(){if(1===arguments.length){var t=arguments[0];return Xt.SIMPLE_ORDINATE_FORMAT.format(t)}},Xt.spaces=function(t){return Xt.chars(" ",t)},Jt.NEWLINE.get=function(){return V.getProperty("line.separator")},Jt.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(Xt,Jt);var Wt=function(){};Wt.prototype.interfaces_=function(){return[]},Wt.prototype.getClass=function(){return Wt},Wt.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},Wt.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,G.X)===t.getOrdinate(e-1,G.X)&&t.getOrdinate(0,G.Y)===t.getOrdinate(e-1,G.Y)},Wt.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var a=t.getOrdinate(i,o),s=e.getOrdinate(i,o);if(!(t.getOrdinate(i,o)===e.getOrdinate(i,o)||_.isNaN(a)&&_.isNaN(s)))return!1}return!0},Wt.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(Wt.copy(e,0,r,0,i),i>0)for(var o=i;o<n;o++)Wt.copy(e,i-1,r,o,1);return r},Wt.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)Wt.swap(t,r,e-r)},Wt.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},Wt.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)Wt.copyCoord(t,e+o,n,r+o)},Wt.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new L;r.append("(");for(var i=0;i<e;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(Xt.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},Wt.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?Wt.createClosedRing(t,e,4):e.getOrdinate(0,G.X)===e.getOrdinate(n-1,G.X)&&e.getOrdinate(0,G.Y)===e.getOrdinate(n-1,G.Y)?e:Wt.createClosedRing(t,e,n+1)},Wt.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();Wt.copy(e,0,r,0,i);for(var o=i;o<n;o++)Wt.copy(e,0,r,o,1);return r};var Ht=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new X:this._points.expandEnvelope(new X)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._points.size()!==r._points.size())return!1;for(var i=0;i<this._points.size();i++)if(!this.equal(this._points.getCoordinate(i),r._points.getCoordinate(i),n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&Wt.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?jt.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return st.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Wt.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var r=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==r)return r;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var i=arguments[0];return arguments[1].compare(this._points,i._points)}},e.prototype.apply=function(){if(P(arguments[0],ht))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(P(arguments[0],Ut)){var n=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(n.filter(this._points,r),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else(P(arguments[0],Gt)||P(arguments[0],ct))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new Vt(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new v("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Dt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(lt),$t=function(){};$t.prototype.interfaces_=function(){return[]},$t.prototype.getClass=function(){return $t};var Kt=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new X;var t=new X;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return jt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(P(arguments[0],ht)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(P(arguments[0],Ut)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(P(arguments[0],Gt)||P(arguments[0],ct))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),et.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[$t]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(lt),Zt=function(){};Zt.prototype.interfaces_=function(){return[]},Zt.prototype.getClass=function(){return Zt};var Qt=function(t){function e(e,n,r){if(t.call(this,r),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new v("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new v("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),a=0;a<o.length;a++)t[++e]=o[a];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(st.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(st.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),a=t.getY(0),s=1;s<=4;s++){var u=t.getX(s),c=t.getY(s);if(u!==o==(c!==a))return!1;o=u,a=c}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e,i=this._shell,o=r._shell;if(!i.equalsExact(o,n))return!1;if(this._holes.length!==r._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!this._holes[a].equalsExact(r._holes[a],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);kt.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var r=new Array(e.getCoordinates().length-1).fill(null);V.arraycopy(e.getCoordinates(),0,r,0,r.length);var i=Ct.minCoordinate(e.getCoordinates());Ct.scroll(r,i),V.arraycopy(r,0,e.getCoordinates(),0,r.length),e.getCoordinates()[r.length]=r[0],st.isCCW(e.getCoordinates())===n&&Ct.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var r=arguments[0],i=arguments[1],o=r,a=this._shell,s=o._shell,u=a.compareToSameClass(s,i);if(0!==u)return u;for(var c=this.getNumInteriorRing(),l=o.getNumInteriorRing(),f=0;f<c&&f<l;){var p=this.getInteriorRingN(f),h=o.getInteriorRingN(f),d=p.compareToSameClass(h,i);if(0!==d)return d;f++}return f<c?1:f<l?-1:0}},e.prototype.apply=function(t){if(P(t,ht)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(P(t,Ut)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(P(t,Gt))t.filter(this);else if(P(t,ct)){t.filter(this),this._shell.apply(t);for(var r=0;r<this._holes.length;r++)this._holes[r].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<n.length;r++)n[r]=this._holes[r].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Zt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(lt),te=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return lt.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return jt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[$t]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(zt),ee=function(t){function e(e,n){e instanceof S&&n instanceof me&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return lt.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return jt.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Wt.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new v("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new v("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(Ht),ne=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return lt.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new Et,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Zt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(zt),re=function(t){this._factory=t||null,this._isUserDataCopied=!1},ie={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};re.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},re.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},re.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof zt?this.editGeometryCollection(t,e):t instanceof Qt?this.editPolygon(t,e):t instanceof Kt||t instanceof Ht?e.edit(t,this._factory):(et.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},re.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new Et,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===te?this._factory.createMultiPoint(r.toArray([])):n.getClass()===qt?this._factory.createMultiLineString(r.toArray([])):n.getClass()===ne?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},re.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new Et,o=0;o<n.getNumInteriorRing();o++){var a=this.edit(n.getInteriorRingN(o),e);null===a||a.isEmpty()||i.add(a)}return this._factory.createPolygon(r,i.toArray([]))},re.prototype.interfaces_=function(){return[]},re.prototype.getClass=function(){return re},re.GeometryEditorOperation=function(){},ie.NoOpGeometryOperation.get=function(){return oe},ie.CoordinateOperation.get=function(){return ae},ie.CoordinateSequenceOperation.get=function(){return se},Object.defineProperties(re,ie);var oe=function(){};oe.prototype.edit=function(t,e){return t},oe.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},oe.prototype.getClass=function(){return oe};var ae=function(){};ae.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof ee?e.createLinearRing(n):t instanceof Ht?e.createLineString(n):t instanceof Kt?n.length>0?e.createPoint(n[0]):e.createPoint():t},ae.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},ae.prototype.getClass=function(){return ae};var se=function(){};se.prototype.edit=function(t,e){return t instanceof ee?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Ht?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Kt?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},se.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},se.prototype.getClass=function(){return se};var ue=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new S}else if(P(arguments[0],G)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var r=0;r<this._coordinates.length;r++)this._coordinates[r]=n.getCoordinateCopy(r)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1];this._coordinates=i,this._dimension=o,null===i&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],s=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=s;for(var u=0;u<a;u++)this._coordinates[u]=new S}},ce={serialVersionUID:{configurable:!0}};ue.prototype.setOrdinate=function(t,e,n){switch(e){case G.X:this._coordinates[t].x=n;break;case G.Y:this._coordinates[t].y=n;break;case G.Z:this._coordinates[t].z=n;break;default:throw new v("invalid ordinateIndex")}},ue.prototype.size=function(){return this._coordinates.length},ue.prototype.getOrdinate=function(t,e){switch(e){case G.X:return this._coordinates[t].x;case G.Y:return this._coordinates[t].y;case G.Z:return this._coordinates[t].z}return _.NaN},ue.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},ue.prototype.getCoordinateCopy=function(t){return new S(this._coordinates[t])},ue.prototype.getDimension=function(){return this._dimension},ue.prototype.getX=function(t){return this._coordinates[t].x},ue.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new ue(t,this._dimension)},ue.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},ue.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new ue(t,this._dimension)},ue.prototype.toString=function(){if(this._coordinates.length>0){var t=new L(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},ue.prototype.getY=function(t){return this._coordinates[t].y},ue.prototype.toCoordinateArray=function(){return this._coordinates},ue.prototype.interfaces_=function(){return[G,e]},ue.prototype.getClass=function(){return ue},ce.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(ue,ce);var le=function(){},fe={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};le.prototype.readResolve=function(){return le.instance()},le.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new ue(t)}if(P(arguments[0],G)){var e=arguments[0];return new ue(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return r>3&&(r=3),r<2?new ue(n):new ue(n,r)}},le.prototype.interfaces_=function(){return[N,e]},le.prototype.getClass=function(){return le},le.instance=function(){return le.instanceObject},fe.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},fe.instanceObject.get=function(){return new le},Object.defineProperties(le,fe);var pe=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new Et,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new Mt;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(Pt),he=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof ge){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},de={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};he.prototype.equals=function(t){if(!(t instanceof he))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},he.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new R(n).compareTo(new R(r))},he.prototype.getScale=function(){return this._scale},he.prototype.isFloating=function(){return this._modelType===he.FLOATING||this._modelType===he.FLOATING_SINGLE},he.prototype.getType=function(){return this._modelType},he.prototype.toString=function(){var t="UNKNOWN";return this._modelType===he.FLOATING?t="Floating":this._modelType===he.FLOATING_SINGLE?t="Floating-Single":this._modelType===he.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},he.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return _.isNaN(t)||this._modelType===he.FLOATING_SINGLE?t:this._modelType===he.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof S){var e=arguments[0];if(this._modelType===he.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},he.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===he.FLOATING?t=16:this._modelType===he.FLOATING_SINGLE?t=6:this._modelType===he.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},he.prototype.setScale=function(t){this._scale=Math.abs(t)},he.prototype.interfaces_=function(){return[e,x]},he.prototype.getClass=function(){return he},he.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},de.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},de.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(he,de);var ge=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},ye={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};ge.prototype.readResolve=function(){return ge.nameToTypeMap.get(this._name)},ge.prototype.toString=function(){return this._name},ge.prototype.interfaces_=function(){return[e]},ge.prototype.getClass=function(){return ge},ye.serialVersionUID.get=function(){return-552860263173159e4},ye.nameToTypeMap.get=function(){return new pe},Object.defineProperties(ge,ye),he.Type=ge,he.FIXED=new ge("FIXED"),he.FLOATING=new ge("FLOATING"),he.FLOATING_SINGLE=new ge("FLOATING SINGLE");var me=function t(){this._precisionModel=new he,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?P(arguments[0],N)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof he&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},ve={serialVersionUID:{configurable:!0}};me.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new S(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new S(t.getMinX(),t.getMinY()),new S(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new S(t.getMinX(),t.getMinY()),new S(t.getMinX(),t.getMaxY()),new S(t.getMaxX(),t.getMaxY()),new S(t.getMaxX(),t.getMinY()),new S(t.getMinX(),t.getMinY())]),null)},me.prototype.createLineString=function(t){return t?t instanceof Array?new Ht(this.getCoordinateSequenceFactory().create(t),this):P(t,G)?new Ht(t,this):void 0:new Ht(this.getCoordinateSequenceFactory().create([]),this)},me.prototype.createMultiLineString=function(){if(0===arguments.length)return new qt(null,this);if(1===arguments.length){var t=arguments[0];return new qt(t,this)}},me.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),a=o.getClass();null===e&&(e=a),a!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(me.toGeometryArray(t));var s=t.iterator().next();if(t.size()>1){if(s instanceof Qt)return this.createMultiPolygon(me.toPolygonArray(t));if(s instanceof Ht)return this.createMultiLineString(me.toLineStringArray(t));if(s instanceof Kt)return this.createMultiPoint(me.toPointArray(t));et.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s},me.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},me.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(P(arguments[0],G)){var e=arguments[0];return new Kt(e,this)}}},me.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},me.prototype.createPolygon=function(){if(0===arguments.length)return new Qt(null,null,this);if(1===arguments.length){if(P(arguments[0],G)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof ee){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];return new Qt(r,i,this)}},me.prototype.getSRID=function(){return this._SRID},me.prototype.createGeometryCollection=function(){if(0===arguments.length)return new zt(null,this);if(1===arguments.length){var t=arguments[0];return new zt(t,this)}},me.prototype.createGeometry=function(t){return new re(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},me.prototype.getPrecisionModel=function(){return this._precisionModel},me.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(P(arguments[0],G)){var e=arguments[0];return new ee(e,this)}}},me.prototype.createMultiPolygon=function(){if(0===arguments.length)return new ne(null,this);if(1===arguments.length){var t=arguments[0];return new ne(t,this)}},me.prototype.createMultiPoint=function(){if(0===arguments.length)return new te(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new te(t,this)}if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(P(arguments[0],G)){var n=arguments[0];if(null===n)return this.createMultiPoint(new Array(0).fill(null));for(var r=new Array(n.size()).fill(null),i=0;i<n.size();i++){var o=this.getCoordinateSequenceFactory().create(1,n.getDimension());Wt.copy(n,i,o,0,1),r[i]=this.createPoint(o)}return this.createMultiPoint(r)}}},me.prototype.interfaces_=function(){return[e]},me.prototype.getClass=function(){return me},me.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},me.getDefaultCoordinateSequenceFactory=function(){return le.instance()},me.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},ve.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(me,ve);var _e=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],be=function(t){this.geometryFactory=t||new me};be.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!xe[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==_e.indexOf(n)?xe[n].apply(this,[e.coordinates]):"GeometryCollection"===n?xe[n].apply(this,[e.geometries]):xe[n].apply(this,[e])},be.prototype.write=function(t){var e=t.getGeometryType();if(!we[e])throw new Error("Geometry is not supported");return we[e].apply(this,[t])};var xe={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!xe[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=xe.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new S(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new S(t[0],t[1]),new S(t[2],t[1]),new S(t[2],t[3]),new S(t[0],t[3]),new S(t[0],t[1])])},Point:function(t){var e=new S(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(xe.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=xe.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(xe.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=xe.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],a=xe.coordinates.apply(this,[o]),s=this.geometryFactory.createLinearRing(a);r.push(s)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(xe.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},we={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:we.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=we.Point.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(we.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=we.LineString.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=we.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=we.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=we.Polygon.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(we[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},Ee=function(t){this.geometryFactory=t||new me,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new be(this.geometryFactory)};Ee.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===he.FIXED&&this.reducePrecision(e),e},Ee.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var Se=function(){this.parser=new be(this.geometryFactory)};Se.prototype.write=function(t){return this.parser.write(t)};var Ie=function(){},Ce={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Ie.prototype.interfaces_=function(){return[]},Ie.prototype.getClass=function(){return Ie},Ie.opposite=function(t){return t===Ie.LEFT?Ie.RIGHT:t===Ie.RIGHT?Ie.LEFT:t},Ce.ON.get=function(){return 0},Ce.LEFT.get=function(){return 1},Ce.RIGHT.get=function(){return 2},Object.defineProperties(Ie,Ce),(g.prototype=new Error).name="EmptyStackException",(y.prototype=new wt).add=function(t){return this.array_.push(t),!0},y.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},y.prototype.push=function(t){return this.array_.push(t),t},y.prototype.pop=function(t){if(0===this.array_.length)throw new g;return this.array_.pop()},y.prototype.peek=function(){if(0===this.array_.length)throw new g;return this.array_[this.array_.length-1]},y.prototype.empty=function(){return 0===this.array_.length},y.prototype.isEmpty=function(){return this.empty()},y.prototype.search=function(t){return this.array_.indexOf(t)},y.prototype.size=function(){return this.array_.length},y.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Ne=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Ne.prototype.getCoordinate=function(){return this._minCoord},Ne.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Ne.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();et.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=st.computeOrientation(this._minCoord,n,e),i=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===st.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===st.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)},Ne.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=Ie.LEFT;return n[e].y<n[e+1].y&&(r=Ie.RIGHT),r},Ne.prototype.getEdge=function(){return this._orientedDe},Ne.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},Ne.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Ne.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}et.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Ie.LEFT&&(this._orientedDe=this._minDe.getSym())},Ne.prototype.interfaces_=function(){return[]},Ne.prototype.getClass=function(){return Ne};var Ae=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new S(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(Q),Oe=function(){this.array_=[]};Oe.prototype.addLast=function(t){this.array_.push(t)},Oe.prototype.removeFirst=function(){return this.array_.shift()},Oe.prototype.isEmpty=function(){return 0===this.array_.length};var Pe=function(){this._finder=null,this._dirEdgeList=new Et,this._nodes=new Et,this._rightMostCoord=null,this._env=null,this._finder=new Ne};Pe.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Pe.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Pe.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new Ae("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},Pe.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Ie.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Pe.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Pe.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Ie.RIGHT)>=1&&e.getDepth(Ie.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Pe.prototype.computeDepths=function(t){var e=new Mt,n=new Oe,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var a=o.next().getSym();if(!a.isVisited()){var s=a.getNode();e.contains(s)||(n.addLast(s),e.add(s))}}}},Pe.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Pe.prototype.getEnvelope=function(){if(null===this._env){for(var t=new X,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},Pe.prototype.addReachable=function(t){var e=new y;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Pe.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Ie.LEFT,t.getDepth(Ie.RIGHT)),e.setDepth(Ie.RIGHT,t.getDepth(Ie.LEFT))},Pe.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},Pe.prototype.getNodes=function(){return this._nodes},Pe.prototype.getDirectedEdges=function(){return this._dirEdgeList},Pe.prototype.interfaces_=function(){return[x]},Pe.prototype.getClass=function(){return Pe};var Te=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[Ie.ON]=n}else if(arguments[0]instanceof t){var r=arguments[0];if(this.init(r.location.length),null!==r)for(var i=0;i<this.location.length;i++)this.location[i]=r.location[i]}}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.init(3),this.location[Ie.ON]=o,this.location[Ie.LEFT]=a,this.location[Ie.RIGHT]=s}};Te.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Te.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==A.NONE)return!1;return!0},Te.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===A.NONE&&(this.location[e]=t)},Te.prototype.isLine=function(){return 1===this.location.length},Te.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Ie.ON]=this.location[Ie.ON],e[Ie.LEFT]=A.NONE,e[Ie.RIGHT]=A.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===A.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Te.prototype.getLocations=function(){return this.location},Te.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Ie.LEFT];this.location[Ie.LEFT]=this.location[Ie.RIGHT],this.location[Ie.RIGHT]=t},Te.prototype.toString=function(){var t=new L;return this.location.length>1&&t.append(A.toLocationSymbol(this.location[Ie.LEFT])),t.append(A.toLocationSymbol(this.location[Ie.ON])),this.location.length>1&&t.append(A.toLocationSymbol(this.location[Ie.RIGHT])),t.toString()},Te.prototype.setLocations=function(t,e,n){this.location[Ie.ON]=t,this.location[Ie.LEFT]=e,this.location[Ie.RIGHT]=n},Te.prototype.get=function(t){return t<this.location.length?this.location[t]:A.NONE},Te.prototype.isArea=function(){return this.location.length>1},Te.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===A.NONE)return!0;return!1},Te.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Ie.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},Te.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(A.NONE)},Te.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Te.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Te.prototype.interfaces_=function(){return[]},Te.prototype.getClass=function(){return Te};var Me=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Te(e),this.elt[1]=new Te(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Te(n.elt[0]),this.elt[1]=new Te(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new Te(A.NONE),this.elt[1]=new Te(A.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.elt[0]=new Te(o,a,s),this.elt[1]=new Te(o,a,s)}else if(4===arguments.length){var u=arguments[0],c=arguments[1],l=arguments[2],f=arguments[3];this.elt[0]=new Te(A.NONE,A.NONE,A.NONE),this.elt[1]=new Te(A.NONE,A.NONE,A.NONE),this.elt[u].setLocations(c,l,f)}};Me.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Me.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Me.prototype.isNull=function(t){return this.elt[t].isNull()},Me.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},Me.prototype.isLine=function(t){return this.elt[t].isLine()},Me.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Te(t.elt[e]):this.elt[e].merge(t.elt[e])},Me.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Me.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Ie.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},Me.prototype.toString=function(){var t=new L;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Me.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Me.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Me.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Ie.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}},Me.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Me.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Me.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Te(this.elt[t].location[0]))},Me.prototype.interfaces_=function(){return[]},Me.prototype.getClass=function(){return Me},Me.toLineLabel=function(t){for(var e=new Me(A.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var Le=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new Et,this._pts=new Et,this._label=new Me(A.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Et,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};Le.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=st.isCCW(this._ring.getCoordinates())},Le.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Le.prototype.computePoints=function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new Ae("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Ae("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var r=e.getLabel();et.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},Le.prototype.getLinearRing=function(){return this._ring},Le.prototype.getCoordinate=function(t){return this._pts.get(t)},Le.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},Le.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var a=r.length-2;n&&(a=r.length-1);for(var s=a;s>=0;s--)this._pts.add(r[s])}},Le.prototype.isHole=function(){return this._isHole},Le.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},Le.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!st.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},Le.prototype.addHole=function(t){this._holes.add(t)},Le.prototype.isShell=function(){return null===this._shell},Le.prototype.getLabel=function(){return this._label},Le.prototype.getEdges=function(){return this._edges},Le.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Le.prototype.getShell=function(){return this._shell},Le.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=e.getLocation(n,Ie.RIGHT);if(r===A.NONE)return null;if(this._label.getLocation(n)===A.NONE)return this._label.setLocation(n,r),null}},Le.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},Le.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},Le.prototype.interfaces_=function(){return[]},Le.prototype.getClass=function(){return Le};var Re=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Le),De=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new Et,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new Re(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Le),Fe=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};Fe.prototype.setVisited=function(t){this._isVisited=t},Fe.prototype.setInResult=function(t){this._isInResult=t},Fe.prototype.isCovered=function(){return this._isCovered},Fe.prototype.isCoveredSet=function(){return this._isCoveredSet},Fe.prototype.setLabel=function(t){this._label=t},Fe.prototype.getLabel=function(){return this._label},Fe.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},Fe.prototype.updateIM=function(t){et.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},Fe.prototype.isInResult=function(){return this._isInResult},Fe.prototype.isVisited=function(){return this._isVisited},Fe.prototype.interfaces_=function(){return[]},Fe.prototype.getClass=function(){return Fe};var ke=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new Me(0,A.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=A.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==A.BOUNDARY&&(n=r)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new Me(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof Me)for(var n=arguments[0],r=0;r<2;r++){var i=this.computeMergedLocation(n,r);this._label.getLocation(r)===A.NONE&&this._label.setLocation(r,i)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=A.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case A.BOUNDARY:n=A.INTERIOR;break;case A.INTERIOR:default:n=A.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Fe),je=function(){this.nodeMap=new f,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};je.prototype.find=function(t){return this.nodeMap.get(t)},je.prototype.addNode=function(){if(arguments[0]instanceof S){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof ke){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},je.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},je.prototype.iterator=function(){return this.nodeMap.values().iterator()},je.prototype.values=function(){return this.nodeMap.values()},je.prototype.getBoundaryNodes=function(t){for(var e=new Et,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===A.BOUNDARY&&e.add(r)}return e},je.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},je.prototype.interfaces_=function(){return[]},je.prototype.getClass=function(){return je};var Be=function(){},Ge={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Be.prototype.interfaces_=function(){return[]},Be.prototype.getClass=function(){return Be},Be.isNorthern=function(t){return t===Be.NE||t===Be.NW},Be.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},Be.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},Be.isInHalfPlane=function(t,e){return e===Be.SE?t===Be.SE||t===Be.SW:t===e||t===e+1},Be.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new v("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?Be.NE:Be.SE:e>=0?Be.NW:Be.SW}if(arguments[0]instanceof S&&arguments[1]instanceof S){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new v("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?Be.NE:Be.SE:r.y>=n.y?Be.NW:Be.SW}},Ge.NE.get=function(){return 0},Ge.NW.get=function(){return 1},Ge.SW.get=function(){return 2},Ge.SE.get=function(){return 3},Object.defineProperties(Be,Ge);var Ue=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._edge=e,this.init(n,r),this._label=null}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this._edge=i,this.init(o,a),this._label=s}};Ue.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:st.computeOrientation(t._p0,t._p1,this._p1)},Ue.prototype.getDy=function(){return this._dy},Ue.prototype.getCoordinate=function(){return this._p0},Ue.prototype.setNode=function(t){this._node=t},Ue.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},Ue.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},Ue.prototype.getDirectedCoordinate=function(){return this._p1},Ue.prototype.getDx=function(){return this._dx},Ue.prototype.getLabel=function(){return this._label},Ue.prototype.getEdge=function(){return this._edge},Ue.prototype.getQuadrant=function(){return this._quadrant},Ue.prototype.getNode=function(){return this._node},Ue.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Ue.prototype.computeLabel=function(t){},Ue.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Be.quadrant(this._dx,this._dy),et.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Ue.prototype.interfaces_=function(){return[x]},Ue.prototype.getClass=function(){return Ue};var ze=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Me(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Ae("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Ie.LEFT)===A.INTERIOR&&this._label.getLocation(e,Ie.RIGHT)===A.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Ie.LEFT]+"/"+this._depth[Ie.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,A.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,A.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===Ie.LEFT&&(r=-1);var i=Ie.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===A.EXTERIOR&&e===A.INTERIOR?1:t===A.INTERIOR&&e===A.EXTERIOR?-1:0},e}(Ue),qe=function(){};qe.prototype.createNode=function(t){return new ke(t,null)},qe.prototype.interfaces_=function(){return[]},qe.prototype.getClass=function(){return qe};var Ve=function(){if(this._edges=new Et,this._nodes=null,this._edgeEndList=new Et,0===arguments.length)this._nodes=new je(new qe);else if(1===arguments.length){var t=arguments[0];this._nodes=new je(t)}};Ve.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},Ve.prototype.find=function(t){return this._nodes.find(t)},Ve.prototype.addNode=function(){if(arguments[0]instanceof ke){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof S){var e=arguments[0];return this._nodes.addNode(e)}},Ve.prototype.getNodeIterator=function(){return this._nodes.iterator()},Ve.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},Ve.prototype.debugPrintln=function(t){V.out.println(t)},Ve.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===A.BOUNDARY},Ve.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},Ve.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&st.computeOrientation(t,e,r)===st.COLLINEAR&&Be.quadrant(t,e)===Be.quadrant(n,r)},Ve.prototype.getEdgeEnds=function(){return this._edgeEndList},Ve.prototype.debugPrint=function(t){V.out.print(t)},Ve.prototype.getEdgeIterator=function(){return this._edges.iterator()},Ve.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return r;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return r}return null},Ve.prototype.insertEdge=function(t){this._edges.add(t)},Ve.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},Ve.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var r=new ze(n,!0),i=new ze(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}},Ve.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},Ve.prototype.getNodes=function(){return this._nodes.values()},Ve.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},Ve.prototype.interfaces_=function(){return[]},Ve.prototype.getClass=function(){return Ve},Ve.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var Ye=function(){this._geometryFactory=null,this._shellList=new Et;var t=arguments[0];this._geometryFactory=t};Ye.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},Ye.prototype.computePolygons=function(t){for(var e=new Et,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},Ye.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new Ae("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},Ye.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new Et,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),s=this.findShell(a);null!==s?(this.placePolygonHoles(s,a),e.add(s)):n.addAll(a)}else r.add(o)}return r},Ye.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},Ye.prototype.buildMaximalEdgeRings=function(t){for(var e=new Et,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new De(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},Ye.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},Ye.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Ye.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,a=null,s=e.iterator();s.hasNext();){var u=s.next(),c=u.getLinearRing(),l=c.getEnvelopeInternal();null!==o&&(a=o.getLinearRing().getEnvelopeInternal());var f=!1;l.contains(r)&&st.isPointInRing(i,c.getCoordinates())&&(f=!0),f&&(null===o||a.contains(l))&&(o=u)}return o},Ye.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return et.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},Ye.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Ve.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),i=new Et,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},Ye.prototype.interfaces_=function(){return[]},Ye.prototype.getClass=function(){return Ye};var Xe=function(){};Xe.prototype.getBounds=function(){},Xe.prototype.interfaces_=function(){return[]},Xe.prototype.getClass=function(){return Xe};var Je=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};Je.prototype.getItem=function(){return this._item},Je.prototype.getBounds=function(){return this._bounds},Je.prototype.interfaces_=function(){return[Xe,e]},Je.prototype.getClass=function(){return Je};var We=function(){this._size=null,this._items=null,this._size=0,this._items=new Et,this._items.add(null)};We.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},We.prototype.size=function(){return this._size},We.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},We.prototype.clear=function(){this._size=0,this._items.clear()},We.prototype.isEmpty=function(){return 0===this._size},We.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},We.prototype.interfaces_=function(){return[]},We.prototype.getClass=function(){return We};var He=function(){};He.prototype.visitItem=function(t){},He.prototype.interfaces_=function(){return[]},He.prototype.getClass=function(){return He};var $e=function(){};$e.prototype.insert=function(t,e){},$e.prototype.remove=function(t,e){},$e.prototype.query=function(){},$e.prototype.interfaces_=function(){return[]},$e.prototype.getClass=function(){return $e};var Ke=function(){if(this._childBoundables=new Et,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},Ze={serialVersionUID:{configurable:!0}};Ke.prototype.getLevel=function(){return this._level},Ke.prototype.size=function(){return this._childBoundables.size()},Ke.prototype.getChildBoundables=function(){return this._childBoundables},Ke.prototype.addChildBoundable=function(t){et.isTrue(null===this._bounds),this._childBoundables.add(t)},Ke.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Ke.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Ke.prototype.interfaces_=function(){return[Xe,e]},Ke.prototype.getClass=function(){return Ke},Ze.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Ke,Ze);var Qe=function(){};Qe.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},Qe.min=function(t){return Qe.sort(t),t.get(0)},Qe.sort=function(t,e){var n=t.toArray();e?kt.sort(n,e):kt.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},Qe.singletonList=function(t){var e=new Et;return e.add(t),e};var tn=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};tn.prototype.expandToQueue=function(t,e){var n=tn.isComposite(this._boundable1),r=tn.isComposite(this._boundable2);if(n&&r)return tn.area(this._boundable1)>tn.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new v("neither boundable is composite")},tn.prototype.isLeaves=function(){return!(tn.isComposite(this._boundable1)||tn.isComposite(this._boundable2))},tn.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},tn.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),a=new tn(o,e,this._itemDistance);a.getDistance()<r&&n.add(a)}},tn.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},tn.prototype.getDistance=function(){return this._distance},tn.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},tn.prototype.interfaces_=function(){return[x]},tn.prototype.getClass=function(){return tn},tn.area=function(t){return t.getBounds().getArea()},tn.isComposite=function(t){return t instanceof Ke};var en=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new Et,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];et.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},nn={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};en.prototype.getNodeCapacity=function(){return this._nodeCapacity},en.prototype.lastNode=function(t){return t.get(t.size()-1)},en.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Ke?t+=this.size(n):n instanceof Je&&(t+=1)}return t}},en.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Je&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},en.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new Et:t}if(1===arguments.length){for(var e=arguments[0],n=new Et,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof Ke){var o=this.itemsTree(i);null!==o&&n.add(o)}else i instanceof Je?n.add(i.getItem()):et.shouldNeverReachHere()}return n.size()<=0?null:n}},en.prototype.insert=function(t,e){et.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Je(t,e))},en.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new Et;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(et.isTrue(n>-2),r.getLevel()===n)return i.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var a=o.next();a instanceof Ke?this.boundablesAtLevel(n,a,i):(et.isTrue(a instanceof Je),-1===n&&i.add(a))}return null}},en.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new Et;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e}if(2===arguments.length){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,r)}else if(3===arguments.length)if(P(arguments[2],He)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke)for(var i=arguments[0],o=arguments[1],a=arguments[2],s=o.getChildBoundables(),u=0;u<s.size();u++){var c=s.get(u);this.getIntersectsOp().intersects(c.getBounds(),i)&&(c instanceof Ke?this.query(i,c,a):c instanceof Je?a.visitItem(c.getItem()):et.shouldNeverReachHere())}else if(P(arguments[2],wt)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke)for(var l=arguments[0],f=arguments[1],p=arguments[2],h=f.getChildBoundables(),d=0;d<h.size();d++){var g=h.get(d);this.getIntersectsOp().intersects(g.getBounds(),l)&&(g instanceof Ke?this.query(l,g,p):g instanceof Je?p.add(g.getItem()):et.shouldNeverReachHere())}},en.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},en.prototype.getRoot=function(){return this.build(),this._root},en.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=this.removeItem(r,i);if(o)return!0;for(var a=null,s=r.getChildBoundables().iterator();s.hasNext();){var u=s.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&u instanceof Ke&&(o=this.remove(n,u,i))){a=u;break}}return null!==a&&a.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(a),o}},en.prototype.createHigherLevels=function(t,e){et.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},en.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Ke){var r=this.depth(n);r>t&&(t=r)}}return t+1}},en.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var n=new Et;n.add(this.createNode(e));var r=new Et(t);Qe.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var o=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},en.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},en.prototype.interfaces_=function(){return[e]},en.prototype.getClass=function(){return en},en.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},nn.IntersectsOp.get=function(){return rn},nn.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},nn.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(en,nn);var rn=function(){},on=function(){};on.prototype.distance=function(t,e){},on.prototype.interfaces_=function(){return[]},on.prototype.getClass=function(){return on};var an=function(t){function n(e){e=e||n.DEFAULT_NODE_CAPACITY,t.call(this,e)}t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n;var r={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return n.prototype.createParentBoundablesFromVerticalSlices=function(t,e){et.isTrue(t.length>0);for(var n=new Et,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},n.prototype.createNode=function(t){return new sn(t)},n.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},n.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},n.prototype.getIntersectsOp=function(){return n.intersectsOp},n.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new Et;for(var a=0;i.hasNext()&&a<n;){var s=i.next();r[o].add(s),a++}}return r},n.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];t.prototype.query.call(this,n,r)}else if(3===arguments.length)if(P(arguments[2],He)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke){var i=arguments[0],o=arguments[1],a=arguments[2];t.prototype.query.call(this,i,o,a)}else if(P(arguments[2],wt)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke){var s=arguments[0],u=arguments[1],c=arguments[2];t.prototype.query.call(this,s,u,c)}},n.prototype.getComparator=function(){return n.yComparator},n.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},n.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},n.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},n.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new Et(t);Qe.sort(i,n.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,e)},n.prototype.nearestNeighbour=function(){if(1===arguments.length){if(P(arguments[0],on)){var t=arguments[0],e=new tn(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof tn){var r=arguments[0];return this.nearestNeighbour(r,_.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof n&&P(arguments[1],on)){var i=arguments[0],o=arguments[1],a=new tn(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(a)}if(arguments[0]instanceof tn&&"number"==typeof arguments[1]){var s=arguments[0],u=arguments[1],c=null,l=new We;for(l.add(s);!l.isEmpty()&&u>0;){var f=l.poll(),p=f.getDistance();if(p>=u)break;f.isLeaves()?(u=p,c=f):f.expandToQueue(l,u)}return[c.getBoundable(0).getItem(),c.getBoundable(1).getItem()]}}else if(3===arguments.length){var h=arguments[0],d=arguments[1],g=arguments[2],y=new Je(h,d),m=new tn(this.getRoot(),y,g);return this.nearestNeighbour(m)[0]}},n.prototype.interfaces_=function(){return[$e,e]},n.prototype.getClass=function(){return n},n.centreX=function(t){return n.avg(t.getMinX(),t.getMaxX())},n.avg=function(t,e){return(t+e)/2},n.centreY=function(t){return n.avg(t.getMinY(),t.getMaxY())},r.STRtreeNode.get=function(){return sn},r.serialVersionUID.get=function(){return 0x39920f7d5f261e0},r.xComparator.get=function(){return{interfaces_:function(){return[E]},compare:function(e,r){return t.compareDoubles(n.centreX(e.getBounds()),n.centreX(r.getBounds()))}}},r.yComparator.get=function(){return{interfaces_:function(){return[E]},compare:function(e,r){return t.compareDoubles(n.centreY(e.getBounds()),n.centreY(r.getBounds()))}}},r.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},r.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(n,r),n}(en),sn=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new X(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ke),un=function(){};un.prototype.interfaces_=function(){return[]},un.prototype.getClass=function(){return un},un.relativeSign=function(t,e){return t<e?-1:t>e?1:0},un.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=un.relativeSign(e.x,n.x),i=un.relativeSign(e.y,n.y);switch(t){case 0:return un.compareValue(r,i);case 1:return un.compareValue(i,r);case 2:return un.compareValue(i,-r);case 3:return un.compareValue(-r,i);case 4:return un.compareValue(-r,-i);case 5:return un.compareValue(-i,-r);case 6:return un.compareValue(-i,r);case 7:return un.compareValue(r,-i)}return et.shouldNeverReachHere("invalid octant value"),0},un.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var cn=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new S(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};cn.prototype.getCoordinate=function(){return this.coord},cn.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},cn.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:un.compare(this._segmentOctant,this.coord,e.coord)},cn.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},cn.prototype.isInterior=function(){return this._isInterior},cn.prototype.interfaces_=function(){return[x]},cn.prototype.getClass=function(){return cn};var ln=function(){this._nodeMap=new f,this._edge=null;var t=arguments[0];this._edge=t};ln.prototype.getSplitCoordinates=function(){var t=new It;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},ln.prototype.addCollapsedNodes=function(){var t=new Et;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},ln.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},ln.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new R(e+1))}},ln.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new S(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new S(e.coord))},ln.prototype.iterator=function(){return this._nodeMap.values().iterator()},ln.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},ln.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},ln.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new R(e[0])),r=i}},ln.prototype.getEdge=function(){return this._edge},ln.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},ln.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new S(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this._edge.getCoordinate(s);return i&&(o[a]=new S(e.coord)),new dn(o,this._edge.getData())},ln.prototype.add=function(t,e){var n=new cn(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(et.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},ln.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new Q("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new Q("bad split edge end point at "+i)},ln.prototype.interfaces_=function(){return[]},ln.prototype.getClass=function(){return ln};var fn=function(){};fn.prototype.interfaces_=function(){return[]},fn.prototype.getClass=function(){return fn},fn.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new v("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof S&&arguments[1]instanceof S){var i=arguments[0],o=arguments[1],a=o.x-i.x,s=o.y-i.y;if(0===a&&0===s)throw new v("Cannot compute the octant for two identical points "+i);return fn.octant(a,s)}};var pn=function(){};pn.prototype.getCoordinates=function(){},pn.prototype.size=function(){},pn.prototype.getCoordinate=function(t){},pn.prototype.isClosed=function(){},pn.prototype.setData=function(t){},pn.prototype.getData=function(){},pn.prototype.interfaces_=function(){return[]},pn.prototype.getClass=function(){return pn};var hn=function(){};hn.prototype.addIntersection=function(t,e){},hn.prototype.interfaces_=function(){return[pn]},hn.prototype.getClass=function(){return hn};var dn=function(){this._nodeList=new ln(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};dn.prototype.getCoordinates=function(){return this._pts},dn.prototype.size=function(){return this._pts.length},dn.prototype.getCoordinate=function(t){return this._pts[t]},dn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},dn.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},dn.prototype.setData=function(t){this._data=t},dn.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:fn.octant(t,e)},dn.prototype.getData=function(){return this._data},dn.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[3],o=new S(n.getIntersection(i));this.addIntersection(o,r)}},dn.prototype.toString=function(){return Z.toLineString(new ue(this._pts))},dn.prototype.getNodeList=function(){return this._nodeList},dn.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)},dn.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},dn.prototype.interfaces_=function(){return[hn]},dn.prototype.getClass=function(){return dn},dn.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new Et;return dn.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();)i.next().getNodeList().addSplitEdges(r)};var gn=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new S,this.p1=new S;else if(1===arguments.length){var t=arguments[0];this.p0=new S(t.p0),this.p1=new S(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new S(e,n),this.p1=new S(r,i)}},yn={serialVersionUID:{configurable:!0}};gn.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},gn.prototype.orientationIndex=function(){if(arguments[0]instanceof gn){var t=arguments[0],e=st.orientationIndex(this.p0,this.p1,t.p0),n=st.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof S){var r=arguments[0];return st.orientationIndex(this.p0,this.p1,r)}},gn.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},gn.prototype.isVertical=function(){return this.p0.x===this.p1.x},gn.prototype.equals=function(t){if(!(t instanceof gn))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},gn.prototype.intersection=function(t){var e=new it;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},gn.prototype.project=function(){if(arguments[0]instanceof S){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new S(t);var e=this.projectionFactor(t),n=new S;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof gn){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var a=this.project(r.p0);i<0&&(a=this.p0),i>1&&(a=this.p1);var s=this.project(r.p1);return o<0&&(s=this.p0),o>1&&(s=this.p1),new gn(a,s)}},gn.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},gn.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},gn.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},gn.prototype.distancePerpendicular=function(t){return st.distancePointLinePerpendicular(t,this.p0,this.p1)},gn.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},gn.prototype.midPoint=function(){return gn.midPoint(this.p0,this.p1)},gn.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?_.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},gn.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=_.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var a=this.closestPoint(t.p1);(i=a.distance(t.p1))<r&&(r=i,n[0]=a,n[1]=t.p1);var s=t.closestPoint(this.p0);(i=s.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=s);var u=t.closestPoint(this.p1);return(i=u.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=u),n},gn.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},gn.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},gn.prototype.getLength=function(){return this.p0.distance(this.p1)},gn.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},gn.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},gn.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},gn.prototype.lineIntersection=function(t){try{return Y.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof q))throw t}return null},gn.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},gn.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(i*i+o*o),s=0,u=0;if(0!==e){if(a<=0)throw new Error("Cannot compute offset from zero-length line segment");s=e*i/a,u=e*o/a}return new S(n-u,r+s)},gn.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},gn.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||_.isNaN(e))&&(e=1),e},gn.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},gn.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},gn.prototype.distance=function(){if(arguments[0]instanceof gn){var t=arguments[0];return st.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof S){var e=arguments[0];return st.distancePointLine(e,this.p0,this.p1)}},gn.prototype.pointAlong=function(t){var e=new S;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},gn.prototype.hashCode=function(){var t=_.doubleToLongBits(this.p0.x);t^=31*_.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=_.doubleToLongBits(this.p1.x);return n^=31*_.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},gn.prototype.interfaces_=function(){return[x,e]},gn.prototype.getClass=function(){return gn},gn.midPoint=function(t,e){return new S((t.x+e.x)/2,(t.y+e.y)/2)},yn.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(gn,yn);var mn=function(){this.tempEnv1=new X,this.tempEnv2=new X,this._overlapSeg1=new gn,this._overlapSeg2=new gn};mn.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];t.getLineSegment(e,this._overlapSeg1),n.getLineSegment(r,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},mn.prototype.interfaces_=function(){return[]},mn.prototype.getClass=function(){return mn};var vn=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r};vn.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},vn.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var a=Math.trunc((e+n)/2);e<a&&this.computeSelect(t,e,a,r),a<n&&this.computeSelect(t,a,n,r)},vn.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},vn.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},vn.prototype.setId=function(t){this._id=t},vn.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},vn.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new X(t,e)}return this._env},vn.prototype.getEndIndex=function(){return this._end},vn.prototype.getStartIndex=function(){return this._start},vn.prototype.getContext=function(){return this._context},vn.prototype.getId=function(){return this._id},vn.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var a=this._pts[t],s=this._pts[e],u=n._pts[r],c=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(a,s),o.tempEnv2.init(u,c),!o.tempEnv1.intersects(o.tempEnv2))return null;var l=Math.trunc((t+e)/2),f=Math.trunc((r+i)/2);t<l&&(r<f&&this.computeOverlapsInternal(t,l,n,r,f,o),f<i&&this.computeOverlapsInternal(t,l,n,f,i,o)),l<e&&(r<f&&this.computeOverlapsInternal(l,e,n,r,f,o),f<i&&this.computeOverlapsInternal(l,e,n,f,i,o))},vn.prototype.interfaces_=function(){return[]},vn.prototype.getClass=function(){return vn};var _n=function(){};_n.prototype.interfaces_=function(){return[]},_n.prototype.getClass=function(){return _n},_n.getChainStartIndices=function(t){var e=0,n=new Et;n.add(new R(e));do{var r=_n.findChainEnd(t,e);n.add(new R(r)),e=r}while(e<t.length-1);return _n.toIntArray(n)},_n.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=Be.quadrant(t[n],t[n+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||Be.quadrant(t[i-1],t[i])===r);)i++;return i-1},_n.getChains=function(){if(1===arguments.length){var t=arguments[0];return _n.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=new Et,i=_n.getChainStartIndices(e),o=0;o<i.length-1;o++){var a=new vn(e,i[o],i[o+1],n);r.add(a)}return r}},_n.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var bn=function(){};bn.prototype.computeNodes=function(t){},bn.prototype.getNodedSubstrings=function(){},bn.prototype.interfaces_=function(){return[]},bn.prototype.getClass=function(){return bn};var xn=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};xn.prototype.setSegmentIntersector=function(t){this._segInt=t},xn.prototype.interfaces_=function(){return[bn]},xn.prototype.getClass=function(){return xn};var wn=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new Et,this._index=new an,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return dn.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=_n.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new En(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),r=this._index.query(n.getEnvelope()).iterator();r.hasNext();){var i=r.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return En},Object.defineProperties(e,n),e}(xn),En=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3],o=e.getContext(),a=r.getContext();this._si.processIntersections(o,n,a,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(mn),Sn=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(a),this.setMitreLimit(s)}},In={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Sn.prototype.getEndCapStyle=function(){return this._endCapStyle},Sn.prototype.isSingleSided=function(){return this._isSingleSided},Sn.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Sn.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Sn.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Sn.JOIN_ROUND&&(this._quadrantSegments=Sn.DEFAULT_QUADRANT_SEGMENTS)},Sn.prototype.getJoinStyle=function(){return this._joinStyle},Sn.prototype.setJoinStyle=function(t){this._joinStyle=t},Sn.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Sn.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Sn.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Sn.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Sn.prototype.getMitreLimit=function(){return this._mitreLimit},Sn.prototype.setMitreLimit=function(t){this._mitreLimit=t},Sn.prototype.setSingleSided=function(t){this._isSingleSided=t},Sn.prototype.interfaces_=function(){return[]},Sn.prototype.getClass=function(){return Sn},Sn.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},In.CAP_ROUND.get=function(){return 1},In.CAP_FLAT.get=function(){return 2},In.CAP_SQUARE.get=function(){return 3},In.JOIN_ROUND.get=function(){return 1},In.JOIN_MITRE.get=function(){return 2},In.JOIN_BEVEL.get=function(){return 3},In.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},In.DEFAULT_MITRE_LIMIT.get=function(){return 5},In.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Sn,In);var Cn=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=st.COUNTERCLOCKWISE,this._inputLine=t||null},Nn={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Cn.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],a=this._inputLine[n];return!!this.isConcave(i,o,a)&&!!this.isShallow(i,o,a,r)&&this.isShallowSampled(i,o,t,n,r)},Cn.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),r=!1;n<this._inputLine.length;){var i=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=Cn.DELETE,i=!0,r=!0),t=i?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return r},Cn.prototype.isShallowConcavity=function(t,e,n,r){return st.computeOrientation(t,e,n)===this._angleOrientation&&st.distancePointLine(e,t,n)<r},Cn.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/Cn.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=n;a<r;a+=o)if(!this.isShallow(t,e,this._inputLine[a],i))return!1;return!0},Cn.prototype.isConcave=function(t,e,n){return st.computeOrientation(t,e,n)===this._angleOrientation},Cn.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=st.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Cn.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Cn.DELETE;)e++;return e},Cn.prototype.isShallow=function(t,e,n,r){return st.distancePointLine(e,t,n)<r},Cn.prototype.collapseLine=function(){for(var t=new It,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Cn.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Cn.prototype.interfaces_=function(){return[]},Cn.prototype.getClass=function(){return Cn},Cn.simplify=function(t,e){return new Cn(t).simplify(e)},Nn.INIT.get=function(){return 0},Nn.DELETE.get=function(){return 1},Nn.KEEP.get=function(){return 1},Nn.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Cn,Nn);var An=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Et},On={COORDINATE_ARRAY_TYPE:{configurable:!0}};An.prototype.getCoordinates=function(){return this._ptList.toArray(An.COORDINATE_ARRAY_TYPE)},An.prototype.setPrecisionModel=function(t){this._precisionModel=t},An.prototype.addPt=function(t){var e=new S(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},An.prototype.revere=function(){},An.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])},An.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},An.prototype.toString=function(){return(new me).createLineString(this.getCoordinates()).toString()},An.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new S(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},An.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},An.prototype.interfaces_=function(){return[]},An.prototype.getClass=function(){return An},On.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(An,On);var Pn=function(){},Tn={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Pn.prototype.interfaces_=function(){return[]},Pn.prototype.getClass=function(){return Pn},Pn.toDegrees=function(t){return 180*t/Math.PI},Pn.normalize=function(t){for(;t>Math.PI;)t-=Pn.PI_TIMES_2;for(;t<=-Math.PI;)t+=Pn.PI_TIMES_2;return t},Pn.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}},Pn.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)>0},Pn.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0},Pn.interiorAngle=function(t,e,n){var r=Pn.angle(e,t),i=Pn.angle(e,n);return Math.abs(i-r)},Pn.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Pn.PI_TIMES_2;t>=Pn.PI_TIMES_2&&(t=0)}else{for(;t>=Pn.PI_TIMES_2;)t-=Pn.PI_TIMES_2;t<0&&(t=0)}return t},Pn.angleBetween=function(t,e,n){var r=Pn.angle(e,t),i=Pn.angle(e,n);return Pn.diff(r,i)},Pn.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},Pn.toRadians=function(t){return t*Math.PI/180},Pn.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?Pn.COUNTERCLOCKWISE:n<0?Pn.CLOCKWISE:Pn.NONE},Pn.angleBetweenOriented=function(t,e,n){var r=Pn.angle(e,t),i=Pn.angle(e,n)-r;return i<=-Math.PI?i+Pn.PI_TIMES_2:i>Math.PI?i-Pn.PI_TIMES_2:i},Tn.PI_TIMES_2.get=function(){return 2*Math.PI},Tn.PI_OVER_2.get=function(){return Math.PI/2},Tn.PI_OVER_4.get=function(){return Math.PI/4},Tn.COUNTERCLOCKWISE.get=function(){return st.COUNTERCLOCKWISE},Tn.CLOCKWISE.get=function(){return st.CLOCKWISE},Tn.NONE.get=function(){return st.COLLINEAR},Object.defineProperties(Pn,Tn);var Mn=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new gn,this._seg1=new gn,this._offset0=new gn,this._offset1=new gn,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new it,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===Sn.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},Ln={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Mn.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=st.computeOrientation(this._s0,this._s1,this._s2),r=n===st.CLOCKWISE&&this._side===Ie.LEFT||n===st.COUNTERCLOCKWISE&&this._side===Ie.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},Mn.prototype.addLineEndCap=function(t,e){var n=new gn(t,e),r=new gn;this.computeOffsetSegment(n,Ie.LEFT,this._distance,r);var i=new gn;this.computeOffsetSegment(n,Ie.RIGHT,this._distance,i);var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o);switch(this._bufParams.getEndCapStyle()){case Sn.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,s+Math.PI/2,s-Math.PI/2,st.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case Sn.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case Sn.CAP_SQUARE:var u=new S;u.x=Math.abs(this._distance)*Math.cos(s),u.y=Math.abs(this._distance)*Math.sin(s);var c=new S(r.p1.x+u.x,r.p1.y+u.y),l=new S(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(c),this._segList.addPt(l)}},Mn.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Mn.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=Y.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof q))throw t;o=new S(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},Mn.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o),u=n.x-t.x,c=n.y-t.y,l=Math.atan2(c,u);r===st.CLOCKWISE?s<=l&&(s+=2*Math.PI):s>=l&&(s-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,s,l,r,i),this._segList.addPt(n)},Mn.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Mn.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Sn.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Sn.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Mn.prototype.createSquare=function(t){this._segList.addPt(new S(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new S(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new S(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new S(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Mn.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Mn.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Mn.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Mn.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Mn.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=Pn.angle(i,this._seg0.p0),a=Pn.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,s=Pn.normalize(o+a),u=Pn.normalize(s+Math.PI),c=r*n,l=n-c*Math.abs(Math.sin(a)),f=i.x+c*Math.cos(u),p=i.y+c*Math.sin(u),h=new S(f,p),d=new gn(i,h),g=d.pointAlongOffset(1,l),y=d.pointAlongOffset(1,-l);this._side===Ie.LEFT?(this._segList.addPt(g),this._segList.addPt(y)):(this._segList.addPt(y),this._segList.addPt(g))},Mn.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===Ie.LEFT?1:-1,o=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,s=Math.sqrt(o*o+a*a),u=i*n*o/s,c=i*n*a/s;r.p0.x=t.p0.x-c,r.p0.y=t.p0.y+u,r.p1.x=t.p1.x-c,r.p1.y=t.p1.y+u},Mn.prototype.addFilletArc=function(t,e,n,r,i){var o=r===st.CLOCKWISE?-1:1,a=Math.abs(e-n),s=Math.trunc(a/this._filletAngleQuantum+.5);if(s<1)return null;for(var u=a/s,c=0,l=new S;c<a;){var f=e+o*c;l.x=t.x+i*Math.cos(f),l.y=t.y+i*Math.sin(f),this._segList.addPt(l),c+=u}},Mn.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Mn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new S((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new S((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Mn.prototype.createCircle=function(t){var e=new S(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Mn.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Mn.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new An,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Mn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Mn.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Sn.JOIN_BEVEL||this._bufParams.getJoinStyle()===Sn.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,st.CLOCKWISE,this._distance))},Mn.prototype.closeRing=function(){this._segList.closeRing()},Mn.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Mn.prototype.interfaces_=function(){return[]},Mn.prototype.getClass=function(){return Mn},Ln.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Ln.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Ln.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Ln.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Mn,Ln);var Rn=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};Rn.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&Ct.reverse(o),o},Rn.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=Cn.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Ie.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{n.addSegments(t,!1);var s=Cn.simplify(t,r),u=s.length-1;n.initSideSegments(s[0],s[1],Ie.LEFT),n.addFirstSegment();for(var c=2;c<=u;c++)n.addNextSegment(s[c],!0)}n.addLastSegment(),n.closeRing()},Rn.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===Ie.RIGHT&&(r=-r);var i=Cn.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var a=1;a<=o;a++){var s=1!==a;n.addNextSegment(i[a],s)}n.closeRing()},Rn.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=Cn.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],Ie.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var a=Cn.simplify(t,-n),s=a.length-1;e.initSideSegments(a[s],a[s-1],Ie.LEFT);for(var u=s-2;u>=0;u--)e.addNextSegment(a[u],!0);e.addLastSegment(),e.addLineEndCap(a[1],a[0]),e.closeRing()},Rn.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Sn.CAP_ROUND:e.createCircle(t);break;case Sn.CAP_SQUARE:e.createSquare(t)}},Rn.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()},Rn.prototype.getBufferParameters=function(){return this._bufParams},Rn.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Rn.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return Rn.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},Rn.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=Cn.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Ie.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{var s=Cn.simplify(t,r),u=s.length-1;n.initSideSegments(s[0],s[1],Ie.LEFT),n.addFirstSegment();for(var c=2;c<=u;c++)n.addNextSegment(s[c],!0)}n.addLastSegment()},Rn.prototype.getSegGen=function(t){return new Mn(this._precisionModel,this._bufParams,t)},Rn.prototype.interfaces_=function(){return[]},Rn.prototype.getClass=function(){return Rn},Rn.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new S(t[n]);return e};var Dn=function(){this._subgraphs=null,this._seg=new gn,this._cga=new st;var t=arguments[0];this._subgraphs=t},Fn={DepthSegment:{configurable:!0}};Dn.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new Et,n=this._subgraphs.iterator();n.hasNext();){var r=n.next(),i=r.getEnvelope();t.y<i.getMinY()||t.y>i.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(3===arguments.length)if(P(arguments[2],wt)&&arguments[0]instanceof S&&arguments[1]instanceof ze){for(var o=arguments[0],a=arguments[1],s=arguments[2],u=a.getEdge().getCoordinates(),c=0;c<u.length-1;c++)if(this._seg.p0=u[c],this._seg.p1=u[c+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||st.computeOrientation(this._seg.p0,this._seg.p1,o)===st.RIGHT)){var l=a.getDepth(Ie.LEFT);this._seg.p0.equals(u[c])||(l=a.getDepth(Ie.RIGHT));var f=new kn(this._seg,l);s.add(f)}}else if(P(arguments[2],wt)&&arguments[0]instanceof S&&P(arguments[1],wt))for(var p=arguments[0],h=arguments[1],d=arguments[2],g=h.iterator();g.hasNext();){var y=g.next();y.isForward()&&this.findStabbedSegments(p,y,d)}},Dn.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:Qe.min(e)._leftDepth},Dn.prototype.interfaces_=function(){return[]},Dn.prototype.getClass=function(){return Dn},Fn.DepthSegment.get=function(){return kn},Object.defineProperties(Dn,Fn);var kn=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new gn(t),this._leftDepth=e};kn.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},kn.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},kn.prototype.toString=function(){return this._upwardSeg.toString()},kn.prototype.interfaces_=function(){return[x]},kn.prototype.getClass=function(){return kn};var jn=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};jn.prototype.area=function(){return jn.area(this.p0,this.p1,this.p2)},jn.prototype.signedArea=function(){return jn.signedArea(this.p0,this.p1,this.p2)},jn.prototype.interpolateZ=function(t){if(null===t)throw new v("Supplied point is null.");return jn.interpolateZ(t,this.p0,this.p1,this.p2)},jn.prototype.longestSideLength=function(){return jn.longestSideLength(this.p0,this.p1,this.p2)},jn.prototype.isAcute=function(){return jn.isAcute(this.p0,this.p1,this.p2)},jn.prototype.circumcentre=function(){return jn.circumcentre(this.p0,this.p1,this.p2)},jn.prototype.area3D=function(){return jn.area3D(this.p0,this.p1,this.p2)},jn.prototype.centroid=function(){return jn.centroid(this.p0,this.p1,this.p2)},jn.prototype.inCentre=function(){return jn.inCentre(this.p0,this.p1,this.p2)},jn.prototype.interfaces_=function(){return[]},jn.prototype.getClass=function(){return jn},jn.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},jn.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},jn.det=function(t,e,n,r){return t*r-e*n},jn.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,a=n.x-i,s=r.x-i,u=n.y-o,c=r.y-o,l=a*c-s*u,f=t.x-i,p=t.y-o,h=(c*f-s*p)/l,d=(-u*f+a*p)/l;return e.z+h*(n.z-e.z)+d*(r.z-e.z)},jn.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),a=r;return i>a&&(a=i),o>a&&(a=o),a},jn.isAcute=function(t,e,n){return!!Pn.isAcute(t,e,n)&&!!Pn.isAcute(e,n,t)&&!!Pn.isAcute(n,t,e)},jn.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,a=t.y-i,s=e.x-r,u=e.y-i,c=2*jn.det(o,a,s,u),l=jn.det(a,o*o+a*a,u,s*s+u*u),f=jn.det(o,o*o+a*a,s,s*s+u*u);return new S(r-l/c,i+f/c)},jn.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new Y(t.x+n/2,t.y+r/2,1),o=new Y(t.x-r+n/2,t.y+n+r/2,1);return new Y(i,o)},jn.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,a=n.y-t.y;return new S(t.x+i*o,t.y+i*a)},jn.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,a=n.x-t.x,s=n.y-t.y,u=n.z-t.z,c=i*u-o*s,l=o*a-r*u,f=r*s-i*a,p=c*c+l*l+f*f;return Math.sqrt(p)/2},jn.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new S(r,i)},jn.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),a=r+i+o,s=(r*t.x+i*e.x+o*n.x)/a,u=(r*t.y+i*e.y+o*n.y)/a;return new S(s,u)};var Bn=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Et;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};Bn.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,A.EXTERIOR,A.INTERIOR)},Bn.prototype.addPolygon=function(t){var e=this._distance,n=Ie.LEFT;this._distance<0&&(e=-this._distance,n=Ie.RIGHT);var r=t.getExteriorRing(),i=Ct.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,e,n,A.EXTERIOR,A.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var a=t.getInteriorRingN(o),s=Ct.removeRepeatedPoints(a.getCoordinates());this._distance>0&&this.isErodedCompletely(a,-this._distance)||this.addPolygonRing(s,e,Ie.opposite(n),A.INTERIOR,A.EXTERIOR)}},Bn.prototype.isTriangleErodedCompletely=function(t,e){var n=new jn(t[0],t[1],t[2]),r=n.inCentre();return st.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},Bn.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=Ct.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,A.EXTERIOR,A.INTERIOR)},Bn.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new dn(t,new Me(0,A.BOUNDARY,e,n));this._curveList.add(r)},Bn.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Bn.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<ee.MINIMUM_VALID_SIZE)return null;var o=r,a=i;t.length>=ee.MINIMUM_VALID_SIZE&&st.isCCW(t)&&(o=i,a=r,n=Ie.opposite(n));var s=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(s,o,a)},Bn.prototype.add=function(t){if(t.isEmpty())return null;t instanceof Qt?this.addPolygon(t):t instanceof Ht?this.addLineString(t):t instanceof Kt?this.addPoint(t):(t instanceof te||t instanceof qt||t instanceof ne||t instanceof zt)&&this.addCollection(t)},Bn.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},Bn.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},Bn.prototype.interfaces_=function(){return[]},Bn.prototype.getClass=function(){return Bn};var Gn=function(){};Gn.prototype.locate=function(t){},Gn.prototype.interfaces_=function(){return[]},Gn.prototype.getClass=function(){return Gn};var Un=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Un.prototype.next=function(){if(this._atStart)return this._atStart=!1,Un.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new r;var t=this._parent.getGeometryN(this._index++);return t instanceof zt?(this._subcollectionIterator=new Un(t),this._subcollectionIterator.next()):t},Un.prototype.remove=function(){throw new Error(this.getClass().getName())},Un.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Un.prototype.interfaces_=function(){return[xt]},Un.prototype.getClass=function(){return Un},Un.isAtomic=function(t){return!(t instanceof zt)};var zn=function(){this._geom=null;var t=arguments[0];this._geom=t};zn.prototype.locate=function(t){return zn.locate(t,this._geom)},zn.prototype.interfaces_=function(){return[Gn]},zn.prototype.getClass=function(){return zn},zn.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&st.isPointInRing(t,e.getCoordinates())},zn.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!zn.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(zn.isPointInRing(t,i))return!1}return!0},zn.containsPoint=function(t,e){if(e instanceof Qt)return zn.containsPointInPolygon(t,e);if(e instanceof zt)for(var n=new Un(e);n.hasNext();){var r=n.next();if(r!==e&&zn.containsPoint(t,r))return!0}return!1},zn.locate=function(t,e){return e.isEmpty()?A.EXTERIOR:zn.containsPoint(t,e)?A.INTERIOR:A.EXTERIOR};var qn=function(){this._edgeMap=new f,this._edgeList=null,this._ptInAreaLocation=[A.NONE,A.NONE]};qn.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},qn.prototype.propagateSideLabels=function(t){for(var e=A.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,Ie.LEFT)!==A.NONE&&(e=r.getLocation(t,Ie.LEFT))}if(e===A.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getLabel();if(s.getLocation(t,Ie.ON)===A.NONE&&s.setLocation(t,Ie.ON,i),s.isArea(t)){var u=s.getLocation(t,Ie.LEFT),c=s.getLocation(t,Ie.RIGHT);if(c!==A.NONE){if(c!==i)throw new Ae("side location conflict",a.getCoordinate());u===A.NONE&&et.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),i=u}else et.isTrue(s.getLocation(t,Ie.LEFT)===A.NONE,"found single null side"),s.setLocation(t,Ie.RIGHT,i),s.setLocation(t,Ie.LEFT,i)}}},qn.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},qn.prototype.print=function(t){V.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},qn.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},qn.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,Ie.LEFT);et.isTrue(r!==A.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var a=o.next().getLabel();et.isTrue(a.isArea(t),"Found non-area edge");var s=a.getLocation(t,Ie.LEFT),u=a.getLocation(t,Ie.RIGHT);if(s===u)return!1;if(u!==i)return!1;i=s}return!0},qn.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},qn.prototype.iterator=function(){return this.getEdges().iterator()},qn.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new Et(this._edgeMap.values())),this._edgeList},qn.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===A.NONE&&(this._ptInAreaLocation[t]=zn.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},qn.prototype.toString=function(){var t=new L;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},qn.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},qn.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===A.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var a=o.next(),s=a.getLabel(),u=0;u<2;u++)if(s.isAnyNull(u)){var c=A.NONE;if(e[u])c=A.EXTERIOR;else{var l=a.getCoordinate();c=this.getLocation(u,l,t)}s.setAllLocationsIfNull(u,c)}},qn.prototype.getDegree=function(){return this._edgeMap.size()},qn.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},qn.prototype.interfaces_=function(){return[]},qn.prototype.getClass=function(){return qn};var Vn=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var i=this._resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new Ae("no outgoing dirEdge found",this.getCoordinate());et.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return Be.isNorthern(i)&&Be.isNorthern(o)?n:Be.isNorthern(i)||Be.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(et.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(t){V.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Et;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(Ie.LEFT),r=t.getDepth(Ie.RIGHT),i=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,i)!==r)throw new Ae("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[0],a=arguments[1],s=arguments[2],u=o;u<a;u++){var c=this._edgeList.get(u);c.setEdgeDepths(Ie.RIGHT,s),s=c.getDepth(Ie.LEFT)}return s}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;i>=0;i--){var o=this._resultAreaEdgeList.get(i),a=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),r){case this._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;n=a,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(et.isTrue(null!==e,"found null for first outgoing dirEdge"),et.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===n&&r++;return r}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=A.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=A.INTERIOR;break}if(r.isInResult()){t=A.EXTERIOR;break}}}if(t===A.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getSym();a.isLineEdge()?a.getEdge().setCovered(i===A.INTERIOR):(a.isInResult()&&(i=A.EXTERIOR),s.isInResult()&&(i=A.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Me(A.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),i=0;i<2;i++){var o=r.getLocation(i);o!==A.INTERIOR&&o!==A.BOUNDARY||this._label.setLocation(i,A.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(qn),Yn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new ke(t,new Vn)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(qe),Xn=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Xn.prototype.compareTo=function(t){var e=t;return Xn.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Xn.prototype.interfaces_=function(){return[x]},Xn.prototype.getClass=function(){return Xn},Xn.orientation=function(t){return 1===Ct.increasingDirection(t)},Xn.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,a=e?t.length:-1,s=r?n.length:-1,u=e?0:t.length-1,c=r?0:n.length-1;;){var l=t[u].compareTo(n[c]);if(0!==l)return l;var f=(u+=i)===a,p=(c+=o)===s;if(f&&!p)return-1;if(!f&&p)return 1;if(f&&p)return 0}};var Jn=function(){this._edges=new Et,this._ocaMap=new f};Jn.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},Jn.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Jn.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Jn.prototype.iterator=function(){return this._edges.iterator()},Jn.prototype.getEdges=function(){return this._edges},Jn.prototype.get=function(t){return this._edges.get(t)},Jn.prototype.findEqualEdge=function(t){var e=new Xn(t.getCoordinates());return this._ocaMap.get(e)},Jn.prototype.add=function(t){this._edges.add(t);var e=new Xn(t.getCoordinates());this._ocaMap.put(e,t)},Jn.prototype.interfaces_=function(){return[]},Jn.prototype.getClass=function(){return Jn};var Wn=function(){};Wn.prototype.processIntersections=function(t,e,n,r){},Wn.prototype.isDone=function(){},Wn.prototype.interfaces_=function(){return[]},Wn.prototype.getClass=function(){return Wn};var Hn=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Hn.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Hn.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},Hn.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Hn.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Hn.prototype.getLineIntersector=function(){return this._li},Hn.prototype.hasProperIntersection=function(){return this._hasProper},Hn.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Hn.prototype.hasIntersection=function(){return this._hasIntersection},Hn.prototype.isDone=function(){return!1},Hn.prototype.hasInteriorIntersection=function(){return this._hasInterior},Hn.prototype.interfaces_=function(){return[Wn]},Hn.prototype.getClass=function(){return Hn},Hn.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var $n=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new S(t),this.segmentIndex=e,this.dist=n};$n.prototype.getSegmentIndex=function(){return this.segmentIndex},$n.prototype.getCoordinate=function(){return this.coord},$n.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},$n.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},$n.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},$n.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},$n.prototype.getDistance=function(){return this.dist},$n.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},$n.prototype.interfaces_=function(){return[x]},$n.prototype.getClass=function(){return $n};var Kn=function(){this._nodeMap=new f,this.edge=null;var t=arguments[0];this.edge=t};Kn.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Kn.prototype.iterator=function(){return this._nodeMap.values().iterator()},Kn.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},Kn.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Kn.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new S(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this.edge.pts[s];return i&&(o[a]=e.coord),new nr(o,new Me(this.edge._label))},Kn.prototype.add=function(t,e,n){var r=new $n(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},Kn.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},Kn.prototype.interfaces_=function(){return[]},Kn.prototype.getClass=function(){return Kn};var Zn=function(){};Zn.prototype.getChainStartIndices=function(t){var e=0,n=new Et;n.add(new R(e));do{var r=this.findChainEnd(t,e);n.add(new R(r)),e=r}while(e<t.length-1);return Zn.toIntArray(n)},Zn.prototype.findChainEnd=function(t,e){for(var n=Be.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&Be.quadrant(t[r-1],t[r])===n;)r++;return r-1},Zn.prototype.interfaces_=function(){return[]},Zn.prototype.getClass=function(){return Zn},Zn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Qn=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new X,this.env2=new X;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Zn;this.startIndex=e.getChainStartIndices(this.pts)};Qn.prototype.getCoordinates=function(){return this.pts},Qn.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},Qn.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},Qn.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],u=arguments[4],c=arguments[5],l=this.pts[i],f=this.pts[o],p=a.pts[s],h=a.pts[u];if(o-i==1&&u-s==1)return c.addIntersections(this.e,i,a.e,s),null;if(this.env1.init(l,f),this.env2.init(p,h),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),g=Math.trunc((s+u)/2);i<d&&(s<g&&this.computeIntersectsForChain(i,d,a,s,g,c),g<u&&this.computeIntersectsForChain(i,d,a,g,u,c)),d<o&&(s<g&&this.computeIntersectsForChain(d,o,a,s,g,c),g<u&&this.computeIntersectsForChain(d,o,a,g,u,c))}},Qn.prototype.getStartIndexes=function(){return this.startIndex},Qn.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},Qn.prototype.interfaces_=function(){return[]},Qn.prototype.getClass=function(){return Qn};var tr=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},er={NULL_VALUE:{configurable:!0}};tr.prototype.getDepth=function(t,e){return this._depth[t][e]},tr.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},tr.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==tr.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===tr.NULL_VALUE}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._depth[r][i]===tr.NULL_VALUE}},tr.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var r=0;this._depth[t][n]>e&&(r=1),this._depth[t][n]=r}}},tr.prototype.getDelta=function(t){return this._depth[t][Ie.RIGHT]-this._depth[t][Ie.LEFT]},tr.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?A.EXTERIOR:A.INTERIOR},tr.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},tr.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var r=t.getLocation(e,n);r!==A.EXTERIOR&&r!==A.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=tr.depthAtLocation(r):this._depth[e][n]+=tr.depthAtLocation(r))}else if(3===arguments.length){var i=arguments[0],o=arguments[1];arguments[2]===A.INTERIOR&&this._depth[i][o]++}},tr.prototype.interfaces_=function(){return[]},tr.prototype.getClass=function(){return tr},tr.depthAtLocation=function(t){return t===A.EXTERIOR?0:t===A.INTERIOR?1:tr.NULL_VALUE},er.NULL_VALUE.get=function(){return-1},Object.defineProperties(tr,er);var nr=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new Kn(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new tr,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Me.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,o=this.pts.length,a=0;a<this.pts.length;a++)if(this.pts[a].equals2D(n.pts[a])||(r=!1),this.pts[a].equals2D(n.pts[--o])||(i=!1),!r&&!i)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new Qn(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new X;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,r){var i=new S(t.getIntersection(r)),o=e,a=t.getEdgeDistance(n,r),s=o+1;if(s<this.pts.length){var u=this.pts[s];i.equals2D(u)&&(o=s,a=0)}this.eiList.add(i,o,a)},e.prototype.toString=function(){var t=new L;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,Ie.ON),e.getLocation(1,Ie.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Ie.LEFT),e.getLocation(1,Ie.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Ie.RIGHT),e.getLocation(1,Ie.RIGHT),2))},e}(Fe),rr=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Jn,this._bufParams=t||null};rr.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},rr.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Me(t.getLabel())).flip(),n.merge(r);var i=rr.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(rr.depthDelta(t.getLabel()))},rr.prototype.buildSubgraphs=function(t,e){for(var n=new Et,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),a=new Dn(n).getDepth(o);i.computeDepth(a),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},rr.prototype.createSubgraphs=function(t){for(var e=new Et,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new Pe;i.create(r),e.add(i)}}return Qe.sort(e,Qe.reverseOrder()),e},rr.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},rr.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new wn,n=new it;return n.setPrecisionModel(t),e.setSegmentIntersector(new Hn(n)),e},rr.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new Rn(n,this._bufParams),i=new Bn(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new Ve(new Yn),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),a=new Ye(this._geomFact);this.buildSubgraphs(o,a);var s=a.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)},rr.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=i.getData(),s=new nr(i.getCoordinates(),new Me(a));this.insertUniqueEdge(s)}}},rr.prototype.setNoder=function(t){this._workingNoder=t},rr.prototype.interfaces_=function(){return[]},rr.prototype.getClass=function(){return rr},rr.depthDelta=function(t){var e=t.getLocation(0,Ie.LEFT),n=t.getLocation(0,Ie.RIGHT);return e===A.INTERIOR&&n===A.EXTERIOR?1:e===A.EXTERIOR&&n===A.INTERIOR?-1:0},rr.convertSegStrings=function(t){for(var e=new me,n=new Et;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var ir=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};ir.prototype.rescale=function(){if(P(arguments[0],bt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],r=0;r<n.length;r++)n[r].x=n[r].x/this._scaleFactor+this._offsetX,n[r].y=n[r].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&V.out.println(n)}},ir.prototype.scale=function(){if(P(arguments[0],bt)){for(var t=arguments[0],e=new Et,n=t.iterator();n.hasNext();){var r=n.next();e.add(new dn(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var i=arguments[0],o=new Array(i.length).fill(null),a=0;a<i.length;a++)o[a]=new S(Math.round((i[a].x-this._offsetX)*this._scaleFactor),Math.round((i[a].y-this._offsetY)*this._scaleFactor),i[a].z);return Ct.removeRepeatedPoints(o)}},ir.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},ir.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},ir.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},ir.prototype.interfaces_=function(){return[bn]},ir.prototype.getClass=function(){return ir};var or=function(){this._li=new it,this._segStrings=null;var t=arguments[0];this._segStrings=t},ar={fact:{configurable:!0}};or.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var i=r.next().getCoordinates(),o=1;o<i.length-1;o++)if(i[o].equals(n))throw new Q("found endpt/interior pt intersection at index "+o+" :pt "+n)},or.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],a=i.getCoordinates(),s=o.getCoordinates(),u=0;u<a.length-1;u++)for(var c=0;c<s.length-1;c++)this.checkInteriorIntersections(i,u,o,c);else if(4===arguments.length){var l=arguments[0],f=arguments[1],p=arguments[2],h=arguments[3];if(l===p&&f===h)return null;var d=l.getCoordinates()[f],g=l.getCoordinates()[f+1],y=p.getCoordinates()[h],m=p.getCoordinates()[h+1];if(this._li.computeIntersection(d,g,y,m),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,g)||this.hasInteriorIntersection(this._li,y,m)))throw new Q("found non-noded intersection at "+d+"-"+g+" and "+y+"-"+m)}},or.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},or.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),r=0;r<n.length-2;r++)this.checkCollapse(n[r],n[r+1],n[r+2])},or.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},or.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new Q("found non-noded collapse at "+or.fact.createLineString([t,e,n]))},or.prototype.interfaces_=function(){return[]},or.prototype.getClass=function(){return or},ar.fact.get=function(){return new me},Object.defineProperties(or,ar);var sr=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new v("Scale factor must be non-zero");1!==e&&(this._pt=new S(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new S,this._p1Scaled=new S),this.initCorners(this._pt)},ur={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};sr.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),a=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(t,e);return et.isTrue(!(a&&s),"Found bad envelope test"),s},sr.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new S(this._maxx,this._maxy),this._corner[1]=new S(this._minx,this._maxy),this._corner[2]=new S(this._minx,this._miny),this._corner[3]=new S(this._maxx,this._miny)},sr.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},sr.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},sr.prototype.getCoordinate=function(){return this._originalPt},sr.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},sr.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=sr.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new X(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},sr.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},sr.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&r||t.equals(this._pt)||e.equals(this._pt)))))},sr.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},sr.prototype.interfaces_=function(){return[]},sr.prototype.getClass=function(){return sr},ur.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(sr,ur);var cr=function(){this.tempEnv1=new X,this.selectedSegment=new gn};cr.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},cr.prototype.interfaces_=function(){return[]},cr.prototype.getClass=function(){return cr};var lr=function(){this._index=null;var t=arguments[0];this._index=t},fr={HotPixelSnapAction:{configurable:!0}};lr.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new pr(e,n,r);return this._index.query(i,{interfaces_:function(){return[He]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},lr.prototype.interfaces_=function(){return[]},lr.prototype.getClass=function(){return lr},fr.HotPixelSnapAction.get=function(){return pr},Object.defineProperties(lr,fr);var pr=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[0],n=arguments[1],r=e.getContext();if(null!==this._parentEdge&&r===this._parentEdge&&n===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(r,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(cr),hr=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new Et};hr.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},hr.prototype.isDone=function(){return!1},hr.prototype.getInteriorIntersections=function(){return this._interiorIntersections},hr.prototype.interfaces_=function(){return[Wn]},hr.prototype.getClass=function(){return hr};var dr=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new it,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};dr.prototype.checkCorrectness=function(t){var e=dn.getNodedSubstrings(t),n=new or(e);try{n.checkValid()}catch(t){if(!(t instanceof z))throw t;t.printStackTrace()}},dr.prototype.getNodedSubstrings=function(){return dn.getNodedSubstrings(this._nodedSegStrings)},dr.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},dr.prototype.findInteriorIntersections=function(t,e){var n=new hr(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},dr.prototype.computeVertexSnaps=function(){if(P(arguments[0],bt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof dn)for(var n=arguments[0],r=n.getCoordinates(),i=0;i<r.length;i++){var o=new sr(r[i],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,i)&&n.addIntersection(r[i],i)}},dr.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new wn,this._pointSnapper=new lr(this._noder.getIndex()),this.snapRound(t,this._li)},dr.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=new sr(n,this._scaleFactor,this._li);this._pointSnapper.snap(r)}},dr.prototype.interfaces_=function(){return[bn]},dr.prototype.getClass=function(){return dr};var gr=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Sn,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},yr={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};gr.prototype.bufferFixedPrecision=function(t){var e=new ir(new dr(new he(1)),t.getScale()),n=new rr(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},gr.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=gr.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Ae))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=gr.precisionScaleFactor(this._argGeom,this._distance,n),i=new he(r);this.bufferFixedPrecision(i)}},gr.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===he.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},gr.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},gr.prototype.bufferOriginalPrecision=function(){try{var t=new rr(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof Q))throw t;this._saveException=t}},gr.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},gr.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},gr.prototype.interfaces_=function(){return[]},gr.prototype.getClass=function(){return gr},gr.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new gr(t).getResultGeometry(e)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof lt&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1],i=arguments[2],o=new gr(n);return o.setQuadrantSegments(i),o.getResultGeometry(r)}if(arguments[2]instanceof Sn&&arguments[0]instanceof lt&&"number"==typeof arguments[1]){var a=arguments[0],s=arguments[1],u=arguments[2];return new gr(a,u).getResultGeometry(s)}}else if(4===arguments.length){var c=arguments[0],l=arguments[1],f=arguments[2],p=arguments[3],h=new gr(c);return h.setQuadrantSegments(f),h.setEndCapStyle(p),h.getResultGeometry(l)}},gr.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=T.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},yr.CAP_ROUND.get=function(){return Sn.CAP_ROUND},yr.CAP_BUTT.get=function(){return Sn.CAP_FLAT},yr.CAP_FLAT.get=function(){return Sn.CAP_FLAT},yr.CAP_SQUARE.get=function(){return Sn.CAP_SQUARE},yr.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(gr,yr);var mr=function(){this._pt=[new S,new S],this._distance=_.NaN,this._isNull=!0};mr.prototype.getCoordinates=function(){return this._pt},mr.prototype.getCoordinate=function(t){return this._pt[t]},mr.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},mr.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},mr.prototype.getDistance=function(){return this._distance},mr.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},mr.prototype.interfaces_=function(){return[]},mr.prototype.getClass=function(){return mr};var vr=function(){};vr.prototype.interfaces_=function(){return[]},vr.prototype.getClass=function(){return vr},vr.computeDistance=function(){if(arguments[2]instanceof mr&&arguments[0]instanceof Ht&&arguments[1]instanceof S)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=t.getCoordinates(),i=new gn,o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var a=i.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof mr&&arguments[0]instanceof Qt&&arguments[1]instanceof S){var s=arguments[0],u=arguments[1],c=arguments[2];vr.computeDistance(s.getExteriorRing(),u,c);for(var l=0;l<s.getNumInteriorRing();l++)vr.computeDistance(s.getInteriorRingN(l),u,c)}else if(arguments[2]instanceof mr&&arguments[0]instanceof lt&&arguments[1]instanceof S){var f=arguments[0],p=arguments[1],h=arguments[2];if(f instanceof Ht)vr.computeDistance(f,p,h);else if(f instanceof Qt)vr.computeDistance(f,p,h);else if(f instanceof zt)for(var d=f,g=0;g<d.getNumGeometries();g++){var y=d.getGeometryN(g);vr.computeDistance(y,p,h)}else h.setMinimum(f.getCoordinate(),p)}else if(arguments[2]instanceof mr&&arguments[0]instanceof gn&&arguments[1]instanceof S){var m=arguments[0],v=arguments[1],_=arguments[2],b=m.closestPoint(v);_.setMinimum(b,v)}};var _r=function(t){this._maxPtDist=new mr,this._inputGeom=t||null},br={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};_r.prototype.computeMaxMidpointDistance=function(t){var e=new wr(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},_r.prototype.computeMaxVertexDistance=function(t){var e=new xr(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},_r.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},_r.prototype.getDistancePoints=function(){return this._maxPtDist},_r.prototype.interfaces_=function(){return[]},_r.prototype.getClass=function(){return _r},br.MaxPointDistanceFilter.get=function(){return xr},br.MaxMidpointDistanceFilter.get=function(){return wr},Object.defineProperties(_r,br);var xr=function(t){this._maxPtDist=new mr,this._minPtDist=new mr,this._geom=t||null};xr.prototype.filter=function(t){this._minPtDist.initialize(),vr.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},xr.prototype.getMaxPointDistance=function(){return this._maxPtDist},xr.prototype.interfaces_=function(){return[ht]},xr.prototype.getClass=function(){return xr};var wr=function(t){this._maxPtDist=new mr,this._minPtDist=new mr,this._geom=t||null};wr.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new S((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),vr.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},wr.prototype.isDone=function(){return!1},wr.prototype.isGeometryChanged=function(){return!1},wr.prototype.getMaxPointDistance=function(){return this._maxPtDist},wr.prototype.interfaces_=function(){return[Ut]},wr.prototype.getClass=function(){return wr};var Er=function(t){this._comps=t||null};Er.prototype.filter=function(t){t instanceof Qt&&this._comps.add(t)},Er.prototype.interfaces_=function(){return[Gt]},Er.prototype.getClass=function(){return Er},Er.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return Er.getPolygons(t,new Et)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Qt?n.add(e):e instanceof zt&&e.apply(new Er(n)),n}};var Sr=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};Sr.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof ee){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Ht&&this._lines.add(t)},Sr.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Sr.prototype.interfaces_=function(){return[ct]},Sr.prototype.getClass=function(){return Sr},Sr.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Sr.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Sr.getLines(e,n))}},Sr.getLines=function(){if(1===arguments.length){var t=arguments[0];return Sr.getLines(t,!1)}if(2===arguments.length){if(P(arguments[0],bt)&&P(arguments[1],bt)){for(var e=arguments[0],n=arguments[1],r=e.iterator();r.hasNext();){var i=r.next();Sr.getLines(i,n)}return n}if(arguments[0]instanceof lt&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1],s=new Et;return o.apply(new Sr(s,a)),s}if(arguments[0]instanceof lt&&P(arguments[1],bt)){var u=arguments[0],c=arguments[1];return u instanceof Ht?c.add(u):u.apply(new Sr(c)),c}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&P(arguments[0],bt)&&P(arguments[1],bt)){for(var l=arguments[0],f=arguments[1],p=arguments[2],h=l.iterator();h.hasNext();){var d=h.next();Sr.getLines(d,f,p)}return f}if("boolean"==typeof arguments[2]&&arguments[0]instanceof lt&&P(arguments[1],bt)){var g=arguments[0],y=arguments[1],m=arguments[2];return g.apply(new Sr(y,m)),y}}};var Ir=function(){if(this._boundaryRule=dt.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new v("Rule must be non-null");this._boundaryRule=t}};Ir.prototype.locateInternal=function(){if(arguments[0]instanceof S&&arguments[1]instanceof Qt){var t=arguments[0],e=arguments[1];if(e.isEmpty())return A.EXTERIOR;var n=e.getExteriorRing(),r=this.locateInPolygonRing(t,n);if(r===A.EXTERIOR)return A.EXTERIOR;if(r===A.BOUNDARY)return A.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),a=this.locateInPolygonRing(t,o);if(a===A.INTERIOR)return A.EXTERIOR;if(a===A.BOUNDARY)return A.BOUNDARY}return A.INTERIOR}if(arguments[0]instanceof S&&arguments[1]instanceof Ht){var s=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(s))return A.EXTERIOR;var c=u.getCoordinates();return u.isClosed()||!s.equals(c[0])&&!s.equals(c[c.length-1])?st.isOnLine(s,c)?A.INTERIOR:A.EXTERIOR:A.BOUNDARY}if(arguments[0]instanceof S&&arguments[1]instanceof Kt){var l=arguments[0];return arguments[1].getCoordinate().equals2D(l)?A.INTERIOR:A.EXTERIOR}},Ir.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?st.locatePointInRing(t,e.getCoordinates()):A.EXTERIOR},Ir.prototype.intersects=function(t,e){return this.locate(t,e)!==A.EXTERIOR},Ir.prototype.updateLocationInfo=function(t){t===A.INTERIOR&&(this._isIn=!0),t===A.BOUNDARY&&this._numBoundaries++},Ir.prototype.computeLocation=function(t,e){if(e instanceof Kt&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Ht)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Qt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof qt)for(var n=e,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,i))}else if(e instanceof ne)for(var o=e,a=0;a<o.getNumGeometries();a++){var s=o.getGeometryN(a);this.updateLocationInfo(this.locateInternal(t,s))}else if(e instanceof zt)for(var u=new Un(e);u.hasNext();){var c=u.next();c!==e&&this.computeLocation(t,c)}},Ir.prototype.locate=function(t,e){return e.isEmpty()?A.EXTERIOR:e instanceof Ht||e instanceof Qt?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?A.BOUNDARY:this._numBoundaries>0||this._isIn?A.INTERIOR:A.EXTERIOR)},Ir.prototype.interfaces_=function(){return[]},Ir.prototype.getClass=function(){return Ir};var Cr=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){var e=arguments[0],n=arguments[1];t.call(this,e,t.INSIDE_AREA,n)}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._component=r,this._segIndex=i,this._pt=o}},Nr={INSIDE_AREA:{configurable:!0}};Cr.prototype.isInsideArea=function(){return this._segIndex===Cr.INSIDE_AREA},Cr.prototype.getCoordinate=function(){return this._pt},Cr.prototype.getGeometryComponent=function(){return this._component},Cr.prototype.getSegmentIndex=function(){return this._segIndex},Cr.prototype.interfaces_=function(){return[]},Cr.prototype.getClass=function(){return Cr},Nr.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Cr,Nr);var Ar=function(t){this._pts=t||null};Ar.prototype.filter=function(t){t instanceof Kt&&this._pts.add(t)},Ar.prototype.interfaces_=function(){return[Gt]},Ar.prototype.getClass=function(){return Ar},Ar.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Kt?Qe.singletonList(t):Ar.getPoints(t,new Et)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Kt?n.add(e):e instanceof zt&&e.apply(new Ar(n)),n}};var Or=function(){this._locations=null;var t=arguments[0];this._locations=t};Or.prototype.filter=function(t){(t instanceof Kt||t instanceof Ht||t instanceof Qt)&&this._locations.add(new Cr(t,0,t.getCoordinate()))},Or.prototype.interfaces_=function(){return[Gt]},Or.prototype.getClass=function(){return Or},Or.getLocations=function(t){var e=new Et;return t.apply(new Or(e)),e};var Pr=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Ir,this._minDistanceLocation=null,this._minDistance=_.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};Pr.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=1-e,i=Er.getPolygons(this._geom[e]);if(i.size()>0){var o=Or.getLocations(this._geom[r]);if(this.computeContainmentDistance(o,i,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&P(arguments[0],wt)&&P(arguments[1],wt)){for(var a=arguments[0],s=arguments[1],u=arguments[2],c=0;c<a.size();c++)for(var l=a.get(c),f=0;f<s.size();f++)if(this.computeContainmentDistance(l,s.get(f),u),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Cr&&arguments[1]instanceof Qt){var p=arguments[0],h=arguments[1],d=arguments[2],g=p.getCoordinate();if(A.EXTERIOR!==this._ptLocator.locate(g,h))return this._minDistance=0,d[0]=p,d[1]=new Cr(h,g),null}},Pr.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},Pr.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Sr.getLines(this._geom[0]),n=Sr.getLines(this._geom[1]),r=Ar.getPoints(this._geom[0]),i=Ar.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},Pr.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Pr.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Pr.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Pr.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Ht&&arguments[1]instanceof Kt){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var r=t.getCoordinates(),i=e.getCoordinate(),o=0;o<r.length-1;o++){var a=st.distancePointLine(i,r[o],r[o+1]);if(a<this._minDistance){this._minDistance=a;var s=new gn(r[o],r[o+1]).closestPoint(i);n[0]=new Cr(t,o,s),n[1]=new Cr(e,0,i)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Ht&&arguments[1]instanceof Ht){var u=arguments[0],c=arguments[1],l=arguments[2];if(u.getEnvelopeInternal().distance(c.getEnvelopeInternal())>this._minDistance)return null;for(var f=u.getCoordinates(),p=c.getCoordinates(),h=0;h<f.length-1;h++)for(var d=0;d<p.length-1;d++){var g=st.distanceLineLine(f[h],f[h+1],p[d],p[d+1]);if(g<this._minDistance){this._minDistance=g;var y=new gn(f[h],f[h+1]),m=new gn(p[d],p[d+1]),v=y.closestPoints(m);l[0]=new Cr(u,h,v[0]),l[1]=new Cr(c,d,v[1])}if(this._minDistance<=this._terminateDistance)return null}}},Pr.prototype.computeMinDistancePoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o),s=i.getCoordinate().distance(a.getCoordinate());if(s<this._minDistance&&(this._minDistance=s,n[0]=new Cr(i,0,i.getCoordinate()),n[1]=new Cr(a,0,a.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Pr.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new v("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Pr.prototype.computeMinDistanceLines=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},Pr.prototype.interfaces_=function(){return[]},Pr.prototype.getClass=function(){return Pr},Pr.distance=function(t,e){return new Pr(t,e).distance()},Pr.isWithinDistance=function(t,e,n){return new Pr(t,e,n).distance()<=n},Pr.nearestPoints=function(t,e){return new Pr(t,e).nearestPoints()};var Tr=function(){this._pt=[new S,new S],this._distance=_.NaN,this._isNull=!0};Tr.prototype.getCoordinates=function(){return this._pt},Tr.prototype.getCoordinate=function(t){return this._pt[t]},Tr.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Tr.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},Tr.prototype.toString=function(){return Z.toLineString(this._pt[0],this._pt[1])},Tr.prototype.getDistance=function(){return this._distance},Tr.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Tr.prototype.interfaces_=function(){return[]},Tr.prototype.getClass=function(){return Tr};var Mr=function(){};Mr.prototype.interfaces_=function(){return[]},Mr.prototype.getClass=function(){return Mr},Mr.computeDistance=function(){if(arguments[2]instanceof Tr&&arguments[0]instanceof Ht&&arguments[1]instanceof S)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new gn,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var a=r.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof Tr&&arguments[0]instanceof Qt&&arguments[1]instanceof S){var s=arguments[0],u=arguments[1],c=arguments[2];Mr.computeDistance(s.getExteriorRing(),u,c);for(var l=0;l<s.getNumInteriorRing();l++)Mr.computeDistance(s.getInteriorRingN(l),u,c)}else if(arguments[2]instanceof Tr&&arguments[0]instanceof lt&&arguments[1]instanceof S){var f=arguments[0],p=arguments[1],h=arguments[2];if(f instanceof Ht)Mr.computeDistance(f,p,h);else if(f instanceof Qt)Mr.computeDistance(f,p,h);else if(f instanceof zt)for(var d=f,g=0;g<d.getNumGeometries();g++){var y=d.getGeometryN(g);Mr.computeDistance(y,p,h)}else h.setMinimum(f.getCoordinate(),p)}else if(arguments[2]instanceof Tr&&arguments[0]instanceof gn&&arguments[1]instanceof S){var m=arguments[0],v=arguments[1],_=arguments[2],b=m.closestPoint(v);_.setMinimum(b,v)}};var Lr=function(){this._g0=null,this._g1=null,this._ptDist=new Tr,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},Rr={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Lr.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Lr.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new v("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Lr.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Lr.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Lr.prototype.computeOrientedDistance=function(t,e,n){var r=new Dr(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new Fr(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},Lr.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Lr.prototype.interfaces_=function(){return[]},Lr.prototype.getClass=function(){return Lr},Lr.distance=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Lr(t,e).distance()}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=new Lr(n,r);return o.setDensifyFraction(i),o.distance()}},Rr.MaxPointDistanceFilter.get=function(){return Dr},Rr.MaxDensifiedByFractionDistanceFilter.get=function(){return Fr},Object.defineProperties(Lr,Rr);var Dr=function(){this._maxPtDist=new Tr,this._minPtDist=new Tr,this._euclideanDist=new Mr,this._geom=null;var t=arguments[0];this._geom=t};Dr.prototype.filter=function(t){this._minPtDist.initialize(),Mr.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Dr.prototype.getMaxPointDistance=function(){return this._maxPtDist},Dr.prototype.interfaces_=function(){return[ht]},Dr.prototype.getClass=function(){return Dr};var Fr=function(){this._maxPtDist=new Tr,this._minPtDist=new Tr,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};Fr.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=(r.x-n.x)/this._numSubSegs,o=(r.y-n.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var s=n.x+a*i,u=n.y+a*o,c=new S(s,u);this._minPtDist.initialize(),Mr.computeDistance(this._geom,c,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Fr.prototype.isDone=function(){return!1},Fr.prototype.isGeometryChanged=function(){return!1},Fr.prototype.getMaxPointDistance=function(){return this._maxPtDist},Fr.prototype.interfaces_=function(){return[Ut]},Fr.prototype.getClass=function(){return Fr};var kr=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},jr={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};kr.prototype.checkMaximumDistance=function(t,e,n){var r=new Lr(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Z.toLineString(i[0],i[1])+")"}},kr.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=kr.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),kr.VERBOSE&&V.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},kr.prototype.checkNegativeValid=function(){if(!(this._input instanceof Qt||this._input instanceof ne||this._input instanceof zt))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},kr.prototype.getErrorIndicator=function(){return this._errorIndicator},kr.prototype.checkMinimumDistance=function(t,e,n){var r=new Pr(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Z.toLineString(i[0],i[1])+" )"}},kr.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},kr.prototype.getErrorLocation=function(){return this._errorLocation},kr.prototype.getPolygonLines=function(t){for(var e=new Et,n=new Sr(e),r=Er.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},kr.prototype.getErrorMessage=function(){return this._errMsg},kr.prototype.interfaces_=function(){return[]},kr.prototype.getClass=function(){return kr},jr.VERBOSE.get=function(){return!1},jr.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(kr,jr);var Br=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},Gr={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Br.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Br.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Br.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new X(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new X(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},Br.prototype.checkDistance=function(){var t=new kr(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},Br.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Br.prototype.checkPolygonal=function(){this._result instanceof Qt||this._result instanceof ne||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Br.prototype.getErrorIndicator=function(){return this._errorIndicator},Br.prototype.getErrorLocation=function(){return this._errorLocation},Br.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Br.prototype.report=function(t){if(!Br.VERBOSE)return null;V.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},Br.prototype.getErrorMessage=function(){return this._errorMsg},Br.prototype.interfaces_=function(){return[]},Br.prototype.getClass=function(){return Br},Br.isValidMsg=function(t,e,n){var r=new Br(t,e,n);return r.isValid()?null:r.getErrorMessage()},Br.isValid=function(t,e,n){return!!new Br(t,e,n).isValid()},Gr.VERBOSE.get=function(){return!1},Gr.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Br,Gr);var Ur=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Ur.prototype.getCoordinates=function(){return this._pts},Ur.prototype.size=function(){return this._pts.length},Ur.prototype.getCoordinate=function(t){return this._pts[t]},Ur.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Ur.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:fn.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Ur.prototype.setData=function(t){this._data=t},Ur.prototype.getData=function(){return this._data},Ur.prototype.toString=function(){return Z.toLineString(new ue(this._pts))},Ur.prototype.interfaces_=function(){return[pn]},Ur.prototype.getClass=function(){return Ur};var zr=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new Et,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};zr.prototype.getInteriorIntersection=function(){return this._interiorIntersection},zr.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},zr.prototype.getIntersectionSegments=function(){return this._intSegments},zr.prototype.count=function(){return this._intersectionCount},zr.prototype.getIntersections=function(){return this._intersections},zr.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},zr.prototype.setKeepIntersections=function(t){this._keepIntersections=t},zr.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=a,this._intSegments[3]=s,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},zr.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},zr.prototype.hasIntersection=function(){return null!==this._interiorIntersection},zr.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},zr.prototype.interfaces_=function(){return[Wn]},zr.prototype.getClass=function(){return zr},zr.createAllIntersectionsFinder=function(t){var e=new zr(t);return e.setFindAllIntersections(!0),e},zr.createAnyIntersectionFinder=function(t){return new zr(t)},zr.createIntersectionCounter=function(t){var e=new zr(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var qr=function(){this._li=new it,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};qr.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},qr.prototype.getIntersections=function(){return this._segInt.getIntersections()},qr.prototype.isValid=function(){return this.execute(),this._isValid},qr.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},qr.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new zr(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new wn;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},qr.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Ae(this.getErrorMessage(),this._segInt.getInteriorIntersection())},qr.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Z.toLineString(t[0],t[1])+" and "+Z.toLineString(t[2],t[3])},qr.prototype.interfaces_=function(){return[]},qr.prototype.getClass=function(){return qr},qr.computeIntersections=function(t){var e=new qr(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var Vr=function t(){this._nv=null;var e=arguments[0];this._nv=new qr(t.toSegmentStrings(e))};Vr.prototype.checkValid=function(){this._nv.checkValid()},Vr.prototype.interfaces_=function(){return[]},Vr.prototype.getClass=function(){return Vr},Vr.toSegmentStrings=function(t){for(var e=new Et,n=t.iterator();n.hasNext();){var r=n.next();e.add(new Ur(r.getCoordinates(),r))}return e},Vr.checkValid=function(t){new Vr(t).checkValid()};var Yr=function(t){this._mapOp=t};Yr.prototype.map=function(t){for(var e=new Et,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(me.toGeometryArray(e))},Yr.prototype.interfaces_=function(){return[]},Yr.prototype.getClass=function(){return Yr},Yr.map=function(t,e){return new Yr(e).map(t)};var Xr=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new Et,this._resultLineList=new Et;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};Xr.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},Xr.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},Xr.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Xr.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Ci.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},Xr.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},Xr.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Xr.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},Xr.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(et.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Ci.isResultOfOp(r,e)&&e===Ci.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},Xr.prototype.interfaces_=function(){return[]},Xr.prototype.getClass=function(){return Xr};var Jr=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new Et;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Jr.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},Jr.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==Ci.INTERSECTION)){var r=n.getLabel();Ci.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},Jr.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Jr.prototype.interfaces_=function(){return[]},Jr.prototype.getClass=function(){return Jr};var Wr=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Wr.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Wr.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof ee&&!r.isEmpty()||(n=!1);for(var i=new Et,o=0;o<t.getNumInteriorRing();o++){var a=this.transformLinearRing(t.getInteriorRingN(o),t);null===a||a.isEmpty()||(a instanceof ee||(n=!1),i.add(a))}if(n)return this._factory.createPolygon(r,i.toArray([]));var s=new Et;return null!==r&&s.add(r),s.addAll(i),this._factory.buildGeometry(s)},Wr.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Wr.prototype.getInputGeometry=function(){return this._inputGeom},Wr.prototype.transformMultiLineString=function(t,e){for(var n=new Et,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Wr.prototype.transformCoordinates=function(t,e){return this.copy(t)},Wr.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Wr.prototype.transformMultiPoint=function(t,e){for(var n=new Et,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Wr.prototype.transformMultiPolygon=function(t,e){for(var n=new Et,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Wr.prototype.copy=function(t){return t.copy()},Wr.prototype.transformGeometryCollection=function(t,e){for(var n=new Et,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(me.toGeometryArray(n)):this._factory.buildGeometry(n)},Wr.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Kt)return this.transformPoint(t,null);if(t instanceof te)return this.transformMultiPoint(t,null);if(t instanceof ee)return this.transformLinearRing(t,null);if(t instanceof Ht)return this.transformLineString(t,null);if(t instanceof qt)return this.transformMultiLineString(t,null);if(t instanceof Qt)return this.transformPolygon(t,null);if(t instanceof ne)return this.transformMultiPolygon(t,null);if(t instanceof zt)return this.transformGeometryCollection(t,null);throw new v("Unknown Geometry subtype: "+t.getClass().getName())},Wr.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Wr.prototype.interfaces_=function(){return[]},Wr.prototype.getClass=function(){return Wr};var Hr=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new gn,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Ht&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];t.call(this,e.getCoordinates(),n)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var r=arguments[0],i=arguments[1];this._srcPts=r,this._isClosed=t.isClosed(r),this._snapTolerance=i}};Hr.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new S(o)),0===r&&this._isClosed&&t.set(t.size()-1,new S(o)))}},Hr.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},Hr.prototype.snapTo=function(t){var e=new It(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Hr.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new S(i),!1)}},Hr.prototype.findSegmentIndexToSnap=function(t,e){for(var n=_.MAX_VALUE,r=-1,i=0;i<e.size()-1;i++){if(this._seg.p0=e.get(i),this._seg.p1=e.get(i+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,r=i)}return r},Hr.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Hr.prototype.interfaces_=function(){return[]},Hr.prototype.getClass=function(){return Hr},Hr.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var $r=function(t){this._srcGeom=t||null},Kr={SNAP_PRECISION_FACTOR:{configurable:!0}};$r.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new Zr(e,n).transform(this._srcGeom)},$r.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new Zr(t,n,!0).transform(this._srcGeom),i=r;return e&&P(i,Zt)&&(i=r.buffer(0)),i},$r.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},$r.prototype.extractTargetCoordinates=function(t){for(var e=new h,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},$r.prototype.computeMinimumSegmentLength=function(t){for(var e=_.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},$r.prototype.interfaces_=function(){return[]},$r.prototype.getClass=function(){return $r},$r.snap=function(t,e,n){var r=new Array(2).fill(null),i=new $r(t);r[0]=i.snapTo(e,n);var o=new $r(e);return r[1]=o.snapTo(r[0],n),r},$r.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=$r.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===he.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min($r.computeOverlaySnapTolerance(i),$r.computeOverlaySnapTolerance(o))}},$r.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*$r.SNAP_PRECISION_FACTOR},$r.snapToSelf=function(t,e,n){return new $r(t).snapToSelf(e,n)},Kr.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties($r,Kr);var Zr=function(t){function e(e,n,r){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new Hr(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Wr),Qr=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};Qr.prototype.getCommon=function(){return _.longBitsToDouble(this._commonBits)},Qr.prototype.add=function(t){var e=_.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=Qr.signExpBits(this._commonBits),this._isFirst=!1,null):Qr.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=Qr.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=Qr.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},Qr.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=_.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+_.toBinaryString(t),r=n.substring(n.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]"}},Qr.prototype.interfaces_=function(){return[]},Qr.prototype.getClass=function(){return Qr},Qr.getBit=function(t,e){return 0!=(t&1<<e)?1:0},Qr.signExpBits=function(t){return t>>52},Qr.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},Qr.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if(Qr.getBit(t,r)!==Qr.getBit(e,r))return n;n++}return 52};var ti=function(){this._commonCoord=null,this._ccFilter=new ni},ei={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};ti.prototype.addCommonBits=function(t){var e=new ri(this._commonCoord);t.apply(e),t.geometryChanged()},ti.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new S(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new ri(e);return t.apply(n),t.geometryChanged(),t},ti.prototype.getCommonCoordinate=function(){return this._commonCoord},ti.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},ti.prototype.interfaces_=function(){return[]},ti.prototype.getClass=function(){return ti},ei.CommonCoordinateFilter.get=function(){return ni},ei.Translater.get=function(){return ri},Object.defineProperties(ti,ei);var ni=function(){this._commonBitsX=new Qr,this._commonBitsY=new Qr};ni.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},ni.prototype.getCommonCoordinate=function(){return new S(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},ni.prototype.interfaces_=function(){return[ht]},ni.prototype.getClass=function(){return ni};var ri=function(){this.trans=null;var t=arguments[0];this.trans=t};ri.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},ri.prototype.isDone=function(){return!1},ri.prototype.isGeometryChanged=function(){return!0},ri.prototype.interfaces_=function(){return[Ut]},ri.prototype.getClass=function(){return ri};var ii=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};ii.prototype.selfSnap=function(t){return new $r(t).snapTo(t,this._snapTolerance)},ii.prototype.removeCommonBits=function(t){this._cbr=new ti,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},ii.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},ii.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Ci.overlayOp(e[0],e[1],t);return this.prepareResult(n)},ii.prototype.checkValid=function(t){t.isValid()||V.out.println("Snapped geometry is invalid")},ii.prototype.computeSnapTolerance=function(){this._snapTolerance=$r.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},ii.prototype.snap=function(t){var e=this.removeCommonBits(t);return $r.snap(e[0],e[1],this._snapTolerance)},ii.prototype.interfaces_=function(){return[]},ii.prototype.getClass=function(){return ii},ii.overlayOp=function(t,e,n){return new ii(t,e).getResultGeometry(n)},ii.union=function(t,e){return ii.overlayOp(t,e,Ci.UNION)},ii.intersection=function(t,e){return ii.overlayOp(t,e,Ci.INTERSECTION)},ii.symDifference=function(t,e){return ii.overlayOp(t,e,Ci.SYMDIFFERENCE)},ii.difference=function(t,e){return ii.overlayOp(t,e,Ci.DIFFERENCE)};var oi=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};oi.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=Ci.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof Q))throw t;r=t}if(!n)try{e=ii.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof Q?r:t}return e},oi.prototype.interfaces_=function(){return[]},oi.prototype.getClass=function(){return oi},oi.overlayOp=function(t,e,n){return new oi(t,e).getResultGeometry(n)},oi.union=function(t,e){return oi.overlayOp(t,e,Ci.UNION)},oi.intersection=function(t,e){return oi.overlayOp(t,e,Ci.INTERSECTION)},oi.symDifference=function(t,e){return oi.overlayOp(t,e,Ci.SYMDIFFERENCE)},oi.difference=function(t,e){return oi.overlayOp(t,e,Ci.DIFFERENCE)};var ai=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};ai.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},ai.prototype.interfaces_=function(){return[]},ai.prototype.getClass=function(){return ai};var si=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},ui={INSERT:{configurable:!0},DELETE:{configurable:!0}};si.prototype.isDelete=function(){return this._eventType===si.DELETE},si.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},si.prototype.getObject=function(){return this._obj},si.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},si.prototype.getInsertEvent=function(){return this._insertEvent},si.prototype.isInsert=function(){return this._eventType===si.INSERT},si.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},si.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},si.prototype.interfaces_=function(){return[x]},si.prototype.getClass=function(){return si},ui.INSERT.get=function(){return 1},ui.DELETE.get=function(){return 2},Object.defineProperties(si,ui);var ci=function(){};ci.prototype.interfaces_=function(){return[]},ci.prototype.getClass=function(){return ci};var li=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};li.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(li.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},li.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},li.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},li.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},li.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},li.prototype.hasProperIntersection=function(){return this._hasProper},li.prototype.hasIntersection=function(){return this._hasIntersection},li.prototype.isDone=function(){return this._isDone},li.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},li.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},li.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},li.prototype.interfaces_=function(){return[]},li.prototype.getClass=function(){return li},li.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var fi=function(t){function e(){t.call(this),this.events=new Et,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){Qe.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof li&&P(arguments[0],wt)&&P(arguments[1],wt)){var r=arguments[0],i=arguments[1],o=arguments[2];this.addEdges(r,r),this.addEdges(i,i),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&P(arguments[0],wt)&&arguments[1]instanceof li){var a=arguments[0],s=arguments[1];arguments[2]?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(s)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new ai(n,i),a=new si(e,n.getMinX(i),o);this.events.add(a),this.events.add(new si(n.getMaxX(i),a))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var a=this.events.get(o);if(a.isInsert()){var s=a.getObject();n.isSameLabel(a)||(i.computeIntersections(s,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();){var o=i.next();this.addEdge(o,r)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ci),pi=function(){this._min=_.POSITIVE_INFINITY,this._max=_.NEGATIVE_INFINITY},hi={NodeComparator:{configurable:!0}};pi.prototype.getMin=function(){return this._min},pi.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},pi.prototype.getMax=function(){return this._max},pi.prototype.toString=function(){return Z.toLineString(new S(this._min,0),new S(this._max,0))},pi.prototype.interfaces_=function(){return[]},pi.prototype.getClass=function(){return pi},hi.NodeComparator.get=function(){return di},Object.defineProperties(pi,hi);var di=function(){};di.prototype.compare=function(t,e){var n=t,r=e,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0},di.prototype.interfaces_=function(){return[E]},di.prototype.getClass=function(){return di};var gi=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],r=arguments[2];this._min=e,this._max=n,this._item=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(pi),yi=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(pi),mi=function(){this._leaves=new Et,this._root=null,this._level=0};mi.prototype.buildTree=function(){Qe.sort(this._leaves,new pi.NodeComparator);for(var t=this._leaves,e=null,n=new Et;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},mi.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new gi(t,e,n))},mi.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},mi.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},mi.prototype.printNode=function(t){V.out.println(Z.toLineString(new S(t._min,this._level),new S(t._max,this._level)))},mi.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},mi.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new yi(t.get(n),t.get(n+1));e.add(i)}}},mi.prototype.interfaces_=function(){return[]},mi.prototype.getClass=function(){return mi};var vi=function(){this._items=new Et};vi.prototype.visitItem=function(t){this._items.add(t)},vi.prototype.getItems=function(){return this._items},vi.prototype.interfaces_=function(){return[He]},vi.prototype.getClass=function(){return vi};var _i=function(){this._index=null;var t=arguments[0];if(!P(t,Zt))throw new v("Argument must be Polygonal");this._index=new wi(t)},bi={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};_i.prototype.locate=function(t){var e=new at(t),n=new xi(e);return this._index.query(t.y,t.y,n),e.getLocation()},_i.prototype.interfaces_=function(){return[Gn]},_i.prototype.getClass=function(){return _i},bi.SegmentVisitor.get=function(){return xi},bi.IntervalIndexedGeometry.get=function(){return wi},Object.defineProperties(_i,bi);var xi=function(){this._counter=null;var t=arguments[0];this._counter=t};xi.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},xi.prototype.interfaces_=function(){return[He]},xi.prototype.getClass=function(){return xi};var wi=function(){this._index=new mi;var t=arguments[0];this.init(t)};wi.prototype.init=function(t){for(var e=Sr.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},wi.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new gn(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},wi.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new vi;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}},wi.prototype.interfaces_=function(){return[]},wi.prototype.getClass=function(){return wi};var Ei=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new pe,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Ir,2===arguments.length){var e=arguments[0],n=arguments[1],r=dt.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=r,null!==n&&this.add(n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=a,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var r=this._nodes.addNode(n).getLabel(),i=1;r.getLocation(t,Ie.ON)===A.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);r.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=new li(n,!0,!1);o.setIsDoneIfProperInt(i);var a=this.createEdgeSetIntersector(),s=this._parentGeom instanceof ee||this._parentGeom instanceof Qt||this._parentGeom instanceof ne,u=r||!s;return a.computeIntersections(this._edges,o,u),this.addSelfIntersectionNodes(this._argIndex),o}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var r=new li(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Kt){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,A.INTERIOR)}else if(arguments[0]instanceof S){var e=arguments[0];this.insertPoint(this._argIndex,e,A.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),A.EXTERIOR,A.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,A.INTERIOR,A.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],A.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],A.BOUNDARY)},e.prototype.addLineString=function(t){var e=Ct.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new nr(e,new Me(this._argIndex,A.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),et.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===A.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=Ct.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;st.isCCW(r)&&(i=n,o=e);var a=new nr(r,new Me(this._argIndex,A.BOUNDARY,i,o));this._lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this._argIndex,r[0],A.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new Me(t,n):i.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new fi},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof ne&&(this._useBoundaryDeterminationRule=!1),e instanceof Qt)this.addPolygon(e);else if(e instanceof Ht)this.addLineString(e);else if(e instanceof Kt)this.addPoint(e);else if(e instanceof te)this.addCollection(e);else if(e instanceof qt)this.addCollection(e);else if(e instanceof ne)this.addCollection(e);else{if(!(e instanceof zt))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return P(this._parentGeom,Zt)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new _i(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?A.BOUNDARY:A.INTERIOR},e}(Ve),Si=function(){if(this._li=new it,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Ei(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=dt.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Ei(0,e,r),this._arg[1]=new Ei(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Ei(0,i,a),this._arg[1]=new Ei(1,o,a)}};Si.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Si.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Si.prototype.interfaces_=function(){return[]},Si.prototype.getClass=function(){return Si};var Ii=function(){};Ii.prototype.interfaces_=function(){return[]},Ii.prototype.getClass=function(){return Ii},Ii.map=function(){if(arguments[0]instanceof lt&&P(arguments[1],Ii.MapOp)){for(var t=arguments[0],e=arguments[1],n=new Et,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(P(arguments[0],bt)&&P(arguments[1],Ii.MapOp)){for(var o=arguments[0],a=arguments[1],s=new Et,u=o.iterator();u.hasNext();){var c=u.next(),l=a.map(c);null!==l&&s.add(l)}return s}},Ii.MapOp=function(){};var Ci=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new Ir,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Jn,this._resultPolyList=new Et,this._resultLineList=new Et,this._resultPointList=new Et,this._graph=new Ve(new Yn),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Me(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,r,i){var o=new Et;return o.addAll(t),o.addAll(n),o.addAll(r),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==A.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new Et,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new Et;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Vr.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Ye(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new Xr(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new Jr(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,Ie.RIGHT),i.getLocation(1,Ie.RIGHT),t)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(et.isTrue(!r.isNull(i,Ie.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,Ie.LEFT,r.getLocation(i,Ie.LEFT)),et.isTrue(!r.isNull(i,Ie.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,Ie.RIGHT,r.getLocation(i,Ie.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Si);Ci.overlayOp=function(t,e,n){return new Ci(t,e).getResultGeometry(n)},Ci.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Ci.createEmptyResult(Ci.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Yr.map(t,{interfaces_:function(){return[Ii.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ci.INTERSECTION)},Ci.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Ci.createEmptyResult(Ci.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ci.SYMDIFFERENCE)},Ci.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case Ci.INTERSECTION:o=Math.min(r,i);break;case Ci.UNION:o=Math.max(r,i);break;case Ci.DIFFERENCE:o=r;break;case Ci.SYMDIFFERENCE:o=Math.max(r,i)}return o},Ci.createEmptyResult=function(t,e,n,r){var i=null;switch(Ci.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},Ci.difference=function(t,e){return t.isEmpty()?Ci.createEmptyResult(Ci.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ci.DIFFERENCE))},Ci.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return Ci.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];switch(i===A.BOUNDARY&&(i=A.INTERIOR),o===A.BOUNDARY&&(o=A.INTERIOR),a){case Ci.INTERSECTION:return i===A.INTERIOR&&o===A.INTERIOR;case Ci.UNION:return i===A.INTERIOR||o===A.INTERIOR;case Ci.DIFFERENCE:return i===A.INTERIOR&&o!==A.INTERIOR;case Ci.SYMDIFFERENCE:return i===A.INTERIOR&&o!==A.INTERIOR||i!==A.INTERIOR&&o===A.INTERIOR}return!1}},Ci.INTERSECTION=1,Ci.UNION=2,Ci.DIFFERENCE=3,Ci.SYMDIFFERENCE=4;var Ni=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Ir,this._seg=new gn;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Ni.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),r=0;r<n.size()-1;r++)if(n.getCoordinate(r,this._seg.p0),n.getCoordinate(r+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},Ni.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?A.BOUNDARY:this._ptLocator.locate(t,this._g)},Ni.prototype.extractLinework=function(t){var e=new Ai;t.apply(e);var n=e.getLinework(),r=me.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},Ni.prototype.interfaces_=function(){return[]},Ni.prototype.getClass=function(){return Ni};var Ai=function(){this._linework=null,this._linework=new Et};Ai.prototype.getLinework=function(){return this._linework},Ai.prototype.filter=function(t){if(t instanceof Qt){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Ai.prototype.interfaces_=function(){return[Gt]},Ai.prototype.getClass=function(){return Ai};var Oi=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Oi.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},Oi.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Oi.prototype.getPoints=function(t){for(var e=new Et,n=Sr.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},Oi.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,a=Math.sqrt(i*i+o*o),s=n*i/a,u=n*o/a,c=(e.x+t.x)/2,l=(e.y+t.y)/2;if(this._doLeft){var f=new S(c-u,l+s);r.add(f)}if(this._doRight){var p=new S(c+u,l-s);r.add(p)}},Oi.prototype.interfaces_=function(){return[]},Oi.prototype.getClass=function(){return Oi};var Pi=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new Et;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new Ni(this._geom[0],this._boundaryDistanceTolerance),new Ni(this._geom[1],this._boundaryDistanceTolerance),new Ni(this._geom[2],this._boundaryDistanceTolerance)]},Ti={TOLERANCE:{configurable:!0}};Pi.prototype.reportResult=function(t,e,n){V.out.println("Overlay result invalid - A:"+A.toLocationSymbol(e[0])+" B:"+A.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+A.toLocationSymbol(e[2]))},Pi.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Pi.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e);if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._location[0]=this._locFinder[0].getLocation(i),this._location[1]=this._locFinder[1].getLocation(i),this._location[2]=this._locFinder[2].getLocation(i),!!Pi.hasLocation(this._location,A.BOUNDARY)||this.isValidResult(r,this._location)}},Pi.prototype.addTestPts=function(t){var e=new Oi(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Pi.prototype.isValidResult=function(t,e){var n=Ci.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===A.INTERIOR);return r||this.reportResult(t,e,n),r},Pi.prototype.getInvalidLocation=function(){return this._invalidLocation},Pi.prototype.interfaces_=function(){return[]},Pi.prototype.getClass=function(){return Pi},Pi.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Pi.computeBoundaryDistanceTolerance=function(t,e){return Math.min($r.computeSizeBasedSnapTolerance(t),$r.computeSizeBasedSnapTolerance(e))},Pi.isValid=function(t,e,n,r){return new Pi(t,e,r).isValid(n)},Ti.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Pi,Ti);var Mi=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Mi.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},Mi.prototype.combine=function(){for(var t=new Et,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Mi.prototype.interfaces_=function(){return[]},Mi.prototype.getClass=function(){return Mi},Mi.combine=function(){if(1===arguments.length){var t=arguments[0];return new Mi(t).combine()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return new Mi(Mi.createList(e,n)).combine()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];return new Mi(Mi.createList(r,i,o)).combine()}},Mi.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Mi.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Et;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=new Et;return a.add(r),a.add(i),a.add(o),a}};var Li=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new Et)},Ri={STRTREE_NODE_CAPACITY:{configurable:!0}};Li.prototype.reduceToGeometries=function(t){for(var e=new Et,n=t.iterator();n.hasNext();){var r=n.next(),i=null;P(r,wt)?i=this.unionTree(r):r instanceof lt&&(i=r),e.add(i)}return e},Li.prototype.extractByEnvelope=function(t,e,n){for(var r=new Et,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},Li.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return Mi.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},Li.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new an(Li.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},Li.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=Li.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(Li.getGeometry(e,n),Li.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),a=this.binaryUnion(e,n,o),s=this.binaryUnion(e,o,r);return this.unionSafe(a,s)}},Li.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},Li.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Li.prototype.unionActual=function(t,e){return Li.restrictToPolygons(t.union(e))},Li.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Li.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new Et,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),a=this.unionActual(i,o);return r.add(a),Mi.combine(r)},Li.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},Li.prototype.interfaces_=function(){return[]},Li.prototype.getClass=function(){return Li},Li.restrictToPolygons=function(t){if(P(t,Zt))return t;var e=Er.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(me.toPolygonArray(e))},Li.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Li.union=function(t){return new Li(t).union()},Ri.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Li,Ri);var Di=function(){};Di.prototype.interfaces_=function(){return[]},Di.prototype.getClass=function(){return Di},Di.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Ci.createEmptyResult(Ci.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ci.UNION)},t.GeoJSONReader=Ee,t.GeoJSONWriter=Se,t.OverlayOp=Ci,t.UnionOp=Di,t.BufferOp=gr,Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e,n){var r=n(1),i=n(14),o=n(8),a=n(70),s=n(71),u=n(24),c=u.get,l=u.enforce,f=String(String).split("String");(t.exports=function(t,e,n,s){var u,c=!!s&&!!s.unsafe,p=!!s&&!!s.enumerable,h=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof e||o(n,"name")||i(n,"name",e),(u=l(n)).source||(u.source=f.join("string"==typeof e?e:""))),t!==r?(c?!h&&t[e]&&(p=!0):delete t[e],p?t[e]=n:i(t,e,n)):p?t[e]=n:a(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||s(this)}))},function(t,e,n){var r=n(7),i=n(2),o=n(8),a=Object.defineProperty,s={},u=function(t){throw t};t.exports=function(t,e){if(o(s,t))return s[t];e||(e={});var n=[][t],c=!!o(e,"ACCESSORS")&&e.ACCESSORS,l=o(e,0)?e[0]:u,f=o(e,1)?e[1]:void 0;return s[t]=!!n&&!i((function(){if(c&&!r)return!0;var t={length:-1};c?a(t,1,{enumerable:!0,get:u}):t[1]=1,n.call(t,l,f)}))}},function(t,e,n){(function(r){var i,o;!function(){var a=Math.abs,s=Math.floor,u=Math.sin,c=Math.cos,l=Math.tan,f=Math.asin,p=Math.acos,h=Math.atan,d=Math.atan2,g=Math.sqrt,y=Math.pow,m=Math.exp,v=Math.log,_=Math.hypot,b=Math.sinh,x=Math.cosh,w=Math.min,E=Math.max,S=Math.PI,I=57.29577951308232,C=.017453292519943295,N=S/4,A=S/2,O=1.5*S,P=2*S,T=2/S,M={last_errno:0,debug_level:0,logger:null},L=["no arguments in initialization list","no options found in 'init' file","invalid init= string","projection not named","unknown projection id","effective eccentricity = 1","unknown unit conversion id","invalid boolean param argument","unknown elliptical parameter name","reciprocal flattening (1/f) = 0","|radius reference latitude| > 90","squared eccentricity < 0","major axis or radius = 0 or not given","latitude or longitude exceeded limits","invalid x or y","improperly formed DMS value","non-convergent inverse meridional dist","non-convergent inverse phi2","acos/asin: |arg| >1+1e-14","tolerance condition error","conic lat_1 = -lat_2","lat_1 >= 90","lat_1 = 0","lat_ts >= 90","no distance between control points","projection not selected to be rotated","W <= 0 or M <= 0","lsat not in 1-5 range","path not in range","h <= 0","k <= 0","lat_0 = 0 or 90 or alpha = 90","lat_1=lat_2 or lat_1=0 or lat_2=90","elliptical usage required","invalid UTM zone number","arg(s) out of range for Tcheby eval","failed to find projection to be rotated","failed to load datum shift file","both n & m must be spec'd and > 0","n <= 0, n > 1 or not specified","lat_1 or lat_2 not specified","|lat_1| == |lat_2|","lat_0 is pi/2 from mean lat","unparseable coordinate system definition","geocentric transformation missing z or ellps","unknown prime meridian conversion id","illegal axis orientation combination","point not within available datum shift grids","invalid sweep axis, choose x or y"];function R(){var t=M.last_errno;t&&(t>0||!function(t){return D.indexOf(t)>-1}(t))&&G(t)}var D=[-14,-15,-17,-18,-19,-20,-27,-48];function F(t){M.last_errno=t}function k(){F(-20)}function j(){F(-20)}function B(t){G(t)}function G(t){F(t),U()}function U(t,e){var n;throw e||(e={}),e.code||(e.code=M.last_errno||0),t||(n=e.code,t=L[~n]||"unknown error"),M.last_errno=0,new z(t,e)}function z(t,e){var n=new Error(t);return n.name="ProjError",Object.keys(e).forEach((function(t){n[t]=e[t]})),n}function q(t){return V(t)*C}function V(t){var e=/(-?[0-9.]+)d?([0-9.]*)'?([0-9.]*)"?([nsew]?)$/i.exec(t),n=NaN;return e&&(n=+(e[1]||"0")+ +(e[2]||"0")/60+ +(e[3]||"0")/3600,/[ws]/i.test(e[4])&&(n=-n)),isNaN(n)&&G(-16),n}function Y(t){return X(t)}function X(t){return parseFloat(t)}function J(t,e){var n,r,i=e[0],o=t[e.substr(1)],a=void 0!==o;return"t"==i?n=a:a?(r=o.param,o.used=!0,"i"==i?n=parseInt(r):"d"==i?n=Y(r):"r"==i?n=q(r):"s"==i?n=String(r):"b"==i&&("T"==r||"t"==r||!0===r?n=!0:("F"==r||"f"==r||F(-8),n=!1))):n={i:0,b:!1,d:0,r:0,s:""}[i],void 0===n&&U("invalid request to pj_param, fatal"),n}function W(t){for(var e,n=/\+([a-z][a-z0-9_]*(?:=[^\s]*)?)/gi,r={};e=n.exec(t);)H(r,e[1]);return r}function H(t,e){var n,r,i=e.split("=");1==i.length?(n=e,r=!0):(n=i[0],r=e.substr(i[0].length+1)),t[n]={used:!1,param:r}}var $={};function K(t,e,n,r){$[e]={init:t,name:n,description:r}}function Z(t){return!t||t.is_latlong}function Q(t){var e=!1,n="";return"datum"in t.params?(e=!0,n+=et(t,"datum")):"ellps"in t.params?n+=et(t,"ellps"):"a"in t.params?(n+=et(t,"a"),"b"in t.params?n+=et(t,"b"):"es"in t.params?n+=et(t,"es"):"f"in t.params?n+=et(t,"f"):n+=" +es="+t.es):B(-13),e||(n+=et(t,"towgs84"),n+=et(t,"nadgrids")),n+=et(t,"R"),n+=et(t,"R_A"),n+=et(t,"R_V"),n+=et(t,"R_a"),n+=et(t,"R_lat_a"),n+=et(t,"R_lat_g"),n+=et(t,"pm")}function tt(t){var e="datum,ellps,a,b,es,rf,f,towgs84,nadgrids,R,R_A,R_V,R_a,R_lat_a,R_lat_g,pm,init,no_defs".split(","),n="";return Object.keys(t.params).forEach((function(r){-1==e.indexOf(r)&&(n+=et(t,r))})),(n+=Q(t)).trim()}function et(t,e){var n="";return e in t.params&&(n=" +"+e,!0!==t.params[e].param&&(n+="="+J(t.params,"s"+e))),n}var nt=[["WGS84","towgs84=0,0,0","WGS84","WGS_1984"],["GGRS87","towgs84=-199.87,74.79,246.62","GRS80","Greek_Geodetic_Reference_System_1987"],["NAD83","towgs84=0,0,0","GRS80","North_American_Datum_1983"],["NAD27","nadgrids=@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat","clrk66","North_American_Datum_1927"],["potsdam","towgs84=598.1,73.7,418.2,0.202,0.045,-2.455,6.7","bessel","Potsdam Rauenberg 1950 DHDN"],["carthage","towgs84=-263.0,6.0,431.0","clrk80ign","Carthage 1934 Tunisia"],["hermannskogel","towgs84=577.326,90.129,463.919,5.137,1.474,5.297,2.4232","bessel","Hermannskogel"],["ire65","towgs84=482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15","mod_airy","Ireland 1965"],["nzgd49","towgs84=59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993","intl","New Zealand Geodetic Datum 1949"],["OSGB36","towgs84=446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894","airy","OSGB 1936"],[null,null,null,null]],rt=[["greenwich","0dE"],["lisbon","9d07'54.862\"W"],["paris","2d20'14.025\"E"],["bogota","74d04'51.3\"W"],["madrid","3d41'16.58\"W"],["rome","12d27'8.4\"E"],["bern","7d26'22.5\"E"],["jakarta","106d48'27.79\"E"],["ferro","17d40'W"],["brussels","4d22'4.71\"E"],["stockholm","18d3'29.8\"E"],["athens","23d42'58.815\"E"],["oslo","10d43'22.5\"E"],[null,null]];function it(t){var e=nt.reduce((function(e,n){return n[0]===t?n:e}),null);return e?{id:e[0],defn:e[1],ellipse_id:e[2],name:e[3]}:null}var ot=[["MERIT","a=6378137.0","rf=298.257","MERIT 1983"],["SGS85","a=6378136.0","rf=298.257","Soviet Geodetic System 85"],["GRS80","a=6378137.0","rf=298.257222101","GRS 1980(IUGG, 1980)"],["IAU76","a=6378140.0","rf=298.257","IAU 1976"],["airy","a=6377563.396","b=6356256.910","Airy 1830"],["APL4.9","a=6378137.0","rf=298.25","Appl. Physics. 1965"],["NWL9D","a=6378145.0","rf=298.25","Naval Weapons Lab., 1965"],["mod_airy","a=6377340.189","b=6356034.446","Modified Airy"],["andrae","a=6377104.43","rf=300.0","Andrae 1876 (Den., Iclnd.)"],["aust_SA","a=6378160.0","rf=298.25","Australian Natl & S. Amer. 1969"],["GRS67","a=6378160.0","rf=298.2471674270","GRS 67(IUGG 1967)"],["bessel","a=6377397.155","rf=299.1528128","Bessel 1841"],["bess_nam","a=6377483.865","rf=299.1528128","Bessel 1841 (Namibia)"],["clrk66","a=6378206.4","b=6356583.8","Clarke 1866"],["clrk80","a=6378249.145","rf=293.4663","Clarke 1880 mod."],["clrk80ign","a=6378249.2","rf=293.4660212936269","Clarke 1880 (IGN)."],["CPM","a=6375738.7","rf=334.29","Comm. des Poids et Mesures 1799"],["delmbr","a=6376428","rf=311.5","Delambre 1810 (Belgium)"],["engelis","a=6378136.05","rf=298.2566","Engelis 1985"],["evrst30","a=6377276.345","rf=300.8017","Everest 1830"],["evrst48","a=6377304.063","rf=300.8017","Everest 1948"],["evrst56","a=6377301.243","rf=300.8017","Everest 1956"],["evrst69","a=6377295.664","rf=300.8017","Everest 1969"],["evrstSS","a=6377298.556","rf=300.8017","Everest (Sabah & Sarawak)"],["fschr60","a=6378166","rf=298.3","Fischer (Mercury Datum) 1960"],["fschr60m","a=6378155","rf=298.3","Modified Fischer 1960"],["fschr68","a=6378150","rf=298.3","Fischer 1968"],["helmert","a=6378200","rf=298.3","Helmert 1906"],["hough","a=6378270.0","rf=297","Hough"],["intl","a=6378388.0","rf=297","International 1909 (Hayford)"],["krass","a=6378245.0","rf=298.3","Krasovsky 1940"],["kaula","a=6378163","rf=298.24","Kaula 1961"],["lerch","a=6378139","rf=298.257","Lerch 1979"],["mprts","a=6397300","rf=191","Maupertius 1738"],["new_intl","a=6378157.5","b=6356772.2","New International 1967"],["plessis","a=6376523","b=6355863","Plessis 1817 (France)"],["SEasia","a=6378155.0","b=6356773.3205","Southeast Asia"],["walbeck","a=6376896.0","b=6355834.8467","Walbeck"],["WGS60","a=6378165.0","rf=298.3","WGS 60"],["WGS66","a=6378145.0","rf=298.25","WGS 66"],["WGS72","a=6378135.0","rf=298.26","WGS 72"],["WGS84","a=6378137.0","rf=298.257223563","WGS 84"],["sphere","a=6370997.0","b=6370997.0","Normal Sphere (r=6370997)"],[null,null,null,null]];function at(t){var e=ot.reduce((function(e,n){return n[0]===t?n:e}),null);return e?{id:e[0],major:e[1],ell:e[2],name:e[3]}:null}var st=[["km","1000","Kilometer"],["m","1","Meter"],["dm","1/10","Decimeter"],["cm","1/100","Centimeter"],["mm","1/1000","Millimeter"],["kmi","1852.0","International Nautical Mile"],["in","0.0254","International Inch"],["ft","0.3048","International Foot"],["yd","0.9144","International Yard"],["mi","1609.344","International Statute Mile"],["fath","1.8288","International Fathom"],["ch","20.1168","International Chain"],["link","0.201168","International Link"],["us-in","1/39.37","U.S. Surveyor's Inch"],["us-ft","0.304800609601219","U.S. Surveyor's Foot"],["us-yd","0.914401828803658","U.S. Surveyor's Yard"],["us-ch","20.11684023368047","U.S. Surveyor's Chain"],["us-mi","1609.347218694437","U.S. Surveyor's Statute Mile"],["ind-yd","0.91439523","Indian Yard"],["ind-ft","0.30479841","Indian Foot"],["ind-ch","20.11669506","Indian Chain"],[null,null,null]];function ut(t){var e=st.reduce((function(e,n){return t===n[0]?n:e}),null);return e?{id:e[0],to_meter:e[1],name:e[2]}:null}var ct={};var lt={};function ft(t){return lt[t]||null}function pt(t){var e,i,o,a,s,u,c,l,f=t.split(":"),p=f[0],h=f[1];return h&&p||B(-3),(e=ft(p=p.toLowerCase()))||(i=p,a=n(16),s=n(37),u=s.join(s.dirname(r),"../nad"),c=s.join(u,i.toUpperCase()),l=s.join(u,i.toLowerCase()),a.existsSync(c)?o=a.readFileSync(c,"utf8"):a.existsSync(l)?o=a.readFileSync(l,"utf8"):U("unable to read from 'init' file named "+i),e=o,lt[p]=e),e?function(t,e){var n,r,i="",o="";(n=t.indexOf("<"+e+">"))>-1&&((r=t.lastIndexOf("#",n))>-1&&(o=t.substring(r+1,n).trim(),/\n/.test(o)&&(o="")),i=(i=(i=" "+(i=(i=(i=(i=(i=t.substr(n+e.length+2)).substr(0,i.indexOf("<"))).replace(/#.*/g,"")).replace(/[\s]+/g," ")).replace(/\+title=[^+]*[^ +]/g,(function(t){return t.replace(/ /g,"\t")})))).replace(/ (?=[a-z])/gi," +")).replace(/\t/g," ").trim());return i?{opts:i,comment:o}:null}(e,h):null}function ht(t){var e,n,r=W(t),i={params:r,is_latlong:!1,is_geocent:!1,is_long_wrap_set:!1,long_wrap_center:0,axis:"enu",gridlist:null,gridlist_count:0,vgridlist_geoid:null,vgridlist_geoid_count:0};return Object.keys(r).length||B(-1),J(r,"tinit")&&function(t,e){var n=(r=e,ct[r.toLowerCase()]||null);var r;n||(n=pt(e),function(t,e){ct[t.toLowerCase()]=e}(e,n));n||B(-2);dt(t,n.opts)}(r,J(r,"sinit")),(e=J(r,"sproj"))||B(-4),(n=$[e])||B(-5),J(r,"bno_defs")||function(t,e){dt(t,"+ellps=WGS84")}(i.params),function(t){var e,n,r,i,o=484813681109536e-20,a=t.datum_params=[0,0,0,0,0,0,0];t.datum_type=0,(e=J(t.params,"sdatum"))&&((n=it(e))||B(-9),n.ellipse_id&&H(t.params,"ellps="+n.ellipse_id),n.defn&&H(t.params,n.defn)),(r=J(t.params,"snadgrids"))&&"@null"!=r&&U("+nadgrids is not implemented"),J(t.params,"scatalog")&&U("+catalog is not implemented"),(i=J(t.params,"stowgs84"))&&(i.split(",").forEach((function(t,e){a[e]=Y(t)||0})),0!=a[3]||0!=a[4]||0!=a[5]||0!=a[6]?(t.datum_type=2,a[3]*=o,a[4]*=o,a[5]*=o,a[6]=a[6]/1e6+1):t.datum_type=1)}(i),function(t){var e,n,r,i,o,s=.16666666666666666,c=t.params,l=0,f=0;J(c,"tR")?l=J(c,"dR"):((e=J(c,"sellps"))&&((n=at(e))||B(-9),H(c,n.major),H(c,n.ell)),l=J(c,"da"),J(c,"tes")?f=J(c,"des"):J(c,"te")?f=(r=J(c,"de"))*r:J(c,"trf")?((r=J(c,"drf"))||B(-10),f=(r=1/r)*(2-r)):J(c,"tf")?f=(r=J(c,"df"))*(2-r):J(c,"tb")&&(f=1-(i=J(c,"db"))*i/(l*l)),i||(i=l*g(1-f)),J(c,"bR_A")?(l*=1-f*(s+f*(.04722222222222222+.022156084656084655*f)),f=0):J(c,"bR_V")?l*=1-f*(s+f*(.06944444444444445+.04243827160493827*f)):J(c,"bR_a")?(l=.5*(l+i),f=0):J(c,"bR_g")?(l=g(l*i),f=0):J(c,"bR_h")?(l+i===0&&B(-20),l=2*l*i/(l+i),f=0):(o=J(c,"tR_lat_a")||J(c,"tR_lat_g"))&&(r=u(J(c,o?"rR_lat_a":"rR_lat_g")),a(r)>A&&B(-11),r=1-f*r*r,l*=o?.5*(1-f+r)/(r*g(r)):g(1-f)/r,f=0)),f<0&&B(-12),l<=0&&B(-13),t.es=f,t.a=l}(i),i.a_orig=i.a,i.es_orig=i.es,i.e=g(i.es),i.ra=1/i.a,i.one_es=1-i.es,i.one_es||B(-6),i.rone_es=1/i.one_es,function(t){return 1==t.datum_type&&t.datum_params[0]==t.datum_params[1]==t.datum_params[2]===0&&6378137==t.a&&Math.abs(t.es-.00669437999)<5e-11}(i)&&(i.datum_type=4),i.geoc=!!i.es&&J(r,"bgeoc"),i.over=J(r,"bover"),i.has_geoid_vgrids=J(r,"tgeoidgrids"),i.has_geoid_vgrids&&J(r,"sgeoidgrids"),i.is_long_wrap_set=J(r,"tlon_wrap"),i.is_long_wrap_set&&(i.long_wrap_center=J(r,"rlon_wrap"),a(i.long_wrap_center)<10*P==!1&&B(-14)),J(r,"saxis")&&function(t){var e=J(t.params,"saxis");3!=e.length&&B(-47);-1!="ewnsud".indexOf(e[0])&&-1!="ewnsud".indexOf(e[1])&&-1!="ewnsud".indexOf(e[2])||B(-47);t.axis=e}(i),i.lam0=J(r,"rlon_0"),i.phi0=J(r,"rlat_0"),i.x0=J(r,"dx_0"),i.y0=J(r,"dy_0"),J(r,"tk_0")?i.k0=J(r,"dk_0"):J(r,"tk")?i.k0=J(r,"dk"):i.k0=1,i.k0<=0&&B(-31),function(t){var e,n,r,i=t.params;(e=J(i,"sunits"))&&((r=ut(e))||B(-7),n=r.to_meter);n||(n=J(i,"sto_meter"))?(t.to_meter=gt(n),t.fr_meter=1/t.to_meter):t.to_meter=t.fr_meter=1;n=null,(e=J(i,"svunits"))&&((r=ut(e))||B(-7),n=r.to_meter);n||J(i,"svto_meter")?(t.vto_meter=gt(n),t.vfr_meter=1/t.vto_meter):(t.vto_meter=t.to_meter,t.vfr_meter=t.fr_meter)}(i),function(t){var e,n,r,i=t.params;(e=J(i,"spm"))?(n=function(t){var e=rt.reduce((function(e,n){return n[0]===t?n:e}),null);return e?{id:e[0],definition:e[1]}:null}(e),r=q(n?n.definition:e),isNaN(r)&&B(-46),t.from_greenwich=r):t.from_greenwich=0}(i),n.init(i),i}function dt(t,e){var n=W(e),r=["datum","ellps","a","b","rf","f"].reduce((function(e,n){return e||n in t}),!1);Object.keys(n).forEach((function(e){e in t||"ellps"==e&&r||(t[e]=n[e])}))}function gt(t){var e=t.split("/"),n=X(e[0]);return e.length>1&&(n/=X(e[1])),n}function yt(t,e){var n=0,r=t*t,i=e*e;return t<=0&&(n|=4),e<=0&&(n|=8),t<e&&(n|=16),n?null:{a:t,b:e,a2:r,b2:i,e2:(r-i)/r,ep2:(r-i)/i}}function mt(t,e,n,r,i){var o,a,s,l,f=0,p=n[e],h=r[e],d=i[e];return h<-A&&h>-1.001*A?h=-A:h>A&&h<1.001*A?h=A:(h<-A||h>A)&&(f|=1),f||(p>S&&(p-=2*S),a=u(h),l=c(h),s=a*a,o=t.a/g(1-t.e2*s),n[e]=(o+d)*l*c(p),r[e]=(o+d)*l*u(p),i[e]=(o*(1-t.e2)+d)*a),f}function vt(t,e,n,r,i){var o,s,u,c,l,f,p,y,m,v,_,b,x,w,E,S,I=n[e],C=r[e],N=i[e];if(c=g(I*I+C*C),l=g(I*I+C*C+N*N),c/t.a<1e-12){if(s=0,l/t.a<1e-12)return n[e]=0,r[e]=A,i[e]=-t.b,0}else s=d(C,I);f=N/l,p=c/l,y=1/g(1-t.e2*(2-t.e2)*p*p),_=p*(1-t.e2)*y,b=f*y,S=0;do{S++,u=c*_+N*b-(m=t.a/g(1-t.e2*b*b))*(1-t.e2*b*b),v=t.e2*m/(m+u),E=(w=f*(y=1/g(1-v*(2-v)*p*p)))*_-(x=p*(1-v)*y)*b,_=x,b=w}while(E*E>1e-24&&S<30);o=h(w/a(x)),n[e]=s,r[e]=o,i[e]=u}function _t(t,e,n){var r=n.length>2,i=[n[0]],o=[n[1]],a=[r?n[2]:0];t.is_latlong&&(i[0]*=C,o[0]*=C),M.last_errno=0,bt(t,e,i,o,a),(M.last_errno||i[0]==1/0)&&U(null,{point:n}),e.is_latlong&&(i[0]*=I,o[0]*=I),n[0]=i[0],n[1]=o[0],r&&(n[2]=a[0])}function bt(t,e,n,r,i){var o,a,s=n.length,u={},c={};if("enu"!=t.axis&&xt(t.axis,!1,n,r,i),1!=t.vto_meter&&i)for(o=0;o<s;o++)i[o]*=t.vto_meter;if(t.is_geocent){if(i||B(-45),1!=t.to_meter)for(o=0;o<s;o++)n[o]!=1/0&&(n[o]*=t.to_meter,r[o]*=t.to_meter);wt(t.a_orig,t.es_orig,n,r,i)}else if(!t.is_latlong)if(t.inv3d||t.inv||U("source projection not invertible"),t.inv3d)U("inverse 3d transformations not supported");else for(o=0;o<s;o++)c.x=n[o],c.y=r[o],a=Ct(c,t),n[o]=a.lam,r[o]=a.phi,R();if(0!==t.from_greenwich)for(o=0;o<s;o++)n[o]!=1/0&&(n[o]+=t.from_greenwich);if(t.has_geoid_vgrids&&i&&U("vgrid transformation not supported"),function(t,e,n,r,i){var o,a,s,u,c=n.length;if(0==t.datum_type||0==e.datum_type)return;if(function(t,e){if(t.datum_type!=e.datum_type)return!1;if(t.a_orig!=e.a_orig||Math.abs(t.es_orig-e.es_orig)>5e-11)return!1;if(1==t.datum_type)return t.datum_params[0]==e.datum_params[0]&&t.datum_params[1]==e.datum_params[1]&&t.datum_params[2]==e.datum_params[2];if(2==t.datum_type)return t.datum_params[0]==e.datum_params[0]&&t.datum_params[1]==e.datum_params[1]&&t.datum_params[2]==e.datum_params[2]&&t.datum_params[3]==e.datum_params[3]&&t.datum_params[4]==e.datum_params[4]&&t.datum_params[5]==e.datum_params[5]&&t.datum_params[6]==e.datum_params[6];if(3==t.datum_type)return J(t.params,"snadgrids")==J(e.params,"snadgrids");return!0}(t,e))return;o=t.a_orig,a=t.es_orig,s=e.a_orig,u=e.es_orig,i||(i=new Float64Array(c),!0);3==t.datum_type&&(U("gridshift not implemented"),o=6378137,a=.0066943799901413165);3==e.datum_type&&(s=6378137,u=.0066943799901413165);a==u&&o==s&&1!=t.datum_type&&2!=t.datum_type&&1!=e.datum_type&&2!=e.datum_type||(Et(o,a,n,r,i),1!=t.datum_type&&2!=t.datum_type||function(t,e,n,r){var i,o,a,s,u,c,l,f,p=e.length,h=t.datum_params,d=h[0],g=h[1],y=h[2];if(1==t.datum_type)for(f=0;f<p;f++)e[f]!=1/0&&(e[f]+=d,n[f]+=g,r[f]+=y);else if(2==t.datum_type)for(s=h[3],u=h[4],c=h[5],l=h[6],f=0;f<p;f++)e[f]!=1/0&&(i=l*(e[f]-c*n[f]+u*r[f])+d,o=l*(c*e[f]+n[f]-s*r[f])+g,a=l*(-u*e[f]+s*n[f]+r[f])+y,e[f]=i,n[f]=o,r[f]=a)}(t,n,r,i),1!=e.datum_type&&2!=e.datum_type||function(t,e,n,r){var i,o,a,s,u,c,l,f,p=e.length,h=t.datum_params,d=h[0],g=h[1],y=h[2];if(1==t.datum_type)for(f=0;f<p;f++)e[f]!=1/0&&(e[f]-=d,n[f]-=g,r[f]-=y);else if(2==t.datum_type)for(s=h[3],u=h[4],c=h[5],l=h[6],f=0;f<p;f++)e[f]!=1/0&&(i=(e[f]-d)/l,o=(n[f]-g)/l,a=(r[f]-y)/l,e[f]=i+c*o-u*a,n[f]=-c*i+o+s*a,r[f]=u*i-s*o+a)}(e,n,r,i),wt(s,u,n,r,i),3==e.datum_type&&pj_apply_gridshift_2(e,1,n,r,i))}(t,e,n,r,i),e.has_geoid_vgrids&&i&&U("vgrid transformation not supported"),0!==e.from_greenwich)for(o=0;o<s;o++)n[o]!=1/0&&(n[o]-=e.from_greenwich);if(e.is_geocent){if(i||B(-45),Et(e.a_orig,e.es_orig,n,r,i),1!=e.fr_meter)for(o=0;o<s;o++)n[o]!=1/0&&(n[o]*=e.fr_meter,r[o]*=e.fr_meter)}else if(e.is_latlong){if(e.is_latlong&&e.is_long_wrap_set)for(o=0;o<s;o++)if(n[o]!=1/0){for(;n[o]<e.long_wrap_center-S;)n[o]+=P;for(;n[o]>e.long_wrap_center+S;)n[o]-=P}}else if(e.fwd3d)U("3d transformation not supported");else for(o=0;o<s;o++)u.lam=n[o],u.phi=r[o],a=It(u,e),n[o]=a.x,r[o]=a.y,R();if(1!=e.vto_meter&&i)for(o=0;o<s;o++)i[o]*=e.vfr_meter;return"enu"!=e.axis&&xt(e.axis,!0,n,r,i),1==s?M.last_errno:0}function xt(t,e,n,r,i){var o,a,s,u,c,l,f=n.length,p=0;if(e){for(s=0;s<f;s++)if(o=n[s],a=r[s],o!=1/0)for(i&&(p=i[s]),u=0;u<3;u++)if(2!=u||i)switch(l=0==u?n:1==u?r:i,t[u]){case"e":l[s]=o;break;case"w":l[s]=-o;break;case"n":l[s]=a;break;case"s":l[s]=-a;break;case"u":l[s]=p;break;case"d":l[s]=-p;break;default:B(-47)}}else for(s=0;s<f;s++)if(o=n[s],a=r[s],o!=1/0)for(i&&(p=i[s]),u=0;u<3;u++)switch(c=0==u?o:1==u?a:p,t[u]){case"e":n[s]=c;break;case"w":n[s]=-c;break;case"n":r[s]=c;break;case"s":r[s]=-c;break;case"u":i&&(i[s]=c);break;case"d":i&&(i[s]=-c);break;default:B(-47)}}function wt(t,e,n,r,i){var o,a,s=n.length;for((a=yt(t,0==e?t:t*g(1-e)))||B(-45),o=0;o<s;o++)n[o]!=1/0&&vt(a,o,n,r,i)}function Et(t,e,n,r,i){var o,a,s=n.length;for((a=yt(t,0===e?t:t*g(1-e)))||B(-45),o=0;o<s;o++)n[o]!=1/0&&mt(a,o,n,r,i)&&(n[o]=r[o]=1/0)}function St(t){return a(t)>3.14159265359&&(t+=3.141592653589793,t-=6.283185307179586*s(t/6.283185307179586),t-=3.141592653589793),t}function It(t,e){var n={x:0,y:0},r=a(t.phi)-A;return r<=1e-12&&a(t.lam)<=10?(M.last_errno=0,a(r)<=1e-12?t.phi=t.phi<0?-A:A:e.geoc&&(t.phi=h(e.rone_es*l(t.phi))),t.lam-=e.lam0,e.over||(t.lam=St(t.lam)),e.fwd?(e.fwd(t,n),n.x=e.fr_meter*(e.a*n.x+e.x0),n.y=e.fr_meter*(e.a*n.y+e.y0)):n.x=n.y=1/0):F(-14),!M.last_errno&&isFinite(n.x)&&isFinite(n.y)||(n.x=n.y=1/0),n}function Ct(t,e){var n={lam:0,phi:0};return t.x<1/0&&t.y<1/0?(M.last_errno=0,e.inv?(t.x=(t.x*e.to_meter-e.x0)*e.ra,t.y=(t.y*e.to_meter-e.y0)*e.ra,e.inv(t,n),n.lam+=e.lam0,e.over||(n.lam=St(n.lam)),e.geoc&&a(a(n.phi)-A)>1e-12&&(n.phi=h(e.one_es*l(n.phi)))):n.lam=n.phi=1/0):F(-15),!M.last_errno&&isFinite(n.lam)&&isFinite(n.phi)||(n.lam=n.phi=1/0),n}function Nt(t,e,n,r){var i,o,a;for((t<0||t>=9)&&(t=3),i=1,a=0;a<t;a++)i*=10;return o=3600*i,function(a){var u,c,l,f,p="",h="",d="";return a===1/0||isNaN(a)?"":(a<0?(a=-a,(l=r||"")||(p="-")):l=n||"",c=(a=s(a*o+.5))/i%60,u=(a=s(a/(60*i)))%60,f=s(a/60)+"d",d=c.toFixed(t),d=(c=parseFloat(d))?(e?d:String(c))+'"':"",(c||u)&&2==(h=String(u)+"'").length&&e&&(h="0"+h),p+f+h+d+l)}}function At(t,e,n){var r,i,o,a,s,u;return"string"!=typeof t?Nn:("string"!=typeof e?(i="+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs",o=t,r=e):(i=t,o=e,r=n),u=Ot(a=ht(i),s=ht(o)),r?u(r):{forward:u,inverse:Ot(s,a)})}function Ot(t,e){return function(n){var r=Array.isArray(n);return n=r?n.concat():[n.x,n.y],_t(t,e,n),r||(n={x:n[0],y:n[1]}),n}}function Pt(t){var e=t.proj in $?$[t.proj].name:"",n=tt(t),r=Ht(t);return{PROJCS:{NAME:e?r.NAME+" / "+e:"unnamed",GEOGCS:r,PROJECTION:"custom_proj4",PARAMETER:[],UNIT:qt(t),EXTENSION:["PROJ4",n+" +wktext"]}}}function Tt(t){var e=t.EXTENSION;return e&&"PROJ4"==e[0]?(e[1]||"").replace(" +wktext",""):null}At.WGS84="+proj=longlat +datum=WGS84",At.toPoint=function(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e};var Mt=[],Lt=[];function Rt(t){return"string"==typeof t}function Dt(t){var e=kt(t,Lt);return e||(e=function(t){return Tt(t)?Tt:null}(t)),e||Ut("unsupported WKT definition: "+(t.NAME||"[unknown]")),e}function Ft(t){var e=kt(t,Mt);return e||(e=Pt),e||Ut("unsupported projection: "+function(t){return jt(t)||"[unknown]"}(t)),e}function kt(t,e){for(var n=0;n<e.length;n++)if((0,e[n][0])(t))return e[n][1];return null}function jt(t){return J(t.params,"sproj")}function Bt(t){return t.replace(/[-_ \/]+/g,"_").toLowerCase()}function Gt(t){var e;return Array.isArray(t)?e=t:t&&t.length>0&&(e=t.split(",")),e}function Ut(t){throw new Error(t)}function zt(t){return{to_meter:t.UNIT[1]}}function qt(t){return["Meter",t.to_meter||1]}function Vt(t,e){var n,r,i=t.DATUM,o=i.SPHEROID,a=function(t){var e,n={northamerican1983:"NAD83",newzealand1949:"nzgd49"},r=Yt(t.NAME);if(r in n)return n[r];for(var i=0;i<nt.length&&(Yt((e=nt[i])[3])!=r&&Yt(e[0])!=r);i++);return e?e[0]:null}(i),s=function(t){var e,n={international1924:"intl"},r=Yt(t[0]);if(r in n)return n[r];if(/^grs1980/.test(r))return"GRS80";if("sphere"==r)return null;for(var i=0;i<ot.length&&(Yt((e=ot[i])[3])!=r&&Yt(e[0])!=r);i++);return e?e[0]:null}(o),u=e&&e.aux_sphere,c=o[1],l=o[2];return Xt(t.UNIT,"degree"),u?n="+a="+o[1]:a?n="+datum="+a:s?n="+ellps="+s:(n="+a="+c,l>0&&(n+=" +rf="+l)),!i.TOWGS84||u||a||(n+=" +towgs84="+i.TOWGS84.join(",")),((r=t.PRIMEM?t.PRIMEM[1]:0)>0||r<0)&&(n+=" +pm="+r),n}function Yt(t){return(t||"").replace(/^(GCS|D)_/i,"").replace(/[ _]/g,"").toLowerCase()}function Xt(t,e){t&&t[0].toLowerCase()!=e&&Ut("unexpected geographic units: "+geogcs.UNIT[0])}function Jt(t){return function(){return"+proj="+t}}function Wt(t){return function(e){var n,r;return[t.PROJECTION(e),t.PARAMETER(e),t.GEOGCS?t.GEOGCS(e):Vt(e.GEOGCS),(n=zt(e),r="",1!=n.to_meter?r="+to_meter="+n.to_meter:ke||(r="+units=m"),r),"+no_defs"].filter((function(t){return!!t})).join(" ")}}function Ht(t){return{NAME:Zt(t),DATUM:$t(t),PRIMEM:["Greenwich",0],UNIT:["degree",.017453292519943295]}}function $t(t){var e={NAME:te(t),SPHEROID:Kt(t)},n=J(t.params,"stowgs84");return/[1-9]/.test(n)&&(e.TOWGS84=n),e}function Kt(t){var e;return e=J(t.params,"trf")?J(t.params,"drf"):t.es?1/(1-Math.sqrt(1-t.es)):0,[Qt(t),t.a,e]}function Zt(t){var e;return Z(t)&&(e=oe(t)),e||(e=ee(t),e=/^[a-z]+$/.test(e)?e[0].toUpperCase()+e.substr(1):e.toUpperCase()),e||"UNK"}function Qt(t){var e=at(function(t){var e,n=ee(t),r=n?it(n):null;e=r?r.ellipse_id:J(t.params,"sellps");return e||""}(t));return e?e.name:"Unknown ellipsoid"}function te(t){var e=it(ee(t));return e&&e.name||"Unknown datum"}function ee(t){return J(t.params,"sdatum")}function ne(t){return Ft(t)(t)}function re(t,e){return ie({PROJECTION:t,PARAMETER:Ae(e)})}function ie(t){return function(e){var n={GEOGCS:t.GEOGCS&&t.GEOGCS(e)||Ht(e),PROJECTION:Rt(t.PROJECTION)?t.PROJECTION:t.PROJECTION(e),PARAMETER:t.PARAMETER(e),UNIT:qt(e)};return n.NAME=t.NAME&&t.NAME(e,n)||function(t,e){return oe(t)||e.GEOGCS.NAME+" / "+e.PROJECTION}(e,n),{PROJCS:n}}}function oe(t){var e;return J(t.params,"tinit")&&(e=pt(J(t.params,"sinit"))),e?e.comment:""}function ae(t,e,n){le(ue(e),function(t,e){return Wt({PROJECTION:Jt(t),PARAMETER:Ne(e)})}(t,n))}function se(t,e,n){fe(ce(t),re(e,n))}function ue(t){var e=Gt(t).map(Bt);return function(t){var n=t.PROJECTION[0];return e.indexOf(Bt(n))>-1}}function ce(t){return function(e){var n=jt(e);return n&&n==t}}function le(t,e){"function"!=typeof t&&Ut("Missing WKT parser test"),"function"!=typeof e&&Ut("Missing WKT parse function"),Lt.push([t,e])}function fe(t,e){"function"!=typeof t&&Ut("Missing WKT maker test"),"function"!=typeof e&&Ut("Missing WKT maker function"),Mt.push([t,e])}le((function(t){return pe.test(Bt(t.NAME))}),(function(t){return Wt({PROJECTION:Jt("utm"),PARAMETER:function(t){var e=pe.exec(Bt(t.NAME)),n="+zone="+e[1];"S"==e[2]&&(n+=" +south");return n}})(t)})),le((function(t){return he.test(Bt(t.NAME))}),(function(t){return Wt({PROJECTION:Jt("ups"),PARAMETER:function(t){return"south"==he.exec(Bt(t.NAME))[1].toLowerCase()?"+south":""}})(t)})),fe(ce("utm"),(function(t){return ie({NAME:de,PROJECTION:function(){return"Transverse_Mercator"},PARAMETER:ye})(t)})),fe(ce("ups"),(function(t){return ie({NAME:ge,PROJECTION:function(){return"Polar_Stereographic"},PARAMETER:me})(t)}));var pe=/UTM_zone_([0-9]{1,2})(N|S)/i,he=/UPS_(North|South)/i;function de(t,e){return e.GEOGCS.NAME+" / UTM zone "+J(t.params,"szone")+(J(t.params,"tsouth")?"S":"N")}function ge(t,e){return e.GEOGCS.NAME+" / UPS "+(J(t.params,"tsouth")?"South":"North")}function ye(t){return[["latitude_of_origin",0],["central_meridian",180*t.lam0/S],["scale_factor",t.k0],["false_easting",t.x0],["false_northing",t.y0]]}function me(t){return[["latitude_of_origin",-90],["central_meridian",0],["scale_factor",.994],["false_easting",2e6],["false_northing",2e6]]}function ve(t){return J(t.params,"tlat_ts")&&0!=J(t.params,"dlat_ts")}function _e(t){return 0===t.es&&6378137==t.a}le(ue("Mercator_2SP,Mercator_1SP,Mercator,Mercator_Auxiliary_Sphere"),Wt({GEOGCS:function(t){var e=function(t){return/(Web_Mercator|Pseudo_Mercator)/i.test(Bt(t.NAME))}(t)?{aux_sphere:!0}:null;return Vt(t.GEOGCS,e)},PROJECTION:Jt("merc"),PARAMETER:function(t){return Ne(function(t){var e=Ie(t,"standard_parallel_1");return e&&0!=e[1]}(t)?"lat_ts,lat_0b":"lat_tsb,lat_ts")(t)}})),fe(ce("merc"),ie({GEOGCS:function(t){if(_e(t))return Ht(ht("+proj=longlat +datum=WGS84"));return null},PROJECTION:function(t){return ve(t)?"Mercator_2SP":"Mercator_1SP"},PARAMETER:function(t){return Ae(ve(t)?"lat_ts,lat_0b":"lat_tsb")(t)},NAME:function(t){return _e(t)?"WGS 84 / Pseudo-Mercator":null}}));var be=[["x_0","false_easting","m"],["y_0","false_northing","m"],["k_0","scale_factor","f"],["lat_0","latitude_of_center"],["lon_0","central_meridian"]],xe={lat_0b:["lat_0","latitude_of_origin"],lat_0c:["lat_0",null],lat_0d:["lat_0","standard_parallel_1"],lat_1:["lat_1","standard_parallel_1"],lat_1b:["lat_1","latitude_of_point_1"],lat_1c:["lat_1","latitude_of_origin"],lat_2:["lat_2","standard_parallel_2"],lat_2b:["lat_2","latitude_of_point_2"],lat_ts:["lat_ts","standard_parallel_1"],lat_tsb:["lat_ts","latitude_of_origin"],lonc:["lonc","central_meridian"],lon_1:["lon_1","longitude_of_point_1"],lon_2:["lon_2","longitude_of_point_2"],alpha:["alpha","azimuth"],gamma:["gamma","rectified_grid_angle"],h:["h","height","f"]},we={longitude_of_center:"central_meridian",latitude_of_origin:"latitude_of_center",latitude_of_center:"latitude_of_origin",longitude_of_1st_point:"longitude_of_point_1",longitude_of_2nd_point:"longitude_of_point_2",latitude_of_1st_point:"latitude_of_point_1",latitude_of_2nd_point:"latitude_of_point_2",k:"k_0"};function Ee(t,e,n){for(var r=0;r<n.length;r++)if(n[r][e]===t)return n[r];return null}function Se(t,e,n){var r=null;return!(r=Ee(t=t.toLowerCase(),e,n))&&t in we&&(r=Ee(we[t],e,n)),r}function Ie(t,e){for(var n,r=t.PARAMETER||[],i=0;i<r.length;i++)if(e===(n=r[i][0].toLowerCase())||e===we[n])return r[i];return null}function Ce(t){var e=null;return t&&(e=Gt(t).reduce((function(t,e){var n=xe[e];return n||Ut("missing parameter rule: "+e),t.push(n),t}),[])),(e||[]).concat(be)}function Ne(t){return function(e){var n=[],r=Ce(t),i=zt(e);return(e.PARAMETER||[]).forEach((function(t){var e,o,a=Se(t[0],1,r);a?(e=function(t,e,n){var r=t[0];if("m"==t[2]&&(e*=n.to_meter),!ke||!("x_0,y_0,lat_0,lon_0".indexOf(r)>-1&&0===e||"k_0"==r&&1==e))return"+"+r+"="+e}(a,t[1],i))&&n.push(e):(o="unhandled parameter: "+t[0],console.error("[wkt] "+o))})),n.join(" ")}}function Ae(t){return function(e){var n=[],r=Ce(t);return Object.keys(e.params).forEach((function(t){var i,o=Se(t,0,r);o&&o[1]&&(i=J(e.params,"s"+t),n.push(function(t,e,n){var r,i=t[2];return r="m"==i?parseFloat(e)/n:"f"==i?parseFloat(e):V(e),[t[1],r]}(o,i,e.to_meter)))})),n}}function Oe(t){return!("lat_1"in t.params&&"lat_2"in t.params)}function Pe(t){return"omerc"==jt(t)&&("alpha"in t.params||"gamma"in t.params)}function Te(t){return Pe(t)&&("no_uoff"in t.params||"no_off"in t.params)}function Me(t){return J(t.params,"tlat_ts")}function Le(t){var e=JSON.stringify(function t(e,n){var r,i=[];n=n||0,function(t){return Object.keys(t).sort((function(t,e){return Re(t)-Re(e)}))}(e).forEach((function(o){var a=e[o];!function(t){return!!t&&"object"==typeof t&&!Array.isArray(t)}(a)?"NAME"==o?i.push(Rt(a)?a:a[0]):"PARAMETER"==o||"AXIS"==o?a.forEach((function(t){i.push([o].concat(t))})):Rt(a)?i.push([o,a]):Array.isArray(a)?i.push([o].concat(a)):((r={})[o]=a,Ut("Incorrectly formatted WKT element: "+JSON.stringify(r))):i.push([o].concat(t(a,n+1)))})),0===n&&1==i.length&&(i=i[0]);return i}(t));return e=(e=e.replace(/\["([A-Z0-9]+)",/g,"$1[")).replace(/"(EAST|NORTH|SOUTH|WEST)"/g,"$1")}function Re(t){return"NAME,PROJCS,GEOGCS,GEOCCS,DATUM,SPHEROID,PRIMEM,PROJECTION,PARAMETER,UNIT,AXIS".indexOf(t)+1||999}function De(t){var e={};return Fe(t).forEach((function(t){!function t(e,n){var r,i=e[0];if("GEOGCS"==i||"GEOCCS"==i||"PROJCS"==i||"DATUM"==i||"VERTCS"==i)for(n[i]={NAME:e[1]},r=2;r<e.length;r++){if(!Array.isArray(e[r]))throw Ut("WKT parse error");t(e[r],n[i])}else"AXIS"==i||"PARAMETER"==i?(i in n==!1&&(n[i]=[]),n[i].push(e.slice(1))):n[i]=e.slice(1);return n}(t,e)})),e}function Fe(t){var e;t="["+(t=(t=(t=t.replace(/""/g,'\\"')).replace(/([A-Z0-9]+)\[/g,'["$1",')).replace(/, *([a-zA-Z]+) *(?=[,\]])/g,',"$1"'))+"]";try{e=JSON.parse(t)}catch(t){Ut("unparsable WKT format")}return e}le(ue("Lambert_Conformal_Conic,Lambert_Conformal_Conic_1SP,Lambert_Conformal_Conic_2SP"),Wt({PROJECTION:Jt("lcc"),PARAMETER:function(t){return Ne(function(t){return!Ie(t,"standard_parallel_2")}(t)?"lat_1c":"lat_0b,lat_1,lat_2")(t)}})),fe(ce("lcc"),ie({PROJECTION:function(t){return Oe(t)?"Lambert_Conformal_Conic_1SP":"Lambert_Conformal_Conic_2SP"},PARAMETER:function(t){return Ae(Oe(t)?"lat_1c,lat_0c":"lat_0b,lat_1,lat_2")(t)}})),le(ue("Hotine_Oblique_Mercator,Hotine_Oblique_Mercator_Azimuth_Natural_Origin"),Wt({PROJECTION:Jt("omerc"),PARAMETER:function(t){return Ne("alpha,gamma,lonc")(t)+" +no_uoff"}})),fe(Te,re("Hotine_Oblique_Mercator","alpha,gamma,lonc")),ae("omerc","Oblique_Mercator,Hotine_Oblique_Mercator_Azimuth_Center","alpha,gamma,lonc"),fe((function(t){return Pe(t)&&!Te(t)}),re("Oblique_Mercator","alpha,gamma,lonc")),ae("omerc","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","lat_1b,lat_2b,lon_1,lon_2"),fe((function(t){return"omerc"==jt(t)&&"lat_2"in t.params&&"lon_2"in t.params}),re("Hotine_Oblique_Mercator_Two_Point_Natural_Origin","lat_1b,lat_2b,lon_1,lon_2")),le(ue("Stereographic,Polar_Stereographic,Stereographic_North_Pole,Stereographic_South_Pole"),Wt({PROJECTION:Jt("stere"),PARAMETER:function(t){var e=Ne("lat_ts,lat_tsb")(t),n=/lat_ts=([^ ]+)/.exec(e);n&&-1==e.indexOf("lat_0=")&&(e="+lat_0="+(parseFloat(n[1])<0?-90:90)+" "+e);return e}})),fe(ce("stere"),ie({PROJECTION:function(t){return Me(t)?"Polar_Stereographic":"Stereographic"},PARAMETER:function(t){return Me(t)?Ae("lat_tsb,lat_0c")(t):Ae("lat_0b")(t)}})),se("vandg","VanDerGrinten"),le(ue("VanDerGrinten,Van_der_Grinten_I"),Wt({PROJECTION:Jt("vandg"),PARAMETER:function(t){var e=Ne("")(t);return e&&(e+=" "),e+"+R_A"}})),[["aitoff","Aitoff","lat1"],["aea","Albers_Conic_Equal_Area,Albers","lat_1,lat_2"],["aeqd","Azimuthal_Equidistant"],["bonne","Bonne","lat_1"],["cass","Cassini_Soldner,Cassini"],["cea","Cylindrical_Equal_Area","lat_ts"],["eck1","Eckert_I"],["eck2","Eckert_II"],["eck3","Eckert_III"],["eck4","Eckert_IV"],["eck5","Eckert_V"],["eck6","Eckert_VI"],["eqdc","Equidistant_Conic","lat_1,lat_2"],["eqc","Plate_Carree,Equirectangular,Equidistant_Cylindrical","lat_ts"],["gall","Gall_Stereographic"],["gnom","Gnomonic"],["laea","Lambert_Azimuthal_Equal_Area"],["loxim","Loximuthal","lat_1"],["mill","Miller_Cylindrical"],["moll","Mollweide"],["nsper","Vertical_Near_Side_Perspective","h"],["nzmg","New_Zealand_Map_Grid","lat_0b"],["ortho","Orthographic","lat_0b"],["poly","Polyconic"],["robin","Robinson"],["sinu","Sinusoidal"],["sterea","Oblique_Stereographic,Double_Stereographic"],["tmerc","Transverse_Mercator,Gauss_Kruger","lat_0b"],["tpeqd","Two_Point_Equidistant","lat_1b,lat_2b,lon_1,lon_2"],["wag1","Wagner_I"],["wag2","Wagner_II"],["wag3","Wagner_III","lat_ts"],["wag4","Wagner_IV"],["wag5","Wagner_V"],["wag6","Wagner_VI"],["wag7","Wagner_VII"],["wink1","Winkel_I","lat_ts"],["wink2","Winkel_II"],["wintri","Winkel_Tripel","lat_1"]].forEach((function(t){var e=t[2]||null;ae(t[0],t[1],e),se(t[0],t[1].split(",")[0],e)}));var ke=!0;var je,Be,Ge={};function Ue(t,e,n){var r;return e>=1e-7?n*(t/(1-(r=e*t)*r)-.5/e*v((1-r)/(1+r))):t+t}function ze(t,e,n){return e/g(1-n*t*t)}function qe(t,e,n){var r,i,o,s,l,p,h,y,m,b,x,w,E,S;t.fwd=function(e,n){var r,a=e.lam;(r=o-(h?i*Ue(u(e.phi),t.e,t.one_es):l*u(e.phi)))<0&&k();r=s*g(r),n.x=r*u(a*=i),n.y=p-r*c(a)},t.inv=function(e,n){var g=e.x,y=p-e.y,m=_(g,y);0!=m?(i<0&&(m=-m,g=-g,y=-y),n.phi=m/s,h?(n.phi=(o-n.phi*n.phi)/i,a(r-a(n.phi))>1e-7?(n.phi=function(t,e,n){var r,i,o,s,l,p,h;if(r=f(.5*t),e<1e-7)return r;h=15;do{i=u(r),o=c(r),p=.5*(l=1-(s=e*i)*s)*l/o*(t/n-i/l+.5/e*v((1-s)/(1+s))),r+=p}while(a(p)>1e-10&&--h);return h?r:1/0}(n.phi,t.e,t.one_es))==1/0&&j():n.phi=n.phi<0?-A:A):a(n.phi=(o-n.phi*n.phi)/l)<=1?n.phi=f(n.phi):n.phi=n.phi<0?-A:A,n.lam=d(g,y)/i):(n.lam=0,n.phi=i>0?A:-A)},a(e+n)<1e-10&&G(-21),i=m=u(e),y=c(e),b=a(e-n)>=1e-10,(h=t.es>0)?(Ve(t.es),S=ze(m,y,t.es),E=Ue(m,t.e,t.one_es),b&&(w=ze(m=u(n),y=c(n),t.es),x=Ue(m,t.e,t.one_es),i=(S*S-w*w)/(x-E)),r=1-.5*t.one_es*v((1-t.e)/(1+t.e))/t.e,p=(s=1/i)*g((o=S*S+i*E)-i*Ue(u(t.phi0),t.e,t.one_es))):(b&&(i=.5*(i+u(n))),p=(s=1/i)*g((o=y*y+(l=i+i)*m)-l*u(t.phi0)))}function Ve(t){var e,n=.01068115234375,r=[];return r[0]=1-t*(.25+t*(.046875+t*(.01953125+t*n))),r[1]=t*(.75-t*(.046875+t*(.01953125+t*n))),r[2]=(e=t*t)*(.46875-t*(.013020833333333334+.007120768229166667*t)),r[3]=(e*=t)*(.3645833333333333-.005696614583333333*t),r[4]=e*t*.3076171875,r}function Ye(t,e,n,r){return n*=e,e*=e,r[0]*t-n*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))}function Xe(t,e,n){var r,i,o,s=1/(1-e);o=t;for(var l=10;l>0;--l)if(i=1-e*(r=u(o))*r,o-=i=(Ye(o,r,c(o),n)-t)*(i*g(i))*s,a(i)<1e-11)return o;return F(M),o}function Je(t){var e=a(t);return e>=1?(e>1.00000000000001&&F(-19),t<0?-A:A):f(t)}function We(t){var e=a(t);return e>=1?(e>1.00000000000001&&F(-19),t<0?S:0):p(t)}function He(t){return t<=0?0:g(t)}function $e(t,e){return a(t)<1e-50&&a(e)<1e-50?0:d(t,e)}function Ke(t){var e=t.opaque||{mode:0};t.inv=function(t,n){var r,i,o,s,l,f,h,d,g,m,v,_,b,x,w,E,I,C=0;if(a(t.x)<1e-12&&a(t.y)<1e-12)return n.phi=0,void(n.lam=0);n.phi=t.y,n.lam=t.x;do{r=0;do{for(_=u(.5*n.lam),w=c(.5*n.lam),b=u(n.phi),x=c(n.phi),o=1-(i=x*w)*i,i=p(i)/y(o,1.5),s=2*i*o*x*_,l=i*o*b,f=2*(_*w*b*x/o-i*b*_),h=x*x*_*_/o+i*x*w*b*b,d=b*b*w/o+i*_*_*x,g=.5*(b*x*_/o-i*b*x*x*_*w),e.mode&&(s=.5*(s+n.lam*e.cosphi1),l=.5*(l+n.phi),f*=.5,h=.5*(h+e.cosphi1),d=.5*(d+1),g*=.5),s-=t.x,l-=t.y,v=(l*f-s*d)/(m=f*g-d*h),m=(s*g-l*h)/m;v>S;)v-=S;for(;v<-S;)v+=S;n.phi-=m,n.lam-=v}while((a(m)>1e-12||a(v)>1e-12)&&r++<10);n.phi>A&&(n.phi-=2*(n.phi-A)),n.phi<-A&&(n.phi-=2*(n.phi+A)),a(a(n.phi)-A)<1e-12&&!e.mode&&(n.lam=0),(i=p(c(n.phi)*c(o=.5*n.lam)))?(E=2*i*c(n.phi)*u(o)*(I=1/u(i)),I*=i*u(n.phi)):E=I=0,e.mode&&(E=.5*(E+n.lam*e.cosphi1),I=.5*(I+n.phi))}while((a(t.x-E)>1e-12||a(t.y-I)>1e-12)&&C++<20)},t.fwd=function(t,n){var r,i;(i=p(c(t.phi)*c(r=.5*t.lam)))?(n.x=2*i*c(t.phi)*u(r)*(n.y=1/u(i)),n.y*=i*u(t.phi)):n.x=n.y=0;e.mode&&(n.x=.5*(n.x+t.lam*e.cosphi1),n.y=.5*(n.y+t.phi))},t.es=0}function Ze(t,e,n){t.es=0,t.fwd=function(t,r){var i,o;r.y=e?A*u(t.phi):t.phi,(i=a(t.lam))>=1e-10?(n&&i>=A?r.x=g(2.4674011002723395-t.phi*t.phi+1e-10)+i-A:(o=.5*(2.4674011002723395/i+i),r.x=i-o+g(o*o-r.y*r.y)),t.lam<0&&(r.x=-r.x)):r.x=0}}function Qe(t){var e,n=[];return n[0]=.3333333333333333*t,e=t*t,n[0]+=.17222222222222222*e,n[1]=.06388888888888888*e,e*=t,n[0]+=.10257936507936508*e,n[1]+=.0664021164021164*e,n[2]=.01677689594356261*e,n}function tn(t,e){var n=t+t;return t+e[0]*u(n)+e[1]*u(n+n)+e[2]*u(n+n+n)}function en(t,e){t.es=0,t.fwd=function(t,n){n.y=e.C_y*t.phi,n.x=e.C_x*t.lam*(e.A+He(1-e.B*t.phi*t.phi))},t.inv=function(t,n){n.phi=t.y/e.C_y,n.lam=t.x/(e.C_x*(e.A+He(1-e.B*n.phi*n.phi)))}}function nn(t){var e,n,r,i,o,s,f=[],p=[],y=[],m=[];function w(t,e){for(var n,r=2*c(2*e),i=t.length-1,o=t[i],a=0;--i>=0;)n=r*o-a+t[i],a=o,o=n;return e+n*u(2*e)}function E(t,e,n){for(var r,i,o=u(e),a=c(e),s=b(n),l=x(n),f=2*a*l,p=-2*o*s,h=t.length-1,d=t[h],g=0,y=0,m=0;--h>=0;)r=y,i=g,d=f*(y=d)-r-p*(g=m)+t[h],m=p*y-i+f*g;return[(f=o*l)*d-(p=a*s)*m,f*m+p*d]}t.es<=0&&G(-34),o=i=(r=t.es/(1+g(1-t.es)))/(2-r),f[0]=i*(2+i*(-2/3+i*(i*(116/45+i*(26/45+i*(-2854/675)))-2))),p[0]=i*(i*(2/3+i*(4/3+i*(-82/45+i*(32/45+i*(4642/4725)))))-2),o*=i,f[1]=o*(7/3+i*(i*(-227/45+i*(2704/315+i*(2323/945)))-1.6)),p[1]=o*(5/3+i*(-16/15+i*(-13/9+i*(904/315+i*(-1522/945))))),o*=i,f[2]=o*(56/15+i*(-136/35+i*(-1262/105+i*(73814/2835)))),p[2]=o*(-26/15+i*(34/21+i*(1.6+i*(-12686/2835)))),o*=i,f[3]=o*(4279/630+i*(-332/35+i*(-399572/14175))),p[3]=o*(1237/630+i*(i*(-24832/14175)-2.4)),o*=i,f[4]=o*(4174/315+i*(-144838/6237)),p[4]=o*(-734/315+i*(109598/31185)),o*=i,f[5]=o*(601676/22275),p[5]=o*(444337/155925),o=i*i,e=t.k0/(1+i)*(1+o*(1/4+o*(1/64+o/256))),y[0]=i*(i*(2/3+i*(-37/96+i*(1/360+i*(81/512+i*(-96199/604800)))))-.5),m[0]=i*(.5+i*(-2/3+i*(5/16+i*(41/180+i*(-127/288+i*(7891/37800)))))),y[1]=o*(-1/48+i*(-1/15+i*(437/1440+i*(-46/105+i*(1118711/3870720))))),m[1]=o*(13/48+i*(i*(557/1440+i*(281/630+i*(-1983433/1935360)))-.6)),o*=i,y[2]=o*(-17/480+i*(37/840+i*(209/4480+i*(-5569/90720)))),m[2]=o*(61/240+i*(-103/140+i*(15061/26880+i*(167603/181440)))),o*=i,y[3]=o*(-4397/161280+i*(11/504+i*(830251/7257600))),m[3]=o*(49561/161280+i*(-179/168+i*(6601661/7257600))),o*=i,y[4]=o*(-4583/161280+i*(108847/3991680)),m[4]=o*(34729/80640+i*(-3418889/1995840)),o*=i,y[5]=o*(-20648693/638668800),m[5]=.6650675310896665*o,s=w(p,t.phi0),n=-e*(s+function(t,e){var n,r=2*c(e),i=t.length-1,o=t[i],a=0;for(;--i>=0;)n=r*o-a+t[i],a=o,o=n;return u(e)*n}(m,2*s)),t.fwd=function(t,r){var i,o,s,f,h,g=t.phi,y=t.lam;g=w(p,g),i=u(g),o=c(g),f=u(y),s=c(y),g=d(i,s*o),y=d(f*o,_(i,o*s)),y=function(t){var e=a(t);return e=function(t){var e=1+t,n=e-1;return 0===n?t:t*v(e)/n}(e*(1+e/(_(1,e)+1))),t<0?-e:e}(l(y)),h=E(m,2*g,2*y),g+=h[0],y+=h[1],a(y)<=2.623395162778?(r.y=e*g+n,r.x=e*y):r.x=r.y=1/0},t.inv=function(t,r){var i,o,s,l,p,g=t.y,m=t.x;g=(g-n)/e,a(m/=e)<=2.623395162778?(p=E(y,2*g,2*m),g+=p[0],m+=p[1],m=h(b(m)),i=u(g),o=c(g),l=u(m),s=c(m),m=d(l,s*o),g=d(i*s,_(l,s*o)),r.phi=w(f,g),r.lam=m):r.phi=r.lam=1/0}}function rn(t){var e;t.es?(e=Ve(t.es),t.fwd=function(n,r){var i,o;r.y=Ye(n.phi,i=u(n.phi),o=c(n.phi),e),r.x=n.lam*o/g(1-t.es*i*i)},t.inv=function(n,r){var i=a(r.phi=Xe(n.y,t.es,e));i<A?(i=u(r.phi),r.lam=n.x*g(1-t.es*i*i)/c(r.phi)):i-1e-10<A?r.lam=0:j()}):on(t,0,1)}function on(t,e,n){var r,i;r=(i=g((e+1)/n))/(e+1),t.es=0,t.fwd=function(t,o){var s,l,f;if(e){for(s=n*u(t.phi),f=8;f&&(t.phi-=l=(e*t.phi+u(t.phi)-s)/(e+c(t.phi)),!(a(l)<1e-7));--f);f||k()}else t.phi=1!=n?Je(n*u(t.phi)):t.phi;o.x=r*t.lam*(e+c(t.phi)),o.y=i*t.phi},t.inv=function(t,o){t.y/=i,o.phi=e?Je((e*t.y+u(t.y))/n):1!=n?Je(u(t.y)/n):t.y,o.lam=t.x/(r*(e+c(t.y)))}}function an(t){un(t,sn(t,A))}function sn(t,e){var n=u(e),r=e+e,i=g(P*n/(r+u(r)));return{C_x:2*i/S,C_y:i/n,C_p:r+u(r)}}function un(t,e){t.fwd=function(t,n){var r,i,o;for(r=e.C_p*u(t.phi),o=10;o&&(t.phi-=i=(t.phi+u(t.phi)-r)/(1+c(t.phi)),!(a(i)<1e-7));--o);o?t.phi*=.5:t.phi=t.phi<0?-A:A;n.x=e.C_x*t.lam*c(t.phi),n.y=e.C_y*u(t.phi)},t.inv=function(t,n){n.phi=Je(t.y/e.C_y),n.lam=t.x/(e.C_x*c(n.phi)),a(n.lam)-S<1e-10?(n.phi+=n.phi,n.phi=Je((n.phi+u(n.phi))/e.C_p)):n.lam=n.phi=1/0},t.es=0}function cn(t,e){var n,r,i,o,c,l=[[0,-1],[1,0]],p=[[-1,0],[0,-1]],h=[[0,1],[-1,0]],d=[[[1,0],[0,1]],l,p,h,h,p,l],m=1e-15;function v(t,e){var n=t.lam,r=t.phi,i=f(2/3);if(a(r)<=i)e.x=n,e.y=3*S/8*u(r);else{var o,c=g(3*(1-a(u(r)))),l=s(2*n/S+2);l>=4&&(l=3),o=-3*N+A*l,e.x=o+(n-o)*c,e.y=b(r)*N*(2-c)}}function _(t,e){var n=t.x,r=t.y,i=N;if(a(r)<=i)e.lam=n,e.phi=f(8*r/(3*S));else if(a(r)<A){var o,u,c=s(2*n/S+2);c>=4&&(c=3),o=-3*N+A*c,u=2-4*a(r)/S,e.lam=o+(n-o)/u,e.phi=b(r)*f(1-y(u,2)/3)}else e.lam=-S,e.phi=b(r)*A}function b(t){return t>0?1:t<0?-1:0}function x(t){switch(t){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return 3;case-1:return 4;case-2:return 5;case-3:return 6}return 0}function I(t,e){return function(t,e,n){var r,i,o,a,s,u=0,c=t.length;for(s=0;s<c;s++)if(e==t[s][0]&&n==t[s][1])return!0;for(r=t[0][0],i=t[0][1],s=1;s<c;s++)o=t[s%c][0],a=t[s%c][1],n>w(i,a)&&n<=E(i,a)&&e<=E(r,o)&&i!=a&&(r==o||e<=(n-i)*(o-r)/(a-i)+r)&&u++,r=o,i=a;return u%2!=0}(c,t,e)}function C(t,e,n){if(n)return tn(e,o);var r=Ue(u(e),t.e,1-t.es)/i;return a(r)>1&&(r=b(r)),f(r)}function O(t,e,n,r){var i,o,a,s,u=0,c=function(t,e,n,r,i){var o,a={};if(a.x=t,a.y=e,i){if(e>N)a.region="north",a.x=-3*N+n*A,a.y=A,t-=n*A;else{if(!(e<-N))return a.region="equatorial",a.cn=0,a;a.region="south",a.x=-3*N+r*A,a.y=-A,t-=r*A}"north"==a.region?a.cn=e>=-t-N-m&&e<t+5*N-m?(n+1)%4:e>-t-N+m&&e>=t+5*N-m?(n+2)%4:e<=-t-N+m&&e>t+5*N+m?(n+3)%4:n:"south"==a.region&&(a.cn=e<=t+N+m&&e>-t-5*N+m?(r+1)%4:e<t+N-m&&e<=-t-5*N+m?(r+2)%4:e>=t+N-m&&e<-t-5*N-m?(r+3)%4:r)}else{if(e>N)a.region="north",o=A;else{if(!(e<-N))return a.region="equatorial",a.cn=0,a;a.region="south",o=-A}t<-A?(a.cn=0,a.x=-3*N,a.y=o):t>=-A&&t<0?(a.cn=1,a.x=-N,a.y=o):t>=0&&t<A?(a.cn=2,a.x=N,a.y=o):(a.cn=3,a.x=3*N,a.y=o)}return a}(t.x,t.y,e,n,r);if("equatorial"==c.region)return t.x=c.x,void(t.y=c.y);i=[t.x,t.y],o=[c.x,c.y],r?"north"==c.region?(u=e,s=d[x(-1*(c.cn-u))]):(u=n,s=d[x(c.cn-u)]):"north"==c.region?(u=e,s=d[x(c.cn-u)]):(u=n,s=d[x(-1*(c.cn-u))]),a=function(t,e){return[t[0]+e[0],t[1]+e[1]]}(function(t,e){var n,r,i=[0,0];for(n=0;n<2;n++)for(r=0;r<2;r++)i[n]+=t[n][r]*e[r];return i}(s,function(t,e){return[t[0]-e[0],t[1]-e[1]]}(i,o)),[-3*N+(r?c.cn:0)*A,A]),t.x=a[0],t.y=a[1]}e?(n=J(t.params,"inorth_square"),r=J(t.params,"isouth_square"),(n<0||n>3)&&G(-47),(r<0||r>3)&&G(-47),c=[[-S-m,N+m],[n*A-S-m,N+m],[n*A-S-m,3*N+m],[(n+1)*A-S+m,3*N+m],[(n+1)*A-S+m,N+m],[S+m,N+m],[S+m,-N-m],[(r+1)*A-S+m,-N-m],[(r+1)*A-S+m,-3*N-m],[r*A-S-m,-3*N-m],[r*A-S-m,-N-m],[-S-m,-N-m]],0!=t.es?(o=Qe(t.es),i=Ue(1,t.e,t.one_es),t.a=t.a*g(.5*i),t.ra=1/t.a,t.fwd=function(e,i){return e.phi=C(t,e.phi,0),v(e,i),O(i,n,r,0)},t.inv=function(e,i){if(!I(e.x,e.y))return i.lam=1/0,i.phi=1/0,void F(-15);O(e,n,r,1),_(e,i),i.phi=C(t,i.phi,1)}):(t.fwd=function(t,e){v(t,e),O(e,n,r,0)},t.inv=function(t,e){if(!I(t.x,t.y))return e.lam=1/0,e.phi=1/0,void F(-15);O(t,n,r,1),_(t,e)})):(c=[[-S-m,N],[-3*N,A+m],[-A,N+m],[-N,A+m],[0,N+m],[N,A+m],[A,N+m],[3*N,A+m],[S+m,N],[S+m,-N],[3*N,-A-m],[A,-N-m],[N,-A-m],[0,-N-m],[-N,-A-m],[-A,-N-m],[-3*N,-A-m],[-S-m,-N]],0!=t.es?(o=Qe(t.es),i=Ue(1,t.e,t.one_es),t.a=t.a*g(.5*i),t.ra=1/t.a,t.fwd=function(e,n){e.phi=C(t,e.phi,0),v(e,n)},t.inv=function(e,n){if(!I(e.x,e.y))return n.lam=1/0,n.phi=1/0,void F(-15);_(e,n),n.phi=C(t,n.phi,1)}):(t.fwd=function(t,e){v(t,e)},t.inv=function(t,e){if(!I(t.x,t.y))return e.lam=1/0,e.phi=1/0,void F(-15);_(t,e)}))}function ln(t){t.x0=0,t.y0=0,t.is_latlong=!0,t.fwd=function(e,n){n.x=e.lam/t.a,n.y=e.phi/t.a},t.inv=function(e,n){n.lam=e.x*t.a,n.phi=e.y*t.a}}function fn(t,e,n){return e*=n,l(.5*(A-t))/y((1-e)/(1+e),.5*n)}function pn(t,e){var n,r,i=.5*e,o=A-2*h(t),s=15;do{n=e*u(o),o+=r=A-2*h(t*y((1-n)/(1+n),i))-o}while(a(r)>1e-10&&--s);return s<=0&&F(-18),o}function hn(t,e){var n,r,i,o=e.length-1;for(r=e[o][0],i=e[o][1];--o>=0;)n=r,r=e[o][0]+t.r*n-t.i*i,i=e[o][1]+t.r*i+t.i*n;return{r:t.r*r-t.i*i,i:t.r*i+t.i*r}}function dn(t,e,n){var r,i,o,a,s,u=!0,c=e.length-1;for(i=a=e[c][0],r=o=e[c][1];--c>=0;)u?u=!1:(a=i+t.r*(s=a)-t.i*o,o=r+t.r*o+t.i*s),i=e[c][0]+t.r*(s=i)-t.i*r,r=e[c][1]+t.r*r+t.i*s;return n.r=i+t.r*a-t.i*o,n.i=r+t.r*o+t.i*a,{r:t.r*i-t.i*r,i:t.r*r+t.i*i}}function gn(t,e){var n,r,i,o;0!=t.es?(n=t.e*u(t.phi0),r=2*h(l(.5*(A+t.phi0))*y((1-n)/(1+n),.5*t.e))-A):r=t.phi0,o=u(r),i=c(r),t.inv=function(n,r){var s,f,p,g,m,v,b,x={},w={},E={},S=0,I=0,C=0,N=0;for(x.r=n.x,x.i=n.y,s=20;s&&((f=dn(x,e,w)).r-=n.x,f.i-=n.y,p=w.r*w.r+w.i*w.i,E.r=-(f.r*w.r+f.i*w.i)/p,E.i=-(f.i*w.r-f.r*w.i)/p,x.r+=E.r,x.i+=E.i,!(a(E.r)+a(E.i)<=1e-12));--s);if(s){if(S=_(x.r,x.i),g=2*h(.5*S),I=u(g),C=c(g),r.lam=t.lam0,a(S)<=1e-12)return r.lam=0,void(r.phi=t.phi0);for(m=Je(C*o+x.i*I*i/S),N=m,s=20;s&&(v=t.e*u(N),b=2*h(l(.5*(A+m))*y((1+v)/(1-v),.5*t.e))-A-N,N+=b,!(a(b)<=1e-12));--s);}s?(r.phi=N,r.lam=d(x.r*I,S*i*C-x.i*o*I)):r.lam=r.phi=1/0},t.fwd=function(n,r){var a,s,f,p,d,g,m,v={};a=u(n.lam),s=c(n.lam),f=t.e*u(n.phi),p=2*h(l(.5*(A+n.phi))*y((1-f)/(1+f),.5*t.e))-A,d=u(p),g=c(p),m=2/(1+o*d+i*g*s),v.r=m*g*a,v.i=m*(i*d-o*g*s),v=hn(v,e),r.x=v.r,r.y=v.i}}function yn(t,e,n,r){var i,o,s,l,p,h,y,m,v,b,x,w,E=!isNaN(n)&&!isNaN(r);e<=0&&G(-30),E&&(v=c(r),b=u(r),w=c(n),x=u(n)),a(a(t.phi0)-A)<1e-10?i=t.phi0<0?1:0:a(t.phi0)<1e-10?i=2:(i=3,o=u(t.phi0),s=c(t.phi0)),h=e/t.a,p=1/(l=1+h),y=(l+1)*(m=1/h),t.fwd=function(t,e){var n,r,a,f,d;switch(a=u(t.phi),r=c(t.phi),n=c(t.lam),i){case 3:e.y=o*a+s*r*n;break;case 2:e.y=r*n;break;case 1:e.y=-a;break;case 0:e.y=a}e.y<p&&k();switch(e.y=h/(l-e.y),e.x=e.y*r*u(t.lam),i){case 3:e.y*=s*a-o*r*n;break;case 2:e.y*=a;break;case 0:n=-n;case 1:e.y*=r*n}E&&(f=e.y*v+e.x*b,d=1/(f*x*m+w),e.x=(e.x*v-e.y*b)*w*d,e.y=f*d)},t.inv=function(e,n){var r,c,p,m,S,I;E&&(I=1/(h-e.y*x),m=h*e.x*I,S=h*e.y*w*I,e.x=m*v+S*b,e.y=S*v-m*b);r=_(e.x,e.y),(p=1-r*r*y)<0&&j();if(p=(l-g(p))/(h/r+r/h),c=g(1-p*p),a(r)<=1e-10)n.lam=0,n.phi=t.phi0;else{switch(i){case 3:n.phi=f(c*o+e.y*p*s/r),e.y=(c-o*u(n.phi))*r,e.x*=p*s;break;case 2:n.phi=f(e.y*p/r),e.y=c*r,e.x*=p;break;case 0:n.phi=f(c),e.y=-e.y;break;case 1:n.phi=-f(c)}n.lam=d(e.x,e.y)}},t.es=0}function mn(t,e){var n=.79788456,r=.1013211836*(e?2:4);t.es=0,t.fwd=function(t,e){e.x=n*t.lam*(1-r*t.phi*t.phi),e.y=n*t.phi},t.inv=function(t,e){e.phi=t.y/n,e.lam=t.x/(n*(1-r*e.phi*e.phi))}}function vn(t,e,n){t.es=0,t.fwd=function(t,r){t.phi=Je(.883883476*u(t.phi)),r.x=e*t.lam*c(t.phi),r.x/=c(t.phi*=.333333333333333),r.y=n*u(t.phi)},t.inv=function(t,r){r.phi=Je(t.y/n),r.lam=t.x*c(r.phi)/e,r.phi*=3,r.lam/=c(r.phi),r.phi=Je(1.13137085*u(r.phi))}}function _n(t,e){var n=e?1.5:2,r=e?.5:1,i=1.01346,o=1.2158542;t.es=0,t.fwd=function(t,e){e.x=i*t.lam*(n-r*g(1+o*t.phi*t.phi)),e.y=i*t.phi},t.inv=function(t,e){e.phi=t.y/i,e.lam=t.x/(i*(n-r*g(1+o*e.phi*e.phi)))}}function bn(t,e){var n,r,i,o,s;e?(i=.44329,o=.80404,n=6,r=5.61125,s=3):(i=1.01346,o=.9191,n=4,r=2.147143718212938,s=2),t.es=0,t.fwd=function(t,e){var c,l,f,p;for(c=r*u(t.phi),t.phi*=1.10265779,p=10;p&&(l=g(1+t.phi*t.phi),t.phi-=f=((n-l)*t.phi-v(t.phi+l)-c)/(n-2*l),!(a(f)<1e-10));--p);p||(t.phi=c<0?-1.732050807568877:1.732050807568877);e.x=i*t.lam*(s-g(1+t.phi*t.phi)),e.y=o*t.phi},t.inv=function(t,e){var a;e.phi=t.y/o,a=g(1+e.phi*e.phi),e.lam=t.x/(i*(s-a)),e.phi=Je(((n-a)*e.phi-v(e.phi+a))/r)}}function xn(t){return function(e){!function(t,e){var n,r,i,o,s,f,p,y,m,v;J(t.params,"tlat_1")&&J(t.params,"tlat_2")?(i=J(t.params,"rlat_1"),o=J(t.params,"rlat_2"),y=.5*(o+i),(a(n=.5*(o-i))<1e-10||a(y)<1e-10)&&G(-42)):G(-41);switch(e){case"TISSOT":s=u(y),r=c(n),p=g(((f=s/r+r/s)-2*u(t.phi0))/s);break;case"MURD1":f=u(n)/(n*l(y))+y,p=f-t.phi0,s=u(y);break;case"MURD2":f=(r=g(c(n)))/l(y),p=f+l(y-t.phi0),s=u(y)*r;break;case"MURD3":f=n/(l(y)*l(n))+y,p=f-t.phi0,s=u(y)*u(n)*l(n)/(n*n);break;case"EULER":s=u(y)*u(n)/n,f=(n*=.5)/(l(n)*l(y))+y,p=f-t.phi0;break;case"PCONIC":s=u(y),v=c(n),m=1/l(y),a(n=t.phi0-y)-1e-10>=A&&G(-43),p=v*(m-l(n));break;case"VITK1":s=(r=l(n))*u(y)/n,f=n/(r*l(y))+y,p=f-t.phi0}t.inv=function(t,n){var r;switch(r=_(t.x,t.y=p-t.y),s<0&&(r=-r,t.x=-t.x,t.y=-t.y),n.lam=d(t.x,t.y)/s,e){case"PCONIC":n.phi=h(m-r/v)+y;break;case"MURD2":n.phi=y-h(r-f);break;default:n.phi=f-r}},t.fwd=function(t,n){var r;switch(e){case"MURD2":r=f+l(y-t.phi);break;case"PCONIC":r=v*(m-l(t.phi-y));break;default:r=f-t.phi}n.x=r*u(t.lam*=s),n.y=p-r*c(t.lam)},t.es=0}(e,t)}}function wn(t,e){var n,r,i,o,s,p,m,v;if(v=a((r=a(t.phi0))-A)<1e-10?t.phi0<0?0:1:r>1e-10?2:3,e=a(e),t.es){switch(v){case 1:case 0:a(e-A)<1e-10?m=2*t.k0/g(y(1+t.e,1+t.e)*y(1-t.e,1-t.e)):(m=c(e)/fn(e,r=u(e),t.e),r*=t.e,m/=g(1-r*r));break;case 3:case 2:r=u(t.phi0),n=2*h(b(t.phi0,r,t.e))-A,r*=t.e,m=2*t.k0*c(t.phi0)/g(1-r*r),s=u(n),p=c(n)}t.fwd=function(e,n){var r,i,o,a,l,f=0,d=0;r=c(e.lam),i=u(e.lam),l=u(e.phi),(2==v||3==v)&&(f=u(o=2*h(b(e.phi,l,t.e))-A),d=c(o));switch(v){case 2:a=m/(p*(1+s*f+p*d*r)),n.y=a*(p*f-s*d*r),n.x=a*d;break;case 3:a=m/(1+d*r),n.y=a*f,n.x=a*d;break;case 0:e.phi=-e.phi,r=-r,l=-l;case 1:n.x=m*fn(e.phi,l,t.e),n.y=-n.x*r}n.x=n.x*i},t.inv=function(e,n){n.phi;var r,i,o,g,b=0,x=0,w=0,E=0;switch(o=_(e.x,e.y),v){case 2:case 3:r=c(b=2*d(o*p,m)),i=u(b),x=f(0==o?r*s:r*s+e.y*i*p/o),b=l(.5*(A+x)),e.x*=i,e.y=o*p*r-e.y*s*i,E=A,w=.5*t.e;break;case 1:e.y=-e.y;case 0:x=A-2*h(b=-o/m),E=-A,w=-.5*t.e}for(g=0;g<8;g++,x=n.phi)if(i=t.e*u(x),n.phi=2*h(b*y((1+i)/(1-i),w))-E,a(x-n.phi)<1e-10)return 0==v&&(n.phi=-n.phi),void(n.lam=0==e.x&&0==e.y?0:d(e.x,e.y));j()}}else{switch(v){case 2:i=u(t.phi0),o=c(t.phi0);case 3:m=2*t.k0;break;case 0:case 1:m=a(e-A)>=1e-10?c(e)/l(N-.5*e):2*t.k0}t.fwd=function(t,e){var n=t.phi,r=u(n),s=c(n),f=c(t.lam),p=u(t.lam);switch(v){case 3:case 2:e.y=3==v?1+s*f:1+i*r+o*s*f,e.y<=1e-10&&k(),e.x=(e.y=m/e.y)*s*p,e.y*=3==v?r:o*r-i*s*f;break;case 1:f=-f,n=-n;case 0:a(n-A)<1e-8&&k(),e.x=p*(e.y=m*l(N+.5*n)),e.y*=f}},t.inv=function(e,n){var r,s,l,p;switch(l=u(r=2*h((s=_(e.x,e.y))/m)),p=c(r),n.lam=0,v){case 3:a(s)<=1e-10?n.phi=0:n.phi=f(e.y*l/s),0==p&&0==e.x||(n.lam=d(e.x*l,p*s));break;case 2:a(s)<=1e-10?n.phi=t.phi0:n.phi=f(p*i+e.y*l*o/s),0==(r=p-i*u(n.phi))&&0==e.x||(n.lam=d(e.x*l*o,r*s));break;case 1:e.y=-e.y;case 0:a(s)<=1e-10?n.phi=t.phi0:n.phi=f(0==v?-p:p),n.lam=0==e.x&&0==e.y?0:d(e.x,e.y)}}}function b(t,e,n){return e*=n,l(.5*(A+t))*y((1-e)/(1+e),.5*n)}}function En(t,e){return y((1-t)/(1+t),e)}function Sn(t,e,n,r){var i=n/e,o=e,a=1/n;t.inv=function(t,e){var n;t.y/=o,n=c(e.phi=r?h(t.y):Je(t.y)),e.phi/=a,e.lam=t.x/(i*c(e.phi)),r?e.lam/=n*n:e.lam*=n},t.fwd=function(t,e){var n;e.x=i*t.lam*c(t.phi),e.y=o,t.phi*=a,n=c(t.phi),r?(e.x*=n*n,e.y*=l(t.phi)):(e.x/=n,e.y*=u(t.phi))},t.es=0}function In(t,e){var n=.8773826753,r=1.139753528477/e;t.es=0,t.fwd=function(t,i){var o=Je(e*u(t.phi));i.x=n*t.lam*c(o),i.y=r*o},t.inv=function(t,i){t.y/=r,i.phi=Je(u(t.y)/e),i.lam=t.x/(n*c(t.y))}}function Cn(t,e){t.fwd=function(t,n){var r,i,o,s;o=a(T*t.phi),s=(s=1-o*o)<0?0:g(s);a(t.lam)<1e-10?(n.x=0,n.y=S*(t.phi<0?-o:o)/(1+s)):(i=.5*a(S/t.lam-t.lam/S),e?(r=o/(1+s),n.x=S*(g(i*i+1-r*r)-i),n.y=S*r):(r=(s*g(1+i*i)-i*s*s)/(1+i*i*o*o),n.x=S*r,n.y=S*g(1-r*(r+2*i)+1e-10)),t.lam<0&&(n.x=-n.x),t.phi<0&&(n.y=-n.y))},t.es=0}Ge.Constants={},Ge.Math={},Ge.Accumulator={},(je=Ge.Constants).WGS84={a:6378137,f:1/298.257223563},je.version={major:1,minor:48,patch:0},je.version_string="1.48",(Be=Ge.Math).digits=53,Be.epsilon=Math.pow(.5,Be.digits-1),Be.degree=Math.PI/180,Be.sq=function(t){return t*t},Be.hypot=function(t,e){var n,r;return t=Math.abs(t),e=Math.abs(e),n=Math.max(t,e),r=Math.min(t,e)/(n||1),n*Math.sqrt(1+r*r)},Be.cbrt=function(t){var e=Math.pow(Math.abs(t),1/3);return t<0?-e:e},Be.log1p=function(t){var e=1+t,n=e-1;return 0===n?t:t*Math.log(e)/n},Be.atanh=function(t){var e=Math.abs(t);return e=Be.log1p(2*e/(1-e))/2,t<0?-e:e},Be.copysign=function(t,e){return Math.abs(t)*(e<0||0===e&&1/e<0?-1:1)},Be.sum=function(t,e){var n=t+e,r=n-e,i=n-r;return{s:n,t:-((r-=t)+(i-=e))}},Be.polyval=function(t,e,n,r){for(var i=t<0?0:e[n++];--t>=0;)i=i*r+e[n++];return i},Be.AngRound=function(t){if(0===t)return t;var e=1/16,n=Math.abs(t);return n=n<e?e-(e-n):n,t<0?-n:n},Be.AngNormalize=function(t){return(t%=360)<=-180?t+360:t<=180?t:t-360},Be.LatFix=function(t){return Math.abs(t)>90?Number.NaN:t},Be.AngDiff=function(t,e){var n=Be.sum(Be.AngNormalize(-t),Be.AngNormalize(e)),r=Be.AngNormalize(n.s),i=n.t;return Be.sum(180===r&&i>0?-180:r,i)},Be.sincosd=function(t){var e,n,r,i,o,a;switch(e=t%360,e-=90*(n=Math.floor(e/90+.5)),e*=this.degree,r=Math.sin(e),i=Math.cos(e),3&n){case 0:o=r,a=i;break;case 1:o=i,a=-r;break;case 2:o=-r,a=-i;break;default:o=-i,a=r}return t&&(o+=0,a+=0),{s:o,c:a}},Be.atan2d=function(t,e){var n,r,i=0;switch(Math.abs(t)>Math.abs(e)&&(n=e,e=t,t=n,i=2),e<0&&(e=-e,++i),r=Math.atan2(t,e)/this.degree,i){case 1:r=(t>=0?180:-180)-r;break;case 2:r=90-r;break;case 3:r=-90+r}return r},function(t,e){t.Accumulator=function(t){this.Set(t)},t.Accumulator.prototype.Set=function(e){e||(e=0),e.constructor===t.Accumulator?(this._s=e._s,this._t=e._t):(this._s=e,this._t=0)},t.Accumulator.prototype.Add=function(t){var n=e.sum(t,this._t),r=e.sum(n.s,this._s);n=n.t,this._s=r.s,this._t=r.t,0===this._s?this._s=n:this._t+=n},t.Accumulator.prototype.Sum=function(e){var n;return e?((n=new t.Accumulator(this)).Add(e),n._s):this._s},t.Accumulator.prototype.Negate=function(){this._s*=-1,this._t*=-1}}(Ge.Accumulator,Ge.Math),Ge.Geodesic={},Ge.GeodesicLine={},Ge.PolygonArea={},function(t,e,n,r,i){var o,a,s,u,c,l,f,p,h,d,g,y=20+r.digits+10,m=r.epsilon,v=200*m,_=Math.sqrt(m),b=m*v,x=1e3*_;t.tiny_=Math.sqrt(Number.MIN_VALUE),t.nC1_=6,t.nC1p_=6,t.nC2_=6,t.nC3_=6,t.nC4_=6,o=t.nC3_*(t.nC3_-1)/2,a=t.nC4_*(t.nC4_+1)/2,t.CAP_C1=1,t.CAP_C1p=2,t.CAP_C2=4,t.CAP_C3=8,t.CAP_C4=16,t.NONE=0,t.ARC=64,t.LATITUDE=128,t.LONGITUDE=256|t.CAP_C3,t.AZIMUTH=512,t.DISTANCE=1024|t.CAP_C1,t.STANDARD=t.LATITUDE|t.LONGITUDE|t.AZIMUTH|t.DISTANCE,t.DISTANCE_IN=2048|t.CAP_C1|t.CAP_C1p,t.REDUCEDLENGTH=4096|t.CAP_C1|t.CAP_C2,t.GEODESICSCALE=8192|t.CAP_C1|t.CAP_C2,t.AREA=16384|t.CAP_C4,t.ALL=32671,t.LONG_UNROLL=32768,t.OUT_MASK=32640|t.LONG_UNROLL,t.SinCosSeries=function(t,e,n,r){var i=r.length,o=i-(t?1:0),a=2*(n-e)*(n+e),s=1&o?r[--i]:0,u=0;for(o=Math.floor(o/2);o--;)s=a*(u=a*s-u+r[--i])-s+r[--i];return t?2*e*n*s:n*(s-u)},s=function(t,e){var n,i,o,a,s,u,c,l,f,p,h,d,g=r.sq(t),y=r.sq(e),m=(g+y-1)/6;return 0===y&&m<=0?n=0:(u=m,(s=(i=g*y/4)*(i+2*(a=m*(o=r.sq(m)))))>=0?(c=i+a,c+=c<0?-Math.sqrt(s):Math.sqrt(s),u+=(l=r.cbrt(c))+(0!==l?o/l:0)):(f=Math.atan2(Math.sqrt(-s),-(i+a)),u+=2*m*Math.cos(f/3)),p=Math.sqrt(r.sq(u)+y),d=((h=u<0?y/(p-u):u+p)-y)/(2*p),n=h/(Math.sqrt(h+r.sq(d))+d)),n},u=[1,4,64,0,256],t.A1m1f=function(t){var e=Math.floor(3);return(r.polyval(e,u,0,r.sq(t))/u[e+1]+t)/(1-t)},c=[-1,6,-16,32,-9,64,-128,2048,9,-16,768,3,-5,512,-7,1280,-7,2048],t.C1f=function(e,n){var i,o,a=r.sq(e),s=e,u=0;for(i=1;i<=t.nC1_;++i)o=Math.floor((t.nC1_-i)/2),n[i]=s*r.polyval(o,c,u,a)/c[u+o+1],u+=o+2,s*=e},l=[205,-432,768,1536,4005,-4736,3840,12288,-225,116,384,-7173,2695,7680,3467,7680,38081,61440],t.C1pf=function(e,n){var i,o,a=r.sq(e),s=e,u=0;for(i=1;i<=t.nC1p_;++i)o=Math.floor((t.nC1p_-i)/2),n[i]=s*r.polyval(o,l,u,a)/l[u+o+1],u+=o+2,s*=e},f=[-11,-28,-192,0,256],t.A2m1f=function(t){var e=Math.floor(3);return(r.polyval(e,f,0,r.sq(t))/f[e+1]-t)/(1+t)},p=[1,2,16,32,35,64,384,2048,15,80,768,7,35,512,63,1280,77,2048],t.C2f=function(e,n){var i,o,a=r.sq(e),s=e,u=0;for(i=1;i<=t.nC2_;++i)o=Math.floor((t.nC2_-i)/2),n[i]=s*r.polyval(o,p,u,a)/p[u+o+1],u+=o+2,s*=e},t.Geodesic=function(t,e){if(this.a=t,this.f=e,this._f1=1-this.f,this._e2=this.f*(2-this.f),this._ep2=this._e2/r.sq(this._f1),this._n=this.f/(2-this.f),this._b=this.a*this._f1,this._c2=(r.sq(this.a)+r.sq(this._b)*(0===this._e2?1:(this._e2>0?r.atanh(Math.sqrt(this._e2)):Math.atan(Math.sqrt(-this._e2)))/Math.sqrt(Math.abs(this._e2))))/2,this._etol2=.1*_/Math.sqrt(Math.max(.001,Math.abs(this.f))*Math.min(1,1-this.f/2)/2),!(isFinite(this.a)&&this.a>0))throw new Error("Equatorial radius is not positive");if(!(isFinite(this._b)&&this._b>0))throw new Error("Polar semi-axis is not positive");this._A3x=new Array(6),this._C3x=new Array(o),this._C4x=new Array(a),this.A3coeff(),this.C3coeff(),this.C4coeff()},h=[-3,128,-2,-3,64,-1,-3,-1,16,3,-1,-2,8,1,-1,2,1,1],t.Geodesic.prototype.A3coeff=function(){var t,e,n=0,i=0;for(t=5;t>=0;--t)e=Math.min(6-t-1,t),this._A3x[i++]=r.polyval(e,h,n,this._n)/h[n+e+1],n+=e+2},d=[3,128,2,5,128,-1,3,3,64,-1,0,1,8,-1,1,4,5,256,1,3,128,-3,-2,3,64,1,-3,2,32,7,512,-10,9,384,5,-9,5,192,7,512,-14,7,512,21,2560],t.Geodesic.prototype.C3coeff=function(){var e,n,i,o=0,a=0;for(e=1;e<t.nC3_;++e)for(n=t.nC3_-1;n>=e;--n)i=Math.min(t.nC3_-n-1,n),this._C3x[a++]=r.polyval(i,d,o,this._n)/d[o+i+1],o+=i+2},g=[97,15015,1088,156,45045,-224,-4784,1573,45045,-10656,14144,-4576,-858,45045,64,624,-4576,6864,-3003,15015,100,208,572,3432,-12012,30030,45045,1,9009,-2944,468,135135,5792,1040,-1287,135135,5952,-11648,9152,-2574,135135,-64,-624,4576,-6864,3003,135135,8,10725,1856,-936,225225,-8448,4992,-1144,225225,-1440,4160,-4576,1716,225225,-136,63063,1024,-208,105105,3584,-3328,1144,315315,-128,135135,-2560,832,405405,128,99099],t.Geodesic.prototype.C4coeff=function(){var e,n,i,o=0,a=0;for(e=0;e<t.nC4_;++e)for(n=t.nC4_-1;n>=e;--n)i=t.nC4_-n-1,this._C4x[a++]=r.polyval(i,g,o,this._n)/g[o+i+1],o+=i+2},t.Geodesic.prototype.A3f=function(t){return r.polyval(5,this._A3x,0,t)},t.Geodesic.prototype.C3f=function(e,n){var i,o,a=1,s=0;for(i=1;i<t.nC3_;++i)o=t.nC3_-i-1,a*=e,n[i]=a*r.polyval(o,this._C3x,s,e),s+=o+1},t.Geodesic.prototype.C4f=function(e,n){var i,o,a=1,s=0;for(i=0;i<t.nC4_;++i)o=t.nC4_-i-1,n[i]=a*r.polyval(o,this._C4x,s,e),s+=o+1,a*=e},t.Geodesic.prototype.Lengths=function(e,n,r,i,o,a,s,u,c,l,f,p,h){var d,g,y,m,v={},_=0,b=0,x=0,w=0;if((f&=t.OUT_MASK)&(t.DISTANCE|t.REDUCEDLENGTH|t.GEODESICSCALE)&&(x=t.A1m1f(e),t.C1f(e,p),f&(t.REDUCEDLENGTH|t.GEODESICSCALE)&&(w=t.A2m1f(e),t.C2f(e,h),_=x-w,w=1+w),x=1+x),f&t.DISTANCE)d=t.SinCosSeries(!0,a,s,p)-t.SinCosSeries(!0,r,i,p),v.s12b=x*(n+d),f&(t.REDUCEDLENGTH|t.GEODESICSCALE)&&(b=_*n+(x*d-w*(t.SinCosSeries(!0,a,s,h)-t.SinCosSeries(!0,r,i,h))));else if(f&(t.REDUCEDLENGTH|t.GEODESICSCALE)){for(g=1;g<=t.nC2_;++g)h[g]=x*p[g]-w*h[g];b=_*n+(t.SinCosSeries(!0,a,s,h)-t.SinCosSeries(!0,r,i,h))}return f&t.REDUCEDLENGTH&&(v.m0=_,v.m12b=u*(i*a)-o*(r*s)-i*s*b),f&t.GEODESICSCALE&&(y=i*s+r*a,m=this._ep2*(c-l)*(c+l)/(o+u),v.M12=y+(m*a-s*b)*r/o,v.M21=y-(m*r-i*b)*a/u),v},t.Geodesic.prototype.InverseStart=function(e,n,i,o,a,u,c,l,f,p,h){var d,g,y,m,_,b,w,E,S,I,C,N,A,O,P,T,M,L,R,D,F={},k=o*n-a*e,j=a*n+o*e;return F.sig12=-1,d=o*n,d+=a*e,(g=j>=0&&k<.5&&a*c<.5)?(m=r.sq(e+o),m/=m+r.sq(n+a),F.dnm=Math.sqrt(1+this._ep2*m),y=c/(this._f1*F.dnm),_=Math.sin(y),b=Math.cos(y)):(_=l,b=f),F.salp1=a*_,F.calp1=b>=0?k+a*e*r.sq(_)/(1+b):d-a*e*r.sq(_)/(1-b),E=r.hypot(F.salp1,F.calp1),S=e*o+n*a*b,g&&E<this._etol2?(F.salp2=n*_,F.calp2=k-n*o*(b>=0?r.sq(_)/(1+b):1-b),w=r.hypot(F.salp2,F.calp2),F.salp2/=w,F.calp2/=w,F.sig12=Math.atan2(E,S)):Math.abs(this._n)>.1||S>=0||E>=6*Math.abs(this._n)*Math.PI*r.sq(n)||(D=Math.atan2(-l,-f),this.f>=0?(O=(A=r.sq(e)*this._ep2)/(2*(1+Math.sqrt(1+A))+A),I=D/(N=this.f*n*this.A3f(O)*Math.PI),C=d/(N*n)):(P=a*n-o*e,T=Math.atan2(d,P),C=c/(N=((I=(M=this.Lengths(this._n,Math.PI+T,e,-n,i,o,a,u,n,a,t.REDUCEDLENGTH,p,h)).m12b/(n*a*M.m0*Math.PI)-1)<-.01?d/I:-this.f*r.sq(n)*Math.PI)/n)),C>-v&&I>-1-x?this.f>=0?(F.salp1=Math.min(1,-I),F.calp1=-Math.sqrt(1-r.sq(F.salp1))):(F.calp1=Math.max(I>-v?0:-1,I),F.salp1=Math.sqrt(1-r.sq(F.calp1))):(L=s(I,C),R=N*(this.f>=0?-I*L/(1+L):-C*(1+L)/L),_=Math.sin(R),b=-Math.cos(R),F.salp1=a*_,F.calp1=d-a*e*r.sq(_)/(1-b))),F.salp1<=0?(F.salp1=1,F.calp1=0):(w=r.hypot(F.salp1,F.calp1),F.salp1/=w,F.calp1/=w),F},t.Geodesic.prototype.Lambda12=function(e,n,i,o,a,s,u,c,l,f,p,h,d,g){var y,m,v,_,b,x,w,E,S,I,C,N,A,O={};return 0===e&&0===c&&(c=-t.tiny_),m=u*n,v=r.hypot(c,u*e),O.ssig1=e,_=m*e,O.csig1=b=c*n,y=r.hypot(O.ssig1,O.csig1),O.ssig1/=y,O.csig1/=y,O.salp2=a!==n?m/a:u,O.calp2=a!==n||Math.abs(o)!==-e?Math.sqrt(r.sq(c*n)+(n<-e?(a-n)*(n+a):(e-o)*(e+o)))/a:Math.abs(c),O.ssig2=o,x=m*o,O.csig2=w=O.calp2*a,y=r.hypot(O.ssig2,O.csig2),O.ssig2/=y,O.csig2/=y,O.sig12=Math.atan2(Math.max(0,O.csig1*O.ssig2-O.ssig1*O.csig2),O.csig1*O.csig2+O.ssig1*O.ssig2),E=Math.max(0,b*x-_*w),S=b*w+_*x,C=Math.atan2(E*f-S*l,S*f+E*l),N=r.sq(v)*this._ep2,O.eps=N/(2*(1+Math.sqrt(1+N))+N),this.C3f(O.eps,g),I=t.SinCosSeries(!0,O.ssig2,O.csig2,g)-t.SinCosSeries(!0,O.ssig1,O.csig1,g),O.domg12=-this.f*this.A3f(O.eps)*m*(O.sig12+I),O.lam12=C+O.domg12,p&&(0===O.calp2?O.dlam12=-2*this._f1*i/e:(A=this.Lengths(O.eps,O.sig12,O.ssig1,O.csig1,i,O.ssig2,O.csig2,s,n,a,t.REDUCEDLENGTH,h,d),O.dlam12=A.m12b,O.dlam12*=this._f1/(O.calp2*a))),O},t.Geodesic.prototype.Inverse=function(e,n,i,o,a){var s,u;return a||(a=t.STANDARD),a===t.LONG_UNROLL&&(a|=t.STANDARD),a&=t.OUT_MASK,u=(s=this.InverseInt(e,n,i,o,a)).vals,a&t.AZIMUTH&&(u.azi1=r.atan2d(s.salp1,s.calp1),u.azi2=r.atan2d(s.salp2,s.calp2)),u},t.Geodesic.prototype.InverseInt=function(e,n,i,o,a){var s,u,c,l,f,p,h,d,g,v,_,x,w,E,S,I,C,N,A,O,P,T,M,L,R,D,F,k,j,B,G,U,z,q,V,Y,X,J,W,H,$,K,Z,Q,tt,et,nt,rt,it,ot,at,st,ut,ct,lt,ft,pt,ht,dt,gt,yt,mt,vt,_t,bt,xt={};if(xt.lat1=e=r.LatFix(e),xt.lat2=i=r.LatFix(i),e=r.AngRound(e),i=r.AngRound(i),u=(s=r.AngDiff(n,o)).t,s=s.s,a&t.LONG_UNROLL?(xt.lon1=n,xt.lon2=n+s+u):(xt.lon1=r.AngNormalize(n),xt.lon2=r.AngNormalize(o)),s=(c=s>=0?1:-1)*r.AngRound(s),u=r.AngRound(180-s-c*u),S=s*r.degree,I=(l=r.sincosd(s>90?u:s)).s,C=(s>90?-1:1)*l.c,(f=Math.abs(e)<Math.abs(i)?-1:1)<0&&(c*=-1,l=e,e=i,i=l),e*=p=e<0?1:-1,i*=p,l=r.sincosd(e),h=this._f1*l.s,d=l.c,h/=l=r.hypot(h,d),d/=l,d=Math.max(t.tiny_,d),l=r.sincosd(i),g=this._f1*l.s,v=l.c,g/=l=r.hypot(g,v),v/=l,v=Math.max(t.tiny_,v),d<-h?v===d&&(g=g<0?h:-h):Math.abs(g)===-h&&(v=d),w=Math.sqrt(1+this._ep2*r.sq(h)),E=Math.sqrt(1+this._ep2*r.sq(g)),M=new Array(t.nC1_+1),L=new Array(t.nC2_+1),R=new Array(t.nC3_),(D=-90===e||0===I)&&(O=I,T=0,k=h,j=(A=C)*d,B=g,G=(P=1)*v,N=Math.atan2(Math.max(0,j*B-k*G),j*G+k*B),_=(F=this.Lengths(this._n,N,k,j,w,B,G,E,d,v,a|t.DISTANCE|t.REDUCEDLENGTH,M,L)).s12b,x=F.m12b,0!=(a&t.GEODESICSCALE)&&(xt.M12=F.M12,xt.M21=F.M21),N<1||x>=0?(N<3*t.tiny_&&(N=x=_=0),x*=this._b,_*=this._b,xt.a12=N/r.degree):D=!1),pt=2,!D&&0===h&&(this.f<=0||u>=180*this.f))A=P=0,O=T=1,_=this.a*S,N=z=S/this._f1,x=this._b*Math.sin(N),a&t.GEODESICSCALE&&(xt.M12=xt.M21=Math.cos(N)),xt.a12=s/this._f1;else if(!D)if(N=(F=this.InverseStart(h,d,w,g,v,E,S,I,C,M,L)).sig12,O=F.salp1,A=F.calp1,N>=0)T=F.salp2,P=F.calp2,q=F.dnm,_=N*this._b*q,x=r.sq(q)*this._b*Math.sin(N/q),a&t.GEODESICSCALE&&(xt.M12=xt.M21=Math.cos(N/q)),xt.a12=N/r.degree,z=S/(this._f1*q);else{for(V=0,Y=t.tiny_,X=1,J=t.tiny_,W=-1,H=!1,$=!1;V<y&&(K=(F=this.Lambda12(h,d,w,g,v,E,O,A,I,C,V<20,M,L,R)).lam12,T=F.salp2,P=F.calp2,N=F.sig12,k=F.ssig1,j=F.csig1,B=F.ssig2,G=F.csig2,U=F.eps,dt=F.domg12,Z=F.dlam12,!$&&Math.abs(K)>=(H?8:1)*m);++V)K>0&&(V<20||A/O>W/J)?(J=O,W=A):K<0&&(V<20||A/O<X/Y)&&(Y=O,X=A),V<20&&Z>0&&(Q=-K/Z,tt=Math.sin(Q),(nt=O*(et=Math.cos(Q))+A*tt)>0&&Math.abs(Q)<Math.PI)?(A=A*et-O*tt,O=nt,O/=l=r.hypot(O,A),A/=l,H=Math.abs(K)<=16*m):(O=(Y+J)/2,A=(X+W)/2,O/=l=r.hypot(O,A),A/=l,H=!1,$=Math.abs(Y-O)+(X-A)<b||Math.abs(O-J)+(A-W)<b);rt=a|(a&(t.REDUCEDLENGTH|t.GEODESICSCALE)?t.DISTANCE:t.NONE),_=(F=this.Lengths(U,N,k,j,w,B,G,E,d,v,rt,M,L)).s12b,x=F.m12b,0!=(a&t.GEODESICSCALE)&&(xt.M12=F.M12,xt.M21=F.M21),x*=this._b,_*=this._b,xt.a12=N/r.degree,a&t.AREA&&(_t=Math.sin(dt),pt=I*(bt=Math.cos(dt))-C*_t,ht=C*bt+I*_t)}return a&t.DISTANCE&&(xt.s12=0+_),a&t.REDUCEDLENGTH&&(xt.m12=0+x),a&t.AREA&&(it=O*d,0!==(ot=r.hypot(A,O*h))&&0!==it?(k=h,j=A*d,B=g,G=P*v,U=(st=r.sq(ot)*this._ep2)/(2*(1+Math.sqrt(1+st))+st),ut=r.sq(this.a)*ot*it*this._e2,k/=l=r.hypot(k,j),j/=l,B/=l=r.hypot(B,G),G/=l,ct=new Array(t.nC4_),this.C4f(U,ct),lt=t.SinCosSeries(!1,k,j,ct),ft=t.SinCosSeries(!1,B,G,ct),xt.S12=ut*(ft-lt)):xt.S12=0,!D&&pt>1&&(pt=Math.sin(z),ht=Math.cos(z)),!D&&ht>-.7071&&g-h<1.75?(dt=1+ht,gt=1+d,yt=1+v,at=2*Math.atan2(pt*(h*yt+g*gt),dt*(h*g+gt*yt))):(vt=P*A+T*O,0===(mt=T*A-P*O)&&vt<0&&(mt=t.tiny_*A,vt=-1),at=Math.atan2(mt,vt)),xt.S12+=this._c2*at,xt.S12*=f*c*p,xt.S12+=0),f<0&&(l=O,O=T,T=l,l=A,A=P,P=l,a&t.GEODESICSCALE&&(l=xt.M12,xt.M12=xt.M21,xt.M21=l)),{vals:xt,salp1:O*=f*c,calp1:A*=f*p,salp2:T*=f*c,calp2:P*=f*p}},t.Geodesic.prototype.GenDirect=function(n,r,i,o,a,s){return s?s===t.LONG_UNROLL&&(s|=t.STANDARD):s=t.STANDARD,o||(s|=t.DISTANCE_IN),new e.GeodesicLine(this,n,r,i,s).GenPosition(o,a,s)},t.Geodesic.prototype.Direct=function(t,e,n,r,i){return this.GenDirect(t,e,n,!1,r,i)},t.Geodesic.prototype.ArcDirect=function(t,e,n,r,i){return this.GenDirect(t,e,n,!0,r,i)},t.Geodesic.prototype.Line=function(t,n,r,i){return new e.GeodesicLine(this,t,n,r,i)},t.Geodesic.prototype.DirectLine=function(t,e,n,r,i){return this.GenDirectLine(t,e,n,!1,r,i)},t.Geodesic.prototype.ArcDirectLine=function(t,e,n,r,i){return this.GenDirectLine(t,e,n,!0,r,i)},t.Geodesic.prototype.GenDirectLine=function(n,r,i,o,a,s){var u;return s||(s=t.STANDARD|t.DISTANCE_IN),o||(s|=t.DISTANCE_IN),(u=new e.GeodesicLine(this,n,r,i,s)).GenSetDistance(o,a),u},t.Geodesic.prototype.InverseLine=function(n,i,o,a,s){var u,c,l;return s||(s=t.STANDARD|t.DISTANCE_IN),u=this.InverseInt(n,i,o,a,t.ARC),l=r.atan2d(u.salp1,u.calp1),s&t.OUT_MASK&t.DISTANCE_IN&&(s|=t.DISTANCE),(c=new e.GeodesicLine(this,n,i,l,s,u.salp1,u.calp1)).SetArc(u.vals.a12),c},t.Geodesic.prototype.Polygon=function(t){return new n.PolygonArea(this,t)},t.WGS84=new t.Geodesic(i.WGS84.a,i.WGS84.f)}(Ge.Geodesic,Ge.GeodesicLine,Ge.PolygonArea,Ge.Math,Ge.Constants),function(t,e,n){e.GeodesicLine=function(e,r,i,o,a,s,u){var c,l,f,p,h,d;a||(a=t.STANDARD|t.DISTANCE_IN),this.a=e.a,this.f=e.f,this._b=e._b,this._c2=e._c2,this._f1=e._f1,this.caps=a|t.LATITUDE|t.AZIMUTH|t.LONG_UNROLL,this.lat1=n.LatFix(r),this.lon1=i,void 0===s||void 0===u?(this.azi1=n.AngNormalize(o),c=n.sincosd(n.AngRound(this.azi1)),this.salp1=c.s,this.calp1=c.c):(this.azi1=o,this.salp1=s,this.calp1=u),c=n.sincosd(n.AngRound(this.lat1)),f=this._f1*c.s,l=c.c,f/=c=n.hypot(f,l),l/=c,l=Math.max(t.tiny_,l),this._dn1=Math.sqrt(1+e._ep2*n.sq(f)),this._salp0=this.salp1*l,this._calp0=n.hypot(this.calp1,this.salp1*f),this._ssig1=f,this._somg1=this._salp0*f,this._csig1=this._comg1=0!==f||0!==this.calp1?l*this.calp1:1,c=n.hypot(this._ssig1,this._csig1),this._ssig1/=c,this._csig1/=c,this._k2=n.sq(this._calp0)*e._ep2,p=this._k2/(2*(1+Math.sqrt(1+this._k2))+this._k2),this.caps&t.CAP_C1&&(this._A1m1=t.A1m1f(p),this._C1a=new Array(t.nC1_+1),t.C1f(p,this._C1a),this._B11=t.SinCosSeries(!0,this._ssig1,this._csig1,this._C1a),h=Math.sin(this._B11),d=Math.cos(this._B11),this._stau1=this._ssig1*d+this._csig1*h,this._ctau1=this._csig1*d-this._ssig1*h),this.caps&t.CAP_C1p&&(this._C1pa=new Array(t.nC1p_+1),t.C1pf(p,this._C1pa)),this.caps&t.CAP_C2&&(this._A2m1=t.A2m1f(p),this._C2a=new Array(t.nC2_+1),t.C2f(p,this._C2a),this._B21=t.SinCosSeries(!0,this._ssig1,this._csig1,this._C2a)),this.caps&t.CAP_C3&&(this._C3a=new Array(t.nC3_),e.C3f(p,this._C3a),this._A3c=-this.f*this._salp0*e.A3f(p),this._B31=t.SinCosSeries(!0,this._ssig1,this._csig1,this._C3a)),this.caps&t.CAP_C4&&(this._C4a=new Array(t.nC4_),e.C4f(p,this._C4a),this._A4=n.sq(this.a)*this._calp0*this._salp0*e._e2,this._B41=t.SinCosSeries(!1,this._ssig1,this._csig1,this._C4a)),this.a13=this.s13=Number.NaN},e.GeodesicLine.prototype.GenPosition=function(e,r,i){var o,a,s,u,c,l,f,p,h,d,g,y,m,v,_,b,x,w,E,S,I,C,N,A,O,P,T={};return i?i===t.LONG_UNROLL&&(i|=t.STANDARD):i=t.STANDARD,i&=this.caps&t.OUT_MASK,T.lat1=this.lat1,T.azi1=this.azi1,T.lon1=i&t.LONG_UNROLL?this.lon1:n.AngNormalize(this.lon1),e?T.a12=r:T.s12=r,e||this.caps&t.DISTANCE_IN&t.OUT_MASK?(u=0,c=0,e?(o=r*n.degree,a=(N=n.sincosd(r)).s,s=N.c):(p=r/(this._b*(1+this._A1m1)),h=Math.sin(p),d=Math.cos(p),o=p-((u=-t.SinCosSeries(!0,this._stau1*d+this._ctau1*h,this._ctau1*d-this._stau1*h,this._C1pa))-this._B11),a=Math.sin(o),s=Math.cos(o),Math.abs(this.f)>.01&&(l=this._ssig1*s+this._csig1*a,f=this._csig1*s-this._ssig1*a,u=t.SinCosSeries(!0,l,f,this._C1a),o-=((1+this._A1m1)*(o+(u-this._B11))-r/this._b)/Math.sqrt(1+this._k2*n.sq(l)),a=Math.sin(o),s=Math.cos(o))),l=this._ssig1*s+this._csig1*a,f=this._csig1*s-this._ssig1*a,E=Math.sqrt(1+this._k2*n.sq(l)),i&(t.DISTANCE|t.REDUCEDLENGTH|t.GEODESICSCALE)&&((e||Math.abs(this.f)>.01)&&(u=t.SinCosSeries(!0,l,f,this._C1a)),c=(1+this._A1m1)*(u-this._B11)),m=this._calp0*l,0===(v=n.hypot(this._salp0,this._calp0*f))&&(v=f=t.tiny_),x=this._salp0,w=this._calp0*f,e&&i&t.DISTANCE&&(T.s12=this._b*((1+this._A1m1)*o+c)),i&t.LONGITUDE&&(_=this._salp0*l,b=f,y=n.copysign(1,this._salp0),g=((i&t.LONG_UNROLL?y*(o-(Math.atan2(l,f)-Math.atan2(this._ssig1,this._csig1))+(Math.atan2(y*_,b)-Math.atan2(y*this._somg1,this._comg1))):Math.atan2(_*this._comg1-b*this._somg1,b*this._comg1+_*this._somg1))+this._A3c*(o+(t.SinCosSeries(!0,l,f,this._C3a)-this._B31)))/n.degree,T.lon2=i&t.LONG_UNROLL?this.lon1+g:n.AngNormalize(n.AngNormalize(this.lon1)+n.AngNormalize(g))),i&t.LATITUDE&&(T.lat2=n.atan2d(m,this._f1*v)),i&t.AZIMUTH&&(T.azi2=n.atan2d(x,w)),i&(t.REDUCEDLENGTH|t.GEODESICSCALE)&&(S=t.SinCosSeries(!0,l,f,this._C2a),I=(1+this._A2m1)*(S-this._B21),C=(this._A1m1-this._A2m1)*o+(c-I),i&t.REDUCEDLENGTH&&(T.m12=this._b*(E*(this._csig1*l)-this._dn1*(this._ssig1*f)-this._csig1*f*C)),i&t.GEODESICSCALE&&(N=this._k2*(l-this._ssig1)*(l+this._ssig1)/(this._dn1+E),T.M12=s+(N*l-f*C)*this._ssig1/this._dn1,T.M21=s-(N*this._ssig1-this._csig1*C)*l/E)),i&t.AREA&&(A=t.SinCosSeries(!1,l,f,this._C4a),0===this._calp0||0===this._salp0?(O=x*this.calp1-w*this.salp1,P=w*this.calp1+x*this.salp1):(O=this._calp0*this._salp0*(s<=0?this._csig1*(1-s)+a*this._ssig1:a*(this._csig1*a/(1+s)+this._ssig1)),P=n.sq(this._salp0)+n.sq(this._calp0)*this._csig1*f),T.S12=this._c2*Math.atan2(O,P)+this._A4*(A-this._B41)),e||(T.a12=o/n.degree),T):(T.a12=Number.NaN,T)},e.GeodesicLine.prototype.Position=function(t,e){return this.GenPosition(!1,t,e)},e.GeodesicLine.prototype.ArcPosition=function(t,e){return this.GenPosition(!0,t,e)},e.GeodesicLine.prototype.GenSetDistance=function(t,e){t?this.SetArc(e):this.SetDistance(e)},e.GeodesicLine.prototype.SetDistance=function(e){var n;this.s13=e,n=this.GenPosition(!1,this.s13,t.ARC),this.a13=0+n.a12},e.GeodesicLine.prototype.SetArc=function(e){var n;this.a13=e,n=this.GenPosition(!0,this.a13,t.DISTANCE),this.s13=0+n.s12}}(Ge.Geodesic,Ge.GeodesicLine,Ge.Math),function(t,e,n,r){var i,o;i=function(t,e){var r;return t=n.AngNormalize(t),e=n.AngNormalize(e),r=n.AngDiff(t,e).s,t<=0&&e>0&&r>0?1:e<=0&&t>0&&r<0?-1:0},o=function(t,e){return((e%=720)>=0&&e<360||e<-360?0:1)-((t%=720)>=0&&t<360||t<-360?0:1)},t.PolygonArea=function(t,n){this._geod=t,this.a=this._geod.a,this.f=this._geod.f,this._area0=4*Math.PI*t._c2,this.polyline=n||!1,this._mask=e.LATITUDE|e.LONGITUDE|e.DISTANCE|(this.polyline?e.NONE:e.AREA|e.LONG_UNROLL),this.polyline||(this._areasum=new r.Accumulator(0)),this._perimetersum=new r.Accumulator(0),this.Clear()},t.PolygonArea.prototype.Clear=function(){this.num=0,this._crossings=0,this.polyline||this._areasum.Set(0),this._perimetersum.Set(0),this._lat0=this._lon0=this.lat=this.lon=Number.NaN},t.PolygonArea.prototype.AddPoint=function(t,e){var n;0===this.num?(this._lat0=this.lat=t,this._lon0=this.lon=e):(n=this._geod.Inverse(this.lat,this.lon,t,e,this._mask),this._perimetersum.Add(n.s12),this.polyline||(this._areasum.Add(n.S12),this._crossings+=i(this.lon,e)),this.lat=t,this.lon=e),++this.num},t.PolygonArea.prototype.AddEdge=function(t,e){var n;this.num&&(n=this._geod.Direct(this.lat,this.lon,t,e,this._mask),this._perimetersum.Add(e),this.polyline||(this._areasum.Add(n.S12),this._crossings+=o(this.lon,n.lon2)),this.lat=n.lat2,this.lon=n.lon2),++this.num},t.PolygonArea.prototype.Compute=function(t,e){var n,o,a={number:this.num};return this.num<2?(a.perimeter=0,this.polyline||(a.area=0),a):this.polyline?(a.perimeter=this._perimetersum.Sum(),a):(n=this._geod.Inverse(this.lat,this.lon,this._lat0,this._lon0,this._mask),a.perimeter=this._perimetersum.Sum(n.s12),(o=new r.Accumulator(this._areasum)).Add(n.S12),1&this._crossings+i(this.lon,this._lon0)&&o.Add((o.Sum()<0?1:-1)*this._area0/2),t||o.Negate(),e?o.Sum()>this._area0/2?o.Add(-this._area0):o.Sum()<=-this._area0/2&&o.Add(+this._area0):(o.Sum()>=this._area0||o<0)&&o.Add(-this._area0),a.area=o.Sum(),a)},t.PolygonArea.prototype.TestPoint=function(t,e,n,r){var o,a,s,u,c={number:this.num+1};if(0===this.num)return c.perimeter=0,this.polyline||(c.area=0),c;for(c.perimeter=this._perimetersum.Sum(),a=this.polyline?0:this._areasum.Sum(),s=this._crossings,u=0;u<(this.polyline?1:2);++u)o=this._geod.Inverse(0===u?this.lat:t,0===u?this.lon:e,0!==u?this._lat0:t,0!==u?this._lon0:e,this._mask),c.perimeter+=o.s12,this.polyline||(a+=o.S12,s+=i(0===u?this.lon:e,0!==u?this._lon0:e));return this.polyline||(1&s&&(a+=(a<0?1:-1)*this._area0/2),n||(a*=-1),r?a>this._area0/2?a-=this._area0:a<=-this._area0/2&&(a+=this._area0):a>=this._area0?a-=this._area0:a<0&&(a+=this._area0),c.area=a),c},t.PolygonArea.prototype.TestEdge=function(t,e,n,r){var a,s,u,c={number:this.num?this.num+1:0};return 0===this.num?c:(c.perimeter=this._perimetersum.Sum()+e,this.polyline||(s=this._areasum.Sum(),u=this._crossings,s+=(a=this._geod.Direct(this.lat,this.lon,t,e,this._mask)).S12,u+=o(this.lon,a.lon2),a=this._geod.Inverse(a.lat2,a.lon2,this._lat0,this._lon0,this._mask),c.perimeter+=a.s12,s+=a.S12,1&(u+=i(a.lon2,this._lon0))&&(s+=(s<0?1:-1)*this._area0/2),n||(s*=-1),r?s>this._area0/2?s-=this._area0:s<=-this._area0/2&&(s+=this._area0):s>=this._area0?s-=this._area0:s<0&&(s+=this._area0),c.area=s),c)}}(Ge.PolygonArea,Ge.Geodesic,Ge.Math,Ge.Accumulator),K((function(t){var e=J(t.params,"rlat_1"),n=J(t.params,"rlat_2");qe(t,e,n)}),"aea","Albers Equal Area","\n\tConic Sph&Ell\n\tlat_1= lat_2="),K((function(t){var e=J(t.params,"rlat_1"),n=J(t.params,"bsouth")?-A:A;qe(t,e,n)}),"leac","Lambert Equal Area Conic","\n\tConic, Sph&Ell\n\tlat_1= south"),K((function(t){var e,n,r,i,o,s,f;t.phi0=J(t.params,"rlat_0"),a(a(t.phi0)-A)<1e-10?(o=t.phi0<0?1:0,e=t.phi0<0?-1:1,n=0):a(t.phi0)<1e-10?(o=2,e=0,n=1):(o=3,e=u(t.phi0),n=c(t.phi0));if(t.es)if(f=new Ge.Geodesic.Geodesic(t.a,t.es/(1+g(t.one_es))),s=Ve(t.es),J(t.params,"bguam"))r=Ye(t.phi0,e,n,s),t.inv=function(e,n){var i,o,a;for(i=.5*e.x*e.x,n.phi=t.phi0,a=0;a<3;++a)o=t.e*u(n.phi),n.phi=Xe(r+e.y-i*l(n.phi)*(o=g(1-o*o)),t.es,s);n.lam=e.x*o/c(n.phi)},t.fwd=function(e,n){var i,o,a;i=c(e.phi),o=u(e.phi),a=1/g(1-t.es*o*o),n.x=e.lam*i*a,n.y=Ye(e.phi,o,i,s)-r+.5*e.lam*e.lam*i*o*a};else{switch(o){case 0:i=Ye(A,1,0,s);break;case 1:i=Ye(-A,-1,0,s);break;case 2:case 3:t.inv=y,t.fwd=h,1/g(1-t.es*e*e),e*(t.e/g(t.one_es)),n}t.inv=y,t.fwd=h}else t.inv=function(r,i){var a,s,l,f=r.x,p=r.y;if((s=_(f,p))>S)s-1e-10>S&&j(),s=S;else if(s<1e-10)return i.phi=t.phi0,void(i.lam=0);3==o||2==o?(l=u(s),a=c(s),2==o?(i.phi=Je(p*l/s),f*=l,p=a*s):(i.phi=Je(a*e+p*l*n/s),p=(a-e*u(i.phi))*s,f*=l*n),i.lam=0==p?0:d(f,p)):0==o?(i.phi=A-s,i.lam=d(f,-p)):(i.phi=s-A,i.lam=d(f,p))},t.fwd=function(t,r){var i,s,l;switch(l=u(t.phi),s=c(t.phi),i=c(t.lam),o){case 2:case 3:r.y=2==o?s*i:e*l+n*s*i,a(a(r.y)-1)<1e-14?r.y<0?k():r.x=r.y=0:(r.y=p(r.y),r.y/=u(r.y),r.x=r.y*s*u(t.lam),r.y*=2==o?l:n*l-e*s*i);break;case 0:t.phi=-t.phi,i=-i;case 1:a(t.phi-A)<1e-10&&k(),r.x=(r.y=A+t.phi)*u(t.lam),r.y*=i}};function h(e,n){var r,l,p,h,d,g,y,m,v,_,b;switch(r=c(e.lam),l=c(e.phi),p=u(e.phi),o){case 0:r=-r;case 1:n.x=(h=a(i-Ye(e.phi,p,l,s)))*u(e.lam),n.y=h*r;break;case 2:case 3:if(a(e.lam)<1e-10&&a(e.phi-t.phi0)<1e-10){n.x=n.y=0;break}m=t.phi0/C,y=t.lam0/C,_=e.phi/C,v=(e.lam+t.lam0)/C,d=(b=f.Inverse(m,y,_,v,f.AZIMUTH)).azi1*C,g=b.s12,n.x=g*u(d)/t.a,n.y=g*c(d)/t.a}}function y(e,n){var r,a,u,c,l,p,h,y;if((r=_(e.x,e.y))<1e-10)return n.phi=t.phi0,n.lam=0,n;3==o||2==o?(c=e.x*t.a,l=e.y*t.a,p=t.phi0/C,h=t.lam0/C,a=d(c,l)/C,u=g(c*c+l*l),y=f.Direct(p,h,a,u,f.STANDARD),n.phi=y.lat2*C,n.lam=y.lon2*C,n.lam-=t.lam0):(n.phi=Xe(0==o?i-r:i+r,t.es,s),n.lam=d(e.x,0==o?-e.y:e.y))}}),"aeqd","Azimuthal Equidistant","\n\tAzi, Sph&Ell\n\tlat_0 guam"),K((function(t){var e,n,r,i,o,s,f=1e-10;t.es=0,t.fwd=function(t,s){var p,h,d,g,y,m,_,b;switch(p=u(t.lam),h=c(t.lam),i){case 2:case 3:g=u(t.phi),d=c(t.phi),b=d*h,3==i&&(b=e*g+n*b),!o&&b<-f&&k(),_=a(m=1-b)>f?-v(y=.5*(1+b))/m-r/y:.5-r,s.x=_*d*p,s.y=3==i?_*(n*g-e*d*h):_*g;break;case 1:case 0:t.phi=a(p_halfpi-t.phi),!o&&t.phi-f>A&&k(),(t.phi*=.5)>f?(y=l(t.phi),_=-2*(v(c(t.phi))/y+y*r),s.x=_*p,s.y=_*h,0==i&&(s.y=-s.y)):s.x=s.y=0}},o=J(t.params,"bno_cut"),s=.5*(A-J(t.params,"rlat_b")),a(s)<f?r=-.5:(r=1/l(s),r*=r*v(c(s)));a(a(t.phi0)-A)<f?t.phi0<0?(p_halfpi=-A,i=1):(p_halfpi=A,i=0):a(t.phi0)<f?i=2:(i=3,e=u(t.phi0),n=c(t.phi0))}),"airy","Airy","\n\tMisc Sph, no inv.\n\tno_cut lat_b="),K((function(t){var e=t.opaque={mode:1};J(t.params,"tlat_1")?0===(e.cosphi1=c(J(t.params,"rlat_1")))&&G(-22):e.cosphi1=.6366197723675814;Ke(t)}),"wintri","Winkel Tripel","\n\tMisc Sph\n\tlat_1"),K(Ke,"aitoff","Aitoff","\n\tMisc Sph"),K((function(t){t.fwd=function(t,e){var n,r,i,o,a,s,f,p=t.lam;n=l(.5*t.phi),i=1+(r=g(1-n*n))*c(p*=.5),o=u(p)*r/i,s=n/i,e.x=4/3*o*(3+(a=o*o)-3*(f=s*s)),e.y=4/3*s*(3+3*a-f)},t.es=0}),"august","August Epicycloidal","\n\tMisc Sph, no inv."),K((function(t){Ze(t,!1,!1)}),"apian","Apian Globular I","\n\tMisc Sph, no inv."),K((function(t){Ze(t,!1,!0)}),"ortel","Ortelius Oval","\n\tMisc Sph, no inv."),K((function(t){Ze(t,!0,!1)}),"bacon","Bacon Globular","\n\tMisc Sph, no inv."),K((function(t){var e,n;t.es=0,t.fwd=function(t,r){var i,o,a,s,l,p;return t.lam+=-16.5*C,o=c(t.phi),a=c(t.lam)*o,s=u(t.lam)*o,p=(l=u(t.phi))*e+a*n,t.lam=d(1*s-0*p,a*e-l*n),p=1*p+0*s,t.phi=f(p),t.lam=St(t.lam),t.lam+t.phi<-1.4&&(i=(t.lam-t.phi+1.6)*(t.lam+t.phi+1.4)/8,t.lam+=i,t.phi-=.8*i*u(t.phi+S/2)),o=c(t.phi),i=g(2/(1+o*c(t.lam/2))),r.x=1.68*i*o*u(t.lam/2),r.y=i*u(t.phi),i=(1-c(t.lam*t.phi))/12,r.y<0&&(r.x*=1+i),r.y>0&&(r.x*=1+i/1.5*r.x*r.x),r},t.lam0=0,t.phi0=-42*C,e=c(t.phi0),n=u(t.phi0),1,0}),"bertin1953","Bertin 1953","\n\tMisc Sph no inv."),K((function(t){var e=g(2);t.fwd=function(t,n){var r,i,o,s;if(r=t.phi,a(a(t.phi)-A)<1e-7)n.x=0;else{for(o=u(r)*S,s=20;s&&(r-=i=(r+u(r)-o)/(1+c(r)),!(a(i)<1e-7));--s);r*=.5,n.x=2.00276*t.lam/(1/c(t.phi)+1.11072/c(r))}n.y=.49931*(t.phi+e*u(r))},t.es=0}),"boggs","Boggs Eumorphic","\n\tPCyl., no inv., Sph."),K((function(t){var e,n,r,i,o,s;e=J(t.params,"rlat_1"),a(e)<1e-10&&G(-23);t.es?(o=Ve(t.es),i=Ye(e,r=u(e),s=c(e),o),r=s/(g(1-t.es*r*r)*r),t.inv=function(e,n){var s,l;l=_(e.x,e.y=r-e.y),n.phi=Xe(r+i-l,t.es,o),(s=a(n.phi))<A?(s=u(n.phi),n.lam=l*d(e.x,e.y)*g(1-t.es*s*s)/c(n.phi)):a(s-A)<=1e-10?n.lam=0:j()},t.fwd=function(e,n){var a,s,l;a=r+i-Ye(e.phi,s=u(e.phi),l=c(e.phi),o),s=l*e.lam/(a*g(1-t.es*s*s)),n.x=a*u(s),n.y=r-a*c(s)}):(n=a(e)+1e-10>=A?0:1/l(e),t.inv=function(t,r){var i=_(t.x,t.y=n-t.y);r.phi=n+e-i,a(r.phi)>A&&j();a(a(r.phi)-A)<=1e-10?r.lam=0:r.lam=i*d(t.x,t.y)/c(r.phi)},t.fwd=function(t,r){var i,o;o=n+e-t.phi,a(o)>1e-10?(r.x=o*u(i=t.lam*c(t.phi)/o),r.y=n-o*c(i)):r.x=r.y=0})}),"bonne","Bonne (Werner lat_1=90)","\n\tConic Sph&Ell\n\tlat_1="),K((function(t){var e,n,r=.041666666666666664;t.es?(n=Ve(t.es),e=Ye(t.phi0,u(t.phi0),c(t.phi0),n),t.fwd=function(i,o){var a,s,f,p,h,d;o.y=Ye(i.phi,a=u(i.phi),p=c(i.phi),n),a=1/g(1-t.es*a*a),d=l(i.phi),s=d*d,f=i.lam*p,p*=t.es*p/(1-t.es),h=f*f,o.x=a*f*(1-h*s*(.16666666666666666-(8-s+8*p)*h*.008333333333333333)),o.y-=e-a*d*h*(.5+(5-s+6*p)*h*r)},t.inv=function(i,o){var a,s,f,p,h,d,y;y=Xe(e+i.y,t.es,n),d=l(y),s=d*d,a=u(y),f=1/(1-t.es*a*a),a=g(f),f*=(1-t.es)*a,p=i.x/a,h=p*p,o.phi=y-a*d/f*h*(.5-(1+3*s)*h*r),o.lam=p*(1+s*h*((1+3*s)*h*.06666666666666667-.3333333333333333))/c(y)}):(t.fwd=function(e,n){n.x=f(c(e.phi)*u(e.lam)),n.y=d(l(e.phi),c(e.lam))-t.phi0},t.inv=function(e,n){var r=e.y+t.phi0;n.phi=f(u(r)*c(e.x)),n.lam=d(l(e.x),c(r))})}),"cass","Cassini","\n\tCyl, Sph&Ell"),K((function(t){var e,n,r=0;J(t.params,"tlat_ts")&&(t.k0=c(r=J(t.params,"rlat_ts")),t.k0<0&&G(-24));t.es?(r=u(r),t.k0/=g(1-t.es*r*r),t.e=g(t.es),(n=Qe(t.es))||e_error_0(),e=Ue(1,t.e,t.one_es),t.fwd=function(e,n){n.x=t.k0*e.lam,n.y=.5*Ue(u(e.phi),t.e,t.one_es)/t.k0},t.inv=function(r,i){i.phi=tn(f(2*r.y*t.k0/e),n),i.lam=r.x/t.k0}):(t.fwd=function(e,n){n.x=t.k0*e.lam,n.y=u(e.phi)/t.k0},t.inv=function(e,n){var r,i=e.x,o=e.y;(r=a(o*=t.k0))-1e-10<=1?(n.phi=r>=1?o<0?-A:A:f(o),n.lam=i/t.k0):j()})}),"cea","Equal Area Cylindrical","\n\tCyl, Sph&Ell\n\tlat_ts="),K((function(t){var e,n,r,i,o,s,l,f=[];for(s=0;s<3;++s)f[s]={p:{}},f[s].phi=J(t.params,"rlat_"+(s+1)),f[s].lam=J(t.params,"rlon_"+(s+1)),f[s].lam=St(f[s].lam-t.lam0),f[s].cosphi=c(f[s].phi),f[s].sinphi=u(f[s].phi);for(s=0;s<3;++s)l=2==s?0:s+1,f[s].v=p(f[l].phi-f[s].phi,f[s].cosphi,f[s].sinphi,f[l].cosphi,f[l].sinphi,f[l].lam-f[s].lam),f[s].v.r||G(-25);function p(t,e,n,r,i,o){var s,l,f,p={};return s=c(o),a(t)>1||a(o)>1?p.r=We(cs1*i+e*r*s):(l=u(.5*t),f=u(.5*o),p.r=2*Je(g(l*l+e*r*f*f))),a(p.r)>1e-9?p.Az=d(r*u(o),e*i-n*r*s):p.r=p.Az=0,p}function h(t,e,n){return We(.5*(t*t+e*e-n*n)/(t*e))}r=h(f[0].v.r,f[2].v.r,f[1].v.r),i=h(f[0].v.r,f[1].v.r,f[2].v.r),o=S-r,n=2*(f[0].p.y=f[1].p.y=f[2].v.r*u(r)),f[2].p.y=0,f[0].p.x=-(f[1].p.x=.5*f[0].v.r),e=f[2].p.x=f[0].p.x+f[2].v.r*c(r),t.es=0,t.fwd=function(t,r){var a,s,l,d,g,y,m,v=[];for(a=u(t.phi),s=c(t.phi),d=0;d<3&&(v[d]=p(t.phi-f[d].phi,f[d].cosphi,f[d].sinphi,s,a,t.lam-f[d].lam),v[d].r);++d)v[d].Az=St(v[d].Az-f[d].v.Az);if(d<3)y=f[d].p.x,m=f[d].p.y;else{for(y=e,m=n,d=0;d<3;++d)g=2==d?0:d+1,l=h(f[d].v.r,v[d].r,v[g].r),v[d].Az<0&&(l=-l),d?1==d?(l=i-l,y-=v[d].r*c(l),m-=v[d].r*u(l)):(l=o-l,y+=v[d].r*c(l),m+=v[d].r*u(l)):(y+=v[d].r*c(l),m-=v[d].r*u(l));y*=1/3,m*=1/3}r.x=y,r.y=m}}),"chamb","Chamberlin Trimetric","\n\tMisc Sph, no inv.\n\tlat_1= lon_1= lat_2= lon_2= lat_3= lon_3="),K((function(t){t.inv=function(t,e){e.phi=3*f(.32573500793527993*t.y),e.lam=1.0233267079464885*t.x/(2*c((e.phi+e.phi)*(1/3))-1)},t.fwd=function(t,e){t.phi*=1/3,e.x=.9772050238058398*t.lam*(2*c(t.phi+t.phi)-1),e.y=3.0699801238394655*u(t.phi)},t.es=0}),"crast","Craster Parabolic (Putnins P4)","\n\tPCyl., Sph."),K((function(t){t.fwd=function(t,e){var n=a(t.lam);e.y=t.phi,e.x=t.lam,e.x*=c((.95+n*(n*n*.0016666666666666666-.08333333333333333))*(t.phi*(.9+.03*t.phi*t.phi*t.phi*t.phi)))},t.es=0}),"denoy","Denoyer Semi-Elliptical","\n\tPCyl, Sph., no inv."),K((function(t){var e=.9213177319235613,n=.3183098861837907;t.es=0,t.fwd=function(t,r){r.x=e*t.lam*(1-n*a(t.phi)),r.y=e*t.phi},t.inv=function(t,r){r.phi=t.y/e,r.lam=t.x/(e*(1-n*a(r.phi)))}}),"eck1","Eckert I","\n\tPCyl Sph"),K((function(t){var e=.46065886596178063,n=1.4472025091165353;t.es=0,t.fwd=function(t,r){r.x=e*t.lam*(r.y=g(4-3*u(a(t.phi)))),r.y=n*(2-r.y),t.phi<0&&(r.y=-r.y)},t.inv=function(t,r){r.lam=t.x/(e*(r.phi=2-a(t.y)/n)),r.phi=.3333333333333333*(4-r.phi*r.phi),a(r.phi)>=1?a(r.phi)>1.0000001?j():r.phi=r.phi<0?-A:A:r.phi=f(r.phi),t.y<0&&(r.phi=-r.phi)}}),"eck2","Eckert II","\n\tPCyl Sph"),K((function(t){en(t,{C_x:.4222382003157712,C_y:.8444764006315424,A:1,B:.4052847345693511})}),"eck3","Eckert III","\n\tPCyl Sph"),K((function(t){en(t,{C_x:.94745,C_y:.94745,A:0,B:.3039635509270133})}),"wag6","Wagner VI","\n\tPCyl Sph"),K((function(t){en(t,{C_x:.8660254037844,C_y:1,A:0,B:.3039635509270133})}),"kav7","Kavraisky VII","\n\tPCyl Sph"),K((function(t){en(t,{C_x:1.8949,C_y:.94745,A:-.5,B:.3039635509270133})}),"putp1","Putnins P1","\n\tPCyl Sph"),K((function(t){var e=.4222382003157712,n=1.3265004281770023,r=3.5707963267948966;t.es=0,t.fwd=function(t,i){var o,s,l,f,p;for(o=r*u(t.phi),s=t.phi*t.phi,t.phi*=.895168+s*(.0218849+.00826809*s),p=6;p&&(f=c(t.phi),l=u(t.phi),t.phi-=s=(t.phi+l*(f+2)-o)/(1+f*(f+2)-l*l),!(a(s)<1e-7));--p);p?(i.x=e*t.lam*(1+c(t.phi)),i.y=n*u(t.phi)):(i.x=e*t.lam,i.y=t.phi<0?-n:n)},t.inv=function(t,i){var o;i.phi=Je(t.y/n),i.lam=t.x/(e*(1+(o=c(i.phi)))),i.phi=Je((i.phi+u(i.phi)*(o+2))/r)}}),"eck4","Eckert IV","\n\tPCyl Sph"),K((function(t){t.es=0,t.fwd=function(t,e){e.x=.4410127717245515*(1+c(t.phi))*t.lam,e.y=.882025543449103*t.phi},t.inv=function(t,e){e.lam=2.267508027238226*t.x/(1+c(e.phi=1.133754013619113*t.y))}}),"eck5","Eckert V","\n\tPCyl Sph"),K((function(t){var e=c(J(t.params,"rlat_ts"));e<=0&&G(-24);t.es=0,t.fwd=function(n,r){r.x=e*n.lam,r.y=n.phi-t.phi0},t.inv=function(n,r){r.lam=n.x/e,r.phi=n.y+t.phi0}}),"eqc","Equidistant Cylindrical (Plate Caree)","\n\tCyl, Sph\n\tlat_ts=[, lat_0=0]"),K((function(t){var e,n,r,i,o,s,l,f,p,h,g,y,m;e=J(t.params,"rlat_1"),n=J(t.params,"rlat_2"),a(e+n)<1e-10&&G(-21);(l=Ve(t.es))||e_error_0();r=h=u(e),p=c(e),g=a(e-n)>=1e-10,(f=t.es>0)?(m=ze(h,p,t.es),y=Ye(e,h,p,l),g&&(h=u(n),p=c(n),r=(m-ze(h,p,t.es))/(Ye(n,h,p,l)-y)),o=(s=y+m/r)-Ye(t.phi0,u(t.phi0),c(t.phi0),l)):(g&&(r=(p-c(n))/(n-e)),s=e+c(e)/r,o=s-t.phi0);t.fwd=function(t,e){i=s-(f?Ye(t.phi,u(t.phi),c(t.phi),l):t.phi),e.x=i*u(t.lam*=r),e.y=o-i*c(t.lam)},t.inv=function(e,n){0!=(i=_(e.x,e.y=o-e.y))?(r<0&&(i=-i,e.x=-e.x,e.y=-e.y),n.phi=s-i,f&&(n.phi=Xe(n.phi,t.es,l)),n.lam=d(e.x,e.y)/r):(n.lam=0,n.phi=r>0?A:-A)}}),"eqdc","Equidistant Conic","\n\tConic, Sph&Ell\n\tlat_1= lat_2="),K((function(t){var e=1.340264,n=-.081106,r=893e-6,i=.003796,o=Math.sqrt(3)/2;t.es=0,t.fwd=function(t,a){var s=Math.asin(o*Math.sin(t.phi)),u=s*s,c=u*u*u;a.x=t.lam*Math.cos(s)/(o*(e+3*n*u+c*(7*r+9*i*u))),a.y=s*(e+n*u+c*(r+i*u))},t.inv=function(t,a){var s,u,c,l,f=t.y;for(l=0;l<12&&(f-=c=(f*(e+n*(s=f*f)+(u=s*s*s)*(r+i*s))-t.y)/(e+3*n*s+u*(7*r+9*i*s)),!(Math.abs(c)<1e-9));++l);u=(s=f*f)*s*s,a.lam=o*t.x*(e+3*n*s+u*(7*r+9*i*s))/Math.cos(f),a.phi=Math.asin(Math.sin(f)/o)}}),"eqearth","Equal Earth","\n\tPCyl., Sph."),K(nn,"etmerc","Extended Transverse Mercator","\n\tCyl, Sph\n\tlat_ts=(0)\nlat_0=(0)"),K((function(t){var e;t.es||G(-34);t.y0=J(t.params,"bsouth")?1e7:0,t.x0=5e5,J(t.params,"tzone")?(e=J(t.params,"izone"))>0&&e<=60?--e:G(-35):(e=s(30*(St(t.lam0)+S)/S))<0?e=0:e>=60&&(e=59);t.lam0=(e+.5)*S/30-S,t.k0=.9996,t.phi0=0,nn(t)}),"utm","Universal Transverse Mercator (UTM)","\n\tCyl, Sph\n\tzone= south"),K((function(t){t.fwd=function(t,e){e.x=.7071067811865476*t.lam,e.y=1.7071067811865475*l(.5*t.phi)},t.inv=function(t,e){e.lam=1.4142135623730951*t.x,e.phi=2*h(.585786437626905*t.y)},t.es=0}),"gall","Gall (Gall Stereographic)","\n\tCyl, Sph"),K((function(t){t.is_geocent=!0,t.x0=0,t.y0=0,t.fwd=function(t,e){e.x=t.lam,e.y=t.phi},t.inv=function(t,e){e.phi=t.y,e.lam=t.x}}),"geocent","Geocentric","\n\t"),K((function(t){var e=i(J(t.params,"tlat_1")?J(t.params,"rlat_1"):0),n=u(e),r=c(e);function i(t){return Je(l(.5*t))}t.fwd=function(t,e){var o=.5*t.lam,a=i(t.phi),s=u(a),l=c(a),f=c(o);n*s+r*l*f>=0?(e.x=l*u(o),e.y=r*s-n*l*f):k()},t.es=0}),"gilbert","Gilbert Two World Perspective","\n\tPCyl., Sph., NoInv.\n\tlat_1="),K((function(t){t.fwd=function(t,e){var n=t.phi*t.phi;e.y=t.phi*(1+.08333333333333333*n),e.x=t.lam*(1-.162388*n),n=t.lam*t.lam,e.x*=.87-952426e-9*n*n},t.es=0}),"gins8","Ginsburg VIII (TsNIIGAiK)","\n\tPCyl, Sph., no inv."),K((function(t){J(t.params,"tn"),J(t.params,"tm")?on(t,J(t.params,"dm"),J(t.params,"dn")):G(-99)}),"gn_sinu","General Sinusoidal Series","\n\tPCyl, Sph.\n\tm= n="),K(rn,"sinu","Sinusoidal (Sanson-Flamsteed)","\n\tPCyl, Sph&Ell"),K((function(t){on(t,1,2.5707963267948966)}),"eck6","Eckert VI","\n\tPCyl, Sph.\n\tm= n="),K((function(t){on(t,.5,1.7853981633974483)}),"mbtfps","McBryde-Thomas Flat-Polar Sinusoidal","\n\tPCyl, Sph."),K((function(t){var e,n;a(a(t.phi0)-A)<1e-10?n=t.phi0<0?1:0:a(t.phi0)<1e-10?n=2:(n=3,sinph0=u(t.phi0),e=c(t.phi0));t.inv=function(r,i){var o,s,c,l=r.x,p=r.y;if(o=_(l,p),c=u(i.phi=h(o)),s=g(1-c*c),a(o)<=1e-10)i.phi=t.phi0,i.lam=0;else{switch(n){case 3:i.phi=s*sinph0+p*c*e/o,a(i.phi)>=1?i.phi=i.phi>0?A:-A:i.phi=f(i.phi),p=(s-sinph0*u(i.phi))*o,l*=c*e;break;case 2:i.phi=p*c/o,a(i.phi)>=1?i.phi=i.phi>0?A:-A:i.phi=f(i.phi),p=s*o,l*=c;break;case 1:i.phi-=A;break;case 0:i.phi=A-i.phi,p=-p}i.lam=d(l,p)}},t.fwd=function(t,r){var i,o,a;switch(a=u(t.phi),o=c(t.phi),i=c(t.lam),n){case 2:r.y=o*i;break;case 3:r.y=sinph0*a+e*o*i;break;case 1:r.y=-a;break;case 0:r.y=a}switch(r.y<=1e-10&&k(),r.x=(r.y=1/r.y)*o*u(t.lam),n){case 2:r.y*=a;break;case 3:r.y*=e*a-sinph0*o*i;break;case 0:i=-i;case 1:r.y*=o*i}},t.es=0}),"gnom","Gnomonic","\n\tAzi, Sph."),K(an,"moll","Mollweide","\n\tPCyl Sph"),K((function(t){un(t,sn(t,S/3))}),"wag4","Wagner IV","\n\tPCyl Sph"),K((function(t){un(t,{C_x:.90977,C_y:1.65014,C_p:3.00896})}),"wag5","Wagner V","\n\tPCyl Sph"),K((function(t){var e,n,r,i;t.es=0,rn(t),e=t.fwd,n=t.inv,an(t),r=t.fwd,i=t.inv,t.fwd=function(t,n){a(t.phi)<.7109307819790236?e(t,n):(r(t,n),n.y-=t.phi>0?.0528:-.0528)},t.inv=function(t,e){a(t.y)<=.7109307819790236?n(t,e):(t.y+=t.y>0?.0528:-.0528,i(t,e))}}),"goode","Goode Homolosine","\n\tPCyl, Sph."),K((function(t){var e,n,r;t.inv=function(t,n){var r=g(1-.25*e*e*t.x*t.x-.25*t.y*t.y);a(2*r*r-1)<1e-10?(n.lam=1/0,n.phi=1/0,pj_errno=-14):(n.lam=$e(e*t.x*r,2*r*r-1)/e,n.phi=Je(r*t.y))},t.fwd=i,t.es=0,J(t.params,"tW")?(e=a(J(t.params,"dW")))<=0&&G(-27):e=.5;J(t.params,"tM")?(n=a(J(t.params,"dM")))<=0&&G(-27):n=1;function i(t,i){var o,a;a=g(2/(1+(o=c(t.phi))*c(t.lam*=e))),i.x=n*a*o*u(t.lam),i.y=r*a*u(t.phi)}r=1/n,n/=e}),"hammer","Hammer & Eckert-Greifendorff","\n\tMisc Sph, \n\tW= M="),K((function(t){t.inv=function(t,e){var n=t.y*(t.y<0?.5179951515653813:.5686373742600607);a(n)>1?a(n)>1.000001?j():n=n>0?A:-A:n=f(n),e.lam=1.1764705882352942*t.x/c(n),n+=n,e.phi=(n+u(n))*(t.y<0?.4102345310814193:.3736990601468637),a(e.phi)>1?a(e.phi)>1.000001?j():e.phi=e.phi>0?A:-A:e.phi=f(e.phi)},t.fwd=function(t,e){var n,r,i;for(r=u(t.phi)*(t.phi<0?2.43763:2.67595),i=20;i&&(t.phi-=n=(t.phi+u(t.phi)-r)/(1+c(t.phi)),!(a(n)<1e-7));--i);e.x=.85*t.lam*c(t.phi*=.5),e.y=u(t.phi)*(t.phi<0?1.93052:1.75859)},t.es=0}),"hatano","Hatano Asymmetrical Equal Area","\n\tPCyl., Sph."),K(cn,"healpix","HEALPix","\n\tSph., Ellps."),K((function(t){cn(t,!0)}),"rhealpix","rHEALPix","\n\tSph., Ellps.\n\tnorth_square= south_square="),K((function(t){var e,n,r,i,o,s,p,m,v,_=.785398163397448,b=1.37008346281555;t.a=6377397.155,t.e=g(t.es=.006674372230614),J(t.params,"tlat_0")||(t.phi0=.863937979737193);J(t.params,"tlon_0")||(t.lam0=.4334234309119251);J(t.params,"tk")||(t.k0=.9999);v=1,J(t.params,"tczech")||(v=-1);i=g(1+t.es*y(c(t.phi0),4)/(1-t.es)),e=f(u(t.phi0)/i),r=y((1+t.e*u(t.phi0))/(1-t.e*u(t.phi0)),i*t.e/2),o=l(e/2+_)/y(l(t.phi0/2+_),i)*r,n=g(1-t.es)/(1-t.es*y(u(t.phi0),2)),s=u(b),p=t.k0*n/l(b),m=.5286277629901559,t.inv=function(e,n){var r,x,w,E,S,I,C,N;C=e.x,e.x=e.y,e.y=C,e.x*=v,e.y*=v,S=g(e.x*e.x+e.y*e.y),E=d(e.y,e.x)/u(b),w=2*(h(y(p/S,1/s)*l(b/2+_))-_),r=f(c(m)*u(w)-u(m)*c(w)*c(E)),x=f(c(w)*u(E)/c(r)),n.lam=t.lam0-x/i,I=r,N=0;do{n.phi=2*(h(y(o,-1/i)*y(l(r/2+_),1/i)*y((1+t.e*u(I))/(1-t.e*u(I)),t.e/2))-_),a(I-n.phi)<1e-15&&(N=1),I=n.phi}while(0===N);n.lam-=t.lam0},t.fwd=function(e,n){var r,a,d,g,x,w,E;r=y((1+t.e*u(e.phi))/(1-t.e*u(e.phi)),i*t.e/2),a=2*(h(o*y(l(e.phi/2+_),i)/r)-_),d=-e.lam*i,g=f(c(m)*u(a)+u(m)*c(a)*c(d)),x=f(c(a)*u(d)/c(g)),w=s*x,E=p*y(l(b/2+_),s)/y(l(g/2+_),s),n.y=E*c(w),n.x=E*u(w),n.y*=v,n.x*=v}}),"krovak","Krovak","\n\tPCyl., Ellps."),K((function(t){var e,n,r,i,o,s,l,p,h,y,m;y=a(t.phi0),h=a(y-A)<1e-10?t.phi0<0?1:0:a(y)<1e-10?2:3;if(t.es){switch(t.e=g(t.es),o=Ue(1,t.e,t.one_es),.5/(1-t.es),p=Qe(t.es),h){case 0:case 1:s=1;break;case 2:s=1/(l=g(.5*o)),r=1,i=.5*o;break;case 3:l=g(.5*o),m=u(t.phi0),e=Ue(m,t.e,t.one_es)/o,n=g(1-e*e),s=c(t.phi0)/(g(1-t.es*m*m)*l*n),i=(r=l)/s,r*=s}t.inv=function(r,i){var a,g,y,m,v=0;switch(h){case 2:case 3:if(r.x/=s,r.y*=s,(m=_(r.x,r.y))<1e-10)return i.lam=0,i.phi=t.phi0,i;g=2*f(.5*m/l),a=c(g),g=u(g),r.x*=g,3==h?(v=a*e+r.y*g*n/m,r.y=m*n*a-r.y*e*g):(v=r.y*g/m,r.y=m*a);break;case 0:r.y=-r.y;case 1:if(!(y=r.x*r.x+r.y*r.y))return i.lam=0,i.phi=t.phi0,i;v=1-y/o,1==h&&(v=-v)}return i.lam=d(r.x,r.y),i.phi=tn(f(v),p),i},t.fwd=function(s,l){var f,p,d,y,m=0,v=0,_=0;f=c(s.lam),p=u(s.lam),d=u(s.phi),y=Ue(d,t.e,t.one_es),(3==h||2==h)&&(v=g(1-(m=y/o)*m));switch(h){case 3:_=1+e*m+n*v*f;break;case 2:_=1+v*f;break;case 0:_=A+s.phi,y=o-y;break;case 1:_=s.phi-A,y=o+y}a(_)<1e-10&&k();switch(h){case 3:case 2:3==h?(_=g(2/_),l.y=i*_*(n*m-e*v*f)):(_=g(2/(1+v*f)),l.y=_*m*i),l.x=r*_*v*p;break;case 0:case 1:y>=0?(_=g(y),l.x=_*p,l.y=f*(1==h?_:-_)):l.x=l.y=0}}}else 3==h&&(e=u(t.phi0),n=c(t.phi0)),t.inv=function(r,i){var o,s=0,l=0;o=_(r.x,r.y),(i.phi=.5*o)>1&&j();i.phi=2*f(i.phi),(3==h||2==h)&&(l=u(i.phi),s=c(i.phi));switch(h){case 2:i.phi=a(o)<=1e-10?0:f(r.y*l/o),r.x*=l,r.y=s*o;break;case 3:i.phi=a(o)<=1e-10?t.phi0:f(s*e+r.y*l*n/o),r.x*=l*n,r.y=(s-u(i.phi)*e)*o;break;case 0:r.y=-r.y,i.phi=A-i.phi;break;case 1:i.phi-=A}i.lam=0!=r.y||2!=h&&3!=h?d(r.x,r.y):0},t.fwd=function(r,i){var o,s,l;switch(l=u(r.phi),s=c(r.phi),o=c(r.lam),h){case 2:case 3:i.y=2==h?1+s*o:1+e*l+n*s*o,i.y<=1e-10&&k(),i.y=g(2/i.y),i.x=i.y*s*u(r.lam),i.y*=2==h?l:n*l-e*s*o;break;case 0:o=-o;case 1:a(r.phi+t.phi0)<1e-10&&k(),i.y=N-.5*r.phi,i.y=2*(1==h?c(i.y):u(i.y)),i.x=i.y*u(r.lam),i.y*=o}}}),"laea","Lambert Azimuthal Equal Area","\n\tAzi, Sph&Ell"),K(ln,"lonlat","Lat/long (Geodetic)","\n\t"),K(ln,"longlat","Lat/long (Geodetic alias)","\n\t"),K(ln,"latlon","Lat/long (Geodetic alias)","\n\t"),K(ln,"latlong","Lat/long (Geodetic alias)","\n\t"),K((function(t){var e,n,r,i,o,s,f,p,m,b,x;t.inv=E,t.fwd=w,i=J(t.params,"rlat_1"),J(t.params,"tlat_2")?o=J(t.params,"rlat_2"):(o=i,J(t.params,"tlat_0")||(t.phi0=i));a(i+o)<1e-10&&G(-21);s=n=u(i),e=c(i),r=a(i-o)>=1e-10,(m=0!=t.es)?(t.e=g(t.es),x=ze(n,e,t.es),b=fn(i,n,t.e),r&&(n=u(o),s=v(x/ze(n,c(o),t.es)),s/=v(b/fn(o,n,t.e))),p=f=x*y(b,-s)/s,f*=a(a(t.phi0)-A)<1e-10?0:y(fn(t.phi0,u(t.phi0),t.e),s)):(r&&(s=v(e/c(o))/v(l(N+.5*o)/l(N+.5*i))),p=e*y(l(N+.5*i),s)/s,f=a(a(t.phi0)-A)<1e-10?0:p*y(l(N+.5*t.phi0),-s));function w(e,n){var r,i=e.lam;a(a(e.phi)-A)<1e-10?(e.phi*s<=0&&k(),r=0):r=p*(m?y(fn(e.phi,u(e.phi),t.e),s):y(l(N+.5*e.phi),-s)),i*=s,n.x=t.k0*(r*u(i)),n.y=t.k0*(f-r*c(i))}function E(e,n){var r,i=e.x,o=e.y;i/=t.k0,o/=t.k0,0!=(r=_(i,o=f-o))?(s<0&&(r=-r,i=-i,o=-o),m?(n.phi=pn(y(r/p,1/s),t.e),n.phi==1/0&&j()):n.phi=2*h(y(p/r,1/s))-A,n.lam=d(i,o)/s):(n.lam=0,n.phi=s>0?A:-A)}}),"lcc","Lambert Conformal Conic","\n\tConic, Sph&Ell\n\tlat_1= and lat_2= or lat_0="),K((function(t){var e,n,r;e=J(t.params,"rlat_1"),n=c(e),r=l(N+.5*e),n<1e-8&&G(-22);t.fwd=function(t,i){i.y=t.phi-e,a(i.y)<1e-8?i.x=t.lam*n:(i.x=N+.5*t.phi,a(i.x)<1e-8||a(a(i.x)-A)<1e-8?i.x=0:i.x=t.lam*i.y/v(l(i.x)/r))},t.inv=function(t,i){i.phi=t.y+e,a(t.y)<1e-8?i.lam=t.x/n:(i.lam=N+.5*i.phi,a(i.lam)<1e-8||a(a(i.lam)-A)<1e-8?i.lam=0:i.lam=t.x*v(l(i.lam)/r)/t.y)},t.es=0}),"loxim","Loximuthal","\n\tPCyl Sph"),K((function(t){var e=.9525793444156804,n=.9258200997725514,r=3.401680257083045;t.fwd=function(t,i){t.phi=f(e*u(t.phi)),i.x=n*t.lam*(2*c(2/3*t.phi)-1),i.y=r*u(1/3*t.phi)},t.inv=function(t,i){i.phi=t.y/r,a(i.phi)>=1?a(i.phi)>1.0000001?j():i.phi=i.phi<0?-A:A:i.phi=f(i.phi),i.lam=t.x/(n*(2*c(2/3*(i.phi*=3))-1)),a(i.phi=u(i.phi)/e)>=1?a(i.phi)>1.0000001?j():i.phi=i.phi<0?-A:A:i.phi=f(i.phi)},t.es=0}),"mbt_fpp","McBride-Thomas Flat-Polar Parabolic","\n\tCyl., Sph."),K((function(t){t.fwd=function(t,e){var n,r,i;for(r=1.7071067811865475*u(t.phi),i=20;i&&(t.phi-=n=(u(.5*t.phi)+u(t.phi)-r)/(.5*c(.5*t.phi)+c(t.phi)),!(a(n)<1e-7));--i);e.x=.3124597141037825*t.lam*(1+2*c(t.phi)/c(.5*t.phi)),e.y=1.874758284622695*u(.5*t.phi)},t.inv=function(t,e){var n;e.phi=.533402096794177*t.y,a(e.phi)>1?a(e.phi)>1.000001?j():e.phi<0?(n=-1,e.phi=-S):(n=1,e.phi=S):e.phi=2*f(n=e.phi),e.lam=3.2004125807650623*t.x/(1+2*c(e.phi)/c(.5*e.phi)),e.phi=.585786437626905*(n+u(e.phi)),a(e.phi)>1?a(e.phi)>1.000001?j():e.phi=e.phi<0?-A:A:e.phi=f(e.phi)},t.es=0}),"mbt_fpq","McBryde-Thomas Flat-Polar Quartic","\n\tCyl., Sph."),K((function(t){var e=1.36509;t.fwd=function(t,n){var r,i,o,s;for(r=1.41546*u(t.phi),s=10;s&&(o=t.phi/e,t.phi-=i=(.45503*u(o)+u(t.phi)-r)/(1/3*c(o)+c(t.phi)),!(a(i)<1e-7));--s);o=t.phi/e,n.x=.22248*t.lam*(1+3*c(t.phi)/c(o)),n.y=1.44492*u(o)},t.inv=function(t,n){var r;n.phi=e*(r=Je(t.y/1.44492)),n.lam=t.x/(.22248*(1+3*c(n.phi)/c(r))),n.phi=Je((.45503*u(r)+u(n.phi))/1.41546)},t.es=0}),"mbt_fps","McBryde-Thomas Flat-Pole Sine (No. 2)","\n\tCyl., Sph."),K((function(t){var e=0,n=J(t.params,"tlat_ts");n&&(e=J(t.params,"rlat_ts"))>=A&&G(-24);t.es?(n&&(t.k0=ze(u(e),c(e),t.es)),t.inv=function(e,n){n.phi=pn(m(-e.y/t.k0),t.e),n.phi===1/0&&j();n.lam=e.x/t.k0},t.fwd=function(e,n){a(a(e.phi)-A)<=1e-10&&k();n.x=t.k0*e.lam,n.y=-t.k0*v(fn(e.phi,u(e.phi),t.e))}):(t.inv=function(e,n){n.phi=A-2*h(m(-e.y/t.k0)),n.lam=e.x/t.k0},t.fwd=function(e,n){a(a(e.phi)-A)<=1e-10&&k();n.x=t.k0*e.lam,n.y=t.k0*v(l(N+.5*e.phi))})}),"merc","Mercator","\n\tCyl, Sph&Ell\n\tlat_ts="),K((function(t){t.fwd=function(t,e){e.x=t.lam,e.y=1.25*v(l(N+.4*t.phi))},t.inv=function(t,e){e.lam=t.x,e.phi=2.5*(h(m(.8*t.y))-N)},t.es=0}),"mill","Miller Cylindrical","\n\tCyl, Sph"),K((function(t){t.lam0=20*C,t.phi0=18*C,t.es=0,gn(t,[[.9245,0],[0,0],[.01943,0]])}),"mil_os","Miller Oblated Stereographic","\n\tAzi(mod)"),K((function(t){t.lam0=-165*C,t.phi0=-10*C,t.es=0,gn(t,[[.721316,0],[0,0],[-.0088162,-.00617325]])}),"lee_os","Lee Oblated Stereographic","\n\tAzi(mod)"),K((function(t){t.lam0=-96*C,t.phi0=39*C,t.es=0,t.a=6370997,gn(t,[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]])}),"gs48","Mod Stereographic of 48 U.S.","\n\tAzi(mod)"),K((function(t){var e;t.lam0=-152*C,t.phi0=64*C,0!=t.es?(e=[[.9945303,0],[.0052083,-.0027404],[.0072721,.0048181],[-.0151089,-.1932526],[.0642675,-.1381226],[.3582802,-.2884586]],t.a=6378206.4,t.e=g(t.es=.00676866)):(e=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],t.a=6370997);gn(t,e)}),"alsk","Mod Stereographic of Alaska","\n\tAzi(mod)"),K((function(t){var e;t.lam0=-120*C,t.phi0=45*C,0!=t.es?(e=[[.9827497,0],[.0210669,.0053804],[-.1031415,-.0571664],[-.0323337,-.0322847],[.0502303,.1211983],[.0251805,.0895678],[-.0012315,-.1416121],[.0072202,-.1317091],[-.0194029,.0759677],[-.0210072,.0834037]],t.a=6378206.4,t.e=g(t.es=.00676866)):(e=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],t.a=6370997);gn(t,e)}),"gs50","Mod Stereographic of 50 U.S.","\n\tAzi(mod)"),K((function(t){var e=-.131979,n=-.013791,r=-.001529,i=1.007226,o=.015085,s=-.044475,u=.028874,c=-.005916,l=.8707*.52*S;t.es=0,t.fwd=function(t,a){var l,f;f=(l=t.phi*t.phi)*l,a.x=t.lam*(.8707+l*(e+l*(n+f*l*(.003971+l*r)))),a.y=t.phi*(i+l*(o+f*(s+u*l+c*f)))},t.inv=function(t,f){var p,h,d,g,y=t.x,m=t.y;for(m>l?m=l:m<-l&&(m=-l),p=m;p-=h=(p*(i+(d=p*p)*(o+(g=d*d)*(s+u*d+c*g)))-m)/(1.007226+d*(.045255+g*(.259866*d-.311325+-.06507600000000001*g))),!(a(h)<1e-11););f.phi=p,d=p*p,f.lam=y/(.8707+d*(e+d*(n+d*d*d*(.003971+d*r))))}}),"natearth","Natural Earth","\n\tPCyl., Sph."),K((function(t){var e=1.01183,n=-.02625,r=.01926,i=-.00396,o=.45334622460635143*S;t.es=0,t.fwd=function(t,o){var a,s,u;u=(a=t.phi*t.phi)*(s=a*a),o.x=t.lam*(.84719+-.13063*a+u*u*(.05494*a-.04515+-.02326*s+.00331*u)),o.y=t.phi*(e+s*s*(n+r*a+i*s))},t.inv=function(t,s){var u,c,l,f,p,h=t.x,d=t.y;for(d>o?d=o:d<-o&&(d=-o),u=d;u-=c=(u*(e+(f=(l=u*u)*l)*f*(n+r*l+i*f))-d)/(1.01183+f*f*(.21186*l-.23625+-.05148*f)),!(a(c)<1e-11););s.phi=u,p=(l=u*u)*(f=l*l),s.lam=h/(.84719+-.13063*l+p*p*(.05494*l-.04515+-.02326*f+.00331*p))}}),"natearth2","Natural Earth 2","\n\tPCyl., Sph."),K((function(t){t.inv=function(t,e){e.lam=2*t.x/(1+c(t.y)),e.phi=Je(.5*(t.y+u(t.y)))},t.fwd=function(t,e){var n,r,i;for(n=2*u(t.phi),r=t.phi*t.phi,t.phi*=1.00371+r*(-.011412*r-.0935382),i=10;i&&(t.phi-=r=(t.phi+u(t.phi)-n)/(1+c(t.phi)),!(a(r)<1e-7));--i);e.x=.5*t.lam*(1+c(t.phi)),e.y=t.phi},t.es=0}),"nell","Nell","\n\tPCyl., Sph."),K((function(t){t.es=0,t.fwd=function(t,e){e.x=.5*t.lam*(1+c(t.phi)),e.y=2*(t.phi-l(.5*t.phi))},t.inv=function(t,e){var n,r,i,o;for(i=.5*t.y,o=9;o>0&&(r=c(.5*e.phi),e.phi-=n=(e.phi-l(e.phi/2)-i)/(1-.5/(r*r)),!(a(n)<1e-7));--o);o?e.lam=2*t.x/(1+c(e.phi)):(e.phi=i<0?-A:A,e.lam=2*t.x)}}),"nell_h","Nell-Hammer","\n\tPCyl., Sph."),K((function(t){yn(t,J(t.params,"dh"))}),"nsper","Near-sided perspective","\n\tAzi, Sph\n\th="),K((function(t){var e=J(t.params,"dtilt")*C,n=J(t.params,"dazi")*C,r=J(t.params,"dh");yn(t,r,e,n)}),"tpers","Tilted perspective","\n\tAzi, Sph\n\ttilt= azi= h="),K((function(t){var e=[[.7557853228,0],[.249204646,.003371507],[-.001541739,.04105856],[-.10162907,.01727609],[-.26623489,-.36249218],[-.6870983,-1.1651967]],n=[1.5627014243,.5185406398,-.03333098,-.1052906,-.0368594,.007317,.0122,.00394,-.0013],r=[.6399175073,-.1358797613,.063294409,-.02526853,.0117879,-.0055161,.0026906,-.001333,67e-5,-34e-5];t.ra=1/(t.a=6378388),t.lam0=173*C,t.phi0=-41*C,t.x0=251e4,t.y0=6023150,t.inv=function(r,i){var o,s,u,c,l,f,p={r:r.y,i:r.x},h={};for(o=20;o>0&&((l=dn(p,e,h)).r-=r.y,l.i-=r.x,f=h.r*h.r+h.i*h.i,p.r+=u=-(l.r*h.r+l.i*h.i)/f,p.i+=c=-(l.i*h.r-l.r*h.i)/f,!(a(u)+a(c)<=1e-10));--o);if(o>0){for(i.lam=p.i,s=n.length-1,i.phi=n[s],--s;s>=0;--s)i.phi=n[s]+p.r*i.phi;i.phi=t.phi0+p.r*i.phi*.484813681109536}else i.lam=i.phi=1/0},t.fwd=function(n,i){var o=r.length-1,a={r:r[o]},s=2.0626480624709638*(n.phi-t.phi0);for(--o;o>=0;--o)a.r=r[o]+s*a.r;a.r*=s,a.i=n.lam,a=hn(a,e),i.x=a.i,i.y=a.r}}),"nzmg","New Zealand Map Grid","\n\tfixed Earth"),K((function(t){var e,n,r,i,o,s,f,p,g,y,m,v,_,b,x,w=1e-10;e=J(t.params,"so_proj"),n=$[e],e||G(-26);n&&"ob_tran"!=e||G(-37);t.es=0,r={},Object.keys(t).forEach((function(e){r[e]=t[e]})),n.init(r),r.is_latlong&&1==t.to_meter&&(t.to_meter=C,t.fr_meter=I);J(t.params,"to_alpha")?(p=J(t.params,"ro_lon_c"),g=J(t.params,"ro_lat_c"),y=J(t.params,"ro_alpha"),a(a(g)-A)<=w&&G(-32),i=p+$e(-c(y),-u(y)*u(g)),f=Je(c(g)*u(y))):J(t.params,"to_lat_p")?(i=J(t.params,"ro_lon_p"),f=J(t.params,"ro_lat_p")):(m=J(t.params,"ro_lon_1"),_=J(t.params,"ro_lat_1"),v=J(t.params,"ro_lon_2"),b=J(t.params,"ro_lat_2"),(a(_-b)<=w||(x=a(_))<=w||a(x-A)<=w||a(a(b)-A)<=w)&&G(-33),i=d(c(_)*u(b)*c(m)-u(_)*c(b)*c(v),u(_)*c(b)*u(v)-c(_)*u(b)*u(m)),f=h(-c(i-m)/l(_)));a(f)>w?(o=c(f),s=u(f),t.fwd=function(t,e){var n,a,l;n=c(t.lam),a=u(t.phi),l=c(t.phi),t.lam=St($e(l*u(t.lam),s*l*n+o*a)+i),t.phi=Je(s*a-o*l*n),r.fwd(t,e)},t.inv=r.inv?function(t,e){var n,a,l;r.inv(t,e),e.lam!=1/0&&(n=c(e.lam-=i),a=u(e.phi),l=c(e.phi),e.phi=Je(s*a+o*l*n),e.lam=$e(l*u(e.lam),s*l*n-o*a))}:null):(t.fwd=function(t,e){var n,o;n=c(t.phi),o=c(t.lam),t.lam=St($e(n*u(t.lam),u(t.phi))+i),t.phi=Je(-n*o),r.fwd(t,e)},t.inv=r.inv?function(t,e){var n,o;r.inv(t,e),e.lam!=1/0&&(n=c(e.phi),o=e.lam-i,e.lam=$e(n*u(o),-u(e.phi)),e.phi=Je(n*c(o)))}:null)}),"ob_tran","General Oblique Transformation","\n\tMisc Sph\n\to_proj= plus parameters for projection\n\to_lat_p= o_lon_p= (new pole) or\n\to_alpha= o_lon_c= o_lat_c= or\n\to_lon_1= o_lat_1= o_lon_2= o_lat_2="),K((function(t){var e,n,r,i,o,a,s,p,y,m,v;s=1/t.k0,p=t.k0,J(t.params,"talpha")?(a=J(t.params,"ralpha"),o=J(t.params,"rlonc"),v=h(-c(a)/(-u(0)*u(a)))+o,y=f(c(0)*u(a))):(e=J(t.params,"rlat_1"),n=J(t.params,"rlat_2"),r=J(t.params,"rlon_1"),i=J(t.params,"rlon_2"),v=d(c(e)*u(n)*c(r)-u(e)*c(n)*c(i),u(e)*c(n)*u(i)-c(e)*u(n)*u(r)),r==-A&&(v=-v),y=h(-c(v-r)/l(e)));t.lam0=v+A,m=c(y),y=u(y),c(v),v=u(v),t.es=0,t.fwd=function(t,e){var n;e.y=u(t.lam),n=c(t.lam),e.x=h((l(t.phi)*m+y*e.y)/n),n<0&&(e.x+=S),e.x*=p,e.y=s*(y*u(t.phi)-m*c(t.phi)*e.y)},t.inv=function(t,e){var n,r;t.y/=s,t.x/=p,n=g(1-t.y*t.y),e.phi=f(t.y*y+n*m*(r=u(t.x))),e.lam=d(n*y*r-t.y*m,n*c(t.x))}}),"ocea","Oblique Cylindrical Equal Area","\n\tCyl, Sph lonc= alpha= or\n\tlat_1= lat_2= lon_1= lon_2="),K((function(t){var e,n,r,i,o,s,p,_,b,x,w,E,I,C,O,T,M,L,R,D,F,B,U,z,q,V,Y,X=0,W=0,H=0,$=0,K=0,Z=0,Q=0,tt=0;Y=J(t.params,"tno_rot"),0!=(E=J(t.params,"talpha"))&&(Q=J(t.params,"ralpha"));0!=(I=J(t.params,"tgamma"))&&(X=J(t.params,"rgamma"));E||I?(W=J(t.params,"rlonc"),(tt=J(t.params,"tno_off")||J(t.params,"tno_uoff"))&&(J(t.params,"sno_uoff"),J(t.params,"sno_off"))):(H=J(t.params,"rlon_1"),K=J(t.params,"rlat_1"),$=J(t.params,"rlon_2"),Z=J(t.params,"rlat_2"),(a(K-Z)<=1e-7||(e=a(K))<=1e-7||a(e-A)<=1e-7||a(a(t.phi0)-A)<=1e-7||a(a(Z)-A)<=1e-7)&&G(-33));n=g(t.one_es),a(t.phi0)>1e-10?(_=u(t.phi0),r=c(t.phi0),e=1-t.es*_*_,O=r*r,O=g(1+t.es*O*O/t.one_es),C=O*t.k0*n/e,i=O*n/(r*g(e)),(o=i*i-1)<=0?o=0:(o=g(o),t.phi0<0&&(o=-o)),T=o+=i,T*=y(fn(t.phi0,_,t.e),O)):(O=1/n,C=t.k0,T=i=o=1);E||I?(E?(w=f(u(Q)/i),I||(X=Q)):Q=f(i*u(w=X)),t.lam0=W-f(.5*(o-1/o)*l(w))/O):(s=y(fn(K,u(K),t.e),O),p=y(fn(Z,u(Z),t.e),O),o=T/s,b=(p-s)/(p+s),x=((x=T*T)-p*s)/(x+p*s),(e=H-$)<-S?$-=P:e>S&&($+=P),t.lam0=St(.5*(H+$)-h(x*l(.5*O*(H-$))/b)/O),w=h(2*u(O*St(H-t.lam0))/(o-1/o)),X=Q=f(i*u(w)));D=u(w),F=c(w),B=u(X),U=c(X),L=1/(M=C*(R=1/O)),C*O,tt?V=0:(V=a(M*h(g(i*i-1)/c(Q))),t.phi0<0&&(V=-V));z=M*v(l(N-(o=.5*w))),q=M*v(l(N+o)),t.fwd=function(e,n){var r,i,o,s,l,f,p,h;a(a(e.phi)-A)>1e-10?(r=.5*((l=T/y(fn(e.phi,u(e.phi),t.e),O))-(f=1/l)),i=.5*(l+f),s=u(O*e.lam),a(a(o=(r*D-s*F)/i)-1)<1e-10&&k(),h=.5*M*v((1-o)/(1+o)),f=c(O*e.lam),p=a(f)<1e-7?C*e.lam:M*d(r*F+s*D,f)):(h=e.phi>0?z:q,p=M*e.phi),Y?(n.x=p,n.y=h):(p-=V,n.x=h*U+p*B,n.y=p*U-h*B)},t.inv=function(e,n){var r,i,o,s,l,f,p;Y?(i=e.y,r=e.x):(i=e.x*U-e.y*B,r=e.y*U+e.x*B+V),s=.5*((o=m(-L*i))-1/o),l=.5*(o+1/o),f=u(L*r),a(a(p=(f*F+s*D)/l)-1)<1e-10?(n.lam=0,n.phi=p<0?-A:A):(n.phi=T/g((1+p)/(1-p)),(n.phi=pn(y(n.phi,1/O),t.e))==1/0&&j(),n.lam=-R*d(s*F-f*D,c(L*r)))}}),"omerc","Oblique Mercator","\n\tCyl, Sph&Ell no_rot\n\talpha= [gamma=] [no_off] lonc= or\n\t lon_1= lat_1= lon_2= lat_2="),K((function(t){var e={};a(a(t.phi0)-A)<=1e-10?e.mode=t.phi0<0?1:0:a(t.phi0)>1e-10?(e.mode=3,e.sinph0=u(t.phi0),e.cosph0=c(t.phi0)):e.mode=2;t.fwd=function(n,r){var i,o,s;switch(o=c(n.phi),i=c(n.lam),e.mode){case 2:o*i<-1e-10&&k(),r.y=u(n.phi);break;case 3:e.sinph0*(s=u(n.phi))+e.cosph0*o*i<-1e-10&&k(),r.y=e.cosph0*s-e.sinph0*o*i;break;case 0:i=-i;case 1:a(n.phi-t.phi0)-1e-10>A&&k(),r.y=o*i}r.x=o*u(n.lam)},t.inv=function(n,r){var i,o,s;if((s=i=_(n.x,n.y))>1&&(s-1>1e-10&&j(),s=1),o=g(1-s*s),a(i)<=1e-10)r.phi=t.phi0,r.lam=0;else{switch(e.mode){case 0:n.y=-n.y,r.phi=p(s);break;case 1:r.phi=-p(s);break;case 2:case 3:2==e.mode?(r.phi=n.y*s/i,n.x*=s,n.y=o*i):(r.phi=o*e.sinph0+n.y*s*e.cosph0/i,n.y=(o-e.sinph0*r.phi)*i,n.x*=s*e.cosph0),a(r.phi)>=1?r.phi=r.phi<0?-A:A:r.phi=f(r.phi)}r.lam=0!=n.y||3!=e.mode&&2!=e.mode?d(n.x,n.y):0==n.x?0:n.x<0?-A:A}},t.es=0}),"ortho","Orthographic","\n\tAzi, Sph."),K((function(t){var e=1.0148,n=.23185,r=-.14499,i=.02406,o=908571831.7;t.es=0,t.fwd=function(t,o){var a=t.phi*t.phi;o.x=t.lam,o.y=t.phi*(e+a*a*(n+a*(r+i*a)))},t.inv=function(t,s){var u,c,l,f;for(u=t.y,t.y>o?t.y=o:t.y<-o&&(t.y=-o),f=100;f&&(u-=c=(u*(e+(l=u*u)*l*(n+l*(r+i*l)))-t.y)/(1.0148+l*l*(1.1592500000000001+l*(.21654*l-1.01493))),!(a(c)<1e-11));--f);s.phi=u,s.lam=t.x}}),"patterson","Patterson Cylindrical","\n\tCyl., Sph."),K((function(t){var e,n;t.es?(n=Ve(t.es),e=Ye(t.phi0,u(t.phi0),c(t.phi0),n),t.fwd=function(r,i){var o,s,l;a(r.phi)<=1e-10?(i.x=r.lam,i.y=-e):(s=u(r.phi),o=a(l=c(r.phi))>1e-10?ze(s,l,t.es)/s:0,i.x=o*u(r.lam*=s),i.y=Ye(r.phi,s,l,n)-e+o*(1-c(r.lam)))},t.inv=function(r,i){var o,s,p,h,d,y,m,v,_,b,x=r.x,w=r.y;if(a(w+=e)<=1e-10)i.lam=x,i.phi=0;else{for(o=w*w+x*x,i.phi=w,b=20;b>0&&(p=u(i.phi),d=p*(h=c(i.phi)),a(h)<1e-12&&j(),s=p*(v=g(1-t.es*p*p))/h,y=Ye(i.phi,p,h,n),m=y*y+o,v=t.one_es/(v*v*v),i.phi+=_=(y+y+s*m-2*w*(s*y+1))/(t.es*d*(m-2*w*y)/s+2*(w-y)*(s*v-1/d)-v-v),!(a(_)<=1e-12));--b);b||j(),s=u(i.phi),i.lam=f(x*l(i.phi)*g(1-t.es*s*s))/u(i.phi)}}):(e=-t.phi0,t.fwd=function(n,r){var i,o;a(n.phi)<=1e-10?(r.x=n.lam,r.y=e):(i=1/l(n.phi),r.x=u(o=n.lam*u(n.phi))*i,r.y=n.phi-t.phi0+i*(1-c(o)))},t.inv=function(e,n){var r,i,o,s;if(a(e.y=t.phi0+e.y)<=1e-10)n.lam=e.x,n.phi=0;else{n.phi=e.y,r=e.x*e.x+e.y*e.y,s=10;do{o=l(n.phi),n.phi-=i=(e.y*(n.phi*o+1)-n.phi-.5*(n.phi*n.phi+r)*o)/((n.phi-e.y)/o-1)}while(a(i)>1e-10&&--s);s||j(),n.lam=f(e.x*l(n.phi))/u(n.phi)}})}),"poly","Polyconic (American)","\n\tConic, Sph&Ell"),K((function(t){var e=.6141848493043784;t.es=0,t.fwd=function(t,n){var r,i,o,s,l;for(r=e*u(t.phi),o=t.phi*t.phi,t.phi*=.615709+o*(.00909953+.0046292*o),l=10;l&&(i=c(t.phi),o=u(t.phi),t.phi-=s=(t.phi+o*(i-1)-r)/(1+i*(i-1)-o*o),!(a(s)<1e-10));--l);l||(t.phi=t.phi<0?-1.0471975511965976:1.0471975511965976),n.x=1.8949*t.lam*(c(t.phi)-.5),n.y=1.71848*u(t.phi)},t.inv=function(t,n){var r;n.phi=Je(t.y/1.71848),n.lam=t.x/(1.8949*((r=c(n.phi))-.5)),n.phi=Je((n.phi+u(n.phi)*(r-1))/e)}}),"putp2","Putnins P2","\n\tPCyl., Sph."),K(mn,"putp3","Putnins P3","\n\tPCyl., Sph."),K((function(t){mn(t,!0)}),"putp3p","Putnins P3'","\n\tPCyl., Sph."),K((function(t){vn(t,.874038744,3.883251825)}),"putp4p","Putnins P4'","\n\tPCyl., Sph."),K((function(t){vn(t,1,4.442882938)}),"weren","Werenskiold I","\n\tPCyl., Sph."),K(_n,"putp5","Putnins P5","\n\tPCyl., Sph."),K((function(t){_n(t,!0)}),"putp5p","Putnins P5'","\n\tPCyl., Sph."),K(bn,"putp6","Putnins P6","\n\tPCyl., Sph."),K((function(t){bn(t,!0)}),"putp6p","Putnins P6'","\n\tPCyl., Sph."),K((function(t){var e,n,r,i;e=t.phi0>=A-N/2?4:t.phi0<=-(A-N/2)?5:a(t.lam0)<=N?0:a(t.lam0)<=A+N?t.lam0>0?1:3:2;0!==t.es&&(t.a*t.a,n=t.a*g(1-t.es),r=1-(t.a-n)/t.a,i=r*r);function o(t,e,n){var r,i;return t<1e-10?(r=0,i=0):(i=d(e,n),a(i)<=N?r=0:i>N&&i<=A+N?(r=1,i-=A):i>A+N||i<=-(A+N)?(r=2,i=i>=0?i-S:i+S):(r=3,i+=A)),{area:r,theta:i}}function s(t,e){var n=t+e;return n<-S?n+=P:n>+S&&(n-=P),n}t.fwd=function(n,r){var a,f,d,y,m,v,_,b,x,w,E,I,C,P;a=0!==t.es?h(i*l(n.phi)):n.phi,f=n.lam,4==e?(y=A-a,f>=N&&f<=A+N?(_=0,d=f-A):f>A+N||f<=-(A+N)?(_=1,d=f>0?f-S:f+S):f>-(A+N)&&f<=-N?(_=2,d=f+A):(_=3,d=f)):5==e?(y=A+a,f>=N&&f<=A+N?(_=0,d=-f+A):f<N&&f>=-N?(_=1,d=-f):f<-N&&f>=-(A+N)?(_=2,d=-f-A):(_=3,d=f>0?-f+S:-f-S)):(1==e?f=s(f,+A):2==e?f=s(f,+S):3==e&&(f=s(f,-A)),E=u(a),I=c(a),C=u(f),b=I*c(f),x=I*C,w=E,0==e?P=o(y=p(b),w,x):1==e?P=o(y=p(x),w,-b):2==e?P=o(y=p(-b),w,-x):3==e?P=o(y=p(-x),w,b):(y=0,P={area:0,theta:0}),d=P.theta,_=P.area),v=h(12/S*(d+p(u(d)*c(N))-A)),m=g((1-c(y))/(c(v)*c(v))/(1-c(h(1/c(d))))),1==_?v+=A:2==_?v+=S:3==_&&(v+=O),r.x=m*c(v),r.y=m*u(v)},t.inv=function(o,f){var y,m,v,_,b,x,w,E,I,C,N,O,P;if(m=h(g(o.x*o.x+o.y*o.y)),y=d(o.y,o.x),o.x>=0&&o.x>=a(o.y)?C=0:o.y>=0&&o.y>=a(o.x)?(C=1,y-=A):o.x<0&&-o.x>=a(o.y)?(C=2,y=y<0?y+S:y-S):(C=3,y+=A),I=S/12*l(y),b=u(I)/(c(I)-1/g(2)),x=h(b),(w=1-(v=c(y))*v*(_=l(m))*_*(1-c(h(1/c(x)))))<-1?w=-1:w>1&&(w=1),4==e)E=p(w),f.phi=A-E,f.lam=0==C?x+A:1==C?x<0?x+S:x-S:2==C?x-A:x;else if(5==e)E=p(w),f.phi=E-A,f.lam=0==C?-x+A:1==C?-x:2==C?-x-A:x<0?-x-S:-x+S;else{var T,M,L;I=(T=w)*T,M=(I+=(L=I>=1?0:g(1-I)*u(x))*L)>=1?0:g(1-I),1==C?(I=M,M=-L,L=I):2==C?(M=-M,L=-L):3==C&&(I=M,M=L,L=-I),1==e?(I=T,T=-M,M=I):2==e?(T=-T,M=-M):3==e&&(I=T,T=M,M=-I),f.phi=p(-L)-A,f.lam=d(M,T),1==e?f.lam=s(f.lam,-A):2==e?f.lam=s(f.lam,-S):3==e&&(f.lam=s(f.lam,+A))}0!==t.es&&(N=f.phi<0?1:0,O=l(f.phi),P=n/g(O*O+i),f.phi=h(g(t.a*t.a-P*P)/(r*P)),N&&(f.phi=-f.phi))}}),"qsc","Quadrilateralized Spherical Cube","\n\tAzi, Sph."),K((function(t){var e=i([[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]]),n=i([[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]]);function r(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))}function i(t){return t.map((function(t){return new Float32Array(t)}))}t.es=0,t.fwd=function(t,i){var o,u;(o=s(11.459155902616464*(u=a(t.phi))))<0&&k(),o>=18&&(o=17),u=I*(u-.08726646259971647*o),i.x=.8487*r(e[o],u)*t.lam,i.y=1.3523*r(n[o],u),t.phi<0&&(i.y=-i.y)},t.inv=function(t,i){var o,u,c,l,f,p;if(i.lam=t.x/.8487,i.phi=a(t.y/1.3523),i.phi>=1)i.phi>1.000001?j():(i.phi=t.y<0?-A:A,i.lam/=e[18][0]);else{if((l=s(18*i.phi))<0||l>=18)return j();for(;;)if(n[l][0]>i.phi)--l;else{if(!(n[l+1][0]<=i.phi))break;++l}for(c=new Float32Array(n[l]),o=5*(i.phi-c[0])/(n[l+1][0]-c[0]),c[0]-=i.phi;o-=u=r(c,o)/(p=o,(f=c)[1]+p*(f[2]+f[2]+3*p*f[3])),!(a(u)<1e-8););i.phi=(5*l+o)*C,t.y<0&&(i.phi=-i.phi),i.lam/=r(e[l],o)}}}),"robin","Robinson","\n\tPCyl., Sph."),K(xn("EULER"),"euler","Euler","\n\tConic, Sph\n\tlat_1= and lat_2="),K(xn("MURD1"),"murd1","Murdoch I","\n\tConic, Sph\n\tlat_1= and lat_2="),K(xn("MURD2"),"murd2","Murdoch II","\n\tConic, Sph\n\tlat_1= and lat_2="),K(xn("MURD3"),"murd3","Murdoch III","\n\tConic, Sph\n\tlat_1= and lat_2="),K(xn("PCONIC"),"pconic","Perspective Conic","\n\tConic, Sph\n\tlat_1= and lat_2="),K(xn("TISSOT"),"tissot","Tissot","\n\tConic, Sph\n\tlat_1= and lat_2="),K(xn("VITK1"),"vitk1","Vitkovsky I","\n\tConic, Sph\n\tlat_1= and lat_2="),K((function(t){var e,n,r,i,o,s,f,p,d;r=.5*t.e,f=c(t.phi0),f*=f,n=g(1+t.es*f*f*t.rone_es),d=u(t.phi0),o=c(p=Je(s=d/n)),d*=t.e,e=v(l(N+.5*p))-n*(v(l(N+.5*t.phi0))-r*v((1+d)/(1-d))),i=t.k0*g(t.one_es)/(1-d*d),t.inv=function(f,p){var d,g,y,_,b,x,w,E,S;for(y=2*(h(m(f.y/i))-N),_=f.x/i,b=c(y),d=Je(o*u(y)+s*b*c(_)),g=Je(b*u(_)/c(d)),w=(e-v(l(N+.5*d)))/n,S=6;S&&(x=t.e*u(d),d-=E=(w+v(l(N+.5*d))-r*v((1+x)/(1-x)))*(1-x*x)*c(d)*t.rone_es,!(a(E)<1e-10));--S);S?(p.phi=d,p.lam=g/n):j()},t.fwd=function(a,f){var p,d,g,y,_,b;_=t.e*u(a.phi),p=2*h(m(n*(v(l(N+.5*a.phi))-r*v((1+_)/(1-_)))+e))-A,d=n*a.lam,b=c(p),g=Je(o*u(p)-s*b*c(d)),y=Je(b*u(d)/c(g)),f.x=i*y,f.y=i*v(l(N+.5*g))}}),"somerc","Swiss. Obl. Mercator","\n\tCyl, Ell\n\tFor CH1903"),K((function(t){var e=J(t.params,"tlat_ts")?J(t.params,"rlat_ts"):A;wn(t,e)}),"stere","Stereographic","\n\tAzi, Sph&Ell\n\tlat_ts="),K((function(t){t.phi0=J(t.params,"bsouth")?-A:A,t.k0=.994,t.x0=2e6,t.y0=2e6,t.lam0=0,t.es||G(-34);wn(t,A)}),"ups","Universal Polar Stereographic","\n\tAzi, Sph&Ell\n\tsouth"),K((function(t){var e=(s=t.e,p=t.phi0,m=s*s,v=u(p),b=c(p),x=g(1-m)/(1-m*v*v),w=g(1+m*b*b*b*b/(1-m)),E=f(v/w),S=.5*w*s,{e:s,K:l(.5*E+N)/(y(l(.5*p+N),w)*En(s*v,S)),C:w,chi:E,ratexp:S,rc:x}),n=e.chi,r=2*e.rc,i=u(n),o=c(n);var s,p,m,v,b,x,w,E,S;t.fwd=function(n,a){var s,f,p,d;n=function(t,e){return{phi:2*h(e.K*y(l(.5*t.phi+N),e.C)*En(e.e*u(t.phi),e.ratexp))-A,lam:e.C*t.lam}}(n,e),f=u(n.phi),s=c(n.phi),p=c(n.lam),d=t.k0*r/(1+i*f+o*s*p),a.x=d*s*u(n.lam),a.y=d*(o*f-i*s*p)},t.inv=function(s,p){var g,m,v,b,x=s.x/t.k0,w=s.y/t.k0;(g=_(x,w))?(m=2*d(g,r),v=u(m),b=c(m),p.phi=f(b*i+w*v*o/g),p.lam=d(x*v,g*o*b-w*i*v)):(p.phi=n,p.lam=0),function(t,e){t.phi;var n,r,i=y(l(.5*t.phi+N)/e.K,1/e.C);for(t.lam/=e.C,n=20;n>0&&(r=2*h(i*En(e.e*u(t.phi),-.5*e.e))-A,!(a(r-t.phi)<1e-14));--n)t.phi=r;n||F(-17)}(p,e)}}),"sterea","Oblique Stereographic Alternative","\n\tAzimuthal, Sph&Ell"),K((function(t){Sn(t,1.50488,1.35439,!1)}),"kav5","Kavraisky V","\n\tPCyl., Sph."),K((function(t){Sn(t,2,2,!1)}),"qua_aut","Quartic Authalic","\n\tPCyl., Sph."),K((function(t){Sn(t,2,2,!0)}),"fouc","Foucaut","\n\tPCyl., Sph."),K((function(t){Sn(t,1.48875,1.36509,!1)}),"mbt_s","McBryde-Thomas Flat-Polar Sine (No. 1)","\n\tPCyl., Sph."),K((function(t){t.es=0,t.fwd=function(e,n){n.x=c(e.phi)*u(e.lam)/t.k0,n.y=t.k0*(d(l(e.phi),c(e.lam))-t.phi0)},t.inv=function(e,n){var r;e.y=e.y/t.k0+t.phi0,e.x*=t.k0,r=g(1-e.x*e.x),n.phi=f(r*u(e.y)),n.lam=d(e.x,r*c(e.y))}}),"tcea","Transverse Cylindrical Equal Area","\n\tCyl, Sph"),K((function(t){t.es=0,t.fwd=function(t,e){var n=l(t.phi/2),r=u(N*n);e.x=t.lam*(.74482-.34588*r*r),e.y=1.70711*n},t.inv=function(t,e){var n=t.y/1.70711,r=u(N*n);e.lam=t.x/(.74482-.34588*r*r),e.phi=2*h(n)}}),"times","Times","\n\tCyl, Sph"),K((function(t){var e,n,r,i=.16666666666666666,o=.08333333333333333,s=.03333333333333333,l=.023809523809523808,h=.017857142857142856;t.es?((r=Ve(t.es))||e_error_0(),n=Ye(t.phi0,u(t.phi0),c(t.phi0),r),e=t.es/(1-t.es),t.fwd=function(f,p){var d,y,m,v,_,b;if(f.lam<-A||f.lam>A)return void F(-14);d=u(f.phi),y=c(f.phi),m=a(y)>1e-10?d/y:0,m*=m,v=y*f.lam,_=v*v,v/=g(1-t.es*d*d),b=e*y*y,p.x=t.k0*v*(1+i*_*(1-m+b+.05*_*(5+m*(m-18)+b*(14-58*m)+l*_*(61+m*(m*(179-m)-479))))),p.y=t.k0*(Ye(f.phi,d,y,r)-n+d*v*f.lam*.5*(1+o*_*(5-m+b*(9+4*b)+s*_*(61+m*(m-58)+b*(270-330*m)+h*_*(1385+m*(m*(543-m)-3111))))))},t.inv=function(f,p){var d,y,m,v,_,b,x;p.phi=Xe(n+f.y/t.k0,t.es,r),a(p.phi)>=A?(p.phi=f.y<0?-A:A,p.lam=0):(b=u(p.phi),m=c(p.phi),x=a(m)>1e-10?b/m:0,d=e*m*m,v=f.x*g(y=1-t.es*b*b)/t.k0,y*=x,x*=x,_=v*v,p.phi-=y*_/(1-t.es)*.5*(1-_*o*(5+x*(3-9*d)+d*(1-4*d)-_*s*(61+x*(90-252*d+45*x)+46*d-_*h*(1385+x*(3633+x*(4095+1575*x)))))),p.lam=v*(1-_*i*(1+2*x+d-.05*_*(5+x*(28+24*x+8*d)+6*d-_*l*(61+x*(662+x*(1320+720*x))))))/m)}):(e=t.k0,n=.5*e,t.fwd=function(r,i){var o,s;if(r.lam<-A||r.lam>A)return void F(-14);s=c(r.phi),o=s*u(r.lam),a(a(o)-1)<=1e-10&&k();i.x=n*v((1+o)/(1-o)),i.y=s*c(r.lam)/g(1-o*o),(o=a(i.y))>=1?o-1>1e-10?k():i.y=0:i.y=p(i.y);r.phi<0&&(i.y=-i.y);i.y=e*(i.y-t.phi0)},t.inv=function(n,r){var i=m(n.x/e),o=.5*(i-1/i);i=c(t.phi0+n.y/e),r.phi=f(g((1-i*i)/(1+o*o))),n.y<0&&-r.phi+t.phi0<0&&(r.phi=-r.phi);r.lam=o||i?d(o,i):0})}),"tmerc","Transverse Mercator","\n\tCyl, Sph&Ell"),K((function(t){var e,n,r,i,o,a,s,f,p,h,g,y,m,v,b,x,w,E,S,I,C,N,O;I=J(t.params,"rlat_1"),E=J(t.params,"rlon_1"),C=J(t.params,"rlat_2"),S=J(t.params,"rlon_2"),I==C&&E==S&&G(-25);t.lam0=St(.5*(E+S)),h=St(S-E),e=c(I),r=c(C),n=u(I),i=u(C),a=e*i,s=n*r,o=e*r*u(h),p=We(n*i+e*r*c(h)),g=.5*p,N=d(r*u(h),e*i-n*r*c(h)),v=c(O=Je(e*u(N))),b=u(O),x=St(d(e*c(N),n)-g),h*=.5,w=A-d(u(N)*n,c(N))-h,y=l(g),m=.5/u(g),f=.5/p,p*=p,t.fwd=function(t,l){var d,g,y,m,v,_,b;_=u(t.phi),b=c(t.phi),g=We(n*_+e*b*c(m=t.lam+h)),y=We(i*_+r*b*c(v=t.lam-h)),g*=g,y*=y,l.x=f*(d=g-y),d=p-d,l.y=f*He(4*p*y-d*d),o*_-b*(a*u(m)-s*u(v))<0&&(l.y=-l.y)},t.inv=function(t,e){var n,r,i,o,a,s;i=(n=c(_(t.y,t.x+g)))+(r=c(_(t.y,t.x-g))),o=n-r,e.lam=-d(o,i*y),e.phi=We(_(y*i,o)*m),t.y<0&&(e.phi=-e.phi),s=u(e.phi),a=c(e.phi),e.phi=Je(b*s+v*a*(i=c(e.lam-=x))),e.lam=d(a*u(e.lam),b*a*i-v*s)+w},t.es=0}),"tpeqd","Two Point Equidistant","\n\tMisc Sph\n\tlat_1= lon_1= lat_2= lon_2="),K((function(t){var e,n,r,i,o,a;(i=J(t.params,"dn"))>0&&i<=1==!1&&G(-40);r=J(t.params,"dq")/3,o=J(t.params,"ralpha"),a=i*u(o),e=c(o)/g(1-a*a),n=1/(e*i),t.fwd=function(t,o){var a=t.phi=Je(i*u(t.phi));o.x=e*t.lam*c(t.phi),a*=a,o.y=t.phi*(1+a*r)*n},t.es=0}),"urm5","Urmaev V","\n\tPCyl., Sph., no inv.\n\tn= q= alpha="),K((function(t){var e=J(t.params,"dn");(e<=0||e>1)&&G(-40);In(t,e)}),"urmfps","Urmaev Flat-Polar Sinusoidal","\n\tPCyl, Sph.\n\tn="),K((function(t){In(t,.8660254037844386)}),"wag1","Wagner I (Kavraisky VI)","\n\tPCyl, Sph."),K((function(t){var e=1e-10,n=.3333333333333333,r=9.869604401089358,i=19.739208802178716;t.fwd=function(t,n){var r,i,o,s,u;(u=a(t.phi/A))-e>1&&k(),u>1&&(u=1),a(t.phi)<=e?(n.x=t.lam,n.y=0):a(t.lam)<=e||a(u-1)<e?(n.x=0,n.y=S*l(.5*f(u)),t.phi<0&&(n.y=-n.y)):(i=(r=.5*a(S/t.lam-t.lam/S))*r,o=g(1-u*u),s=(o/=u+o-1)*o,u=o*(2/u-1),u*=u,n.x=o-u,o=u+i,n.x=S*(r*n.x+g(i*n.x*n.x-o*(s-u)))/o,t.lam<0&&(n.x=-n.x),n.y=a(n.x/S),n.y=1-n.y*(n.y+2*r),n.y<-e&&k(),n.y<0?n.y=0:n.y=g(n.y)*(t.phi<0?-S:S))},t.inv=function(t,o){var s,u,l,f,h,d,y,m,v,_,b,x,w;if(x=t.x*t.x,(b=a(t.y))<e)return o.phi=0,s=x*x+i*(x+4.934802200544679),o.lam=a(t.x)<=e?0:.5*(x-r+g(s))/t.x,o;w=t.y*t.y,f=(l=-S*b*((m=x+w)+r))+r*(m-3*w),u=S*b,v=2*g(-n*(d=l/(h=(y=m*m)+P*(b*m+S*(w+S*(b+A))))-n*(f/=h)*f)),(s=a(_=3*(_=.07407407407407407*f*f*f+(u*u-n*f*l)/h)/(d*v)))-e<=1?(_=s>1?_>0?0:S:p(_),o.phi=S*(v*c(_*n+4.188790204786391)-n*f),t.y<0&&(o.phi=-o.phi),s=y+i*(x-w+4.934802200544679),o.lam=a(t.x)<=e?0:.5*(m-r+(s<=0?0:g(s)))/t.x):j()}}),"vandg","van der Grinten (I)","\n\tMisc Sph"),K((function(t){Cn(t,!1)}),"vandg2","van der Grinten II","\n\tMisc Sph, no inv."),K((function(t){Cn(t,!0)}),"vandg3","van der Grinten III","\n\tMisc Sph, no inv."),K((function(t){t.es=0,t.fwd=function(t,e){var n,r,i,o,s,u,c,l;a(t.phi)<1e-10?(e.x=t.lam,e.y=0):a(t.lam)<1e-10||a(a(t.phi)-A)<1e-10?(e.x=0,e.y=t.phi):(u=(o=.5*((i=a(T*t.phi))*(8-i*(2+(s=i*i)))-5)/(s*(i-1)))*o,c=T*t.lam,c=g((c+=1/c)*c-4),a(t.lam)-A<0&&(c=-c),n=i+o,n=(c*((n*=n)+u-1)+2*g(n*(s+u*(l=c*c)-1)+(1-s)*(s*((r=i+3*o)*r+4*u)+u*(12*i*o+4*u))))/(4*n+l),e.x=A*n,e.y=A*g(1+c*a(n)-n*n),t.lam<0&&(e.x=-e.x),t.phi<0&&(e.y=-e.y))}}),"vandg4","van der Grinten IV","\n\tMisc Sph, no inv."),K((function(t){t.fwd=function(t,e){t.phi=Je(.88022*u(.8855*t.phi)),e.x=.92483*t.lam*c(t.phi),e.y=1.38725*t.phi},t.inv=function(t,e){e.phi=t.y/1.38725,e.lam=t.x/(.92483*c(e.phi)),e.phi=Je(u(e.phi)/.88022)/.8855}}),"wag2","Wagner II","\n\tPCyl., Sph."),K((function(t){var e=J(t.params,"rlat_ts"),n=c(e)/c(2*e/3);t.es=0,t.fwd=function(t,e){e.x=n*t.lam*c(.6666666666666666*t.phi),e.y=t.phi},t.inv=function(t,e){e.phi=t.y,e.lam=t.x/(n*c(.6666666666666666*e.phi))}}),"wag3","Wagner III","\n\tPCyl., Sph.\n\tlat_ts="),K((function(t){t.es=0,t.fwd=function(t,e){var n,r,i;n=f(e.y=.9063077870366499*u(t.phi)),e.x=2.66723*(r=c(n))*u(t.lam/=3),e.y*=1.24104*(i=1/g(.5*(1+r*c(t.lam)))),e.x*=i}}),"wag7","Wagner VII","\n\tMisc Sph, no inv."),K((function(t){var e=c(J(t.params,"rlat_ts"));t.fwd=function(t,n){n.x=.5*t.lam*(e+c(t.phi)),n.y=t.phi},t.inv=function(t,n){n.phi=t.y,n.lam=2*t.x/(e+c(n.phi))},t.es=0}),"wink1","Winkel I","\n\tPCyl., Sph.\n\tlat_ts="),K((function(t){var e=c(J(t.params,"rlat_1"));t.fwd=function(t,n){var r,i,o,s=t.phi;for(n.y=s*T,r=S*u(s),s*=1.8,o=10;o&&(s-=i=(s+u(s)-r)/(1+c(s)),!(a(i)<1e-7));--o);o?s*=.5:s=s<0?-A:A,n.x=.5*t.lam*(c(s)+e),n.y=N*(u(s)+n.y)},t.inv=null,t.es=0}),"wink2","Winkel II","\n\tPCyl., Sph., no inv.\n\tlat_1=");var Nn=At;Nn.pj_init=ht,Nn.pj_fwd=It,Nn.pj_inv=Ct,Nn.pj_transform=bt,Nn.pj_add=K,Nn.pj_fwd_deg=function(t,e){return It({lam:t.lam*C,phi:t.phi*C},e)},Nn.pj_inv_deg=function(t,e){var n=Ct(t,e);return{lam:n.lam*I,phi:n.phi*I}},Nn.pj_transform_point=_t,Nn.internal={dmstod:V,dmstor:q,get_rtodms:function(t,e,n,r){var i=Nt(t,e,n,r);return function(t){return i(t*I)}},get_dtodms:Nt,get_proj_defn:tt,pj_latlong_from_proj:function(t){return ht("+proj=latlong"+Q(t))},pj_get_params:W,pj_datums:nt,pj_list:$,pj_ellps:ot,pj_units:st,pj_read_init_opts:pt,find_datum:it,DEG_TO_RAD:C,RAD_TO_DEG:I,wkt_parse:De,wkt_unpack:Fe,wkt_to_proj4:function(t){var e,n,r=De(t);return r.PROJCS?e=Dt(n=r.PROJCS)(n):r.GEOGCS?e="+proj=longlat "+Vt(r.GEOGCS):r.GEOCCS?Ut("geocentric coordinates are not supported"):Ut("missing a supported WKT CS type"),e},wkt_from_proj4:function(t){return t.length&&(t=ht(t)),Le(Z(t)?{GEOGCS:Ht(t)}:ne(t))},wkt_make_projcs:ne,wkt_get_geogcs_name:Zt,wkt_stringify:Le,mproj_insert_libcache:function(t,e){lt[t]=e},mproj_search_libcache:ft,GeographicLib:Ge},void 0===(o="function"==typeof(i=Nn)?i.call(e,n,e,t):i)||(t.exports=o)}()}).call(this,"/index.js")},function(t,e,n){var r=n(38),i=n(13);t.exports=function(t){return r(i(t))}},function(t,e,n){var r=n(7),i=n(68),o=n(27),a=n(21),s=n(28),u=n(8),c=n(96),l=Object.getOwnPropertyDescriptor;e.f=r?l:function(t,e){if(t=a(t),e=s(e,!0),c)try{return l(t,e)}catch(t){}if(u(t,e))return o(!i.f.call(t,e),t[e])}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r,i,o,a=n(154),s=n(1),u=n(6),c=n(14),l=n(8),f=n(72),p=n(52),h=n(40),d=s.WeakMap;if(a){var g=f.state||(f.state=new d),y=g.get,m=g.has,v=g.set;r=function(t,e){return e.facade=t,v.call(g,t,e),e},i=function(t){return y.call(g,t)||{}},o=function(t){return m.call(g,t)}}else{var _=p("state");h[_]=!0,r=function(t,e){return e.facade=t,c(t,_,e),e},i=function(t){return l(t,_)?t[_]:{}},o=function(t){return l(t,_)}}t.exports={set:r,get:i,has:o,enforce:function(t){return o(t)?i(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!u(e)||(n=i(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}}},function(t,e,n){var r=n(99),i=n(74).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,c=[],l=!1,f=-1;function p(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&h())}function h(){if(!l){var t=s(p);l=!0;for(var e=c.length;e;){for(u=c,c=[];++f<e;)u&&u[f].run();f=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||l||s(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(6);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=!1},function(t,e,n){var r=n(98),i=n(1),o=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?o(r[t])||o(i[t]):r[t]&&r[t][e]||i[t]&&i[t][e]}},function(t,e,n){var r=n(15),i=Math.max,o=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):o(n,e)}},function(t,e,n){var r=n(44);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){"use strict";var r=n(2);t.exports=function(t,e){var n=[][t];return!!n&&r((function(){n.call(null,e||function(){throw 1},1)}))}},function(t,e,n){var r=n(10),i=n(44),o=n(4)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||null==(n=r(a)[o])?e:i(n)}},function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var r=n(253),i=n(254),o=n(255);function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}return c(this,t,e,n)}function c(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=p(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(e,n),i=(t=s(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|h(e.length);return 0===(t=s(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?s(t,0):p(t,e);if("Buffer"===e.type&&o(e.data))return p(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e){if(l(e),t=s(t,e<0?0:0|h(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function p(t,e){var n=e.length<0?0:0|h(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function h(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return G(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return U(t).length;default:if(r)return G(t).length;e=(""+e).toLowerCase(),r=!0}}function g(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return O(this,e,n);case"utf8":case"utf-8":return C(this,e,n);case"ascii":return N(this,e,n);case"latin1":case"binary":return A(this,e,n);case"base64":return I(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function y(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function m(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:v(t,e,n,r,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):v(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function v(t,e,n,r,i){var o,a=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var l=-1;for(o=n;o<s;o++)if(c(t,o)===c(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var f=!0,p=0;p<u;p++)if(c(t,o+p)!==c(e,p)){f=!1;break}if(f)return o}return-1}function _(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function b(t,e,n,r){return z(G(e,t.length-n),t,n,r)}function x(t,e,n,r){return z(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function w(t,e,n,r){return x(t,e,n,r)}function E(t,e,n,r){return z(U(e),t,n,r)}function S(t,e,n,r){return z(function(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function I(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function C(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,a,s,u,c=t[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=n)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(u=(15&c)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=f}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return c(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return l(e),e<=0?s(t,e):void 0!==n?"string"==typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return f(null,t)},u.allocUnsafeSlow=function(t){return f(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var a=t[n];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?C(this,0,t):g.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),s=Math.min(o,a),c=this.slice(r,i),l=t.slice(e,n),f=0;f<s;++f)if(c[f]!==l[f]){o=c[f],a=l[f];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return m(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return m(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return _(this,t,e,n);case"utf8":case"utf-8":return b(this,t,e,n);case"ascii":return x(this,t,e,n);case"latin1":case"binary":return w(this,t,e,n);case"base64":return E(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function N(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function A(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function O(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=B(t[o]);return i}function P(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function T(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function M(t,e,n,r,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function L(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function R(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function D(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(t,e,n,r,o){return o||D(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function k(t,e,n,r,o){return o||D(t,0,n,8),i.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||T(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||T(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||T(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||T(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||T(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||T(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||T(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||T(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||T(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||T(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||T(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||T(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||T(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||T(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||T(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||T(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||T(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||T(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||M(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||M(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):R(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);M(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);M(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):R(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return F(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return F(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return k(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return k(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},u.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=u.isBuffer(t)?t:G(new u(t,r).toString()),s=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var j=/[^+\/0-9A-Za-z-_]/g;function B(t){return t<16?"0"+t.toString(16):t.toString(16)}function G(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function U(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(j,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function z(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(51))},function(t,e,n){"use strict";(function(e){var r,i=n(35),o=i.Buffer,a={};for(r in i)i.hasOwnProperty(r)&&"SlowBuffer"!==r&&"Buffer"!==r&&(a[r]=i[r]);var s=a.Buffer={};for(r in o)o.hasOwnProperty(r)&&"allocUnsafe"!==r&&"allocUnsafeSlow"!==r&&(s[r]=o[r]);if(a.Buffer.prototype=o.prototype,s.from&&s.from!==Uint8Array.from||(s.from=function(t,e,n){if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof t);if(t&&void 0===t.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);return o(t,e,n)}),s.alloc||(s.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError('The "size" argument must be of type number. Received type '+typeof t);if(t<0||t>=2*(1<<30))throw new RangeError('The value "'+t+'" is invalid for option "size"');var r=o(t);return e&&0!==e.length?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r}),!a.kStringMaxLength)try{a.kStringMaxLength=e.binding("buffer").kStringMaxLength}catch(t){}a.constants||(a.constants={MAX_LENGTH:a.kMaxLength},a.kStringMaxLength&&(a.constants.MAX_STRING_LENGTH=a.kStringMaxLength)),t.exports=a}).call(this,n(26))},function(t,e,n){(function(t){function n(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}e.resolve=function(){for(var e="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(e=a+"/"+e,i="/"===a.charAt(0))}return(i?"/":"")+(e=n(r(e.split("/"),(function(t){return!!t})),!i).join("/"))||"."},e.normalize=function(t){var o=e.isAbsolute(t),a="/"===i(t,-1);return(t=n(r(t.split("/"),(function(t){return!!t})),!o).join("/"))||o||(t="."),t&&a&&(t+="/"),(o?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(r(t,(function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,n){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var i=r(t.split("/")),o=r(n.split("/")),a=Math.min(i.length,o.length),s=a,u=0;u<a;u++)if(i[u]!==o[u]){s=u;break}var c=[];for(u=s;u<i.length;u++)c.push("..");return(c=c.concat(o.slice(s))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),n=47===e,r=-1,i=!0,o=t.length-1;o>=1;--o)if(47===(e=t.charCodeAt(o))){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":t.slice(0,r)},e.basename=function(t,e){var n=function(t){"string"!=typeof t&&(t+="");var e,n=0,r=-1,i=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!i){n=e+1;break}}else-1===r&&(i=!1,r=e+1);return-1===r?"":t.slice(n,r)}(t);return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){"string"!=typeof t&&(t+="");for(var e=-1,n=0,r=-1,i=!0,o=0,a=t.length-1;a>=0;--a){var s=t.charCodeAt(a);if(47!==s)-1===r&&(i=!1,r=a+1),46===s?-1===e?e=a:1!==o&&(o=1):-1!==e&&(o=-1);else if(!i){n=a+1;break}}return-1===e||-1===r||0===o||1===o&&e===r-1&&e===n+1?"":t.slice(e,r)};var i="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,n(26))},function(t,e,n){var r=n(2),i=n(23),o="".split;t.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?o.call(t,""):Object(t)}:Object},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++n+r).toString(36)}},function(t,e){t.exports={}},function(t,e,n){var r=n(21),i=n(5),o=n(31),a=function(t){return function(e,n,a){var s,u=r(e),c=i(u.length),l=o(a,c);if(t&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},function(t,e,n){var r=n(23);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(2),i=n(4),o=n(56),a=i("species");t.exports=function(t){return o>=51||!r((function(){var e=[];return(e.constructor={})[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},function(t,e){t.exports={}},function(t,e,n){var r=n(4),i=n(47),o=n(9),a=r("unscopables"),s=Array.prototype;null==s[a]&&o.f(s,a,{configurable:!0,value:i(null)}),t.exports=function(t){s[a][t]=!0}},function(t,e,n){var r,i=n(10),o=n(158),a=n(74),s=n(40),u=n(104),c=n(69),l=n(52),f=l("IE_PROTO"),p=function(){},h=function(t){return"<script>"+t+"<\/script>"},d=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;d=r?function(t){t.write(h("")),t.close();var e=t.parentWindow.Object;return t=null,e}(r):((e=c("iframe")).style.display="none",u.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(h("document.F=Object")),t.close(),t.F);for(var n=a.length;n--;)delete d.prototype[a[n]];return d()};s[f]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(p.prototype=i(t),n=new p,p.prototype=null,n[f]=t):n=d(),void 0===e?n:o(n,e)}},function(t,e,n){var r=n(9).f,i=n(8),o=n(4)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){var r=n(10),i=n(161);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,o){return r(n),i(o),e?t.call(n,o):n.__proto__=o,n}}():void 0)},function(t,e,n){"use strict";var r=n(0),i=n(1),o=n(7),a=n(219),s=n(3),u=n(130),c=n(85),l=n(27),f=n(14),p=n(5),h=n(132),d=n(141),g=n(28),y=n(8),m=n(57),v=n(6),_=n(47),b=n(49),x=n(25).f,w=n(221),E=n(12).forEach,S=n(62),I=n(9),C=n(22),N=n(24),A=n(92),O=N.get,P=N.set,T=I.f,M=C.f,L=Math.round,R=i.RangeError,D=u.ArrayBuffer,F=u.DataView,k=s.NATIVE_ARRAY_BUFFER_VIEWS,j=s.TYPED_ARRAY_TAG,B=s.TypedArray,G=s.TypedArrayPrototype,U=s.aTypedArrayConstructor,z=s.isTypedArray,q=function(t,e){for(var n=0,r=e.length,i=new(U(t))(r);r>n;)i[n]=e[n++];return i},V=function(t,e){T(t,e,{get:function(){return O(this)[e]}})},Y=function(t){var e;return t instanceof D||"ArrayBuffer"==(e=m(t))||"SharedArrayBuffer"==e},X=function(t,e){return z(t)&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},J=function(t,e){return X(t,e=g(e,!0))?l(2,t[e]):M(t,e)},W=function(t,e,n){return!(X(t,e=g(e,!0))&&v(n)&&y(n,"value"))||y(n,"get")||y(n,"set")||n.configurable||y(n,"writable")&&!n.writable||y(n,"enumerable")&&!n.enumerable?T(t,e,n):(t[e]=n.value,t)};o?(k||(C.f=J,I.f=W,V(G,"buffer"),V(G,"byteOffset"),V(G,"byteLength"),V(G,"length")),r({target:"Object",stat:!0,forced:!k},{getOwnPropertyDescriptor:J,defineProperty:W}),t.exports=function(t,e,n){var o=t.match(/\d+$/)[0]/8,s=t+(n?"Clamped":"")+"Array",u="get"+t,l="set"+t,g=i[s],y=g,m=y&&y.prototype,I={},C=function(t,e){T(t,e,{get:function(){return function(t,e){var n=O(t);return n.view[u](e*o+n.byteOffset,!0)}(this,e)},set:function(t){return function(t,e,r){var i=O(t);n&&(r=(r=L(r))<0?0:r>255?255:255&r),i.view[l](e*o+i.byteOffset,r,!0)}(this,e,t)},enumerable:!0})};k?a&&(y=e((function(t,e,n,r){return c(t,y,s),A(v(e)?Y(e)?void 0!==r?new g(e,d(n,o),r):void 0!==n?new g(e,d(n,o)):new g(e):z(e)?q(y,e):w.call(y,e):new g(h(e)),t,y)})),b&&b(y,B),E(x(g),(function(t){t in y||f(y,t,g[t])})),y.prototype=m):(y=e((function(t,e,n,r){c(t,y,s);var i,a,u,l=0,f=0;if(v(e)){if(!Y(e))return z(e)?q(y,e):w.call(y,e);i=e,f=d(n,o);var g=e.byteLength;if(void 0===r){if(g%o)throw R("Wrong length");if((a=g-f)<0)throw R("Wrong length")}else if((a=p(r)*o)+f>g)throw R("Wrong length");u=a/o}else u=h(e),i=new D(a=u*o);for(P(t,{buffer:i,byteOffset:f,byteLength:a,length:u,view:new F(i)});l<u;)C(t,l++)})),b&&b(y,B),m=y.prototype=_(G)),m.constructor!==y&&f(m,"constructor",y),j&&f(m,j,s),I[s]=y,r({global:!0,forced:y!=g,sham:!k},I),"BYTES_PER_ELEMENT"in y||f(y,"BYTES_PER_ELEMENT",o),"BYTES_PER_ELEMENT"in m||f(m,"BYTES_PER_ELEMENT",o),S(s)}):t.exports=function(){}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(73),i=n(39),o=r("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},function(t,e,n){var r=n(2),i=/#|\.prototype\./,o=function(t,e){var n=s[a(t)];return n==c||n!=u&&("function"==typeof e?r(e):!!e)},a=o.normalize=function(t){return String(t).replace(i,".").toLowerCase()},s=o.data={},u=o.NATIVE="N",c=o.POLYFILL="P";t.exports=o},function(t,e,n){"use strict";var r=n(28),i=n(9),o=n(27);t.exports=function(t,e,n){var a=r(e);a in t?i.f(t,a,o(0,n)):t[a]=n}},function(t,e,n){var r=n(6),i=n(42),o=n(4)("species");t.exports=function(t,e){var n;return i(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!i(n.prototype)?r(n)&&null===(n=n[o])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},function(t,e,n){var r,i,o=n(1),a=n(77),s=o.process,u=s&&s.versions,c=u&&u.v8;c?i=(r=c.split("."))[0]+r[1]:a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(i=r[1]),t.exports=i&&+i},function(t,e,n){var r=n(80),i=n(23),o=n(4)("toStringTag"),a="Arguments"==i(function(){return arguments}());t.exports=r?i:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?n:a?i(e):"Object"==(r=i(e))&&"function"==typeof e.callee?"Arguments":r}},function(t,e,n){"use strict";var r=n(21),i=n(46),o=n(45),a=n(24),s=n(105),u=a.set,c=a.getterFor("Array Iterator");t.exports=s(Array,"Array",(function(t,e){u(this,{type:"Array Iterator",target:r(t),index:0,kind:e})}),(function(){var t=c(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(t,e,n){var r=n(99),i=n(74);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){var r=n(8),i=n(11),o=n(52),a=n(160),s=o("IE_PROTO"),u=Object.prototype;t.exports=a?Object.getPrototypeOf:function(t){return t=i(t),r(t,s)?t[s]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,e,n){var r=n(23),i=n(1);t.exports="process"==r(i.process)},function(t,e,n){"use strict";var r=n(30),i=n(9),o=n(4),a=n(7),s=o("species");t.exports=function(t){var e=r(t),n=i.f;a&&e&&!e[s]&&n(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,n){"use strict";var r,i,o=n(88),a=n(115),s=RegExp.prototype.exec,u=String.prototype.replace,c=s,l=(r=/a/,i=/b*/g,s.call(r,"a"),s.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),f=a.UNSUPPORTED_Y||a.BROKEN_CARET,p=void 0!==/()??/.exec("")[1];(l||p||f)&&(c=function(t){var e,n,r,i,a=this,c=f&&a.sticky,h=o.call(a),d=a.source,g=0,y=t;return c&&(-1===(h=h.replace("y","")).indexOf("g")&&(h+="g"),y=String(t).slice(a.lastIndex),a.lastIndex>0&&(!a.multiline||a.multiline&&"\n"!==t[a.lastIndex-1])&&(d="(?: "+d+")",y=" "+y,g++),n=new RegExp("^(?:"+d+")",h)),p&&(n=new RegExp("^"+d+"$(?!\\s)",h)),l&&(e=a.lastIndex),r=s.call(c?n:a,y),c?r?(r.input=r.input.slice(g),r[0]=r[0].slice(g),r.index=a.lastIndex,a.lastIndex+=r[0].length):a.lastIndex=0:l&&r&&(a.lastIndex=a.global?r.index+r[0].length:e),p&&r&&r.length>1&&u.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r}),t.exports=c},function(t,e,n){"use strict";n(87);var r=n(18),i=n(2),o=n(4),a=n(63),s=n(14),u=o("species"),c=!i((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),l="$0"==="a".replace(/./,"$0"),f=o("replace"),p=!!/./[f]&&""===/./[f]("a","$0"),h=!i((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));t.exports=function(t,e,n,f){var d=o(t),g=!i((function(){var e={};return e[d]=function(){return 7},7!=""[t](e)})),y=g&&!i((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[u]=function(){return n},n.flags="",n[d]=/./[d]),n.exec=function(){return e=!0,null},n[d](""),!e}));if(!g||!y||"replace"===t&&(!c||!l||p)||"split"===t&&!h){var m=/./[d],v=n(d,""[t],(function(t,e,n,r,i){return e.exec===a?g&&!i?{done:!0,value:m.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),{REPLACE_KEEPS_$0:l,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:p}),_=v[0],b=v[1];r(String.prototype,t,_),r(RegExp.prototype,d,2==e?function(t,e){return b.call(t,this,e)}:function(t){return b.call(t,this)})}f&&s(RegExp.prototype[d],"sham",!0)}},function(t,e,n){var r=n(23),i=n(63);t.exports=function(t,e){var n=t.exec;if("function"==typeof n){var o=n.call(t,e);if("object"!=typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(t))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},function(t,e,n){"use strict";(function(t,e,r,i){n(182),n(184),n(185),n(67),n(186),n(101),n(187),n(188),n(190),n(102),n(191),n(127),n(58),n(107),n(192),n(82),n(83),n(193),n(194),n(129),n(195),n(196),n(198),n(199),n(135),n(108),n(201),n(203),n(109),n(110),n(111),n(204),n(87),n(205),n(206),n(116),n(118),n(207),n(210),n(211),n(212),n(119),n(214),n(215),n(217),n(218),n(222),n(223),n(224),n(225),n(226),n(228),n(229),n(230),n(231),n(232),n(233),n(234),n(235),n(236),n(237),n(238),n(239),n(240),n(241),n(242),n(243),n(244),n(245),n(246),n(247),n(248),n(249),n(250),n(120),n(251),n(252);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(){var a=Object.freeze({__proto__:null,get default(){return a},get getUniqueName(){return c},get isFunction(){return l},get isObject(){return f},get clamp(){return p},get isArray(){return h},get isNumber(){return d},get isInteger(){return g},get isString(){return y},get isDate(){return m},get isBoolean(){return v},get formatDateISO(){return _},get toArray(){return b},get isArrayLike(){return x},get addslashes(){return w},get regexEscape(){return E},get htmlEscape(){return I},get defaults(){return C},get extend(){return N},get inherit(){return A},get reduceAsync(){return O},get merge(){return P},get difference(){return T},get indexOf(){return M},get contains(){return L},get some(){return R},get every(){return D},get find(){return F},get range(){return k},get repeat(){return j},get sum(){return B},get getArrayBounds(){return G},get uniq(){return U},get pluck(){return z},get countValues(){return q},get indexOn(){return V},get groupBy(){return Y},get arrayToIndex(){return X},get forEach(){return J},get forEachProperty(){return W},get initializeArray(){return H},get replaceArray(){return $},get repeatString(){return K},get pluralSuffix(){return Z},get endsWith(){return Q},get lpad(){return tt},get rpad(){return et},get trim(){return nt},get ltrim(){return it},get rtrim(){return at},get addThousandsSep(){return st},get numToStr(){return ut},get formatNumber(){return ct},get sortOn(){return lt},get genericSort(){return ft},get getSortedIds(){return pt},get sortArrayIndex(){return ht},get reorderArray(){return dt},get getKeyComparator(){return gt},get getGenericComparator(){return yt},get quicksort(){return mt},get quicksortPartition(){return vt},get findRankByValue(){return _t},get findValueByPct(){return bt},get findValueByRank(){return xt},get findMedian(){return wt},get mean(){return Et},get format(){return St},get formatter(){return Ct},get wildcardToRegExp(){return Nt},get createBuffer(){return At},get expandoBuffer(){return Ot},get copyElements(){return Pt},get extendBuffer(){return Tt},get mergeNames(){return Mt},get findStringPrefix(){return Lt},get isFiniteNumber(){return Rt},get isNonNegNumber(){return Dt},get parsePercent(){return Ft},get formatVersionedName(){return kt},get uniqifyNames(){return jt},get cleanNumericString(){return Bt},get parseString(){return Gt},get parseNumber(){return Ut},get trimQuotes(){return zt}}),s=n(35).Buffer,u=0;function c(t){return(t||"__id_")+ ++u}function l(t){return"function"==typeof t}function f(t){return t===Object(t)}function p(t,e,n){return t<e?e:t>n?n:t}function h(t){return Array.isArray(t)}function d(t){return null!=t&&t.constructor==Number}function g(t){return d(t)&&(0|t)===t}function y(t){return null!=t&&t.toString===String.prototype.toString}function m(t){return!!t&&t.getTime===Date.prototype.getTime}function v(t){return!0===t||!1===t}function _(t){return m(t)?t.toISOString().replace(":00.000Z","Z"):""}function b(t){var e;x(t)||re("toArray() requires an array-like object");try{e=Array.prototype.slice.call(t,0)}catch(i){e=[];for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}return e}function x(t){return!!t&&(!!h(t)||!y(t)&&(0===t.length||t.length>0))}function w(t){return(t+"").replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0")}function E(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}var S={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function I(t){return String(t).replace(/[&<>"'\/]/g,(function(t){return S[t]}))}function C(t){for(var e=1,n=arguments.length;e<n;e++){var r=arguments[e]||{};for(var i in r)i in t==!1&&r.hasOwnProperty(i)&&(t[i]=r[i])}return t}function N(t){var e,n,r,i=t||{},o=arguments.length;for(n=1;n<o;n++)for(e in r=arguments[n]||{})r.hasOwnProperty(e)&&(i[e]=r[e]);return i}function A(t,e){var n=function t(){this.__super__==t&&(this.__super__=e.prototype.__super__,e.apply(this,arguments),delete this.__super__)};n.prototype=e.prototype||e,t.prototype=N(new n,t.prototype),t.prototype.constructor=t,t.prototype.__super__=n}function O(e,n,r,i){var o=void 0===t?setTimeout:t,a=0;!function t(n,s){if(n)return i(n,null);o((function(){a<e.length==!1?i(null,s):r(s,e[a++],t)}),0)}(null,n)}function P(t,e){h(t)&&h(e)||re("Usage: merge(destArray, srcArray);");for(var n=0,r=e.length;n<r;n++)t.push(e[n]);return t}function T(t,e){var n=X(e);return t.filter((function(t){return!Object.prototype.hasOwnProperty.call(n,t)}))}function M(t,e){for(var n=e!=e,r=0,i=t.length||0;r<i;r++){if(t[r]===e)return r;if(n&&t[r]!=t[r])return r}return-1}function L(t,e){return y(t)?-1!=t.indexOf(e):x(t)?-1!=M(t,e):void re("Expected Array or String argument")}function R(t,e){return t.reduce((function(t,n){return t||e(n)}),!1)}function D(t,e){return t.reduce((function(t,n){return t&&e(n)}),!0)}function F(t,e,n){var r=t.filter(e,n);return 0===r.length?null:r[0]}function k(t,e,n){for(var r=[],i=void 0===e?0:e,o=void 0===n?1:n;t--;)r.push(i),i+=o;return r}function j(t,e){for(var n,r=[],i=0;i<t;i++)void 0!==(n=e(i))&&(r[i]=n);return r.length>0?r:void 0}function B(t,e){x(t)||re("sum() expects an array, received:",t);for(var n,r=0,i=0,o=0,a=t.length;o<a;o++)(n=t[o])?r+=n:isNaN(n)&&i++;return e&&(e.nan=i),r}function G(t){for(var e,n=1/0,r=-1/0,i=0,o=0,a=t.length;o<a;o++)(e=t[o])!=e&&i++,e<n&&(n=e),e>r&&(r=e);return{min:n,max:r,nan:i}}function U(t){var e={};return t.reduce((function(t,n){return n in e==!1&&(e[n]=!0,t.push(n)),t}),[])}function z(t,e){return t.map((function(t){return t[e]}))}function q(t){return t.reduce((function(t,e){return t[e]=e in t?t[e]+1:1,t}),{})}function V(t,e){return t.reduce((function(t,n){return t[n[e]]=n,t}),{})}function Y(t,e){return t.reduce((function(t,n){var r=n[e];return r in t?t[r].push(n):t[r]=[n],t}),{})}function X(t,e){var n=arguments.length>1;return t.reduce((function(t,r){return t[r]=!n||e,t}),{})}function J(t,e,n){if(!x(t))throw new Error("#forEach() takes an array-like argument. "+t);for(var r=0,i=t.length;r<i;r++)e.call(n,t[r],r)}function W(t,e,n){Object.keys(t).forEach((function(r){e.call(n,t[r],r)}))}function H(t,e){for(var n=0,r=t.length;n<r;n++)t[n]=e;return t}function $(t,e){t.splice(0,t.length);for(var n=0,r=e.length;n<r;n++)t.push(e[n])}function K(t,e){for(var n="",r=0;r<e;r++)n+=t;return n}function Z(t){return 1!=t?"s":""}function Q(t,e){return-1!==t.indexOf(e,t.length-e.length)}function tt(t,e,n){return K(n=n||" ",e-(t=String(t)).length)+t}function et(t,e,n){return n=n||" ",(t=String(t))+K(n,e-t.length)}function nt(t){return it(at(t))}var rt=/^\s+/;function it(t){return t.replace(rt,"")}var ot=/\s+$/;function at(t){return t.replace(ot,"")}function st(t){for(var e="",n="-"==t[0]?1:0,r=t.indexOf("."),i=t.length,o=(-1==r?i:r)-3;o>n;)e=","+t.substring(o,i)+e,i=o,o-=3;return t.substring(0,i)+e}function ut(t,e){return e>=0?t.toFixed(e):String(t)}function ct(t,e,n,r){var i;return isNaN(t)?i=n||"-":(i=st(i=ut(t,e)),r&&parseFloat(i)>0&&(i="+"+i)),i}function lt(t){for(var e=[],n=1;n<arguments.length;n+=2)e.push(gt(arguments[n],arguments[n+1]));return t.sort((function(t,n){for(var r=0,i=0,o=e.length;i<o&&0===r;)r=e[i](t,n),i++;return r})),t}function ft(t,e){var n=yt(e);return Array.prototype.sort.call(t,n),t}function pt(t,e){var n=k(t.length);return ht(n,t,e),n}function ht(t,e,n){var r=yt(n);t.sort((function(t,n){var i=r(e[t],e[n]);return i>0||0===i&&t>n?1:-1}))}function dt(t,e){for(var n=e.length,r=[],i=0;i<n;i++){var o=e[i];(o<0||o>=n)&&re("Out-of-bounds array idx"),r[i]=t[o]}$(t,r)}function gt(t,e){var n=yt(e);return function(e,r){return n(e[t],r[t])}}function yt(t){return t=!1!==t,function(e,n){var r=0;return null==n?r=null==e?0:-1:null==e?r=1:e<n?r=t?-1:1:e>n?r=t?1:-1:e!=e?r=1:n!=n&&(r=-1),r}}function mt(t,e){return vt(t,0,t.length-1),!1===e&&Array.prototype.reverse.call(t),t}function vt(t,e,n){for(var r,i,o=e,a=n;o<n;){for(r=t[e+n>>1];o<=a;){for(;t[o]<r;)o++;for(;t[a]>r;)a--;o<=a&&(i=t[o],t[o]=t[a],t[a]=i,o++,a--)}e<a&&vt(t,e,a),e=o,a=n}}function _t(t,e){if(isNaN(e))return t.length;for(var n=1,r=0,i=t.length;r<i;r++)e>t[r]&&n++;return n}function bt(t,e){return xt(t,Math.ceil((1-e)*t.length))}function xt(t,e){(!t.length||e<1||e>t.length)&&re("[findValueByRank()] invalid input");for(var n,r,i,o,a=(e=p(0|e,1,t.length))-1,s=0,u=t.length-1;s<u;){i=t[a],n=s,r=u;do{for(;t[n]<i;)n++;for(;i<t[r];)r--;n<=r&&(o=t[n],t[n]=t[r],t[r]=o,n++,r--)}while(n<=r);r<a&&(s=n),a<n&&(u=r)}return t[a]}function wt(t){var e=t.length,n=Math.floor(e/2)+1,r=xt(t,n);return 0==(1&e)&&(r=(r+xt(t,n-1))/2),r}function Et(t){for(var e,n=0,r=NaN,i=0,o=t.length;i<o;i++)e=t[i],isNaN(e)||(r=1==++n?e:e/n+(n-1)/n*r);return r}function St(t){var e=Ct(t),n=e.apply(null,Array.prototype.slice.call(arguments,1));return n}function It(t,e){var n,r,i,o=e[1],a=e[2],s=e[3]?parseInt(e[3].substr(1)):void 0,u=e[4],c="s"==u,l="x"==u||"X"==u,f="d"==u||"i"==u,p=!c,h="",d=0,g=!1,y=!1;if(c?n=String(t):l?(n=t.toString(16),"X"==u&&(n=n.toUpperCase())):p&&("-"==(n=ut(t,f?0:s))[0]&&(y=!0,n=n.substr(1)),g=0==parseFloat(n),-1==o.indexOf("'")&&-1==o.indexOf(",")||(n=st(n)),g||(y?h="":-1!=o.indexOf("+")&&(h="+"))),a){var m=n.length+h.length,v=parseInt(a,10);m<v&&(d=v-m,i=K(r=-1==o.indexOf("0")?" ":"0",d))}return n=0==d?h+n:"0"==r?h+i+n:i+h+n}function Ct(t){for(var e,n=/%([\',+0]*)([1-9]?)((?:\.[1-9])?)([sdifxX%])/g,r=[],i=[],o=0,a="",s=n.exec(t);s;)e=t.substring(o,n.lastIndex-s[0].length),"%%"==s[0]?a+=e+"%":(r.push(a+e),a="",i.push(s)),o=n.lastIndex,s=n.exec(t);return r.push(a+t.substr(o)),function(){var e=r[0],n=arguments.length;n!=i.length&&re("[format()] Data does not match format string; format:",t,"data:",arguments);for(var o=0;o<n;o++)e+=It(arguments[o],i[o])+r[o+1];return e}}function Nt(t){var e=t.split("*").map((function(t){return E(t)})).join(".*");return new RegExp("^"+e+"$")}function At(t,e){return g(t)?s.allocUnsafe?s.allocUnsafe(t):new s(t):s.from&&s.allocUnsafe?s.from(t,e):new s(t,e)}function Ot(t,e){var n,r=0,i=e>=1?e:1.2;return function(e){return e>r&&(r=Math.ceil(e*i),n=t?new t(r):At(r)),n}}function Pt(t,e,n,r,i,o){t===n&&r>e&&re("copy error");var a=1,s=0;o&&(a=-1,s=i-1);for(var u=0;u<i;u++,s+=a)n[u+r]=t[e+s]}function Tt(t,e,n){var r=Math.max(t.length,e),i=n||t.length,o=new t.constructor(r);return Pt(t,0,o,0,i),o}function Mt(t,e){var n;return t&&e&&(n=Lt(t,e).replace(/[-_]$/,"")),n||""}function Lt(t,e){for(var n=0,r=t.length;n<r&&t[n]===e[n];n++);return t.substr(0,n)}function Rt(t){return 0===t||!!t&&t.constructor==Number&&t!==1/0&&t!==-1/0}function Dt(t){return 0===t||t>0&&t.constructor==Number}function Ft(t){var e,n=String(t);return(e=n.indexOf("%")>0?Number(n.replace("%",""))/100:Number(n))>=0&&e<=1||ie(St("Invalid percentage: %s",n)),e}function kt(t,e){var n=String(e);return/[0-9]$/.test(t)&&(n="-"+n),t+n}function jt(t,e){var n=q(t),r=e||kt,i=[];return t.forEach((function(t){for(var e,o=0,a=t;i.indexOf(a)>-1||a==t&&n[a]>1||a!=t&&n[a]>0;){if(o++,!(e=r(t,o))||e==a)throw new Error("Naming error");a=e}i.push(a)})),i}function Bt(t){return t.indexOf(",")>0?t.replace(/,([0-9]{3})/g,"$1"):t}function Gt(t){return t||""}function Ut(t){var e=String(t).trim(),n=e?Number(Bt(e)):NaN;return isNaN(n)?null:n}function zt(t){var e,n,r=t.length;return r>=2&&(e=t.charAt(0),n=t.charAt(r-1),'"'==e&&'"'==n||"'"==e&&"'"==n)?t.substr(1,r-2):t}var qt={DEBUG:!1,QUIET:!1,VERBOSE:!1,defs:{},input_files:[]};function Vt(){return"undefined"!=typeof window&&void 0!==window.document}function Yt(t){return qt[t]}function Xt(t,e){qt[t]=e}function Jt(t){return qt={DEBUG:!1,QUIET:!1,VERBOSE:!1,defs:{},input_files:[]},function(){t.apply(null,a.toArray(arguments)),qt={DEBUG:!1,QUIET:!1,VERBOSE:!1,defs:{},input_files:[]}}}function Wt(t){var e=qt;return function(){qt=e,t.apply(null,a.toArray(arguments))}}var Ht=Object.freeze({__proto__:null,runningInBrowser:Vt,getStateVar:Yt,setStateVar:Xt,createAsyncContext:Jt,preserveContext:Wt}),$t=!1,Kt=!1,Zt=function(){var t=a.toArray(arguments).join(" ");throw new Error(t)},Qt=function(){throw new le(pe(arguments))},te=function(){de(arguments)};function ee(){$t=!0}function ne(){return!!$t}function re(){Zt.apply(null,a.toArray(arguments))}function ie(){Qt.apply(null,a.toArray(arguments))}function oe(){te.apply(null,he(arguments))}function ae(){Kt=!0,oe.apply(null,arguments),Kt=!1}function se(){Yt("VERBOSE")&&oe.apply(null,arguments)}function ue(){Yt("DEBUG")&&de(arguments)}function ce(t){var e;$t&&(a.isString(t)&&(t=new le(t)),"UserError"==t.name?(e=t.message,/Error/.test(e)||(e="Error: "+e),console.error(he([e]).join(" ")),console.error("Run mapshaper -h to view help")):console.error(t))}function le(t){var e=new Error(t);return e.name="UserError",e}function fe(t){var e=t.reduce((function(t,e){return Math.max(t,e.length)}),0)+2,n=Math.floor(80/e)||1;return t.reduce((function(t,r,i){var o=i%n;return i>0&&0===o&&(t+="\n"),o<n-1&&(r=a.rpad(r,e-2," ")),t+"  "+r}),"")}function pe(t){return a.toArray(t).join(" ")}function he(t){var e=a.toArray(t),n=Yt("current_command");return n&&"help"!=n&&e.unshift("["+n+"]"),e}function de(t){$t&&!Yt("QUIET")&&a.isArrayLike(t)&&(!Kt&&console.error||console.log).call(console,pe(t))}var ge=Object.freeze({__proto__:null,enableLogging:ee,loggingEnabled:ne,error:re,stop:ie,message:oe,setLoggingFunctions:function(t,e,n){te=t,Zt=e,Qt=n},print:ae,verbose:se,debug:ue,printError:ce,UserError:le,formatStringsAsGrid:fe,formatLogArgs:pe,logArgs:de});function ye(){this.mx=this.my=1,this.bx=this.by=0}function me(){arguments.length>0&&this.setBounds.apply(this,arguments)}function ve(t){var e=new me;return be(t,(function(t){e.mergePoint(t[0],t[1])})),e}function _e(t,e){var n,r=t?t.length:0;e||(e=new me);for(var i=0;i<r;i++)n=t[i],e.mergePoint(n[0],n[1]);return e}function be(t,e){var n,r,i,o,a;for(n=0,r=t.length;n<r;n++)for(i=0,o=(a=t[n])?a.length:0;i<o;i++)e(a[i],n)}ye.prototype.isNull=function(){return!this.mx||!this.my||isNaN(this.bx)||isNaN(this.by)},ye.prototype.invert=function(){var t=new ye;return t.mx=1/this.mx,t.my=1/this.my,t.bx=-this.bx/this.mx,t.by=-this.by/this.my,t},ye.prototype.transform=function(t,e,n){return(n=n||[])[0]=t*this.mx+this.bx,n[1]=e*this.my+this.by,n},ye.prototype.toString=function(){return JSON.stringify(Object.assign({},this))},me.prototype.toString=function(){return JSON.stringify({xmin:this.xmin,xmax:this.xmax,ymin:this.ymin,ymax:this.ymax})},me.prototype.toArray=function(){return this.hasBounds()?[this.xmin,this.ymin,this.xmax,this.ymax]:[]},me.prototype.hasBounds=function(){return this.xmin<=this.xmax&&this.ymin<=this.ymax},me.prototype.sameBounds=me.prototype.equals=function(t){return t&&this.xmin===t.xmin&&this.xmax===t.xmax&&this.ymin===t.ymin&&this.ymax===t.ymax},me.prototype.width=function(){return this.xmax-this.xmin||0},me.prototype.height=function(){return this.ymax-this.ymin||0},me.prototype.area=function(){return this.width()*this.height()||0},me.prototype.empty=function(){return this.xmin=this.ymin=this.xmax=this.ymax=void 0,this},me.prototype.setBounds=function(t,e,n,r){return 1==arguments.length&&(a.isArrayLike(t)?(e=t[1],n=t[2],r=t[3],t=t[0]):(e=t.ymin,n=t.xmax,r=t.ymax,t=t.xmin)),this.xmin=t,this.ymin=e,this.xmax=n,this.ymax=r,(t>n||e>r)&&this.update(),this},me.prototype.centerX=function(){return.5*(this.xmin+this.xmax)},me.prototype.centerY=function(){return.5*(this.ymax+this.ymin)},me.prototype.containsPoint=function(t,e){return t>=this.xmin&&t<=this.xmax&&e<=this.ymax&&e>=this.ymin},me.prototype.containsBufferedPoint=me.prototype.containsCircle=function(t,e,n){return t+n>this.xmin&&t-n<this.xmax&&e-n<this.ymax&&e+n>this.ymin},me.prototype.intersects=function(t){return t.xmin<=this.xmax&&t.xmax>=this.xmin&&t.ymax>=this.ymin&&t.ymin<=this.ymax},me.prototype.contains=function(t){return t.xmin>=this.xmin&&t.ymax<=this.ymax&&t.xmax<=this.xmax&&t.ymin>=this.ymin},me.prototype.shift=function(t,e){this.setBounds(this.xmin+t,this.ymin+e,this.xmax+t,this.ymax+e)},me.prototype.padBounds=function(t,e,n,r){this.xmin-=t,this.ymin-=e,this.xmax+=n,this.ymax+=r},me.prototype.scale=function(t,e){var n=.5*(this.xmax-this.xmin),r=.5*(this.ymax-this.ymin),i=t-1,o=void 0===e?i:e-1;this.xmin-=n*i,this.ymin-=r*o,this.xmax+=n*i,this.ymax+=r*o},me.prototype.cloneBounds=me.prototype.clone=function(){return new me(this.xmin,this.ymin,this.xmax,this.ymax)},me.prototype.clearBounds=function(){this.setBounds(new me)},me.prototype.mergePoint=function(t,e){void 0===this.xmin?this.setBounds(t,e,t,e):(t<this.xmin?this.xmin=t:t>this.xmax&&(this.xmax=t),e<this.ymin?this.ymin=e:e>this.ymax&&(this.ymax=e))},me.prototype.fillOut=function(t,e,n){arguments.length<3&&(e=.5,n=.5);var r,i=this.width(),o=this.height(),a=i/o;return isNaN(t)||t<=0||(a<t?(r=o*t-i,this.xmin-=(1-e)*r,this.xmax+=e*r):(r=i/t-o,this.ymin-=(1-n)*r,this.ymax+=n*r)),this},me.prototype.update=function(){var t;this.xmin>this.xmax&&(t=this.xmin,this.xmin=this.xmax,this.xmax=t),this.ymin>this.ymax&&(t=this.ymin,this.ymin=this.ymax,this.ymax=t)},me.prototype.transform=function(t){return this.xmin=this.xmin*t.mx+t.bx,this.xmax=this.xmax*t.mx+t.bx,this.ymin=this.ymin*t.my+t.by,this.ymax=this.ymax*t.my+t.by,this.update(),this},me.prototype.getTransform=function(t,e){var n=new ye;return n.mx=t.width()/this.width()||1,n.bx=t.xmin-n.mx*this.xmin,e?(n.my=-t.height()/this.height()||1,n.by=t.ymax-n.my*this.ymin):(n.my=t.height()/this.height()||1,n.by=t.ymin-n.my*this.ymin),n},me.prototype.mergeCircle=function(t,e,n){n<0&&(n=-n),this.mergeBounds([t-n,e-n,t+n,e+n])},me.prototype.mergeBounds=function(t){var e,n,r,i;return t instanceof me?(e=t.xmin,n=t.ymin,r=t.xmax,i=t.ymax):4==arguments.length?(e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3]):4==t.length?(e=t[0],n=t[1],r=t[2],i=t[3]):re("Bounds#mergeBounds() invalid argument:",t),void 0===this.xmin?this.setBounds(e,n,r,i):(e<this.xmin&&(this.xmin=e),n<this.ymin&&(this.ymin=n),r>this.xmax&&(this.xmax=r),i>this.ymax&&(this.ymax=i)),this};var xe=Object.freeze({__proto__:null,countPointsInLayer:function(t){var e=0;return xr(t)&&be(t.shapes,(function(){e++})),e},getPointBounds:ve,getPointFeatureBounds:_e,forEachPoint:be});function we(t){return t>=0?t:~t}function Ee(t,e,n,r){var i,o,a,s,u,c,l=0|n,f=isNaN(r)?t.length-l:r+l;for(f>0&&(a=u=t[l],s=c=e[l]),l++;l<f;l++)(i=t[l])<a&&(a=i),i>u&&(u=i),(o=e[l])<s&&(s=o),o>c&&(c=o);return[a,s,u,c]}var Se=6378137,Ie=Math.PI/180;function Ce(t,e,n,r,i,o){var a=t-r,s=e-i,u=n-o;return Math.sqrt(a*a+s*s+u*u)}function Ne(t,e,n,r){var i=t-n,o=e-r;return i*i+o*o}function Ae(t,e,n,r){var i=t-n,o=e-r;return Math.sqrt(i*i+o*o)}function Oe(t,e,n,r,i,o){var a=t-r,s=e-i,u=n-o;return a*a+s*s+u*u}function Pe(t){for(var e=2*Math.PI;t<0;)t+=e;for(;t>=e;)t-=e;return t}function Te(t,e,n,r){var i=Math.PI/180;t*=i,n*=i,e*=i,r*=i;var o=Math.sin(n-t)*Math.cos(r),a=Math.cos(e)*Math.sin(r)-Math.sin(e)*Math.cos(r)*Math.cos(n-t);return Math.atan2(o,a)}function Me(t,e,n){var r;t*=Ie,e*=Ie,r=Math.cos(e),n[0]=Math.cos(t)*r*Se,n[1]=Math.sin(t)*r*Se,n[2]=Math.sin(e)*Se}function Le(t,e,n,r){var i=n-t,o=r-e,a=Math.sin(o/2)*Math.sin(o/2)+Math.cos(e)*Math.cos(r)*Math.sin(i/2)*Math.sin(i/2);return 2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function Re(t,e,n,r){var i=Math.PI/180;return Le(t*i,e*i,n*i,r*i)*Se}function De(t,e,n,r,i,o){var a=t*r-t*o+n*o-n*e+i*e-i*r;return a*a}function Fe(t,e,n){var r;if(0===n)r=t;else if(t>=e+n)r=e;else if(e>=t+n)r=t;else{var i=t+n-e;r=t-i*i/n*.25}return r<0&&(r=0),r}function ke(t,e,n,r,i,o){var a=Ne(n,r,i,o),s=((t-n)*(i-n)+(e-r)*(o-r))/a;return 0===a?Ne(t,e,n,r):(s<0&&(s=0),s>1&&(s=1),Ne(t,e,n+s*(i-n),r+s*(o-r)))}var je,Be=Object.freeze({__proto__:null,R:Se,D2R:Ie,degreesToMeters:function(t){return t*Ie*Se},distance3D:Ce,distanceSq:Ne,distance2D:Ae,distanceSq3D:Oe,innerAngle2:function(t,e,n,r,i,o){var a=Math.atan2(e-r,t-n),s=Math.atan2(o-r,i-n),u=Math.abs(a-s);return u>Math.PI&&(u=2*Math.PI-u),u},standardAngle:Pe,signedAngle:function(t,e,n,r,i,o){if(t==n&&e==r||n==i&&r==o)return NaN;var a=t-n,s=e-r,u=i-n,c=o-r,l=a*u+s*c,f=a*c-s*u;return Pe(Math.atan2(f,l))},bearing2D:function(t,e,n,r){var i=Math.PI/2-Math.atan2(r-e,n-t);return i>Math.PI?i-2*Math.PI:i},bearing:Te,signedAngleSph:function(t,e,n,r,i,o){if(t==n&&e==r||n==i&&r==o)return NaN;var a=Te(n,r,t,e),s=Te(n,r,i,o);return Pe(2*Math.PI+a-s)},convLngLatToSph:function(t,e,n,r,i){for(var o=[],a=0,s=t.length;a<s;a++)Me(t[a],e[a],o),n[a]=o[0],r[a]=o[1],i[a]=o[2]},xyzToLngLat:function(t,e,n,r){var i=Ce(0,0,0,t,e,n),o=Math.asin(n/i)/Ie,a=Math.atan2(e/i,t/i)/Ie;r[0]=a,r[1]=o},lngLatToXYZ:Me,sphericalDistance:Le,greatCircleDistance:Re,innerAngle:function(t,e,n,r,i,o){var a,s=Ae(t,e,n,r),u=Ae(n,r,i,o);return 0===s||0===u||(a=((t-n)*(i-n)+(e-r)*(o-r))/(s*u))>=1-1e-14?0:a<=1e-14-1?Math.PI:Math.acos(a)},innerAngle3D:function(t,e,n,r,i,o,a,s,u){var c,l=Ce(t,e,n,r,i,o),f=Ce(r,i,o,a,s,u);return 0===l||0===f||(c=((t-r)*(a-r)+(e-i)*(s-i)+(n-o)*(u-o))/(l*f))>=1?0:c<=-1?Math.PI:Math.acos(c)},triangleArea:function(t,e,n,r,i,o){return Math.abs(((e-o)*(n-i)+(r-o)*(i-t))/2)},cosine:function(t,e,n,r,i,o){var a=Ae(t,e,n,r)*Ae(n,r,i,o),s=0;return a>0&&((s=((t-n)*(i-n)+(e-r)*(o-r))/a)>1?s=1:s<-1&&(s=-1)),s},cosine3D:function(t,e,n,r,i,o,a,s,u){var c=Ce(t,e,n,r,i,o)*Ce(r,i,o,a,s,u),l=0;return c>0&&((l=((t-r)*(a-r)+(e-i)*(s-i)+(n-o)*(u-o))/c)>1?l=1:l<-1&&(l=-1)),l},triangleArea3D:function(t,e,n,r,i,o,a,s,u){return.5*Math.sqrt(De(t,e,r,i,a,s)+De(t,n,r,o,a,u)+De(e,n,i,o,s,u))},pointSegDistSq:function(t,e,n,r,i,o){return Fe(Ne(t,e,n,r),Ne(t,e,i,o),Ne(n,r,i,o))},pointSegDistSq3D:function(t,e,n,r,i,o,a,s,u){return Fe(Oe(t,e,n,r,i,o),Oe(t,e,n,a,s,u),Oe(r,i,o,a,s,u))},pointSegDistSq2:ke,containsBounds:function(t,e){return t[0]<=e[0]&&t[2]>=e[2]&&t[1]<=e[1]&&t[3]>=e[3]}});function Ge(t,e,n,r){return Ue(t,e,n,r).distance}function Ue(t,e,n,r){var i,o,a,s,u,c,l,f,p,h=r.getShapeIter(n),d=1/0;for(h.hasNext()&&(i=u=l=h.x,o=c=f=h.y);h.hasNext();)(p=ke(t,e,i,o,a=h.x,s=h.y))<d&&(d=p,u=i,c=o,l=a,f=s),i=a,o=s;return d==1/0?{distance:1/0}:{segment:[[u,c],[l,f]],distance:Math.sqrt(d)}}function ze(t,e){var n=e.getShapeIter(t);if(!n.hasNext())return null;for(var r=n.x,i=n.y,o=0,a=0,s=0;n.hasNext();)o++,a+=n.x,s+=n.y;return 0!==o&&n.x===r&&n.y===i||(a+=r,s+=i,o++),{x:a/o,y:s/o}}function qe(t,e){var n=0;return(t||[]).reduce((function(t,r){var i=e.getSimpleShapeBounds(r).area();return i>n&&(n=i,t=r),t}),null)}je=function(){var t,e;function n(n,r,i,o){t+=e(i[n],o[n],i[r],o[r])}return function(r,i,o){o&&i.isPlanar()&&re("Expected lat-long coordinates"),e=o?Re:Ae,t=0;for(var a=0,s=r.length;a<s;a++)i.forEachArcSegment(r[a],n);return t}}();var Ve=Object.freeze({__proto__:null,pathIsClosed:function(t,e){var n=t[0],r=t[t.length-1],i=e.getVertex(n,0),o=e.getVertex(r,-1);return i.x===o.x&&i.y===o.y},getPointToPathDistance:Ge,getPointToPathInfo:Ue,getPointToShapeDistance:function(t,e,n,r){return(n||[]).reduce((function(n,i){var o=Ge(t,e,i,r);return Math.min(n,o)}),1/0)},getAvgPathXY:ze,getMaxPath:qe,countVerticesInPath:function(t,e){for(var n=e.getShapeIter(t),r=0;n.hasNext();)r++;return r},getPathBounds:function(t){for(var e=new me,n=0,r=t.length;n<r;n++)e.mergePoint(t[n][0],t[n][1]);return e},get calcPathLen(){return je}});function Ye(t,e){var n,r,i,o,a,s,u,c,l=e.getShapeIter(t),f=0,p=0,h=0;if(!l.hasNext())return null;for(i=0,o=0,n=-l.x,r=-l.y;l.hasNext();)a=i,s=o,i=l.x+n,f+=u=a*(o=l.y+r)-s*i,p+=u*(a+i),h+=u*(s+o);return 0===(c=f/2)?ze(t,e):{x:p/(6*c)-n,y:h/(6*c)-r}}var Xe=Object.freeze({__proto__:null,getShapeCentroid:function(t,e){var n=qe(t,e);return n?Ye(n,e):null},getPathCentroid:Ye});function Je(t,e,n,r){var i=!1,o=!1;return Nn(n,r,(function(n,r,a,s){var u=We(t,e,a[n],s[n],a[r],s[r]);1==u?i=!i:isNaN(u)&&(o=!0)})),o?-1:i?1:0}function We(t,e,n,r,i,o){var a=He(t,e,n,r,i,o);return a!=a?NaN:a==-1/0?0:1}function He(t,e,n,r,i,o){var a,s=-1/0;return t<n&&t<i||t>n&&t>i||e>r&&e>o||(t===n||t===i?t===n&&t===i?e!=r&&e!=o&&e>r==e>o||(s=NaN):t===n?e===r?s=NaN:i<n&&e<r&&(s=r):e===o?s=NaN:n<i&&e<o&&(s=o):(a=function(t,e,n,r,i){return n+(t-e)*(i-n)/(r-e)}(t,n,r,i,o))>e?s=a:a==e&&(s=NaN)),s}function $e(t,e){return(e.isPlanar()?Ze:Ke)(t,e)}function Ke(t,e){for(var n,r,i,o,a=e.getShapeIter(t),s=0,u=!1,c=Math.PI/180;a.hasNext();)n=a.x*c,r=Math.sin(a.y*c),u?s+=(n-i)*(2+r+o):u=!0,i=n,o=r;return s/2*6378137*6378137}function Ze(t,e){var n,r,i,o,a,s,u=e.getShapeIter(t),c=0;if(u.hasNext())for(n=0,r=0,a=-u.x,s=-u.y;u.hasNext();)i=n,o=r,c+=(n=u.x+a)*o-i*(r=u.y+s);return c/2}function Qe(t,e){return(e.isPlanar()?tn:en)(t,e)}function tn(t,e){return je(t,e,!1)}function en(t,e){return je(t,e,!0)}var nn=Object.freeze({__proto__:null,calcPolsbyPopperCompactness:function(t,e){return e<=0?0:Math.abs(t)*Math.PI*4/(e*e)},calcSchwartzbergCompactness:function(t,e){return e<=0?0:2*Math.PI*Math.sqrt(Math.abs(t)/Math.PI)/e},getPathWinding:function(t,e){var n=$e(t,e);return(n>0?1:n<0&&-1)||0},getShapeArea:function(t,e){return(t||[]).reduce((function(t,n){return t+$e(n,e)}),0)},getPlanarShapeArea:function(t,e){return(t||[]).reduce((function(t,n){return t+Ze(n,e)}),0)},getSphericalShapeArea:function(t,e){return e.isPlanar()&&re("[getSphericalShapeArea()] Function requires decimal degree coordinates"),(t||[]).reduce((function(t,n){return t+Ke(n,e)}),0)},testPointInPolygon:function(t,e,n,r){var i=!1,o=!1;return n&&n.forEach((function(n){var a=Je(t,e,n,r);1==a?i=!i:-1==a&&(o=!0)})),o||i},testPointInRing:Je,testRayIntersection:We,getRayIntersection:He,getPathArea:$e,getSphericalPathArea:Ke,getPlanarPathArea2:function(t){for(var e,n,r,i,o,a,s,u=0,c=0,l=t.length;c<l;c++)s=t[c],0===c?(e=0,n=0,o=-s[0],a=-s[1]):u+=(e=s[0]+o)*i-r*(n=s[1]+a),r=e,i=n;return u/2},getPlanarPathArea:Ze,getPathPerimeter:Qe,getShapePerimeter:function(t,e){return(t||[]).reduce((function(t,n){return t+Qe(n,e)}),0)},getSphericalShapePerimeter:function(t,e){return e.isPlanar()&&re("[getSphericalShapePerimeter()] Function requires decimal degree coordinates"),(t||[]).reduce((function(t,n){return t+en(n,e)}),0)},getPlanarPathPerimeter:tn,getSphericalPathPerimeter:en});function rn(t){return 1e-14*Math.max.apply(null,t.map(Math.abs))}function on(t,e){var n=mn(t),r=.0025*n;e>0&&(r=e,oe(a.format("Applying snapping threshold of %s -- %.6f times avg. segment length",e,e/n)));var i=an(t,r);i>0&&t.dedupCoords(),oe(a.format("Snapped %s point%s",i,a.pluralSuffix(i)))}function an(t,e){var n,r=0,i=t.getVertexData();if(e>0)for(var o=0,a=(n=sn(i.xx)).length;o<a;o++)r+=s(o,e,n,i.xx,i.yy);return r;function s(t,e,n,r,i){for(var o,a,s,u=t,c=n.length,l=r[n[t]],f=i[n[t]],p=0;++u<c&&!((a=r[o=n[u]]-l)>e);)s=i[o]-f,0===a&&0===s||a*a+s*s>e*e||(r[o]=l,i[o]=f,p++);return p}}function sn(t){for(var e=t.length,n=new Uint32Array(e),r=0;r<e;r++)n[r]=r;return function t(e,n,r,i){if(i-r>24){for(var o,a=e[n[r+i>>1]],s=r,u=i;s<=u;){for(;e[n[s]]<a;)s++;for(;e[n[u]]>a;)u--;s<=u&&(o=n[s],n[s]=n[u],n[u]=o,s++,u--)}u>r&&t(e,n,r,u),s<i&&t(e,n,s,i)}else!function(t,e,n,r){var i,o,a;for(a=n+1;a<=r;a++){for(i=e[a],o=a-1;o>=n&&t[i]<t[e[o]];o--)e[o+1]=e[o];e[o+1]=i}}(e,n,r,i)}(t,n,0,n.length-1),n}var un=Object.freeze({__proto__:null,getHighPrecisionSnapInterval:rn,snapCoords:on,snapCoordsByInterval:an,sortCoordinateIds:sn});function cn(t,e,n,r,i,o,a,s){if(!(ke(n,r,i,o,a,s)>e)){var u=Ne(i,o,n,r),c=Ne(a,s,n,r);u<=e||c<=e||t.push(n,r)}}function ln(t,e,n,r,i,o){var a=Ae(n,r,i,o);return a<e&&(e=a,t[0]=i,t[1]=o),e}function fn(t,e,n){var r;return function(t,e,n){return e<n?t<e||t>n:e>n?t>e||t<n:t!=e}(t,e,n)&&(r=Math.abs(t-e)<Math.abs(t-n)?e:n,Math.abs(t-r)>1e-15&&ue("[clampToCloseRange()] large clamping interval",t,e,n),t=r),t}function pn(t,e,n,r){return t*r-e*n}function hn(t,e,n,r,i,o){return pn(t-i,e-o,n-i,r-o)}function dn(t,e,n,r,i,o,a,s){return hn(t,e,n,r,i,o)*hn(t,e,n,r,a,s)<=0&&hn(i,o,a,s,t,e)*hn(i,o,a,s,n,r)<=0}var gn=Object.freeze({__proto__:null,segmentIntersection:function(t,e,n,r,i,o,a,s,u){var c,l,f=u>=0?u:rn([t,e,n,r,i,o,a,s]),p=f*f;return!(c=function(t,e,n,r,i,o,a,s,u){var c=[];if(cn(c,t,e,n,o,a,s,u),cn(c,t,r,i,o,a,s,u),cn(c,t,o,a,e,n,r,i),cn(c,t,s,u,e,n,r,i),0===c.length)return null;c.length>4&&ue("Intersection detection error");return c}(p,t,e,n,r,i,o,a,s))&&function(t,e,n,r,i,o,a,s,u){return Ne(e,n,o,a)<=t||Ne(e,n,s,u)<=t||Ne(r,i,o,a)<=t||Ne(r,i,s,u)<=t}(p,t,e,n,r,i,o,a,s)?null:(l=function(t,e,n,r,i,o,a,s,u){if(!dn(t,e,n,r,i,o,a,s))return null;var c=pn(n-t,r-e,a-i,s-o),l=hn(i,o,a,s,t,e)/c,f=[t+l*(n-t),e+l*(r-e)];if(Math.abs(c)<1e-18)return null;u>0&&function(t,e,n,r,i,o,a,s,u,c){var l=t[0],f=t[1],p=c;p=ln(t,p,l,f,e,n),p=ln(t,p,l,f,r,i),p=ln(t,p,l,f,o,a),p=ln(t,p,l,f,s,u)}(f,t,e,n,r,i,o,a,s,u);return function(t,e,n,r,i,o,a,s,u){var c=t[0],l=t[1];c=fn(c,e,r),c=fn(c,o,s),l=fn(l,n,i),l=fn(l,a,u),t[0]=c,t[1]=l}(f,t,e,n,r,i,o,a,s),f}(t,e,n,r,i,o,a,s,f),c||l||null)},findClosestPointOnSeg:function(t,e,n,r,i,o){var a=i-n,s=o-r,u=a*a+s*s,c=0===u?-1:((t-n)*a+(e-r)*s)/u;return c<=.1?[n,r]:c>=.9?[i,o]:[n+c*a,r+c*s]},orient2D:hn,segmentHit:dn}),yn=Object.assign({},Be,nn,Ve,gn,Xe);function mn(t){var e=0,n=t.forEachSegment((function(t,n,r,i){var o=r[t]-r[n],a=i[t]-i[n];e+=Math.sqrt(o*o+a*a)}));return e/n||0}function vn(t){var e=0,n=0,r=t.forEachSegment((function(t,r,i,o){e+=Math.abs(i[t]-i[r]),n+=Math.abs(o[t]-o[r])}));return[e/r||0,n/r||0]}function _n(t,e){var n=new Uint8Array(e.size());return bn(t,n),function(t){return t<0&&(t=~t),n[t]>0}}function bn(t,e){An(t,null,(function(t){for(var n,r=t.arcs,i=0;i<r.length;i++)(n=r[i])<0&&(n=~n),e[n]++}))}function xn(t,e){var n=new me;return In(t,(function(t){e.mergeArcBounds(t,n)})),n}function wn(t){t.reverse();for(var e=0,n=t.length;e<n;e++)t[e]=~t[e];return t}function En(t,e){return e<=0?t=1/0:e>=1&&(t=0),t}function Sn(t,e,n,r){var i,o,a=0,s=-1;n>r&&(i=n,n=r,r=i);for(var u=n+1;u<r;u++)(o=t[u])<e&&o>a&&(s=u,a=o);return s}function In(t,e){for(var n,r=0;r<t.length;r++)if((n=t[r])instanceof Array)In(n,e);else if(a.isInteger(n)){var i=e(n);void 0!==i&&(t[r]=i)}else n&&re("Non-integer arc id in:",t)}function Cn(t,e,n){for(var r=0,i=t?t.length:0;r<i;r++)Nn(t[r],e,n)}function Nn(t,e,n){for(var r=0,i=t.length;r<i;r++)e.forEachArcSegment(t[r],n)}function An(t,e,n,r){var i=0;t.forEach((function(t,o){if(t&&0!==t.length){var a,s;r&&r(o);for(var u=0,c=t.length;u<c;u++)if(a=t[u],n&&n({i:u,shapeId:o,shape:t,arcs:a}),e)for(var l=0,f=a.length;l<f;l++,i++)s=a[l],e({i:l,shapeId:o,partId:u,arcId:s,segId:i})}}))}function On(t,e){var n,r,i=e.getArcIter(t);if(i.hasNext())for(n=i.x,r=i.y;i.hasNext();)if(i.x!=n||i.y!=r)return!0;return!1}function Pn(t,e){if(!t)return null;var n=[];return t.forEach((function(t){for(var r=[],i=0;i<t.length;i++)On(t[i],e)&&r.push(t[i]);r.length>0&&n.push(r)})),n.length>0?n:null}function Tn(t,e,n){for(var r,i=[],o=0,a=t&&t.length;o<a;o++)r=t[o],i.push({ids:r,area:"polygon"==n?yn.getPlanarPathArea(r,e):0,bounds:e.getSimpleShapeBounds(r)});return i}var Mn=Object.freeze({__proto__:null,getAvgSegment:mn,getAvgSegment2:vn,getDirectedArcPresenceTest:function(t,e){var n=new Uint8Array(e);return In(t,(function(t){var r=we(t);r<e==!1&&re("index error"),n[r]|=t<0?2:1})),function(t){var e=we(t);return t<0?2==(2&n[e]):1==(1&n[e])}},getArcPresenceTest:_n,countArcsInShapes:bn,getPathBounds:xn,findShapesByArcId:function(t,e,n){var r=n?new Uint8Array(n):[],i=[];return e.forEach((function(t){r[we(t)]=1})),t.forEach((function(t,e){var n=!1;In(t||[],(function(t){n=n||1==r[we(t)]})),n&&i.push(e)})),i},reversePath:wn,clampIntervalByPct:En,findNextRemovableVertex:Sn,forEachArcId:In,forEachSegmentInShape:Cn,forEachSegmentInPath:Nn,traversePaths:An,filterEmptyArcs:Pn,getPathMetadata:Tn,quantizeArcs:function(t,e){var n=t.getBounds(),r=new me(0,0,e-1,e-1),i=n.getTransform(r),o=i.invert();t.transformPoints((function(t,e){var n=i.transform(t,e);return o.transform(Math.round(n[0]),Math.round(n[1]))}))}});function Ln(t){return t?t.map((function(t){return t.concat()})):null}function Rn(t){return a.isArray(t)?t.map(Ln):null}function Dn(t,e){kn(t,e)}function Fn(t,e){for(var n=0,r=t.length;n<r;n++)t[n]=kn(t[n],e)}function kn(t,e){if(!t)return null;a.isArray(t)||re("Expected an array, received:",t);for(var n,r=0,i=t.length,o=0;o<i;o++)null===(n=e(t[o],o,t))?(r++,t[o]=null):a.isArray(n)&&(t[o]=n);return r==i?null:r>0?t.filter((function(t){return!!t})):t}function jn(t){for(var e,n=0,r=0,i=t.length;r<i;r++)(e=t[r])&&e.length>n&&(n=e.length);return n}var Bn=Object.freeze({__proto__:null,cloneShape:Ln,cloneShapes:Rn,forEachShapePart:Dn,editShapes:Fn,editShapeParts:kn,findMaxPartCount:jn}),Gn=n(256),Un=function(t){var e=null;if("utf8"!=(t=Wn(t)))return null;"undefined"!=typeof TextEncoder&&(e=new TextEncoder(t));return function(n){return e?s.from(e.encode(n).buffer):a.createBuffer(n,t)}}("utf8"),zn=function(t){var e=null;if("utf8"!=(t=Wn(t)))return null;"undefined"!=typeof TextDecoder&&(e=new TextDecoder(t));return function(n){return e?e.decode(n):n.toString(t)}}("utf8");function qn(){return Gn.encodingExists("ascii"),Object.keys(Gn.encodings)}function Vn(t){return Zn(t)||ie("Unknown encoding:",t,"\nRun the -encodings command see a list of supported encodings"),t}function Yn(t){for(var e=0,n=t.length;e<n;e++)if(t.charCodeAt(e)>=128)return!1;return!0}function Xn(t){return!t||/^utf-?8$/i.test(String(t))}function Jn(t){return!(t=Wn(t))||/^(win|latin|utf8|ascii|iso88|gb)/.test(t)}function Wn(t){return(t||"").toLowerCase().replace(/[_-]/g,"")}function Hn(t,e,n,r){return n>=0&&(t=t.slice(n,r)),Kn(t,e)}function $n(t,e){return Xn(e)?Un(t):Gn.encode(t,e)}function Kn(t,e){return Xn(e)?zn(t):Gn.decode(t,e)}function Zn(t){var e=Wn(t);return qn().includes(e)}function Qn(t){return 65279==t.charCodeAt(0)&&(t=t.substr(1)),t}function tr(){var t=qn().filter((function(t){return!/^(_|cs|internal|ibm|isoir|singlebyte|table|[0-9]|l[0-9]|windows)/.test(t)}));t.sort(),ae("Supported encodings:\n"+fe(t))}var er=Object.freeze({__proto__:null,getEncodings:qn,validateEncoding:Vn,stringsAreAscii:function(t){return Yn(t.join(""))},stringIsAscii:Yn,encodingIsUtf8:Xn,encodingIsAsciiCompat:Jn,standardizeEncodingName:Wn,bufferToString:Hn,encodeString:$n,decodeString:Kn,encodingIsSupported:Zn,trimBOM:Qn,printEncodings:tr});function nr(t){var e,n,r={};if(!t)return null;for(e in t)t.hasOwnProperty(e)&&((n=t[e])==t&&delete(n=a.extend({},n))[e],r[e]=n&&n.constructor===Object?nr(n):n);return r}function rr(t){var e=null;return a.isString(t)?e="string":a.isNumber(t)?e="number":a.isBoolean(t)?e="boolean":a.isDate(t)?e="date":a.isObject(t)&&(e="object"),e}function ir(t){!function(t,e){var n,r,i,o;for(r=0;r<t.length;r++)for(n=t[r]||(t[r]={}),i=0;i<e.length;i++)(o=e[i])in n==!1&&(n[o]=void 0)}(t,function(t){var e,n,r,i={};for(e=0;e<t.length;e++)for(r=Object.keys(t[e]||{}),n=0;n<r.length;n++)i[r[n]]=1+(0|i[r[n]]);return Object.keys(i).filter((function(e){return i[e]<t.length}))}(t))}function or(t,e){return t.indexOf("*")>-1||0===a.difference(e,t).length}function ar(t,e){for(var n,r=null,i=0,o=e.length;i<o&&!(r=(n=e[i])?rr(n[t]):null);i++);return r}function sr(t,e){t.getFields().forEach((function(n){e(n)&&t.deleteField(n)}))}function ur(t){return/^\s*$/.test(t)}function cr(t,e,n){var r={};return t.map((function(i){var o,s=0;do{o=n&&"ascii"!=n?pr(i,e,s,n):fr(i,e,s),s++}while(o in r||i!=o&&a.contains(t,o));return r[o]=!0,o}))}function lr(t,e){var n={},r=[];return t.forEach((function(t){var i=t[e];i in n==!1&&(n[i]=!0,r.push(i))})),r}function fr(t,e,n){var r,i;return e=e||256,n?(1==(i=String(n)).length&&(i="_"+i),r=t.substr(0,e-i.length)+i):r=t.substr(0,e),r}function pr(t,e,n,r){var i=t+(n?String(n):"");return $n(i,r).length>(e||256)?pr(t=t.substr(0,t.length-1),e,n,r):i}function hr(t,e){return"ascending"==e&&t.sort((function(t,e){return t.toLowerCase()<e.toLowerCase()?-1:1})),t}function dr(t,e){var n=t[0];return hr(n?Object.keys(n):[],e)}var gr=Object.freeze({__proto__:null,copyRecord:nr,getValueType:rr,fixInconsistentFields:ir,fieldListContainsAll:or,getColumnType:ar,deleteFields:sr,isInvalidFieldName:ur,getUniqFieldNames:cr,getUniqFieldValues:lr,applyFieldOrder:hr,findFieldNames:dr});function yr(t){var e;if(a.isArray(t))e=t;else if(e=[],a.isInteger(t))for(var n=0;n<t;n++)e.push({});else t&&re("Invalid DataTable constructor argument:",t);this.getRecords=function(){return e},this.getReadOnlyRecordAt=function(t){return nr(e[t])}}function mr(t,e,n){for(var r,i,o=Sr(t)||n.length,a=(t.data=t.data||new yr(o)).getRecords(),s=0,u=a.length;s<u;s++)r=a[s],i=n[s],r||(r=a[s]={}),r[e]=void 0===i?null:i}function vr(t){var e=t.data;return e||(e=t.data=new yr(t.shapes?t.shapes.length:0)),e}function _r(t){return br(t)||xr(t)}function br(t){return("polygon"==t.geometry_type||"polyline"==t.geometry_type)&&wr(t)}function xr(t){return"point"==t.geometry_type&&wr(t)}function wr(t){return a.some(t.shapes||[],(function(t){return!!t}))}function Er(t,e){xr(t)&&be(t.shapes,(function(t){var n=e(t[0],t[1]);t[0]=n[0],t[1]=n[1]}))}function Sr(t){var e=0;return t.data?e=t.data.size():t.shapes&&(e=t.shapes.length),e}function Ir(t,e,n){var r=t.fieldExists?t:t.data;e||ie("Missing a field parameter"),r&&r.fieldExists(e)||ie(n||"Missing a field named:",e)}function Cr(t,e){if(e&&e.length){t||ie("Missing attribute data");var n=t.getFields(),r=a.difference(e,n);r.length>0&&ie("Table is missing one or more fields:\n",r,"\nExisting fields:","\n"+fe(n))}}function Nr(t,e,n){var r;return n&&a.isString(n)?r=n:(r=e+", ",t&&t.geometry_type?r+="received a "+t.geometry_type+" layer":r+="received a layer with no geometry"),r}function Ar(t,e){t&&"point"===t.geometry_type||ie(Nr(t,"Expected a point layer",e))}function Or(t,e){t&&"polyline"===t.geometry_type||ie(Nr(t,"Expected a polyline layer",e))}function Pr(t,e){t&&"polygon"===t.geometry_type||ie(Nr(t,"Expected a polygon layer",e))}function Tr(t,e){var n=e.info&&e.info.input_files;return n&&n[0]||""}function Mr(t,e,n){return a.uniq(n).map((function(r){for(var i,o=[],a=[],s=0,u=0,c=t.length;u<c;u++)n[u]==r&&(r&&a.push(t[u]),i=e[u],o.push(i),i||s++);return{geometry_type:r,shapes:a,data:s<a.length?new yr(o):null}}))}function Lr(t,e){return e&&e.no_replace?{geometry_type:t.geometry_type}:t}function Rr(t){var e=Dr(t);return e.data&&(e.data=e.data.clone()),e}function Dr(t){var e=a.extend({},t);return t.shapes&&(e.shapes=Rn(t.shapes)),e}function Fr(t){for(var e=0,n=0,r=t.length;n<r;n++)t[n]&&t[n].length>1&&e++;return e}function kr(t,e){var n=jr(t,e);return function(t){return n[we(t)]>0}}function jr(t,e){var n=new Uint32Array(e.size());return t.filter(br).forEach((function(t){bn(t.shapes,n)})),n}function Br(t,e){var n=null;return"point"==t.geometry_type?n=ve(t.shapes):"polygon"!=t.geometry_type&&"polyline"!=t.geometry_type||(n=xn(t.shapes,e)),n}function Gr(t){t.data=new yr(Sr(t))}yr.prototype={fieldExists:function(t){return a.contains(this.getFields(),t)},toString:function(){return JSON.stringify(this)},toJSON:function(){return this.getRecords()},addField:function(t,e){var n=a.isFunction(e);a.isNumber(e)||a.isString(e)||n||re("DataTable#addField() requires a string, number or function for initialization"),this.fieldExists(t)&&re("DataTable#addField() tried to add a field that already exists:",t),this.getRecords().forEach((function(r,i){r[t]=n?e(r,i):e}))},getRecordAt:function(t){return this.getRecords()[t]},addIdField:function(){this.addField("FID",(function(t,e){return e}))},deleteField:function(t){this.getRecords().forEach((function(e){delete e[t]}))},getFields:function(){return dr(this.getRecords())},isEmpty:function(){return 0===this.getFields().length||0===this.size()},update:function(t){for(var e=this.getRecords(),n=0,r=e.length;n<r;n++)e[n]=t(e[n],n)},clone:function(){return new yr(this.getRecords().map(nr))},size:function(){return this.getRecords().length}};var Ur=Object.freeze({__proto__:null,insertFieldValues:mr,getLayerDataTable:vr,layerHasGeometry:_r,layerHasPaths:br,layerHasPoints:xr,layerHasNonNullShapes:wr,deleteFeatureById:function(t,e){t.shapes&&t.shapes.splice(e,1),t.data&&t.data.getRecords().splice(e,1)},transformPointsInLayer:Er,getFeatureCount:Sr,layerIsEmpty:function(t){return 0==Sr(t)},requireDataField:Ir,requireDataFields:Cr,layerTypeMessage:Nr,requirePointLayer:Ar,requirePolylineLayer:Or,requirePolygonLayer:Pr,requirePathLayer:function(t,e){t&&br(t)||ie(Nr(t,"Expected a polygon or polyline layer",e))},getLayerSourceFile:Tr,divideFeaturesByType:Mr,getOutputLayer:Lr,copyLayer:Rr,filterPathLayerByArcIds:function(t,e){var n=e.reduce((function(t,e){return t[e]=!0,t}),{}),r=Rn(t.shapes);return Fn(r,(function(t){for(var e=0;e<t.length;e++)if(we(t[e])in n)return null;return t})),a.defaults({shapes:r},t)},copyLayerShapes:Dr,countMultiPartFeatures:Fr,getArcPresenceTest2:kr,countArcsInLayers:jr,getLayerBounds:Br,isolateLayer:function(t,e){return a.defaults({layers:e.layers.filter((function(e){return e==t}))},e)},initDataTable:Gr});function zr(t,e){var n=new Uint8Array(e.size());function r(t){Dn(t,i)}function i(t){o(~t[0]),o(t[t.length-1])}function o(t){var e=we(t),r=e==t;n[e]|=r?1:2}return t.forEach((function(t){br(t)&&t.shapes.forEach(r)})),function(t){var e=we(t),r=e==t,i=n[e];return r?1==(1&i):2==(2&i)}}var qr=Object.freeze({__proto__:null,getPathEndpointTest:zr});function Vr(t){var e=new ArrayBuffer(16),n=new Float64Array(e),r=new Uint32Array(e),i=0|t;if(i>0==!1)throw new Error("Invalid size param: "+t);return function(t,e){var o,a=r;return n[0]=t,n[1]=e,(2147483647&(o=(o=a[0]^a[1])<<5^o>>7^a[2]^a[3]))%i}}function Yr(t,e){for(var n,r,i,o,a=function(t,e){var n,r,i,o,a,s=t.length,u=Math.floor(1.3*s)||1,c=Vr(u),l=new Int32Array(u),f=new Int32Array(s);for(i=0;i<s;i++)o=t[i],a=e[i],o!=o||a!=a?r=-1:(n=c(o,a),r=l[n]-1,l[n]=i+1),f[i]=r>=0?r:i;return f}(t,e),s=t.length-1;s>=0;s--)if(!((r=a[s])>=s)){i=s,o=-1;do{r=a[n=r],e[n]==e[s]&&t[n]==t[s]?(a[n]=i,i=n):(o>-1&&(a[o]=n),o=n)}while(r<n);o>-1&&(a[o]=o),a[s]=i}return a}function Xr(t,e){this._i=0,this._n=0,this._inc=1,this._xx=t,this._yy=e,this.i=0,this.x=0,this.y=0}function Jr(t,e,n){var r=0,i=0,o=1,a=0;this.init=function(t,e,n,s){return r=s||0,n?(i=t,o=1,a=t+e):(i=t+e-1,o=-1,a=t-1),this},this.hasNext=function(){var s=n,u=i,c=u,l=r,f=a,p=o;if(u==f)return!1;do{c+=p}while(c!=f&&s[c]<l);return i=c,this.x=t[u],this.y=e[u],this.i=u,!0}}function Wr(t){this._arcs=t,this._i=0,this._n=0,this.x=0,this.y=0}Xr.prototype.init=function(t,e,n){return n?(this._i=t,this._inc=1):(this._i=t+e-1,this._inc=-1),this._n=e,this},Xr.prototype.hasNext=function(){var t=this._i;return this._n>0&&(this._i=t+this._inc,this.x=this._xx[t],this.y=this._yy[t],this.i=t,this._n--,!0)},Wr.prototype.hasNext=function(){var t=this._arc;return this._i<this._n!=!1&&(t.hasNext()?(this.x=t.x,this.y=t.y,!0):(this.nextArc(),this.hasNext()))},Wr.prototype.init=function(t){return this._ids=t,this._n=t.length,this.reset(),this},Wr.prototype.nextArc=function(){var t=this._i+1;t<this._n&&(this._arc=this._arcs.getArcIter(this._ids[t]),t>0&&this._arc.hasNext()),this._i=t},Wr.prototype.reset=function(){this._i=-1,this.nextArc()};var Hr=Object.freeze({__proto__:null,PointIter:function(t){var e=t.length,n=0,r={x:0,y:0,hasNext:function(){return!(n>=e)&&(r.x=t[n][0],r.y=t[n][1],n++,!0)}};return r},ArcIter:Xr,FilteredArcIter:Jr,ShapeIter:Wr});function $r(t){var e=t.getPointCount(),n=Math.ceil(e/5e5),r=t.getRemovableThresholds(n);return a.quicksort(r,!0),function(t){var e=r.length,n=Kr(t,r.length);return n<1?0:n>e?1/0:r[n-1]}}function Kr(t,e){return 0===e||t>=1?0:t<=0?e+1:Math.floor((1-t)*(e+2))}function Zr(t,e,n){var r=e.getRemovableThresholds(n),i=Kr(t,r.length);return i<1?0:i>r.length?1/0:a.findValueByRank(r,i)}var Qr=Object.freeze({__proto__:null,getThresholdFunction:$r,getThresholdByPct:Zr});function ti(t){return[-180+(t=a.isFiniteNumber(t)?t:1e-10),-90+t,180-t,90-t]}function ei(t){var e=ti(-1),n=t instanceof me?t.toArray():t;return yn.containsBounds(e,n)}function ni(t){var e=t instanceof me?t.toArray():t;return(new me).setBounds(Math.max(e[0],-180),Math.max(e[1],-90),Math.min(e[2],180),Math.min(e[3],90))}var ri=Object.freeze({__proto__:null,getWorldBounds:ti,probablyDecimalDegreeBounds:ei,clampToWorldBounds:ni});function ii(){var t,e,n,r,i,o,s,u,c,l=0;function f(t){var e=[],n=[];p(t.map((function(t){for(var r=t?t.length:0,i=0;i<r;i++)e.push(t[i][0]),n.push(t[i][1]);return r})),e,n)}function p(o,a,s){var f=o.length;o instanceof Array&&(o=new Uint32Array(o)),a instanceof Array&&(a=new Float64Array(a)),s instanceof Array&&(s=new Float64Array(s)),t=a,e=s,r=o,i=null,l=0,c=null,n=new Uint32Array(f);for(var p=0,h=0;h<f;h++)n[h]=p,p+=o[h];return p==t.length&&t.length==e.length||re("ArcCollection#initXYData() Counting error"),d(),u=new Xr(t,e),this}function h(n){n?(n.length!=t.length&&re("ArcCollection#initZData() mismatched arrays"),n instanceof Array&&(n=new Float64Array(n)),c=new Jr(t,e,i=n)):(i=null,l=0,c=null)}function d(){var n=g(t,e,r);o=n.bb,s=n.bounds}function g(t,e,n){for(var r,i,o,a=n.length,s=new Float64Array(4*a),u=new me,c=0,l=0;l<a;l++)(r=n[l])>0&&(i=4*l,o=Ee(t,e,c,r),s[i++]=o[0],s[i++]=o[1],s[i++]=o[2],s[i]=o[3],c+=r,u.mergeBounds(o));return{bb:s,bounds:u}}function y(){var t=i,e=l;if(!t||!e)return this.getPointCount();for(var n=0,r=0,o=t.length;r<o;r++)t[r]>=e&&n++;return n}function m(){for(var n,o=y(),a=r.length,s=new Float64Array(o),u=new Float64Array(o),c=new Float64Array(o),f=new Int32Array(a),p=0,h=0,d=0;d<a;d++){n=0;for(var g=p+r[d];p<g;p++)i[p]>=l&&(s[h]=t[p],u[h]=e[p],c[h]=i[p],h++,n++);1==n&&re("Collapsed arc"),f[d]=n}return{xx:s,yy:u,zz:c,nn:f}}function v(o){for(var s,u,c=0,l=0,f=a.copyElements,d=0,g=o.length;d<g;d++)s=o[d],u=r[d],s>-1&&(f(t,n[d],t,c,u),f(e,n[d],e,c,u),i&&f(i,n[d],i,c,u),r[s]=u,c+=u,l++);p(r.subarray(0,l),t.subarray(0,c),e.subarray(0,c)),i&&h(i.subarray(0,c))}function _(t,e){var n=new Float64Array(e),r=0;return t.forEach((function(t){for(var e=0,i=t.length;e<i;r++,e++)n[r]=t[e]})),r!=e&&re("Mismatched thresholds"),n}1==arguments.length?f(arguments[0]):3==arguments.length?p.apply(this,arguments):re("ArcCollection() Invalid arguments"),this.updateVertexData=function(t,e,n,r){p(t,e,n),h(r||null)},this.getVertexData=function(){return{xx:t,yy:e,zz:i,bb:o,nn:r,ii:n}},this.getCopy=function(){var n=new ii(new Int32Array(r),new Float64Array(t),new Float64Array(e));return i&&(n.setThresholds(new Float64Array(i)),n.setRetainedInterval(l)),n},this.getFilteredCopy=function(){if(!i||0===l)return this.getCopy();var t=m(),e=new ii(t.nn,t.xx,t.yy);return e.setThresholds(t.zz),e},this.toArray=function(){var t=[];return this.forEach((function(e){for(var n=[];e.hasNext();)n.push([e.x,e.y]);t.push(n)})),t},this.toJSON=function(){return this.toArray()},this.forEachArcSegment=function(o,a){for(var s=o>=0,u=s?o:~o,c=this.getRetainedInterval(),l=r[u],f=s?1:-1,p=s?n[u]:n[u]+l-1,h=p,d=t,g=e,y=i,m=0,v=1;v<l;v++)h+=f,(0===c||y[h]>=c)&&(a(p,h,d,g),p=h,m++);return m},this.forEachSegment=function(t){for(var e=0,n=0,r=this.size();n<r;n++)e+=this.forEachArcSegment(n,t);return e},this.transformPoints=function(n){for(var i,o=t,a=e,s=-1,u=0,c=0,l=o.length;c<l;c++,u--){for(;0===u;)u=r[++s];(i=n(o[c],a[c],s))&&(o[c]=i[0],a[c]=i[1])}d()},this.forEach=function(t){for(var e=0,n=this.size();e<n;e++)t(this.getArcIter(e),e)},this.forEach2=function(o){for(var a=0,s=this.size();a<s;a++)o(n[a],r[a],t,e,i,a)},this.forEach3=function(o){for(var a,s,u,c,l,f=0,p=this.size();f<p;f++)s=(a=n[f])+r[f],u=t.subarray(a,s),c=e.subarray(a,s),i&&(l=i.subarray(a,s)),o(u,c,l,f)},this.filter=function(t){var e=function(e){return t(this.getArcIter(e),e)}.bind(this);return this.deleteArcs(e)},this.deleteArcs=function(t){for(var e=this.size(),n=new Int32Array(e),i=0,o=0;o<e;o++)t(o)?(n[o]=i++,r[o]):n[o]=-1;return i<e&&v(n),n},this.dedupCoords=function(){for(var n,o,a=0,s=0,u=0,c=this.size(),l=i;a<c;)o=oi(s,u,n=r[a],t,e,l),r[a]=o,s+=n,u+=o,a++;return s>u&&(p(r,t.subarray(0,u),e.subarray(0,u)),l&&h(l.subarray(0,u))),s-u},this.getVertex=function(n,r){var i=this.indexOfVertex(n,r);return{x:t[i],y:e[i]}},this.indexOfVertex=function(t,e){var i=t<0?~t:t,o=r[i];return e<0&&(e=o+e),i!=t&&(e=o-e-1),(e<0||e>=o)&&re("[ArcCollection] out-of-range vertex id"),n[i]+e},this.arcIsClosed=function(n){var r=this.indexOfVertex(n,0),i=this.indexOfVertex(n,-1);return r!=i&&t[r]==t[i]&&e[r]==e[i]},this.arcIsLollipop=function(n){var r,i;return!(this.getArcLength(n)<=2||!this.arcIsClosed(n))&&(r=this.indexOfVertex(n,1),i=this.indexOfVertex(n,-2),t[r]==t[i]&&e[r]==e[i])},this.arcIsDegenerate=function(t){for(var e,n,r=this.getArcIter(t),i=0;r.hasNext();){if(i>0&&(e!=r.x||n!=r.y))return!1;e=r.x,n=r.y,i++}return!0},this.getArcLength=function(t){return r[we(t)]},this.getArcIter=function(t){var e=t>=0,o=e?t:~t,a=i&&l?c:u;return o>=r.length&&re("#getArcId() out-of-range arc id:",t),a.init(n[o],r[o],e,l)},this.getShapeIter=function(t){return new Wr(this).init(t)},this.setThresholds=function(t){var e=this.getPointCount(),n=null;return t&&(t.length==e?n=t:t.length==this.size()?n=_(t,e):re("Invalid threshold data")),h(n),this},this.flatten=function(){if(l>0){var t=m();this.updateVertexData(t.nn,t.xx,t.yy),l=0}else i=null},this.getRetainedInterval=function(){return l},this.setRetainedInterval=function(t){return l=t,this},this.getRetainedPct=function(){return this.getPctByThreshold(l)},this.setRetainedPct=function(t){return l=t>=1?0:En(l=this.getThresholdByPct(t),t),this},this.getRemovableThresholds=function(t){i||re("[arcs] Missing simplification data.");for(var e,n=1|t,r=new Float64Array(Math.ceil(i.length/n)),o=0,a=0,s=this.getPointCount();o<s;o+=n)(e=i[o])!=1/0&&(r[a++]=e);return r.subarray(0,a)},this.getArcThresholds=function(t){t>=0&&t<this.size()||re("[arcs] Invalid arc id:",t);var e=n[t],o=e+r[t];return i.subarray(e,o)},this.getPctByThreshold=function(t,e){var n,r,i;return t>0?(n=this.getRemovableThresholds(e),r=a.findRankByValue(n,t),i=n.length>0?1-(r-1)/n.length:1):i=1,i},this.getThresholdByPct=function(t,e){return Zr(t,this,e)},this.arcIntersectsBBox=function(t,e){var n=o,r=4*t;return n[r]<=e[2]&&n[r+2]>=e[0]&&n[r+3]>=e[1]&&n[r+1]<=e[3]},this.arcIsContained=function(t,e){var n=o,r=4*t;return n[r]>=e[0]&&n[r+2]<=e[2]&&n[r+1]>=e[1]&&n[r+3]<=e[3]},this.arcIsSmaller=function(t,e){var n=o,r=4*t;return n[r+2]-n[r]<e&&n[r+3]-n[r+1]<e},this.isPlanar=function(){return!ei(this.getBounds())},this.size=function(){return n&&n.length||0},this.getPointCount=function(){return t&&t.length||0},this.getFilteredPointCount=y,this.getBounds=function(){return s.clone()},this.getSimpleShapeBounds=function(t,e){e=e||new me;for(var n=0,r=t.length;n<r;n++)this.mergeArcBounds(t[n],e);return e},this.getSimpleShapeBounds2=function(t,e){var n=e||[],r=o,i=4*we(t[0]);n[0]=r[i],n[1]=r[++i],n[2]=r[++i],n[3]=r[++i];for(var a=1,s=t.length;a<s;a++)r[i=4*we(t[a])]<n[0]&&(n[0]=r[i]),r[++i]<n[1]&&(n[1]=r[i]),r[++i]>n[2]&&(n[2]=r[i]),r[++i]>n[3]&&(n[3]=r[i]);return n},this.getMultiShapeBounds=function(t,e){if(e=e||new me,t)for(var n=0,r=t.length;n<r;n++)this.getSimpleShapeBounds(t[n],e);return e},this.mergeArcBounds=function(t,e){t<0&&(t=~t);var n=4*t;e.mergeBounds(o[n],o[n+1],o[n+2],o[n+3])}}function oi(t,e,n,r,i,o){for(var a,s,u,c,l,f=0,p=0;f<n;)a=r[c=t+f],s=i[c],(l=a==a&&s==s&&(0===p||a!=r[c-1]||s!=i[c-1]))&&(r[u=e+p]=a,i[u]=s,p++),o&&p>0&&(l||o[c]>o[u])&&(o[u]=o[c]),f++;return p>1?p:0}function ai(t,e){Array.isArray(t)&&(t=new ii(t));var n,r=t.getVertexData(),i=r.nn,o=r.xx,s=r.yy;Object.defineProperty(this,"arcs",{value:t});this.toArray=function(){var t=h(),e=new Uint8Array(t.length),n=[];return a.forEach(t,(function(r,i){var o,a;if(1!=e[i]&&(a=u(i)))for(o={coordinates:a,arcs:[]},n.push(o);1!=e[i];)o.arcs.push(f(i)),e[i]=1,i=t[i]})),n};function u(t){return c(t)?null:[n.xx[t],n.yy[t]]}function c(t){return isNaN(n.xx[t])}function l(t){var e=p(t),r=h(),i=r[e],o=function(t){var e=h(),n=t,r=e[t];for(;r!=t;)n=r,(r=e[r])==n&&re("Node indexing error");return n}(e);n.xx[e]=NaN,n.yy[e]=NaN,r[e]=e,r[o]=i}function f(t){var e=t>>1;return!0&t?e:~e}function p(t){return t>=0?2*t+1:2*~t}function h(){return n||(n=function(t,e){var n=2*t.size(),r=new Float64Array(n),i=new Float64Array(n),o=new Int32Array(n);t.forEach2((function(t,n,a,s,u,c){var l=t,f=t+n-1,p=2*c,h=p+1,d=a[l],g=s[l],y=a[f],m=s[f];e&&!e(c)&&(d=g=y=m=NaN),r[p]=d,i[p]=g,o[p]=c,r[h]=y,i[h]=m,o[h]=c}));var a=Yr(r,i);return{xx:r,yy:i,ids:o,chains:a}}(t,e),2*i.length!=n.chains.length&&re("[NodeCollection] count error")),n.chains}function d(t,e){var n=e>=0?e:~e,r=i[t>=0?t:~t];return!(r<2)&&(r==i[n]&&!!(g(t,e,-1)&&g(t,e,1)&&g(t,e,-2)))}function g(e,n,r){var i=t.indexOfVertex(e,r),a=t.indexOfVertex(n,r);return o[i]==o[a]&&s[i]==s[a]}function y(t){var e=p(t),n=h(),r=n[e];return r>=0&&r<n.length||re("out-of-range chain id"),f(r)}this.size=function(){return this.toArray().length},this.findDanglingEndpoints=function(){for(var t,e=h(),n=[],r=0,i=e.length;r<i;r++)e[r]==r&&(t=u(r))&&n.push({point:t,arc:f(r)});return n},this.detachAcyclicArcs=function(){for(var t,e,n=h(),r=0,i=0,o=n.length;i<o;i+=2)t=i==n[i],e=i+1==n[i+1],!t&&!e||c(i)||(this.detachArc(f(i)),r++);return r>0&&(r+=this.detachAcyclicArcs()),r},this.detachArc=function(t){l(t),l(~t)},this.forEachConnectedArc=function(t,e){for(var n=y(t),r=0;n!=t;)e(n,r++),n=y(n)},this.getConnectedArcs=function(t,e){var n=[],r=!!e,i=y(t);for(r&&e(t);i!=t;)r&&!e(i)||n.push(i),i=y(i);return n},this.findDuplicateArc=function(t){for(var e=y(t),n=t;e!=t;)d(t,e)&&we(e)<we(n)&&(n=e),e=y(e);return n},this.internal={testArcMatch:d,testVertexMatch:g}}function si(t){var e=t.arcs,n=t.layers.filter(br);if(e&&n.length){var r=ui(n,e),i=[],o=0,s=new Int32Array(e.size()),u=new Uint8Array(e.size());n.forEach((function(t){t.shapes=t.shapes.map((function(t){return kn(t&&t.concat(),c)}))})),t.arcs=function(t,e,n){var r=new Uint32Array(e.length),i=new Float64Array(n),o=new Float64Array(n),s=t.getVertexData(),u=s.zz?new Float64Array(n):null,c=t.getRetainedInterval(),l=0;return e.forEach((function(t,e){t.forEach((function(t,n){!function(t,e){var n=we(t),c=t<0,f=s.nn[n],p=s.ii[n],h=r[e];f>0&&(h>0&&(f--,c||p++),a.copyElements(s.xx,p,i,l,f,c),a.copyElements(s.yy,p,o,l,f,c),u&&a.copyElements(s.zz,p,u,l,f,c),r[e]+=f,l+=f)}(t,e)}))})),new ii(r,i,o).setThresholds(u).setRetainedInterval(c)}(e,i,o)}else t.arcs=null;function c(t){for(var n,a,c,l,f,p,h=0,d=[],g=0,y=t.length;g<y;g++)f=(a=t[g])===(c=we(a)),e.arcIsDegenerate(a)||(0!==u[c]?n=null:(l=e.getArcLength(a),n&&r(t[g-1],a)?(l>0&&l--,n.push(a),u[c]=1):(n=[a],s[c]=i.length,i.push(n),u[c]=f?2:3),h+=l)),u[c]>1&&(p=s[c],(f&&3==u[c]||!f&&2==u[c])&&(p=~p),d.push(p));return o+=h,d}}function ui(t,e){var n,r,i=new ai(e,kr(t,e)),o=zr(t.filter((function(t){return"polyline"==t.geometry_type})),e);return function(t,e){return t==e||t==~e?(se("Unexpected arc sequence:",t,e),!1):(n=0,i.forEachConnectedArc(t,a),1==n&&r==~e&&!o(t)&&!o(~e))};function a(t,e){n++,r=t}}var ci=Object.freeze({__proto__:null,dissolveArcs:si,getArcDissolveTest:ui});function li(t){return t.layers.map((function(e){var n={arcs:t.arcs,layers:[e],info:t.info};return si(n),n}))}function fi(t){var e=a.extend({},t);return e.layers=e.layers.map(Rr),e.arcs&&(e.arcs=e.arcs.getFilteredCopy()),e}function pi(t){var e=a.extend({},t);return e.layers=e.layers.map(Dr),e.arcs&&(e.arcs=e.arcs.getFilteredCopy()),e}function hi(t){return a.defaults({layers:t.layers.map((function(t){return a.extend({},t)}))},t)}function di(t){var e=new me;return t.layers.forEach((function(n){var r=Br(n,t.arcs);r&&e.mergeBounds(r)})),e}function gi(t){return a.some(t.layers,(function(t){return _r(t)}))}function yi(t){return a.some(t.layers,(function(t){return br(t)}))}function mi(t){if(t.arcs&&!a.some(t.layers,br))return t.arcs=null,!0}function vi(t){mi(t),t.arcs&&si(t)}function _i(t,e,n){var r=t.layers.concat();a.repeat(Math.max(e.length,n.length),(function(t){var i=e[t],o=n[t],a=i?r.indexOf(i):r.length;i&&r.splice(a,1),o&&r.splice(a,0,o)})),t.layers=r}function bi(t,e){t.arcs&&t.arcs.transformPoints(e),t.layers.forEach((function(t){xr(t)&&Er(t,e)}))}var xi=Object.freeze({__proto__:null,splitDataset:li,copyDataset:fi,copyDatasetForExport:pi,copyDatasetForRenaming:hi,getDatasetBounds:di,datasetHasGeometry:gi,datasetHasPaths:yi,cleanupArcs:mi,pruneArcs:vi,replaceLayers:_i,transformPoints:bi});function wi(){this.a=1,this.c=0,this.tx=0,this.b=0,this.d=1,this.ty=0}function Ei(t,e){var r=n(20),i=c(t),o=i.crs,s=[i],u=function(t){t.internal.pj_list.mixed||t.pj_add((function(t){t.a=1}),"mixed","Mapshaper Mixed Projection");return t.pj_init("+proj=mixed")}(r);function c(t){return{bounds:new me(l(t.bbox)),crs:r.pj_init(t.proj)}}function l(t){var e=Math.PI/180;return t.map((function(t){return t*e}))}return o.__mixed_crs=u,o.addFrame=function(t){var n,i,o,u=function(t,e){var n=e[t.name];return a.defaults(t,{scale:1,dx:0,dy:0,rotation:0}),n?(Object.keys(n).forEach((function(e){var r=n[e];e in t?t[e]=n[e]:t.proj=function(t,e,n){var r="+"+e+"=";return t.split(" ").map((function(t){return 0===t.indexOf(r)&&(t=t.substr(0,r.length)+n),t})).join(" ")}(t.proj,e,r)})),t):t}(t,e),l=c(u),f=new wi,p=u.origin?(n=u.origin,i=l.crs,[(o=r.pj_fwd_deg({lam:n[0],phi:n[1]},i)).x,o.y]):[0,0],h=u.placement||[0,0],d=h[0]-p[0]+(+u.dx||0),g=h[1]-p[1]+(+u.dy||0);return u.rotation&&f.rotate(u.rotation*Math.PI/180,p[0],p[1]),u.scale&&f.scale(u.scale,u.scale,p[0],p[1]),f.translate(d,g),l.matrix=f,s.push(l),this},u.fwd=function(t,e){for(var n,i,o=0,a=s.length;o<a;o++)if((n=s[o]).bounds.containsPoint(t.lam,t.phi)){i=r.pj_fwd(t,n.crs),n.matrix&&n.matrix.transformXY(i.x,i.y,i);break}e.x=i?i.x:1/0,e.y=i?i.y:1/0},o}function Si(t){var e=t.trim().split(/ +/),n=[],r=e.filter((function(t){return!/^\+/.test(t)||(n.push(t.substr(1)),!1)})),i=r[0],o=Ci(n);return 1!=r.length?null:function(t,e){if("albersusa"==t)return new Ii(e);return null}(i,o)}function Ii(t){var e=t||{},n=new Ei({proj:"+proj=aea +lon_0=-96 +lat_0=37.5 +lat_1=29.5 +lat_2=45.5",bbox:[-129,23,-62,52]},e).addFrame({name:"AK",proj:"+proj=aea +lat_1=55 +lat_2=70 +lat_0=65 +lon_0=-148 +x_0=0 +y_0=0",bbox:[-172.26,50.89,-127,73.21],origin:[-152,63],placement:[-1882782,-969242],scale:.37}).addFrame({name:"HI",proj:"+proj=aea +lat_1=19 +lat_2=24 +lat_0=20.9 +lon_0=-156.5 +x_0=0 +y_0=0",bbox:[-160.5,18.72,-154.57,22.58],origin:[-157,21],placement:[-1050326,-1055362]});return e.PR&&n.addFrame({name:"PR",proj:"+proj=aea +lat_1=18 +lat_2=18.43 +lat_0=17.83 +lon_0=-66.43 +x_0=0 +y_0=0",bbox:[-68.092,17.824,-65.151,18.787],origin:[-66.431,18.228],placement:[1993101,-1254517]}),e.VI&&n.addFrame({name:"VI",proj:"+proj=aea +lat_1=18 +lat_2=18.43 +lat_0=17.83 +lon_0=-66.43 +x_0=0 +y_0=0",bbox:[-65.104,17.665,-64.454,18.505],origin:[-66.431,18.228],placement:[1993101,-1254517]}),n}function Ci(t){var e={};return t.forEach((function(t){!function(t,e){var n=t.split("="),r=n[0].split("."),i=r.pop(),o=r.reduce((function(t,e){if(e in t==!1)t[e]={};else if(!a.isObject(t[e]))return{};return t[e]}),e);n.length>1?o[i]=function(t){var e;if(t.indexOf(",")>0)return e=t.split(",").map(parseFloat);null===(e=a.parseNumber(t))&&(e=t);return e}(n[1]):i in o!=!1||r.length||(o[i]={})}(t,e)})),e}wi.prototype.transformXY=function(t,e,n){return(n=n||{}).x=t*this.a+e*this.c+this.tx,n.y=t*this.b+e*this.d+this.ty,n},wi.prototype.translate=function(t,e){this.tx+=t,this.ty+=e},wi.prototype.rotate=function(t,e,n){var r=Math.cos(t),i=Math.sin(t);e=e||0,n=n||0,this.a=r,this.c=-i,this.b=i,this.d=r,this.tx+=e-e*r+n*i,this.ty+=n-e*i-n*r},wi.prototype.scale=function(t,e,n,r){n=n||0,r=r||0,this.a*=t,this.c*=t,this.b*=e,this.d*=e,this.tx-=n*(t-1),this.ty-=r*(e-1)};var Ni=Object.freeze({__proto__:null,parseCustomProjection:Si,AlbersUSA:Ii,parseCustomParams:Ci}),Ai=null,Oi={robinson:"+proj=robin +datum=WGS84",webmercator:"+proj=merc +a=6378137 +b=6378137",wgs84:"+proj=longlat +datum=WGS84",albersusa:new Ii};function Pi(t,e){if(!Ai)return e();Ai(t,e)}function Ti(t,e){var r=n(20),i=[0],o=[0],a=t.is_latlong?r.internal.DEG_TO_RAD:1,s=e.is_latlong?r.internal.RAD_TO_DEG:1,u=qi(t);return function(n,c){var l;u&&(n<-180?n=-180:n>180&&(n=180)),i[0]=n*a,o[0]=c*a;try{e=e.__mixed_crs||e,r.pj_transform(t,e,i,o),l=i[0]==1/0}catch(t){l=!0}return l?null:[i[0]*s,o[0]*s]}}function Mi(t){var e,n;try{(e=Ui(t))&&(n=Li(e))}catch(t){}return n||"[unknown]"}function Li(t){return n(20).internal.get_proj_defn(t)}function Ri(t){var e;try{e=n(20).internal.wkt_from_proj4(t)}catch(t){}return e}function Di(t,e){var n=Li(t);return!!n&&n==Li(e)}function Fi(t){var e,r=n(20);return(e=ki(t)?t:t in r.internal.pj_list?"+proj="+t:t in Oi?Oi[t]:function(t){return/^(esri|epsg|nad83|nad27):[0-9]+$/i.test(String(t))}(t)?"+init="+t.toLowerCase():t in Yt("defs")?Yt("defs")[t]:Si(t))||ie("Unknown projection definition:",t),e}function ki(t){return/^(\+[^ ]+ *)+$/.test(t)}function ji(t){var e,r=Fi(t);if(a.isString(r))try{e=n(20).pj_init(r)}catch(t){ie("Unable to use projection",r,"("+t.message+")")}else e=r;return e||null}function Bi(t){qi(Ui(t))&&ie("Command requires a target with projected coordinates (not lat-long)")}function Gi(t,e){t.info=t.info||{},t.info.crs=e.crs,t.info.prj=e.prj}function Ui(t){var e=t.info||{},n=e.crs;return!n&&e.prj&&(n=Xi(e.prj)),!n&&ei(di(t))&&(n=ji("wgs84")),n}function zi(t,e,r){var i=n(20),o=i.pj_inv_deg({x:t,y:e},r),a=i.pj_inv_deg({x:t+1,y:e},r);return 1/yn.greatCircleDistance(o.lam,o.phi,a.lam,a.phi)}function qi(t){return t&&t.is_latlong||!1}function Vi(){var t=n(20).internal.pj_list,e="Proj4 projections\n";Object.keys(t).sort().forEach((function(n){e+="  "+a.rpad(n,7," ")+"  "+t[n].name+"\n"})),e+="\nAliases",Object.keys(Oi).sort().forEach((function(t){e+="\n  "+t})),ae(e)}function Yi(t){var e;try{e=n(20).internal.wkt_to_proj4(t)}catch(t){ie("Unusable .prj file ("+t.message+")")}return e}function Xi(t){return ji(Yi(t))}var Ji=Object.freeze({__proto__:null,initProjLibrary:Pi,setProjectionLoader:function(t){Ai=t},findProjLibs:function(t){var e=t.match(/\b(esri|epsg|nad83|nad27)(?=:[0-9]+\b)/gi)||[];return a.uniq(e.map((function(t){return t.toLowerCase()})))},getProjTransform:function(t,e){var r=n(20),i=qi(t);return e=e.__mixed_crs||e,function(n,o){var a;return i&&(n<-180?n=-180:n>180&&(n=180)),a=[n,o],r.pj_transform_point(t,e,a),a}},getProjTransform2:Ti,toLngLat:function(t,e){return qi(e)?t.concat():Mi(e,ji("wgs84"))(t)},getProjInfo:Mi,crsToProj4:Li,crsToPrj:Ri,crsAreEqual:Di,getProjDefn:Fi,looksLikeProj4String:ki,getCRS:ji,requireProjectedDataset:Bi,setDatasetCRS:Gi,getDatasetCRS:Ui,getScaleFactorAtXY:zi,isProjectedCRS:function(t){return!qi(t)},isLatLngCRS:qi,printProjections:Vi,translatePrj:Yi,parsePrj:Xi});function Wi(t,e){var n,r=[],i=[],o=[],a=0;return t.forEach((function(t,u){!function(t,e){var u,c,l,f,p=!0,h=0;n=0;for(;t.hasNext();){if(u=t.x,c=t.y,!1===e(s,u,c,l,f,h++)){p=!1;break}l=u,f=c}p&&1==n&&(oe("An invalid arc was created"),p=!1);if(p)r.push(n);else{for(;n-- >0;)i.pop(),o.pop();r.push(0),a++}}(t,e)})),t.updateVertexData(r,i,o),a;function s(t){t&&(i.push(t[0]),o.push(t[1]),n++)}}function Hi(t){var e=null;return!function(t){return-1==$i("utf8",t).indexOf("")}(t)?function(t){var e="abcdefghijklmnopqrstuvwxyz0123456789.'\"?+-\n,:;/|_$% ",n=$i("win1252",t),r=Ki(n,e);return Ki(n,""+e)>.97&&r>=.6}(t)&&(e="win1252"):e="utf8",e}function $i(t,e){return e.map((function(e){return Kn(e,t).trim()})).join("\n")}function Ki(t,e){var n={},r=0;t=t.toLowerCase();for(var i=0,o=e.length;i<o;i++)n[e[i]]=1;for(i=0,o=t.length;i<o;i++)r+=n[t[i]]||0;return r/t.length}function Zi(t,e){a.isNumber(t)?t=new ArrayBuffer(t):"function"==typeof s&&t instanceof s&&(t=Zi.toArrayBuffer(t)),t instanceof ArrayBuffer==0&&re("BinArray constructor takes an integer, ArrayBuffer or Buffer argument"),this._buffer=t,this._bytes=new Uint8Array(t),this._view=new DataView(t),this._idx=0,this._le=!1!==e}Zi.bufferToUintArray=function(t,e){return 4==e?new Uint32Array(t):2==e?new Uint16Array(t):1==e?new Uint8Array(t):void re("BinArray.bufferToUintArray() invalid word length:",e)},Zi.uintSize=function(t){return 1&t||2&t||4},Zi.bufferCopy=function(t,e,n,r,i){r=r||0,i=i||n.byteLength-r,t.byteLength-e<i&&re("Buffer overflow; tried to write:",i);for(var o=Math.min(Zi.uintSize(i),Zi.uintSize(r),Zi.uintSize(t.byteLength),Zi.uintSize(e),Zi.uintSize(n.byteLength)),a=Zi.bufferToUintArray(n,o),s=Zi.bufferToUintArray(t,o),u=i/o,c=r/o,l=e/o;u--;)s[l++]=a[c++];return i},Zi.toArrayBuffer=function(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n),i=0;i<e;i++)r[i]=t[i];return n},Zi.bufferSize=function(t){return t instanceof ArrayBuffer?t.byteLength:0|t.length},Zi.prototype={size:function(){return this._buffer.byteLength},littleEndian:function(){return this._le=!0,this},bigEndian:function(){return this._le=!1,this},buffer:function(){return this._buffer},bytesLeft:function(){return this._buffer.byteLength-this._idx},skipBytes:function(t){return this._idx+=t+0,this},readUint8:function(){return this._bytes[this._idx++]},writeUint8:function(t){return this._bytes[this._idx++]=t,this},readInt8:function(){return this._view.getInt8(this._idx++)},writeInt8:function(t){return this._view.setInt8(this._idx++,t),this},readUint16:function(){var t=this._view.getUint16(this._idx,this._le);return this._idx+=2,t},writeUint16:function(t){return this._view.setUint16(this._idx,t,this._le),this._idx+=2,this},readUint32:function(){var t=this._view.getUint32(this._idx,this._le);return this._idx+=4,t},writeUint32:function(t){return this._view.setUint32(this._idx,t,this._le),this._idx+=4,this},readInt32:function(){var t=this._view.getInt32(this._idx,this._le);return this._idx+=4,t},writeInt32:function(t){return this._view.setInt32(this._idx,t,this._le),this._idx+=4,this},readFloat64:function(){var t=this._view.getFloat64(this._idx,this._le);return this._idx+=8,t},writeFloat64:function(t){return this._view.setFloat64(this._idx,t,this._le),this._idx+=8,this},readFloat64Array:function(t){var e,n=8*t,r=this._idx,i=this._buffer;if(r%8==0)e=new Float64Array(i,r,t);else if(i.slice)e=new Float64Array(i.slice(r,r+n));else{var o=new ArrayBuffer(n);Zi.bufferCopy(o,0,i,r,n),e=new Float64Array(o)}return this._idx+=n,e},readUint32Array:function(t){for(var e=[],n=0;n<t;n++)e.push(this.readUint32());return e},peek:function(t){return this._view.getUint8(t>=0?t:this._idx)},position:function(t){return null!=t?(this._idx=t,this):this._idx},readCString:function(t,e){for(var n="",r=t>=0?t:this.bytesLeft();r>0;){var i=this.readUint8();if(r--,0==i)break;if(i>127&&e){n=null;break}n+=String.fromCharCode(i)}return t>0&&r>0&&this.skipBytes(r),n},writeString:function(t,e){var n,r=0,i=t.length;e&&(i=Math.min(i,e));for(var o=0;o<i;o++)(n=t.charCodeAt(o))>127&&(n="?".charCodeAt(0)),this.writeUint8(n),r++;return r},writeCString:function(t,e){var n=e?e-1:null,r=this.writeString(t,n);if(this.writeUint8(0),r++,e)for(;r<e;)this.writeUint8(0),r++;return this},writeBuffer:function(t,e,n){return this._idx+=Zi.bufferCopy(this._buffer,this._idx,t,n,e),this}};var Qi=Object.freeze({__proto__:null,buffersAreIdentical:function(t,e){var n=Zi.bufferSize(t);if(n!=Zi.bufferSize(e))return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0},BinArray:Zi}),to=[1,"437",2,"850",3,"1252",8,"865",9,"437",10,"850",11,"437",13,"437",14,"850",15,"437",16,"850",17,"437",18,"850",19,"932",20,"850",21,"437",22,"850",23,"865",24,"437",25,"437",26,"850",27,"437",28,"863",29,"850",31,"852",34,"852",35,"852",36,"860",37,"850",38,"866",55,"850",64,"852",77,"936",78,"949",79,"950",80,"874",87,"1252",88,"1252",89,"1252",100,"852",101,"866",102,"865",103,"861",106,"737",107,"857",108,"863",120,"950",121,"949",122,"936",123,"932",124,"874",134,"737",135,"852",136,"857",200,"1250",201,"1251",202,"1254",203,"1253",204,"1257"],eo={932:"Japanese",936:"Simplified Chinese",950:"Traditional Chinese",1252:"Western European",949:"Korean",874:"Thai",1250:"Eastern European",1251:"Russian",1254:"Turkish",1253:"Greek",1257:"Baltic"};function no(t,e,n){for(var r,i=t.position(),o=0,a=0;a<e&&0!==(r=t.readUint8());a++)(o>0||32!=r)&&(n[o++]=r);for(;o>0&&32==n[o-1];)o--;return t.position(i+e),o}function ro(t){var n=t||"ascii",r=Wn(n),i=a.createBuffer(256);return!("object"==o(e))||"utf8"!=r&&"ascii"!=r?function(t,e){var r,o,a=no(t,e,i),s="";for(r=0;r<a;r++){if((o=i[r])>127)return Hn(i,n,0,a);s+=String.fromCharCode(o)}return s}:function(t,e){var n=no(t,e,i);return i.toString(r,0,n)}}function io(t,e){for(var n=0;n<e;n++)if(t[n]>=128)return!0;return!1}function oo(t,e){return t.readInt32()}function ao(t,e){var n=t.readCString(e),r=null;return/[ty]/i.test(n)?r=!0:/[fn]/i.test(n)&&(r=!1),r}function so(t,e){var n=t.readCString(e),r=n.substr(0,4),i=n.substr(4,2),o=n.substr(6,2);return new Date(Date.UTC(+r,+i-1,+o))}function uo(t,e){a.isString(t)&&re("[DbfReader] Expected a buffer, not a string");var n,r,i=new Zi(t),o=function(t){t.position(0).littleEndian();var e,n={version:t.readInt8(),updateYear:t.readUint8(),updateMonth:t.readUint8(),updateDay:t.readUint8(),recordCount:t.readUint32(),dataOffset:t.readUint16(),recordSize:t.readUint16(),incompleteTransaction:t.skipBytes(2).readUint8(),encrypted:t.readUint8(),mdx:t.skipBytes(12).readUint8(),ldid:t.readUint8()},r=1;t.skipBytes(2),n.fields=[];for(;13!=t.peek()&&10!=t.peek()&&t.position()<n.dataOffset-1;)(e=u(t)).columnOffset=r,n.fields.push(e),r+=e.size;r!=n.recordSize&&re("Record length mismatch; header:",n.recordSize,"detected:",r);13!=t.peek()&&oe("Found a non-standard DBF header terminator ("+t.peek()+"). DBF file may be corrupted.");return n}(i);function s(){if(!n){var t="ascii";f(),g().length>0&&(t=p()),n=o.fields.map((function(e){var n=a.extend({},e);return n.name=Kn(e.namebuf,t),n})),cr(a.pluck(n,"name")).forEach((function(t,e){n[e].name=t}))}}function u(t){var e=a.createBuffer(11),n=no(t,11,e);return{namebuf:a.createBuffer(e.slice(0,n)),type:String.fromCharCode(t.readUint8()),address:t.readUint32(),size:t.readUint8(),decimals:t.readUint8(),id:t.skipBytes(2).readUint8(),position:t.skipBytes(2).readUint8(),indexFlag:t.skipBytes(7).readUint8()}}function c(){return s(),a.pluck(n,"name")}function l(t){return o.dataOffset+o.recordSize*t}function f(){(r=e||function(){var t,e,n=o.ldid,r=(c=n,f=to.indexOf(c),-1==f?null:to[f+1]),s=function(t){var e,n,r,s,u=[],c=o.fields.filter((function(t){return"C"==t.type})),f=a.createBuffer(256),p={};u=g();for(var h=0,d=o.recordCount;h<d;h++)for(var y=0,m=c.length;y<m&&!(u.length>=t);y++)e=c[y],i.position(l(h)+e.columnOffset),(n=no(i,e.size,f))>0&&io(f,n)&&(r=a.createBuffer(f.slice(0,n)),(s=r.toString("hex"))in p==!1&&(p[s]=!0,u.push(r)));return u}(50),u=0===s.length;var c,f;r&&87!=n?t=r:u&&(t="ascii");t||(t=Hi(s));t&&s.length>0&&(e="\nSample text containing non-ascii characters:"+((e=fe((e=$i(t,s)).split("\n"))).length>60?"\n":"")+e,oe(e="Detected DBF text encoding: "+t+(t in eo?" ("+eo[t]+")":"")+e));return t}())||(r="utf8",ie('Unable to auto-detect the text encoding of the DBF file.\nTo avoid corrupted text, re-import using the "encoding=" option.\nTo see a list of supported encodings, run the "encodings" command.'))}function p(){return r||f(),r}function h(){s();var t,e=n.map(d),r=function(t){var e=t.size()-1;return 26!=t.peek(e)&&e++,e}(i),o=(t=c().map((function(t,e){return JSON.stringify(t)+": arguments["+e+"]"})),new Function("return {"+t.join(",")+"};")),a=[];return function(t){for(var s,u,c=l(t),f=0,p=n.length;f<p;f++)(s=c+(u=n[f]).columnOffset)+u.size>r&&ie("Invalid DBF file: encountered end-of-file while reading data"),i.position(s),a[f]=e[f](i,u.size);return o.apply(null,a)}}function d(t){var e,n=t.type,r=null;return"I"==n?r=oo:"F"==n||"N"==n?(e=ro("ascii"),r=function(t,n){var r,i=e(t,n);return i.indexOf(",")>=0&&(i=i.replace(",",".")),r=parseFloat(i),isNaN(r)?null:r}):"L"==n?r=ao:"D"==n?r=so:"C"==n?r=ro(p()):(oe('Field "'+t.name+'" has an unsupported type ('+t.type+") -- converting to null values"),r=function(){return null}),r}function g(){var t=[];return o.fields.forEach((function(e){io(e.namebuf,e.namebuf.length)&&t.push(e.namebuf)})),t}this.size=function(){return o.recordCount},this.readRow=function(t){return h()(t)},this.getFields=c,this.getBuffer=function(){return i.buffer()},this.deleteField=function(t){s(),n=n.filter((function(e){return e.name!=t}))},this.readRows=function(){for(var t=h(),e=[],n=0,r=this.size();n<r;n++)e.push(t(n));return e}}var co={};co.MAX_STRING_LEN=254,co.convertValueToString=fo,co.convertFieldNames=ho,co.discoverFieldType=mo,co.getDecimalFormatter=vo,co.getNumericFieldInfo=_o,co.truncateEncodedString=xo,co.getFieldInfo=yo,co.exportRecords=function(t,e,n){var r=t.length,i=dr(t,n),o=e||"utf8",s=Yn(i.join(""))?"ascii":o,u=function(t,e){return t.map((function(t){for(var n=$n(t,e),r=n.length,i=a.createBuffer(11),o=0;o<11;o++)i[o]=o<10&&r>=o-1?n[o]:0;return i}))}(ho(i,s),s),c=i.map((function(e,n){var r=yo(t,e,o);return r.warning&&oe("["+e+"] "+r.warning),r})),l=(m=c.length,33+32*m),f=(y=a.pluck(c,"size"),a.sum(y)+1),p=l+r*f+1,h=new ArrayBuffer(p),d=new Zi(h).littleEndian(),g=new Date;var y;var m;d.writeUint8(3),d.writeUint8(g.getFullYear()-1900),d.writeUint8(g.getMonth()+1),d.writeUint8(g.getDate()),d.writeUint32(r),d.writeUint16(l),d.writeUint16(f),d.skipBytes(17),d.writeUint8(0),d.skipBytes(2),c.reduce((function(t,e,n){return d.writeBuffer(u[n],11,0),d.writeUint8(e.type.charCodeAt(0)),d.writeUint32(t),d.writeUint8(e.size),d.writeUint8(e.decimals),d.skipBytes(14),t+e.size}),1),d.writeUint8(13),d.position()!=l&&re("Dbf#exportRecords() header size mismatch; expected:",l,"written:",d.position());t.forEach((function(t,e){var n=d.position();d.writeUint8(32);for(var r=0,i=c.length;r<i;r++)c[r].write(e,d);d.position()-n!=f&&re("#exportRecords() Error exporting record:",t)})),d.writeUint8(26),d.position()!=p&&re("Dbf#exportRecords() file size mismatch; expected:",p,"written:",d.position());return h};var lo=new function(){var t,e;function n(){t=new Uint8Array(5e3),e=0}return n(),{reserve:function(r){return e+r>5e3&&n(),e+=r,t.subarray(e-r,e)},putBack:function(t){e-=t}}};function fo(t){return null==t?"":String(t)}function po(t,e,n,r){var i="ascii"==r?bo:function(t){return function(e){var n=bo(e,!0);return null===n&&(n=$n(String(e),t)),n}}(r),o=0,a=0,s=e.map((function(t){var e=fo(t[n]),s=i(e);return s.length>254&&(s="ascii"==r?s.subarray(0,254):xo(s,r,254),a++),o=Math.max(o,s.length),s}));t.size=o,t.write=function(t,e){var n,r=s[t],i=Math.min(o,r.length),a=e._bytes,u=e.position();for(n=0;n<i;n++)a[n+u]=r[n];e.position(u+o)},a>0&&(t.warning="Truncated "+a+" string"+(1==a?"":"s")+" to fit the 254-byte limit")}function ho(t,e){var n=cr(t.map(go),10,e);return n.forEach((function(e,n){t[n]!=e&&oe('Changed field name from "'+t[n]+'" to "'+e+'"')})),n}function go(t){return t.replace(/[-\s]+/g,"_")}function yo(t,e,n){var r=mo(t,e),i={type:r,decimals:0};return"N"==r?function(t,e,n){var r,i;r=_o(e,n),t.decimals=r.decimals,(i=Math.max(r.max.toFixed(t.decimals).length,r.min.toFixed(t.decimals).length))>18&&(i=18,t.decimals-=i-18,t.decimals<0&&re("Dbf#getFieldInfo() Out-of-range error.")),t.size=i;var o=vo(i,t.decimals);t.write=function(t,r){var s=e[t],u=o(s[n]);u.length<i&&(u=a.lpad(u,i," ")),r.writeString(u,i)}}(i,t,e):"C"==r?po(i,t,e,n):"L"==r?function(t,e,n){t.size=1,t.write=function(t,r){var i,o=e[t][n];i=!0===o?"T":!1===o?"F":"?",r.writeString(i)}}(i,t,e):"D"==r?function(t,e,n){t.size=8,t.write=function(t,r){var i,o=e[t][n];i=o instanceof Date==!1?"00000000":a.lpad(o.getUTCFullYear(),4,"0")+a.lpad(o.getUTCMonth()+1,2,"0")+a.lpad(o.getUTCDate(),2,"0"),r.writeString(i)}}(i,t,e):(i.size=0,i.type="N",r&&(i.warning="Unable to export "+r+"-type data, writing null values"),i.write=function(){}),i}function mo(t,e){for(var n,r=0,i=t.length;r<i;r++){if(n=t[r][e],a.isString(n))return"C";if(a.isNumber(n))return"N";if(a.isBoolean(n))return"L";if(n instanceof Date)return"D";if(n)return o(n)}return null}function vo(t,e){return function(n){var r=a.isFiniteNumber(n)?n.toFixed(e):String(" ");return a.lpad(r,t," ")}}function _o(t,e){for(var n,r=0,i=0,o=1,s=1,u=0,c=1e-15,l=0,f=t.length;l<f;l++)if(n=t[l][e],a.isFiniteNumber(n)){if(n<r||n>i)for(n<r&&(r=n),n>i&&(i=n);Math.abs(n)>=s;)s*=10,c*=10;for(;Math.abs(Math.round(n*o)-n*o)>c&&15!=u;)u++,c*=10,o*=10}return{decimals:u,min:r,max:i}}function bo(t,e){var n,r,i=String(t),o=i.length,a=lo.reserve(o);for(n=0;n<o;n++){if((r=i.charCodeAt(n))>127){if(e){a=null,n=0;break}r="?".charCodeAt(0)}a[n]=r}return lo.putBack(o-n),a?a.subarray(0,n):null}function xo(t,e,n){for(var r,i,o=t.slice(0,n),a=n;a>0&&a>=n-3;){if(""!=(i=Kn(r=a==n?o:t.slice(0,a),e)).charAt(i.length-1)){o=r;break}a--}return o}function wo(t,e){return new Eo(t,(e||{}).encoding)}function Eo(t,e){var n,r=new uo(t,e),i=!1;function o(){return n||(n=new yr(r.readRows()),r=null,t=null),n}this.exportAsDbf=function(t){return!(!r||i||t.field_order||t.encoding)?r.getBuffer():co.exportRecords(o().getRecords(),t.encoding,t.field_order)},this.getReadOnlyRecordAt=function(t){return r?r.readRow(t):n.getReadOnlyRecordAt(t)},this.deleteField=function(t){n?n.deleteField(t):(i=!0,r.deleteField(t))},this.getRecords=function(){return o().getRecords()},this.getFields=function(){return r?r.getFields():n.getFields()},this.isEmpty=function(){return r?0===this.size():n.isEmpty()},this.size=function(){return r?r.size():n.size()}}Object.assign(Eo.prototype,yr.prototype);var So=Object.freeze({__proto__:null,importDbfTable:wo,ShapefileTable:Eo}),Io={NULL:0,POINT:1,POLYLINE:3,POLYGON:5,MULTIPOINT:8,POINTZ:11,POLYLINEZ:13,POLYGONZ:15,MULTIPOINTZ:18,POINTM:21,POLYLINEM:23,POLYGONM:25,MULIPOINTM:28,MULTIPATCH:31};function Co(t){return[Io.POLYGON,Io.POLYGONM,Io.POLYGONZ].includes(t)?"polygon":[Io.POLYLINE,Io.POLYLINEM,Io.POLYLINEZ].includes(t)?"polyline":[Io.POINT,Io.POINTM,Io.POINTZ,Io.MULTIPOINT,Io.MULTIPOINTM,Io.MULTIPOINTZ].includes(t)?"point":null}function No(t){return[0,1,3,5,8,11,13,15,18,21,23,25,28].includes(t)}Io.isPolygonType=function(t){return 5==t||15==t||25==t},Io.isPolylineType=function(t){return 3==t||13==t||23==t},Io.isMultiPartType=function(t){return Io.isPolygonType(t)||Io.isPolylineType(t)},Io.isMultiPointType=function(t){return 8==t||18==t||28==t},Io.isZType=function(t){return[11,13,15,18].includes(t)},Io.isMType=function(t){return Io.isZType(t)||[21,23,25,28].includes(t)},Io.hasBounds=function(t){return Io.isMultiPartType(t)||Io.isMultiPointType(t)};var Ao=Object.freeze({__proto__:null,translateShapefileType:Co,isSupportedShapefileType:No}),Oo=function(){return{isNull:!0,pointCount:0,partCount:0,byteLength:12}};function Po(t){var e,n=Io.hasBounds(t),r=Io.isMultiPartType(t),i=Io.isZType(t),o=Io.isMType(t),a=!n,s=a?0:16;if(0===t)return Oo;e=function(e,n){var i=e.position();if(this.id=e.bigEndian().readUint32(),this.type=e.littleEndian().skipBytes(4).readUint32(),0===this.type)return new Oo;(n>0!=!0||this.type!=t&&0!==this.type)&&re("Unable to read a shape -- .shp file may be corrupted"),this.byteLength=n,a?(this.pointCount=1,this.partCount=1):(e.skipBytes(32),this.partCount=r?e.readUint32():1,this.pointCount=e.readUint32()),this._data=function(){return e.position(i)}};var u={_xypos:function(){var t=12;return a||(t+=4),n&&(t+=32),r&&(t+=4*this.partCount+4),t},readCoords:function(){if(0===this.pointCount)return null;var t=this.readPartSizes(),e=this._data().skipBytes(this._xypos());return t.map((function(t){return e.readFloat64Array(2*t)}))},readXY:function(){return 0===this.pointCount?new Float64Array(0):this._data().skipBytes(this._xypos()).readFloat64Array(2*this.pointCount)},readPoints:function(){for(var t,e=this.readXY(),n=i?this.readZ():null,r=o&&this.hasM()?this.readM():null,a=[],s=0,u=e.length/2;s<u;s++)t=[e[2*s],e[2*s+1]],n&&t.push(n[s]),r&&t.push(r[s]),a.push(t);return a},readPartSizes:function(){var t,e,n,r=[];if(0===this.pointCount);else if(1==this.partCount)r.push(this.pointCount);else{e=0,n=this._data().skipBytes(56);for(var i=0,o=this.partCount;i<o;i++)(t=(i<o-1?n.readUint32():this.pointCount)-e)>0&&(r.push(t),e+=t)}return r}},c={read:function(){var t=2;return i&&t++,this.hasM()&&t++,this._data().skipBytes(12).readFloat64Array(t)},stream:function(t){var e=this._data().skipBytes(12);t.addPoint(e.readFloat64(),e.readFloat64()),t.endPath()}},l={readBounds:function(){return this._data().skipBytes(12).readFloat64Array(4)},stream:function(t){for(var e,n=this.readPartSizes(),r=this.readXY(),i=0,o=0;i<n.length;){for(e=n[i];e-- >0;)t.addPoint(r[o++],r[o++]);t.endPath(),i++}r.length!=o&&re("Counting error")},stream2:function(t){for(var e,n=this.readPartSizes(),r=this._data().skipBytes(this._xypos()),i=0;i<n.length;){for(e=n[i];e-- >0;)t.addPoint(r.readFloat64(),r.readFloat64());t.endPath(),i++}},read:function(){for(var t=[],e=this.readPartSizes(),n=this.readPoints(),r=0,i=e.length-1;r<i;r++)t.push(n.splice(0,e[r]));return t.push(n),t}},f={_mpos:function(){var t=this._xypos()+16*this.pointCount;return i&&(t+=8*this.pointCount+s),t},readMBounds:function(){return this.hasM()?this._data().skipBytes(this._mpos()).readFloat64Array(2):null},readM:function(){return this.hasM()?this._data().skipBytes(this._mpos()+s).readFloat64Array(this.pointCount):null},hasM:function(){var t=this._mpos(),e=t+8*this.pointCount+s;return this.byteLength!=t&&(this.byteLength==e||void re("#hasM() Counting error"))}},p={_zpos:function(){return this._xypos()+16*this.pointCount},readZBounds:function(){return this._data().skipBytes(this._zpos()).readFloat64Array(2)},readZ:function(){return this._data().skipBytes(this._zpos()+s).readFloat64Array(this.pointCount)}};return a?Object.assign(u,c):Object.assign(u,l),i&&Object.assign(u,p),o&&Object.assign(u,f),e.prototype=u,u.constructor=e,e}function To(t,e){return Mo(t).pathbase+"."+e}function Mo(t){var e,n={},r=function(t){return-1==t.indexOf("/")&&-1!=t.indexOf("\\")?"\\":"/"}(t),i=t.split(r);return 1==i.length?(n.filename=i[0],n.directory=""):(n.filename=i.pop(),n.directory=i.join(r)),(e=n.filename.lastIndexOf("."))>-1?(n.extension=n.filename.substr(e+1),n.basename=n.filename.substr(0,e),n.pathbase=t.substr(0,t.lastIndexOf("."))):(n.extension="",n.basename=n.filename,n.pathbase=t),n}function Lo(t){return Mo(t).basename}function Ro(t){return Mo(t).extension}function Do(t){return t.reduce((function(t,e,n){return t=0===n?Lo(e):a.mergeNames(t,e)}),"")}function Fo(t){var e=t.info&&t.info.input_files;return e&&Do(e)||"output"}var ko=Object.freeze({__proto__:null,replaceFileExtension:To,parseLocalPath:Mo,getFileBase:Lo,getFileExtension:Ro,getPathBase:function(t){return Mo(t).pathbase},getCommonFileBase:Do,getOutputFileBase:Fo}),jo={};function Bo(t,e){return Hn(t.readSync(0,Math.min(e||1e3,t.size())))}function Go(t){var e=0;this.position=function(){return e},this.remaining=function(){return Math.max(t.size()-e,0)},this.advance=function(t){e+=t},this.readSync=function(){return t.readSync(e)},this.expandBuffer=function(){t.expandBuffer()}}function Uo(t){var e,n,r=t.byteLength||t.length;function i(){return n||(n=t instanceof ArrayBuffer?a.createBuffer(t):t),n}this.readToBinArray=function(n,i){return r<n+i&&re("Out-of-range error"),e||(e=new Zi(t)),e.position(n),e},this.toString=function(t){return Hn(i(),t)},this.readSync=function(t,e){return i().slice(t,e||r)},this.findString=zo.prototype.findString,this.expandBuffer=function(){return this},this.size=function(){return r},this.close=function(){}}function zo(t,e){var r,i,o,s,u=n(16),c=u.statSync(t).size,l=e&&e.cacheSize||16777216,f=e&&e.bufferSize||262144;function p(e,n){var s,f,p=c-e;return(p<n||p<0)&&re("Tried to read past end-of-file"),!(o&&e>=i&&i+o.length>=e+n)&&(p<(f=Math.max(l,n))&&(f=p),o&&f==o.length||(o=a.createBuffer(f)),r||(r=u.openSync(t,"r")),s=u.readSync(r,o,0,f,e),i=e,s!=f&&re("Error reading file"),!0)}Yt("input_files").push(t),this.expandBuffer=function(){return 2*(f*=2)>l&&(l=2*f),this},this.readToBinArray=function(t,e){return p(t,e)&&(s=new Zi(o)),s.position(t-i),s},this.readSync=function(t,e){return e>0==!1&&(e=f),t+e>c&&(e=c-t),0===e?a.createBuffer(0):(p(t,e),o.slice(t-i,t-i+e))},this.size=function(){return c},this.toString=function(e){return jo.readFile(t,e||"utf8")},this.close=function(){r&&(u.closeSync(r),r=null,o=null)}}jo.isFile=function(t,e){if(e&&t in e)return!0;if(Vt())return!1;var n=jo.statSync(t);return n&&n.isFile()||!1},jo.isDirectory=function(t){if(Vt())return!1;var e=jo.statSync(t);return e&&e.isDirectory()||!1},jo.readFile=function(t,e,r){var i;return r&&t in r?(i=r[t],delete r[t]):"/dev/stdin"==t?i=n(144).readFileSync(t):(Yt("input_files").push(t),i=n(16).readFileSync(t)),e&&s.isBuffer(i)&&(i=Qn(Kn(i,e))),i},jo.createDirIfNeeded=function(t){var e=Mo(t).directory;if(e&&!jo.isDirectory(e))try{n(16).mkdirSync(e,{recursive:!0}),oe("Created output directory:",e)}catch(t){ie("Unable to create output directory:",e)}},jo.writeFile=function(t,e,r){var i=n(144);jo.createDirIfNeeded(t),r?i.writeFile(t,e,Wt(r)):i.writeFileSync(t,e)},jo.convertArrayBuffer=function(t){for(var e=new Uint8Array(t),n=a.createBuffer(e.length),r=0,i=e.length;r<i;r++)n[r]=e[r];return n},jo.expandFileName=function(t){var e=Mo(t),r=a.wildcardToRegExp(e.filename),i=e.directory||".",o=[];try{n(16).readdirSync(i).forEach((function(t){var e=n(37).join(i,t);r.test(t)&&jo.isFile(e)&&o.push(e)}))}catch(t){}return 0===o.length&&ie("No files matched ("+t+")"),o},jo.expandInputFiles=function(t){return t.reduce((function(t,e){return e.indexOf("*")>-1?t=t.concat(jo.expandFileName(e)):t.push(e),t}),[])},jo.validateOutputDir=function(t){jo.isDirectory(t)||Vt()||re("Output directory not found:",t)},jo.checkFileExists=function(t,e){jo.isFile(t,e)||"/dev/stdin"==t||ie("File not found ("+t+")")},jo.statSync=function(t){var e=null;try{e=n(16).statSync(t)}catch(t){}return e},zo.prototype.findString=function(t,e){var n,r=Math.min(this.size(),e||this.size()),i=this.readSync(0,r),o=t.length,a=i.length-o,s=t.charCodeAt(0);for(n=0;n<a;n++)if(i[n]==s&&i.toString("utf8",n,n+o)==t)return{offset:n+o,text:i.toString("utf8",0,n)};return null};var qo=Object.freeze({__proto__:null,readFirstChars:Bo,Reader2:Go,BufferReader:Uo,FileReader:zo});function Vo(t,e){if(this instanceof Vo==!1)return new Vo(t,e);var n,r,i,o,s,u=a.isString(t)?new zo(t):new Uo(t),c=function(t){var e={signature:t.bigEndian().readUint32(),byteLength:2*t.skipBytes(20).readUint32(),version:t.littleEndian().readUint32(),type:t.readUint32(),bounds:t.readFloat64Array(4),zbounds:t.readFloat64Array(2),mbounds:t.readFloat64Array(2)};9994!=e.signature&&re("Not a valid .shp file");No(e.type)||re("Unsupported .shp type:",e.type);e.byteLength!=u.size()&&re("File size of .shp doesn't match size in header");return e}(u.readToBinArray(0,100)),l=u.size(),f=new Po(c.type);function p(){n=100,i=0,r=0}function h(t){var e,r,i,o,a,s=null;return t+12<=l&&((a=u.readToBinArray(t,12)).bigEndian().readUint32(),e=2*a.readUint32()+8,r=a.littleEndian().readUint32(),i=t+e<=l&&e>=12,o=0===r||r==c.type,i&&o&&(a=u.readToBinArray(t,e),s=new f(a,e),n=t+s.byteLength)),s}e&&(s=a.isString(e)?new zo(e):new Uo(e),o=s.readToBinArray(0,s.size()).bigEndian()),p(),this.header=function(){return c},this.forEachShape=function(t){for(var e=this.nextShape();e;)t(e),e=this.nextShape()},this.nextShape=function(){var t=function t(){var e,a,f=r+1;if(s&&s.size()<=100+8*r||n+12>l)return null;o?(o.position(100+8*r),(a=2*o.readUint32())>n&&(i+=a-n)):a=n;(e=h(a))||(e=function(t,e){var n,r,o,a=t+4,s=null;for(;a+12<=l;){if(n=u.readToBinArray(a,12),r=n.bigEndian().readUint32(),o=n.littleEndian().skipBytes(4).readUint32(),r==e&&(o==c.type||0===o)){s=h(a);break}a+=4}return i+=s?a-t:l-t,s}(a,f));if(e){if(e.id<f)return oe("Found a Shapefile record with the same id as a previous record ("+e.id+") -- skipping."),t();e.id>f&&ie("Shapefile contains an out-of-sequence record. Possible data corruption -- bailing."),r++}return e||null}();return t||(i>0&&se("Skipped over "+i+" non-data bytes in the .shp file."),u.close(),p()),t}}Vo.prototype.type=function(){return this.header().type},Vo.prototype.getCounts=function(){var t={nullCount:0,partCount:0,shapeCount:0,pointCount:0};return this.forEachShape((function(e){e.isNull&&t.nullCount++,t.pointCount+=e.pointCount,t.partCount+=e.partCount,t.shapeCount++})),t};var Yo={m:"meters",meter:"meters",meters:"meters",mi:"miles",mile:"miles",miles:"miles",km:"kilometers",ft:"feet",feet:"feet"},Xo={meters:1,kilometers:1e3,feet:.3048,miles:1609.344};function Jo(t,e){var n,r=0,i=0;return e&&(e.is_latlong?i=1:e.to_meter>0?i=e.to_meter:re("Invalid CRS")),t&&((r=Xo[t])||re("Unknown units:",t)),r&&i?n=r/i:r||i?r&&!i?ie("Unable to convert",t,"to unknown coordinates"):!r&&i&&(n=1/i):n=1,n}function Wo(t){var e=Ho(t);return isNaN(e.value)&&ie("Invalid parameter:",t),e}function Ho(t){var e=a.isString(t)?t:"",n=/(sq|)([a-z]+)(2|)$/i.exec(e),r={};return a.isNumber(t)?r.value=t:""===e?r.value=NaN:n?(r.units=Yo[n[2].toLowerCase()],r.areal=!(!n[1]&&!n[3]),r.value=Number(e.substring(0,e.length-n[0].length)),r.units||isNaN(r.value)||ie("Unknown units: "+n[0])):r.value=Number(e),r}function $o(t,e){var n=Wo(t),r=Jo(n.units,e);return n.value*r*r}function Ko(t,e){var n=Wo(t),r=Jo(n.units,e);return n.areal&&ie("Expected a distance, received an area:",t),n.value*r}function Zo(t,e){var n=Wo(t),r=Jo(n.units,e);return n.units&&e&&e.is_latlong&&ie("Parameter does not support distance units with latlong datasets"),n.areal&&ie("Expected a distance, received an area:",t),n.value*r}function Qo(t,e){var n,r;return Array.isArray(t)&&2==t.length||ie("Expected two distance parameters, received",t),n=Wo(t[0]),r=Wo(t[1]),(n.units&&!r.units||r.units&&!n.units)&&ie("Both parameters should have units:",t),[Zo(t[0],e),Zo(t[1],e)]}function ta(t,e,n){var r=t.split(",");return 1==r.length?r=[r[0],r[0],r[0],r[0]]:4!=r.length&&ie("Expected a distance parameter or a list of four params"),r.map((function(r,i){return r.indexOf("%")>0?(parseFloat(r)/100||0)*(1==i||3==i?n.height():n.width()):Zo(t,e)}))}function ea(t,e){var n=e&&e.to_meter?t*e.to_meter*e.to_meter:t,r=n/1e6;return r<.01?Math.round(n)+" sqm":r+" sqkm"}var na=Object.freeze({__proto__:null,getIntervalConversionFactor:Jo,parseMeasure:Wo,parseMeasure2:Ho,convertAreaParam:$o,convertDistanceParam:Ko,convertIntervalParam:Zo,convertIntervalPair:Qo,convertFourSides:ta,getAreaLabel:ea});function ra(t){var e=new Uint8Array(t);this.setId=function(t){t<0?e[~t]|=2:e[t]|=1},this.hasId=function(t){return t<0?2==(2&e[~t]):1==(1&e[t])},this.clearId=function(t){t<0?e[~t]&=1:e[t]&=2},this.clearIds=function(t){for(var e=0;e<t.length;e++)this.clearId(t[e])},this.setIds=function(t){for(var e=0;e<t.length;e++)this.setId(t[e])}}function ia(t,e,n){for(var r=0,i=t.length;r<i;r++)t[r]=oa(t[r],e,n)}function oa(t,e,n){return kn(t,(function(t){var r=function(t,e){for(var n=0,r=0,i=t.length;r<i;r++)e.arcIsDegenerate(t[r])&&(n++,t[r]=null);return n>0?t.filter((function(t){return null!==t})):t}(t,e);return"polygon"==n&&r&&(aa(r),0===yn.getPlanarPathArea(r,e)&&(r=null)),r}))}function aa(t){var e=t.length;if(e>=2){if(t[0]==~t[e-1])t.pop(),t.shift();else for(var n=1;n<e;n++)if(t[n-1]==~t[n]){t.splice(n-1,2);break}t.length<e&&aa(t)}}function sa(t){var e=new ra(t.arcs.size()),n=function(t){return e.hasId(~t)};return function(t){e.setIds(t);var n=r(t);return e.clearIds(t),n};function r(t){for(var e=null,n=0,r=t.length;n<r-1;n++)if(null!==(e=i(t,t[n])))return e;return aa(t),t.length>0?[t]:[]}function i(r,i){var s,u,c,l=t.getConnectedArcs(i,n);if(l.length<2)return null;s=[];for(var f=0;f<l.length;f++)(c=a(r,u=~l[f]))>-1&&(e.clearId(u),s.push(c));return s.length<2?null:ua(r,s).reduce(o,null)}function o(t,e){var n=r(e);return null===t?n:(t.push.apply(t,n),t)}function a(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}}function ua(t,e){var n=[];a.genericSort(e,!0),e[0]>0&&n.push(t.slice(0,e[0]));for(var r=0,i=e.length;r<i;r++)r<i-1?n.push(t.slice(e[r],e[r+1])):n.push(t.slice(e[r]));return n.length>e.length&&a.merge(n[0],n.pop()),n}var ca=Object.freeze({__proto__:null,cleanShapes:ia,removeSpikesInPath:aa,getSelfIntersectionSplitter:sa,splitPathByIds:ua});function la(t,e){return t.map((function(t){return t.toFixed(e)})).join(",")}function fa(t,e){var n=pa(e);return bi(t,(function(t,e){return[n(t),n(e)]})),t}function pa(t){a.isNumber(t)&&0!==t||re("Rounding increment must be a non-zero number.");var e=1/t;return e>1&&(e=Math.round(e)),function(t){return Math.round(t*e)/e}}function ha(t,e){return+t.toPrecision(e)}var da=Object.freeze({__proto__:null,getBoundsPrecisionForDisplay:function(t){for(var e=t[2]-t[0],n=t[3]-t[1],r=Math.min(e,n)+1e-8,i=0;r<2e3;)r*=10,i++;return i},getRoundedCoordString:la,getRoundedCoords:function(t,e){return la(t,e).split(",").map(parseFloat)},roundPoints:function(t,e){be(t.shapes,(function(t){t[0]=e(t[0]),t[1]=e(t[1])}))},setCoordinatePrecision:fa,getRoundingFunction:pa,roundToSignificantDigits:ha});function ga(t,e){var n,r=t.arcs;(e.snap||e.auto_snap||e.snap_interval)&&(e.snap_interval&&(n=Zo(e.snap_interval,Ui(t))),r&&on(r,n)),t.layers.forEach((function(t){br(t)&&ia(t.shapes,r,t.geometry_type)}))}function ya(t){return t[0]>-1e38&&t[1]>-1e38}function ma(t){var e=1e4,n=new Float64Array(e),r=new Float64Array(e),i=0;this.endPath=function(){t(n,r,i),i=0},this.addPoint=function(t,o){i>=e&&(e=Math.ceil(1.3*e),n=a.extendBuffer(n,e),r=a.extendBuffer(r,e)),n[i]=t,r[i]=o,i++}}function va(t){var e=t.reserved_points>0?t.reserved_points:2e4,n=new Float64Array(e),r=new Float64Array(e),i=[],o=[],s=[],u=[],c=t.type||null,l=null,f=-1,p=-1,h=0,d=0,g=0;function y(t){var e=p<u.length?u[p]:null;e?e!=t&&ie("Unable to import mixed-geometry GeoJSON features"):(u[p]=t,c?t!=c&&(c="mixed"):c=t)}function m(t){if(t>n.length){var e=Math.max(t,Math.ceil(1.5*n.length));n=a.extendBuffer(n,e,h),r=a.extendBuffer(r,e,h)}}function v(t){(i[p]||(i[p]=[])).push(t)}t.precision&&(l=pa(t.precision)),a.extend(this,new ma((function(t,e,i){var o,a,u,p,y=0;m(h+i);for(var _=0;_<i;_++)o=t[_],a=e[_],l&&(o=l(o),a=l(a)),_>0&&o==u&&a==p?d++:(n[h]=o,r[h]=a,h++,y++),p=a,u=o;"polygon"==c&&y>0&&(t[0]==t[i-1]&&e[0]==e[i-1]||(m(h+1),n[h]=t[0],r[h]=e[0],g++,h++,y++));!function(t){f++,s[f]=t,v([f])}(y)}))),this.startShape=function(t){i[++p]=null,t&&(o[p]=t)},this.importLine=function(t){t.length<2?se("Skipping a defective line"):(y("polyline"),this.importPath(t))},this.importPoints=function(t){y("point"),t=t.filter(ya),l&&t.forEach((function(t){t[0]=l(t[0]),t[1]=l(t[1])})),t.forEach(v)},this.importRing=function(t,e){var n=yn.getPlanarPathArea2(t);!n||t.length<4?se("Skipping a defective ring"):(y("polygon"),(!0===e&&n>0||!1===e&&n<0)&&t.reverse(),this.importPath(t))},this.importPath=function(t){for(var e,n=0,r=t.length;n<r;n++)e=t[n],this.addPoint(e[0],e[1]);this.endPath()},this.done=function(){var t,e,l={name:""};return d>0&&se(a.format("Removed %,d duplicate point%s",d,a.pluralSuffix(d))),g>0&&oe(a.format("Closed %,d open polygon ring%s",g,a.pluralSuffix(g))),h>0&&(h<n.length&&(n=n.subarray(0,h),r=r.subarray(0,h)),t=new ii(s,n,r)),"mixed"==c?e=Mr(i,o,u):(l={geometry_type:c},c&&(l.shapes=i),o.length>0&&(l.data=new yr(o)),e=[l]),e.forEach((function(t){t.data&&ir(t.data.getRecords())})),{arcs:t||null,info:{},layers:e}}}var _a=Object.freeze({__proto__:null,cleanPathsAfterImport:ga,pointHasValidCoords:ya,PathImporter:va});function ba(t,e,n){var r=new Vo(t,e),i=r.type(),o=Co(i),s=new va(a.defaults({type:o,reserved_points:Math.round(r.header().byteLength/16)},n));return No(i)||ie("Unsupported Shapefile type:",i),Io.isZType(i)?oe("Warning: Shapefile Z data will be lost."):Io.isMType(i)&&oe("Warning: Shapefile M data will be lost."),r.forEachShape((function(t){s.startShape(),t.isNull||("point"==o?s.importPoints(t.readPoints()):t.stream(s))})),s.done()}var xa=Object.freeze({__proto__:null,importShp:ba});function wa(t){var e=Ro(t||"").toLowerCase(),n=null;return"dbf"==e||"shp"==e||"prj"==e||"shx"==e?n=e:/json$/.test(e)?n="json":"csv"!=e&&"tsv"!=e&&"txt"!=e&&"tab"!=e||(n="text"),n}function Ea(t){var e=null;return a.isString(t)?e=Ia(t)?"json":"text":(a.isObject(t)&&t.type||a.isArray(t))&&(e="json"),e}function Sa(t,e){return wa(t)||Ea(e)}function Ia(t){return/^\s*[{[]/.test(String(t))}function Ca(t){var e=Ro(t).toLowerCase();return/csv|tsv|txt$/.test(e)}function Na(t){return["geojson","topojson","json","dsv","dbf","shapefile","svg"].indexOf(t)>-1}function Aa(t){var e=Ro(t).toLowerCase();return"shp"==e||"shx"==e||"dbf"==e}function Oa(t){return/\.(shx|prj|xls|xlsx|gdb|sbn|sbx|xml|kml)$/i.test(t)}var Pa=Object.freeze({__proto__:null,guessInputFileType:wa,guessInputContentType:Ea,guessInputType:Sa,stringLooksLikeJSON:Ia,couldBeDsvFile:Ca,isZipFile:function(t){return/\.zip$/i.test(t)},isSupportedOutputFormat:Na,getFormatName:function(t){return{geojson:"GeoJSON",topojson:"TopoJSON",json:"JSON records",dsv:"CSV",dbf:"DBF",shapefile:"Shapefile",svg:"SVG"}[t]||""},isSupportedBinaryInputType:Aa,filenameIsUnsupportedOutputType:Oa});var Ta={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Ma=/^rgba?\(([^)]+)\)/,La=/^#([a-f0-9]{3,8})/i;function Ra(t){t=t?String(t):"";var e,n,r=La.test(t)?t:Ta[t.toLowerCase().replace(/[ -]+/g,"")],i=null;return r?i=function(t){var e=La.exec(t)[1];3!=e.length&&4!=e.length||(e=e.split("").map((function(t){return t+t})));return 6!=e.length&&8!=e.length?null:{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:8==e.length?parseInt(e.substr(7,2),16)/255:1}}(r):Ma.test(t)&&(i=function(t){var e=Ma.exec(t)[1].split(",").map((function(t){return parseFloat(t)}));return{r:e[0],g:e[1],b:e[2],a:e[3]>=0?e[3]:1}}(t)),(e=i)&&Da(e.r)&&Da(e.g)&&Da(e.b)&&((n=e.a)>=0&&n<=1)||ie("Unsupported color:",t),i}function Da(t){return t>=0&&t<256}function Fa(t){return t.a<1?function(t){var e=ka(t.r)+","+ka(t.g)+","+ka(t.b);return t.a<1?"rgba("+e+","+(n=t.a,n=+n||0,n=Math.round(1e3*n)/1e3,a.clamp(n,0,1)+")"):"rgb("+e+")";var n}(t):function(t){return"#"+ja(t.r)+ja(t.g)+ja(t.b)}(t)}function ka(t){return Math.round(a.clamp(+t||0,0,255))}function ja(t){return ka(t).toString(16).padStart(2,"0")}function Ba(){var t,e=Array.from(arguments),n=[],r=[];for(t=0;t<e.length;t+=2)n.push(Ra(e[t])),r.push(+e[t+1]||0);if(!(r=Ga(r)))return"#eee";var i=n.reduce((function(t,e,n){var i=r[n];return t.r+=e.r*i,t.g+=e.g*i,t.b+=e.b*i,t}),{r:0,g:0,b:0});return Fa(i)}function Ga(t){var e=a.sum(t);return e>0==!1?null:t.map((function(t){return t/e}))}function Ua(t,e){Object.keys(e).forEach((function(n){var r=e[n],i="function"==typeof r?{get:r}:{value:r,writable:!1};Object.defineProperty(t,n,i)}))}function za(t,e,n){if(!t||!n)return null;var r=[],i=[],o=[],a=[];return t.forEach((function(t){for(var s=qa(t,e,n,r,i);s<4&&s>0;)r.pop(),i.pop(),s--;s>0&&(a.push([o.length]),o.push(s))})),{shape:a.length>0?a:null,arcs:new ii(o,r,i)}}function qa(t,e,n,r,i){for(var o,a,s,u,c=e.getShapeIter(t),l=0;c.hasNext();)s=c.x,u=c.y,(0===l||yn.distance2D(s,u,o,a)>n)&&(r.push(s),i.push(u),o=s,a=u,l++);return s==o&&u==a||(r.push(s),i.push(u),l++),l}var Va=Object.freeze({__proto__:null,simplifyArcsFast:function(t,e){for(var n,r=[],i=[],o=[],a=0,s=t.size();a<s;a++)1==(n=qa([a],t,e,r,i))&&(n=0,r.pop(),i.pop()),o.push(n);return new ii(o,r,i)},simplifyPolygonFast:za});function Ya(t,e){var n,r=t&&yn.getMaxPath(t,e),i=r&&e.getSimpleShapeBounds(r);return i&&i.hasBounds()&&0!==i.area()&&(n=za(t,e,.01*Math.sqrt(i.area()))).shape?function(t,e){var n,r,i,o,a,s,u,c=yn.getMaxPath(t,e),l=e.getSimpleShapeBounds(c),f=yn.getPathCentroid(c,e),p=function(t,e){var n=Math.max(e.width(),e.height())/2;return function(e,r){var i=yn.distance2D(t.x,t.y,e,r);return 1-Math.min(.6*i/n,.25)}}(f,l),h=yn.getPlanarPathArea(c,e);1==t.length&&1.2*h>l.area()?(o=5,i=.2):1==t.length&&1.7*h>l.area()?(o=7,i=.4):(o=11,i=.5);n=l.width()*i,r=f.x-n/2,a=n/o,(s=Ja(t,e,r,r+n,o,p))?(u=Ja(t,e,s.x-a/2,s.x+a/2,2,p)).distance>s.distance&&(s=u):(se("[points inner] failed, falling back to centroid"),s=f);return s}(n.shape,n.arcs):null}function Xa(t,e,n){var r=e.getBounds().ymin-1;return n.reduce((function(n,i){var o=function(t,e,n,r){var i,o,s,u=function(t,e,n,r){return n?n.reduce((function(n,i){var o=function(t,e,n,r){var i=[];Nn(n,r,(function(n,r,o,a){var s=yn.getRayIntersection(t,e,o[n],a[n],o[r],a[r]);s>-1/0&&i.push(s)})),i.length%2==1&&(i=[]);return i}(t,e,i,r);return n.concat(o)}),[]):[]}(t,e,n,r),c=[];a.genericSort(u);for(var l=0;l<u.length;l+=2)i=u[l],o=u[l+1],(s=(o-i)/2)>0&&c.push({y:(i+o)/2,x:t,interval:s});return c}(i,r,t,e);return n.concat(o)}),[])}function Ja(t,e,n,r,i,o){var a,s,u,c=(r-n)/i,l=Xa(t,e,function(t,e,n){for(var r=(e-t)/(n+1),i=[],o=1;o<=n;o++)i.push(t+r*o);return i}(n,r,i));l.forEach((function(t){t.interval*=o(t.x,t.y)})),l.sort((function(t,e){return e.interval-t.interval}));for(var f=0;f<l.length&&(u=l[f],!(a&&a.distance>u.interval));f++)s=Wa(u.x,u.y,t,e,c,o),(!a||s.distance>a.distance)&&(a=s);return a}function Wa(t,e,n,r,i,o){var a={x:t,y:e,distance:yn.getPointToShapeDistance(t,e,n,r)*o(t,e)};return Ha(a,n,r,i,o),Ha(a,n,r,-i,o),a}function Ha(t,e,n,r,i){for(var o,a=t.x,s=t.y,u=t.distance;s+=r,(o=yn.getPointToShapeDistance(a,s,e,n)*i(a,s))>.9*u&&yn.testPointInPolygon(a,s,e,n);)o>u&&(t.distance=u=o,t.y=s)}var $a=Object.freeze({__proto__:null,findAnchorPoint:Ya});function Ka(t,e){var n=new Uint8Array(t.size());In(e,(function(t){t<0?n[~t]|=2:n[t]|=1})),this.isInnerArc=function(t){var e=we(t);return 3==n[e]}}function Za(t,e,n){var r;Ua(t,{bbox:function(){return r||(r=function(t,e){var n=Br(t,e);if(!n)return null;var r=n.toArray();return Object.assign(r,{cx:n.centerX(),cy:n.centerY(),height:n.height(),width:n.width(),left:n.xmin,bottom:n.ymin,top:n.ymax,right:n.xmax}),r}(e,n)),r}})}function Qa(t,e,n){var r;return Ua(t,{layer_name:e.name||"",layer:function(){return r||(r=function(t,e){var n={},r=t.data?t.data.getRecords():null;return Ua(n,{name:t.name,data:r}),Za(n,t,e),n}(e,n)),r}}),t}function ts(t,e){var n,r,i,o,s,u,c,l=xr(t),f=e&&br(t),p=t.data?t.data.getRecords():null,h=f&&e.isPlanar(),d={};function g(){var e=t.shapes[c];s||(s=e&&e[0]||null)}function y(){return i=i||yn.getShapeCentroid(u,e)}function m(){return o=o||Ya(u,e)}function v(){return r||(r=e.getMultiShapeBounds(u)),r}return Ua(d,{id:function(){return c}}),Qa(d,t,e),p&&Object.defineProperty(d,"properties",{set:function(t){a.isObject(t)?p[c]=t:ie("Can't assign non-object to $.properties")},get:function(){var t=p[c];return t||(t=p[c]={}),t}}),f?(Ua(d,{partCount:function(){return u?u.length:0},isNull:function(){return 0===d.partCount},bounds:function(){return v().toArray()},height:function(){return v().height()},width:function(){return v().width()}}),"polyline"==t.geometry_type&&Ua(d,{length:function(){return yn.getShapePerimeter(u,e)}}),"polygon"==t.geometry_type&&Ua(d,{area:function(){return h?d.planarArea:yn.getSphericalShapeArea(u,e)},perimeter:function(){return yn.getShapePerimeter(u,e)},compactness:function(){return yn.calcPolsbyPopperCompactness(d.area,d.perimeter)},planarArea:function(){return yn.getPlanarShapeArea(u,e)},innerPct:function(){return n||(n=function(t,e){var n,r,i,o=t.isPlanar()?yn.distance2D:yn.greatCircleDistance,a=new Ka(t,e);return function(t){return n=0,r=0,t&&t.forEach(s),r>0?r/(r+n):0};function s(t){t.forEach(u)}function u(e){i=0,t.forEachArcSegment(e,c),a.isInnerArc(e)?r+=i:n+=i}function c(t,e,n,r){i+=o(n[t],r[t],n[e],r[e])}}(e,t.shapes)),n(u)},originalArea:function(){var t,n=e.getRetainedInterval();return e.setRetainedInterval(0),t=d.area,e.setRetainedInterval(n),t},centroidX:function(){var t=y();return t?t.x:null},centroidY:function(){var t=y();return t?t.y:null},innerX:function(){var t=m();return t?t.x:null},innerY:function(){var t=m();return t?t.y:null}})):l&&(Object.defineProperty(d,"coordinates",{set:function(e){!e||a.isArray(e)?t.shapes[c]=e||null:ie("Can't assign non-array to $.coordinates")},get:function(){return t.shapes[c]||null}}),Object.defineProperty(d,"x",{get:function(){return g(),s?s[0]:null},set:function(t){g(),s&&(s[0]=Number(t))}}),Object.defineProperty(d,"y",{get:function(){return g(),s?s[1]:null},set:function(t){g(),s&&(s[1]=Number(t))}})),function(e){return c=e,f&&(r=null,i=null,o=null,u=t.shapes[e]),l&&(s=null),d}}function es(t,e,n,r){return(r=r||{}).returns=!0,os(t,e,n,r)}function ns(t){return t.replace(/\\\n/g," ")}function rs(t,e,n){var r=is(t,e,n);return function(t,e){var n=r(t,e);return!0!==n&&!1!==n&&ie("where expression must return true or false"),n}}function is(t,e,n){var r,i=ns(t),o=cs({}),a=l(e,n),s=l(e,n),u=as(i),c="with($$env){with($$record){return "+i+"}}";try{r=new Function("$$record,$$env",c)}catch(t){console.error(t),ie(t.name,"in expression ["+i+"]")}function l(t,e){var n=t.data?t.data.getRecords():[],r=ts(t,e);function i(){}return function(t){var e;return-1==t?null:(i.prototype=n[t]||{},(e=new i).$=r(t),e)}}return us(u,o),function(t,e,n){var c;o.A=a(t),o.B=s(e),n&&us(u,n);try{c=r.call(o,n||{},o)}catch(t){ie(t.name,"in expression ["+i+"]:",t.message)}return c}}function os(t,e,n,r){var i,o,s=a.extend({},r),u=ns(t||""),c=!s.no_assign,l=as(u);return c&&l.length>0&&!e.data&&Gr(e),c||(s.context=s.context||{},us(l,s.context)),o=e.data?e.data.getRecords():[],i=function(t,e,n,r){var i=ts(e,n),o=Qa({},e,n),a=cs(e,r.context,r),s=ss(t,r);return function(e,n){var r;a.$=n>=0?i(n):o,a._=a,a.d=e||null;try{r=s.call(a.$,e,a)}catch(e){ie(e.name,"in expression ["+t+"]:",e.message)}return r}}(u,e,n,s),function(t,e){var n;return n=e||(o[t]||(o[t]={})),c&&us(l,n),i(n,t)}}function as(t,e){var n=t.match(/[a-z_][.a-z0-9_]*(?= *=[^>=])/gi)||[];return a.uniq(n.filter((function(t){var n=t.indexOf(".");return e?n>-1:-1==n})))}function ss(t,e){var n,r="with($$env){with($$record){ "+(e.returns?"return ":"")+t+"}}";try{n=new Function("$$record,$$env",r)}catch(e){ie(e.name,"in expression ["+t+"]")}return n}function us(t,e){for(var n=0;n<t.length;n++)t[n]in e==!1&&(e[t[n]]=null)}function cs(t,e,n){var r=ls(),i={},o=t.data?t.data.getFields():[];return n=n||{},function(t){Object.assign(t,{round:function(t,e){var n=1;for(e|=0;e-- >0;)n*=10;return Math.round(t*n)/n},sprintf:a.format,blend:Ba})}(r),t.data&&us(o,r),e&&Object.keys(e).forEach((function(t){var n=Object.getOwnPropertyDescriptor(e,t);n.get?Object.defineProperty(i,t,{get:n.get}):Object.defineProperty(i,t,{value:e[t]})})),Object.keys(r).reduce((function(t,e){return e in t?n.no_warn||("function"==typeof t[e]&&o.indexOf(e)>-1?oe("Warning: "+e+"() function is hiding a data field with the same name"):oe('Warning: "'+e+'" has multiple definitions')):Object.defineProperty(t,e,{value:r[e]}),t}),i)}function ls(){var t={globalThis:void 0};return function(){for(var e in this)t[e]=void 0}(),t.console=console,t}var fs=Object.freeze({__proto__:null,compileValueExpression:es,cleanExpression:ns,compileFeaturePairFilterExpression:rs,compileFeaturePairExpression:is,compileFeatureExpression:os,getAssignedVars:as,getAssignmentObjects:function(t){var e=as(t,!0),n=[];return e.forEach((function(t){var e=/^([^.]+)\.[^.]+$/.exec(t),r=e?e[1]:null;r&&"this"!=r&&n.push(r)})),a.uniq(n)},compileExpressionToFunction:ss,getBaseContext:ls});function ps(t,e,n){var r,i,o=new Go(t),a=n||{},s=ys(vs(o,function(t){var e=t.csv_skip_lines||0;t.csv_field_names||e++;return e}(a),a.encoding),e,a),u=gs(s.import_fields),c=a.batch_size||1e3,l=[];if(0===s.import_fields.length)return[];for(;r=vs(o,c,a.encoding);)if(i=bs(r,e,u,s.column_filter||!1,s.row_filter||!1),l.push.apply(l,i),a.csv_lines&&l.length>=a.csv_lines)return l.slice(0,a.csv_lines);return l}function hs(t,e,n){var r=ys(t,e,n);if(0===r.import_fields.length||!r.remainder)return[];var i=gs(r.import_fields),o=bs(r.remainder,e,i,r.column_filter,r.row_filter);return n.csv_lines>0&&(o=o.slice(0,n.csv_lines)),o}function ds(t,e){var n=/\r\n|[\r\n]|.$/g,r=1;if(1===e)return 0;if(e>1==!1)return-1;for(;n.exec(t);)if(++r<e==!1)return n.lastIndex;return-1}function gs(t){return new Function("arr","return {"+t.map((function(t,e){return JSON.stringify(t)+": arr["+e+'] || ""'})).join(",")+"}")}function ys(t,e,n){var r,i,o,s,u={headers:[],import_fields:[]},c={};if(t=t||"",n.csv_skip_lines>0){if(-1===(r=ds(t,n.csv_skip_lines+1)))return u;t=t.substr(r)}if(n.csv_field_names)c.headers=n.csv_field_names;else{if(-1===(r=ds(t,2)))return u;c.headers=bs(t.slice(0,r),e)[0],t=t.substr(r)}return n.csv_dedup_fields&&(c.headers=a.uniqifyNames(c.headers)),n.csv_filter&&(c.row_filter=(i=n.csv_filter,o=ss(i,{returns:!0}),s=ls(),function(t){var e;try{e=o.call(null,t,s)}catch(t){ie(t.name,"in expression ["+i+"]:",t.message)}return!0!==e&&!1!==e&&ie("Filter expression must return true or false"),e})),n.csv_fields?(c.column_filter=ms(c.headers,n.csv_fields),c.import_fields=c.headers.filter((function(t,e){return c.column_filter(e)}))):c.import_fields=c.headers,c.remainder=t,c}function ms(t,e){var n=a.arrayToIndex(e),r=t.map((function(t){return t in n})),i=a.difference(e,t);if(i.length>0){var o=[""].concat(t).join("\n  "),s=[""].concat(i).join("\n  ");ie("csv-fields option has",1==i.length?"a name":i.length+" names","not found in the file\nFields:",o,"\nMissing:",s)}return function(t){return r[t]}}function vs(t,e,n){var r,i=t.readSync(),o=_s(i,e);return o.bytesRead==i.length&&o.bytesRead<t.remaining()?(t.expandBuffer(),vs(t,e,n)):(r=o.bytesRead>0?Kn(o.buffer,n):"",0===t.position()&&(r=Qn(r)),t.advance(o.bytesRead),r)}function _s(t,e){var n,r,i=!1,o=0,a=t.length;for(o++,n=0;n<a&&o<=e;n++)34==(r=t[n])?i=!i:13!=r&&10!=r||(13==r&&n+1<a&&10==t[n+1]&&n++,o++);return{bytesRead:n,buffer:t.slice(0,n)}}function bs(t,e,n,r,i){var o,a,s,u,c,l=e.charCodeAt(0),f=!1,p=!1,h=-1,d=[];function g(){var t=n?n(c):c;i&&!i(t)||d.push(t),h=-1}function y(t){o=t,0===++h&&(c=[]),r&&!r(h)||(p=!0)}function m(e,n){var r;p&&(p=!1,r=e===n?"":34==t.charCodeAt(e)?t.slice(e+1,n-1).replace(/""/g,'"'):t.slice(e,n),c.push(r))}for(n||(n=function(t){return t}),y(0),a=0,u=t.length;a<u;a++)34==(s=t.charCodeAt(a))?f=!f:f||(s==l?(m(o,a),y(a+1)):13!=s&&10!=s||(m(o,a),g(),13==s&&10==t.charCodeAt(a+1)&&a++,a+1<u&&y(a+1)));return h>-1&&(p&&m(o,a),g()),d}var xs=Object.freeze({__proto__:null,readDelimRecords:ps,readDelimRecordsFromString:hs,indexOfLine:ds,getRowConverter:gs,parseDelimHeaderSection:ys,getDelimFieldFilter:ms,parseDelimText:bs});function ws(t,e){var n,r,i,o,u,c,l,f=!t.content&&""!==t.content,p=t.content;return e=e||{},f?n=new zo(t.filename):p instanceof ArrayBuffer||p instanceof s?(n=new Uo(p),p=null):a.isString(p)||re("Unexpected object type"),n&&(c=n.readSync(0,Math.min(n.size(),3)),"utf16be"==(u=(l=c.length)>=2&&254==c[0]&&255==c[1]?"utf16be":l>=2&&255==c[0]&&254==c[1]?"utf16le":l>=3&&239==c[0]&&187==c[1]&&191==c[2]?"utf8":"")||"utf16le"==u?(p=Qn(n.toString(u)),n=null):e.encoding&&!Jn(e.encoding)&&(p=n.toString(e.encoding),n=null)),0===(r=n?ps(n,i=Is(Bo(n,2e3)),e):hs(p,i=Is(p),e)).length&&oe("Unable to read any data records"),Ns(r,e),sr(o=new yr(r),ur),{layers:[{data:o}],info:{input_delimiter:i}}}var Es=["|","\t",",",";"];function Ss(t){return a.contains(Es,t)}function Is(t){return a.find(Es,(function(e){return function(t){var e="^[^\\n\\r]+"+a.regexEscape(t);return new RegExp(e)}(e).test(t)}))||","}function Cs(t){var e={};return(t=t||{}).string_fields&&t.string_fields.forEach((function(t){e[t]="string"})),t.field_types&&t.field_types.forEach((function(t){var n,r,i;-1!=t.indexOf(":")?(r=(n=t.split(":"))[0],i=function(t){var e=t.toLowerCase(),n=null;"n"==e[0]?n="number":"s"==e[0]&&(n="string");return n}(n[1])):"+"===t[0]&&(r=t.substr(1),i="number"),i?e[r]=i:oe("Invalid type hint (expected :str or :num) ["+t+"]")})),e}function Ns(t,e){var n=Cs(e),r=n["*"],i=Object.keys(t[0]||[]),o=[],s={};i.forEach((function(e){var i=n[e],u=null;"number"==i||"number"==r?u=function(t,e,n){for(var r=[],i=0,o=e.length;i<o;i++)r.push(n(e[i][t]));return r}(e,t,a.parseNumber):"string"==i||"string"==r?u=null:(u=function(t,e){for(var n,r,i,o=[],s=0,u=0,c=e.length;u<c;u++){if(n=e[u][t],null===(i=a.parseNumber(n))){if((r=n?n.trim():"").length>0&&"NA"!=r&&"NaN"!=r)return null}else s++;o.push(i)}return s>0?o:null}(e,t))&&o.push(e),u&&(s[e]=u)})),Object.keys(s).length>0&&function(t,e,n){var r="return {"+t.map((function(t){var e=JSON.stringify(t);return e+": "+(n[t]?"replacements["+e+"][i]":"rec["+e+"]")})).join(", ")+"}",i=new Function("rec","replacements","i",r);e.forEach((function(t,r){e[r]=i(t,n,r)}))}(i,t,s),o.length>0&&oe(a.format("Auto-detected number field%s: %s",1==o.length?"":"s",o.join(", ")))}var As=Object.freeze({__proto__:null,importDelim:function(t,e){return ws({content:t},e)},importDelim2:ws,isSupportedDelimiter:Ss,guessDelimiter:Is,getFieldTypeHints:Cs,adjustRecordTypes:Ns}),Os={};function Ps(t){var e=t.id_field||Os.ID_FIELD,n=new va(t);this.parseObject=function(r){var i,o;r&&r.type?"Feature"==r.type?(i=r.geometry,o=r.properties||{},"id"in r&&(o[e]=r.id)):i=r:i=null,n.startShape(o),i&&Os.importGeometry(i,n,t)},this.done=function(){return n.done()}}function Ts(t,e){var n,r,i=e||{},o=Object.keys(Os.pathImporters),s=a.isString(t)?JSON.parse(t):t,u=new Ps(i);return((n="Feature"==s.type?{type:"FeatureCollection",features:[s]}:o.includes(s.type)?{type:"GeometryCollection",geometries:[s]}:s).features||n.geometries||[]).forEach(u.parseObject),Ms(r=u.done(),s),r}function Ms(t,e){"crs"in e&&(t.info.input_geojson_crs=e.crs)}Os.ID_FIELD="FID",Os.typeLookup={LineString:"polyline",MultiLineString:"polyline",Polygon:"polygon",MultiPolygon:"polygon",Point:"point",MultiPoint:"point"},Os.translateGeoJSONType=function(t){return Os.typeLookup[t]||null},Os.pathIsRing=function(t){var e=t[0],n=t[t.length-1];return t.length>=4&&e[0]==n[0]&&e[1]==n[1]},Os.importGeometry=function(t,e,n){var r=t.type;if(r in Os.pathImporters){if(n.geometry_type&&n.geometry_type!=Os.translateGeoJSONType(r))return;Os.pathImporters[r](t.coordinates,e)}else"GeometryCollection"==r?t.geometries.forEach((function(t){Os.importGeometry(t,e,n)})):se("GeoJSON.importGeometry() Unsupported geometry type:",t.type)},Os.pathImporters={LineString:function(t,e){e.importLine(t)},MultiLineString:function(t,e){for(var n=0;n<t.length;n++)Os.pathImporters.LineString(t[n],e)},Polygon:function(t,e){for(var n=0;n<t.length;n++)e.importRing(t[n],n>0)},MultiPolygon:function(t,e){for(var n=0;n<t.length;n++)Os.pathImporters.Polygon(t[n],e)},Point:function(t,e){e.importPoints([t])},MultiPoint:function(t,e){e.importPoints(t)}};var Ls=Object.freeze({__proto__:null,GeoJSONParser:Ps,importGeoJSON:Ts,importCRS:Ms}),Rs={};function Ds(t,e){var n,r,i;return a.isString(t)&&(t=JSON.parse(t)),t.arcs&&t.arcs.length>0&&(t.transform&&Rs.decodeArcs(t.arcs,t.transform),e&&e.precision&&Rs.roundCoords(t.arcs,e.precision),r=new ii(t.arcs)),(i=Object.keys(t.objects).reduce((function(n,i){for(var o,a=Rs.importObject(t.objects[i],r,e),s=0,u=a.length;s<u;s++)(o=a[s]).name=i,n.push(o);return n}),[])).forEach((function(e){br(e)&&ia(e.shapes,r,e.geometry_type),"point"==e.geometry_type&&t.transform&&Rs.decodePoints(e.shapes,t.transform),e.data&&ir(e.data.getRecords())})),Ms(n={layers:i,arcs:r,info:{}},t),t.metadata&&function(t,e){e.proj4&&(t.info.crs=ji(e.proj4))}(n,t.metadata),n}Rs.forEachShapePart=function(t,e){var n={GeometryCollection:function(t){t.geometries.forEach(r)},LineString:function(t){var n=e(t.arcs);n&&(t.arcs=n)},MultiLineString:function(t){i(t.arcs)},Polygon:function(t){i(t.arcs)},MultiPolygon:function(t){t.arcs.forEach(i)}};function r(t){t.type in n&&n[t.type](t)}function i(t){for(var n,r=0;r<t.length;r++)(n=e(t[r]))&&(t[r]=n)}r(t)},Rs.forEachArc=function(t,e){Rs.forEachShapePart(t,(function(t){for(var n,r=0;r<t.length;r++)n=e(t[r]),a.isInteger(n)&&(t[r]=n)}))},Rs.decodePoints=function(t,e){be(t,(function(t){t[0]=t[0]*e.scale[0]+e.translate[0],t[1]=t[1]*e.scale[1]+e.translate[1]}))},Rs.decodeArcs=function(t,e){var n=e.scale[0],r=e.scale[1],i=e.translate[0],o=e.translate[1];t.forEach((function(t){for(var e,a,s,u=0,c=0,l=0,f=t.length;l<f;l++)a=(e=t[l])[0]+u,s=e[1]+c,e[0]=a*n+i,e[1]=s*r+o,u=a,c=s}))},Rs.roundCoords=function(t,e){var n,r=pa(e);t.forEach((function(t){for(var e=0,i=t.length;e<i;e++)(n=t[e])[0]=r(n[0]),n[1]=r(n[1])}))},Rs.importObject=function(t,e,n){var r=new Rs.GeometryImporter(e,n);return("GeometryCollection"==t.type?t.geometries:[t]).forEach(r.addGeometryObject,r),r.done()},Rs.GeometryImporter=function(t,e){var n,r=e&&e.id_field||Os.ID_FIELD,i=[],o=[],a=[],s=0,u=null;this.addGeometryObject=function(t){var e=t.properties||null;n=o.length,o[n]=null,"id"in t&&((e=e||{})[r]=t.id),i[n]=e,e||s++,t.type&&this.addShape(t),null===o[n]&&0},this.addShape=function(e){var r,i=o[n],a=Os.translateGeoJSONType(e.type);"GeometryCollection"==e.type?e.geometries.forEach(this.addShape,this):a?(this.setGeometryType(a),(r=Rs.shapeImporters[e.type](e,t))&&r.length&&(Array.isArray(r[0])?o[n]=i?i.concat(r):r:ie("Invalid TopoJSON",e.type,"geometry"))):e.type&&ie("Invalid TopoJSON geometry type:",e.type)},this.setGeometryType=function(t){var e=n<a.length?a[n]:null;e?e!=t&&ie("Unable to import mixed-type TopoJSON geometries"):(a[n]=t,this.updateCollectionType(t))},this.updateCollectionType=function(t){u?t&&u!=t&&(u="mixed"):u=t},this.done=function(){return"mixed"==u?Mr(o,i,a):[{geometry_type:u,shapes:u?o:null,data:s<o.length?new yr(i):null}]}},Rs.importPolygonArcs=function(t,e){var n,r=t[0],i=null;if(e||ie("Invalid TopoJSON file: missing arc data."),!(n=r?yn.getPlanarPathArea(r,e):null))return null;n<0&&wn(r),i=[r];for(var o=1;o<t.length;o++)r=t[o],(n=yn.getPlanarPathArea(r,e))&&(n>0&&wn(r),i.push(r));return i},Rs.shapeImporters={Point:function(t){return[t.coordinates]},MultiPoint:function(t){return t.coordinates},LineString:function(t){return[t.arcs]},MultiLineString:function(t){return t.arcs},Polygon:function(t,e){return Rs.importPolygonArcs(t.arcs,e)},MultiPolygon:function(t,e){return t.arcs.reduce((function(t,n){var r=Rs.importPolygonArcs(n,e);return r&&(t=t?t.concat(r):r),t}),null)}};var Fs=Object.freeze({__proto__:null,importTopoJSON:Ds});function ks(t){function e(t,e){var n=/position (\d+)/,r=n.exec(t);return r&&(t=t.replace(n,"position "+(e+parseInt(r[1])))),t}function n(e){var n,r,i,o,a=0,s=!1,u=!1,c=t.readSync(e),l=null;for(r=0,i=c.length;r<i;r++){if(o=c[r],s)u?u=!1:34==o?s=!1:92==o&&(u=!0);else if(34==o)s=!0;else if(123==o)0===a&&(n=r),a++;else if(125==o){if(0===--a){l={text:Hn(c,"utf8",n,r+1),start:n,end:e+r+1};break}if(-1==a)break}else if(93==o&&0===a)break;r==i-1&&(i=(c=t.expandBuffer().readSync(e)).length)}return l}this.readObjects=function(r){var i=t.findString('"features"',5e3)||t.findString('"geometries"',5e3);!function(t,r){var i,o=n(t);for(;o;){try{i=JSON.parse(o.text)}catch(n){ie("JSON parsing error --",e(n.message,t+o.start))}r(i),t=o.end,o=n(o.end)}}(i?i.offset:0,r)},this.readObject=n}function js(t){var e=a.arrayToIndex(t),n=new RegExp('"|"',"g");function r(t,n){if(t in e&&a.isArray(n)){var r=JSON.stringify(n);if(r.indexOf(!1))return""+r.replace(/,/g,", ")+""}return n}return function(t){return JSON.stringify(t,r,"  ").replace(n,"")}}var Bs=Object.freeze({__proto__:null,getFormattedStringify:js});function Gs(t){return ir(t),{layers:[{data:new yr(t)}],info:{}}}function Us(t,e){return t.layers.reduce((function(t,n){return n.data&&t.push({content:zs(n,e),filename:(n.name||"output")+".json"}),t}),[])}function zs(t,e){return(e&&e.prettify?js([]):JSON.stringify)(t.data.getRecords())}var qs=Object.freeze({__proto__:null,importJSONTable:Gs,exportJSON:Us,exportJSONTable:zs});function Vs(t,e){var n=null;return t.length>1e3&&(t=t.substr(0,1e3)),t=t.replace(/\s/g,""),e&&e.json_path||/^\[[{\]]/.test(t)?n="json":/"arcs":\[|"objects":\{|"transform":\{/.test(t)?n="topojson":/^\{"/.test(t)&&(n="geojson"),n}function Ys(t){var e=null;return t&&("Topology"==t.type?e="topojson":t.type?e="geojson":a.isArray(t)&&(e="json")),e}function Xs(t,e){var n=new Ps(e);return new ks(t).readObjects(n.parseObject),n.done()}function Js(t,e){var n,r,i=t.content,o=t.filename,s={filename:o};if(i?i instanceof ArrayBuffer&&(i.byteLength<1e7?i=Hn(a.createBuffer(i)):(n=new Uo(i),i=null)):n=new zo(o),n&&((t=function(t,e){var n;return n="geojson"==Vs(Bo(t,1e3),e)?{dataset:Xs(t,e),format:"geojson"}:{content:t.toString("utf8")},t.close(),n}(n,e)).dataset?(s.dataset=t.dataset,s.format=t.format):i=t.content),i){if(a.isString(i))try{i=JSON.parse(i)}catch(t){ie("JSON parsing error --",t.message)}e.json_path?(r=Ys(i=function(t,e){var n,r,i,o=/(.*)\[([0-9]+)\]$/,a=e.indexOf("/")>0?"/":".",s=e.split(a);for(;s.length>0;)if(n=s.shift(),(i=o.exec(n))?(r=t[i[1]],t=r&&r[+i[2]]||null):t=t[n],!t)return null;return t}(i,e.json_path)))||ie("Unexpected object type at JSON path:",e.json_path):r=Ys(i),"topojson"==r?s.dataset=Ds(i,e):"geojson"==r?s.dataset=Ts(i,e):"json"==r?s.dataset=Gs(i):ie("Unknown JSON format"),s.format=r}return s}var Ws=Object.freeze({__proto__:null,identifyJSONString:Vs,identifyJSONObject:Ys,importGeoJSONFile:Xs,importJSON:Js});function Hs(t){var e=Math.floor(.25*t+1),n=Vr(e),r=new Int32Array(e),i=[],o=[],s=0;function u(t,e,a,s,u){for(var c,l,f,p=u(a),h=n(t[a],e[a]),d=r[h];-1!=d;){if(c=o[d][0],l=o[d][1],f=c.length,c[0]===t[s]&&c[f-1]===t[a]&&c[f-2]===t[p]&&l[0]===e[s]&&l[f-1]===e[a]&&l[f-2]===e[p])return d;d=i[d]}return null}a.initializeArray(r,-1),this.addArc=function(t,e){var a=t.length-1,u=n(t[a],e[a]),c=r[u],l=o.length;return r[u]=l,o.push([t,e]),s+=t.length,i.push(c),l},this.findDuplicateArc=function(t,e,n,r,i,o){var a=u(t,e,n,r,i);return a=null===a?u(t,e,r,n,o):~a},this.getVertexData=function(){for(var t,e,n=new Float64Array(s),r=new Float64Array(s),i=new Uint32Array(o.length),u=0,c=0,l=o.length;c<l;c++)e=(t=o[c])[0].length,a.copyElements(t[0],0,n,u,e),a.copyElements(t[1],0,r,u,e),i[c]=e,u+=e;return{xx:n,yy:r,nn:i}}}function $s(t){if(t.arcs){var e=t.arcs.getVertexData(),n=Ks(e.nn,e.xx,e.yy);t.arcs.updateVertexData(n.nn,n.xx,n.yy),t.layers.forEach((function(t){var e,r;"polyline"!=t.geometry_type&&"polygon"!=t.geometry_type||(t.shapes=(e=t.shapes,r=n.paths,e.map((function(t){return function(t,e){return t?t.map((function(t){return function(t,e){return t.reduce((function(t,n){var r=we(n),i=e[r];if(i){n<0&&wn(i=i.concat());for(var o=0,a=i.length;o<a;o++)t.push(i[o])}return t}),[])}(t,e)})):null}(t,r)}))))}))}}function Ks(t,e,n){var r,i,o=e.length,a=Yr(e,n),s=function(t,e){for(var n=new Int32Array(t),r=0,i=0,o=e.length;i<o;i++)for(var a=0,s=e[i];a<s;a++,r++)n[r]=i;return n}(o,t),u=new Hs(o),c=l()?e.subarray:Array.prototype.slice;return r=function(t){for(var e,n=[],r=0,i=0,o=t.length;i<o;i++)e=t[i],n.push(e<2?null:d(r,r+e-1)),r+=e;return n}(t),(i=u.getVertexData()).paths=r,i;function l(){return!(!e.subarray||!n.subarray)}function f(e){var n=s[e],r=e+1;if(r<o&&s[r]===n)return e+1;var i=t[n];return h(e,e-i+1)?e-i+2:-1}function p(e){var n=s[e],r=e-1;if(r>=0&&s[r]===n)return e-1;var i=t[n];return h(e,e+i-1)?e+i-2:-1}function h(t,r){return e[t]==e[r]&&n[t]==n[r]}function d(r,i){for(var o,c=[],l=-1,h=r;h<i;h++)g(h)&&(l>-1?c.push(v(o,h)):l=h,o=h);return-1==l?c.push(function(r,i){var o,c=a[r],l=s[r];for(;c!=r&&!(s[c]<l);)c=a[c];if(c==r)return v(r,i);for(var h=r;h<i;h++)if(null!==(o=u.findDuplicateArc(e,n,h,h,f,p)))return o;re("Unmatched ring; id:",l,"len:",t[l])}(r,i)):l==r?(g(i)||re("Topology error"),c.push(v(o,h))):c.push(function(t,r,i,o){var a=u.findDuplicateArc(e,n,t,o,f,p);null===a&&(a=u.addArc(m(e,t,r,i,o),m(n,t,r,i,o)));return a}(o,i,r+1,l)),c}function g(t){var e,n,r=a[t],i=p(t),o=f(t);if(-1==i||-1==o)return!0;for(;t!=r;){if(e=p(r),n=f(r),-1==e||-1==n||y(i,o,e,n))return!0;r=a[r]}return!1}function y(t,r,i,o){var a=e[t],s=e[r],u=e[i],c=e[o],l=n[t],f=n[r],p=n[i],h=n[o];return!(a==c&&s==u&&l==h&&f==p||a==u&&s==c&&l==p&&f==h)}function m(t,e,n,r,i){var o,a=n-e+i-r+2,s=new(l()?Float64Array:Array)(a),u=0;for(o=e;o<=n;o++)s[u++]=t[o];for(o=r;o<=i;o++)s[u++]=t[o];return s}function v(t,r){var i=u.findDuplicateArc(e,n,t,r,f,p);return null===i&&(i=u.addArc(c.call(e,t,r+1),c.call(n,t,r+1))),i}}var Zs=Object.freeze({__proto__:null,buildTopology:$s,buildPathTopology:Ks});function Qs(t,e){var n,r,i;return e=e||{},t.json?(r=(i=Js(t.json,e)).format,ga(n=i.dataset,e)):t.text?(r="dsv",n=ws(i=t.text,e)):t.shp?(r="shapefile",i=t.shp,ga(n=function(t,e){var n,r=t.shp.content||t.shp.filename,i=t.shx?t.shx.content||t.shx.filename:null,o=ba(r,i,e),s=o.layers[0];t.dbf&&(n=tu(t,e),a.extend(o.info,n.info),s.data=n.layers[0].data,s.shapes&&s.data.size()!=s.shapes.length&&oe("Mismatched .dbf and .shp record count -- possible data loss."));t.prj&&(o.info.prj=t.prj.content);return o}(t,e),e)):t.dbf?(r="dbf",i=t.dbf,n=tu(t,e)):t.prj&&(r="prj",n={layers:[],info:{prj:(i=t.prj).content}}),n||ie("Missing an expected input type"),n.arcs&&!e.no_topology&&"topojson"!=r&&$s(n),"topojson"!=r&&n.layers.forEach((function(t){!function(t,e){t.name||(t.name=Lo(e))}(t,function(t){var e="layer1",n=Mo(t);n.basename&&n.extension&&(e=n.basename);return e}(i.filename||""))})),i.filename&&(n.info.input_files=[i.filename]),n.info.input_formats=[r],n}function tu(t,e){return e=a.extend({},e),t.cpg&&!e.encoding&&(e.encoding=t.cpg.content),{info:{},layers:[{data:wo(t.dbf.content,e)}]}}var eu=Object.freeze({__proto__:null,importContent:Qs,importFileContent:function(t,e,n){var r={};return r[Sa(e,t)]={filename:e,content:t},Qs(r,n)}});function nu(t,e){var n=ou([t].concat(e)),r=e.reduce((function(t,e){return t.concat(e.layers)}),[]);return t.arcs=n.arcs,r}function ru(t){return ou(t.map((function(t){return a.defaults({layers:t.layers.map(Dr)},t)})))}function iu(t,e){var n,r=[],i=[],o=0;return t.forEach((function(t){r=r.concat(t.layers),i=i.concat(t.dataset),t.dataset.arcs&&t.dataset.arcs.size()>0&&o++})),n=ou(i),o>1&&$s(n),i.forEach(e.removeDataset),e.addDataset(n),e.setDefaultTarget(r,n),[{layers:r,dataset:n}]}function ou(t){var e,n=[],r=0,i=[],o={};return function(t){t.reduce((function(t,e){var n=Ui(e);return t&&n&&qi(t)!=qi(n)&&ie("Unable to combine projected and unprojected datasets"),n||t}),null)}(t),t.forEach((function(t){var e=t.arcs?t.arcs.size():0;e>0&&n.push(t.arcs),function(t,e){var n=e.info||{};t.input_files=a.uniq((t.input_files||[]).concat(n.input_files||[])),t.input_formats=a.uniq((t.input_formats||[]).concat(n.input_formats||[])),a.defaults(t,n)}(o,t),t.layers.forEach((function(t){"polygon"!=t.geometry_type&&"polyline"!=t.geometry_type||In(t.shapes,(function(t){return t<0?t-r:t+r})),i.push(t)})),r+=e})),(e=au(n)).size()!=r&&re("[mergeDatasets()] Arc indexing error"),{info:o,arcs:e,layers:i}}function au(t){var e=t.map((function(t){return t.getRetainedInterval()>0&&(se("Baking-in simplification setting."),t.flatten()),t.getVertexData()})),n=su(a.pluck(e,"xx"),Float64Array),r=su(a.pluck(e,"yy"),Float64Array);return new ii(su(a.pluck(e,"nn"),Int32Array),n,r)}function su(t,e){var n=function(t){return t.reduce((function(t,e){return t+(e.length||0)}),0)}(t),r=new(e||Array)(n),i=0;return t.forEach((function(t){for(var e=t.length,n=0;n<e;n++)r[n+i]=t[n];i+=e})),r}var uu=Object.freeze({__proto__:null,mergeDatasetsIntoDataset:nu,mergeDatasetsForExport:ru,mergeCommandTargets:iu,mergeDatasets:ou,mergeArcs:au}),cu={};function lu(t,e){var n=!1,r=ou(t.map((function(t){var r=pu(t,a.defaults({no_topology:!0,snap:!1,snap_interval:null,files:[t]},e));return r.arcs&&r.arcs.size()>0&&"topojson"!=r.info.input_formats[0]&&(n=!0),r})));return n&&!e.no_topology&&(ga(r,e),$s(r)),r}var fu=Object.freeze({__proto__:null,importFiles:lu});function pu(t,e){return hu(t,e)}cu.importFiles=function(t){var e,n=t.files||[];return t.stdin?pu("/dev/stdin",t):(n.length>0==!1&&ie("Missing input file(s)"),se("Importing: "+n.join(" ")),1==n.length?e=pu(n[0],t):t.merge_files?(e=lu(n,t)).layers=cu.mergeLayers(e.layers):t.combine_files?e=lu(n,t):ie("Invalid inputs"),e)};var hu=function(t,e){var n,r=wa(t),i={},o=e&&e.encoding||null,s=e&&e.input||null,u=s&&t in s;return jo.checkFileExists(t,s),("shp"!=r||u)&&("json"!=r||u)&&("text"!=r||u)?r&&Aa(t)?(n=jo.readFile(t,null,s),a.isString(n)&&ie("Expected binary content, received a string")):r?n=jo.readFile(t,o||"utf-8",s):"text"==(r=Ea(n=jo.readFile(t,o||"utf-8",s)))&&n.indexOf("")>-1&&(r=null):n=null,r||ie(function(t){var e=Ro(t),n="Unable to import "+t;"zip"==e.toLowerCase()?n+=" (ZIP files must be unpacked before running mapshaper)":n+=" (unknown file type)";return n}(t)),i[r]={filename:t,content:n},n=null,"shp"!=r&&"dbf"!=r||function(t,e,n){var r=To(t,"dbf"),i=To(t,"shx"),o=To(t,"cpg"),a=To(t,"prj");jo.isFile(a,n)&&(e.prj={filename:a,content:jo.readFile(a,"utf-8",n)});jo.isFile(i,n)&&(e.shx={filename:i,content:jo.readFile(i,null,n)});!e.dbf&&jo.isFile(r,n)&&(e.dbf={filename:r,content:jo.readFile(r,null,n)});e.dbf&&jo.isFile(o,n)&&(e.cpg={filename:o,content:jo.readFile(o,"utf-8",n).trim()})}(t,i,s),"shp"!=r||i.dbf||oe(a.format("[%s] .dbf file is missing - shapes imported without attribute data.",t)),Qs(i,e)};var du=Object.freeze({__proto__:null,replaceImportFile:function(t){hu=t},importFile:pu});function gu(t,e){var n,r,i={};return/\.prj$/i.test(t)?(n=pu(t,{}))&&(i.prj=n.info.prj,i.crs=Xi(i.prj)):(r=e.findSingleLayer(t))?(n=r.dataset,i.crs=Ui(n),i.prj=n.info.prj):i.crs=ji(t),i}function yu(t,e,n,r){var i=Ti(e,n);t.layers.forEach((function(t){xr(t)&&function(t,e){Fn(t.shapes,(function(t){return e(t[0],t[1])}))}(t,i)})),t.arcs&&(r.densify?function(t,e){var n=function(t,e){var n=vn(t),r=t.getBounds(),i=e(r.centerX(),r.centerY()),o=e(r.centerX()+n[0],r.centerY()+n[1]),a=e(r.centerX(),r.ymin),s=e(r.xmax,r.centerY()),u=yn.distance2D(i[0],i[1],o[0],o[1]),c=(yn.distance2D(i[0],i[1],a[0],a[1])+yn.distance2D(i[0],i[1],s[0],s[1]))/5e3;return Math.min(u,c)}(t,e),r=[0,0];Wi(t,(function(t,i,o,a,s,u){var c=r[0],l=r[1];if(!(r=e(i,o)))return!1;u>0&&yn.distanceSq(r[0],r[1],c,l)>n*n*25&&function t(e,n,r,i,o,a,s,u,c,l,f){var p,h=(e+o)/2,d=(n+a)/2,g=c(h,d);if(!g)return;p=yn.pointSegDistSq2(g[0],g[1],r,i,s,u),f=f||[],p>l*l*.25&&yn.distance2D(e,n,o,a)>.01&&(t(e,n,r,i,h,d,g[0],g[1],c,l,f),f.push(g),t(h,d,g[0],g[1],o,a,s,u,c,l,f));return f}(a,s,c,l,i,o,r[0],r[1],e,n).forEach(t);t(r)}))}(t.arcs,i):function(t,e){Wi(t,(function(t,n,r,i,o,a){var s=e(n,r);if(!s)return!1;t(s)}))}(t.arcs,i))}cu.proj=function(t,e,n){var r,i,o=Vt(),s=[],u={};if((i=e.crs)||ie("Missing projection data"),!gi(t))return t.info.crs=i,void(t.info.prj=e.prj);if((r=Ui(t))||ie("Unable to project -- source coordinate system is unknown"),Di(r,i))oe("Source and destination CRS are the same");else{t.arcs&&(t.arcs.flatten(),u.arcs=o?t.arcs.getCopy():t.arcs),u.layers=t.layers.filter(xr).map((function(t){return o&&(s.push(t),(t=a.extend({},t)).shapes=Rn(t.shapes)),t}));try{yu(u,r,i,n||{})}catch(t){console.error(t),ie(a.format("Projection failure%s (%s)",t.point?" at "+t.point.join(" "):"",t.message))}t.info.crs=i,t.info.prj=e.prj,t.arcs=u.arcs,s.forEach((function(t,e){a.extend(t,u.layers[e])}))}};var mu=Object.freeze({__proto__:null,getCrsInfo:gu,projectDataset:yu});function vu(t,e,n){return _u(t,e,n)}var _u=function(t,e,n){if(t.length>0==!1)oe("No files to save");else if(e.dry_run);else{if(e.stdout)return jo.writeFile("/dev/stdout",t[0].content,n);var r=bu(a.pluck(t,"filename"),e),i=Yt("input_files");t.forEach((function(t,n){var o=r[n];t.content instanceof ArrayBuffer&&(t.content=jo.convertArrayBuffer(t.content)),e.output?e.output.push({filename:o,content:t.content}):(!e.force&&i.indexOf(o)>-1&&ie('Need to use the "-o force" option to overwrite input files.'),jo.writeFile(o,t.content),oe("Wrote "+o))}))}n&&n(null)};function bu(t,e){var r=e.directory;return r&&(t=t.map((function(t){return n(37).join(r,t)}))),t}var xu=Object.freeze({__proto__:null,writeFiles:vu,replaceWriteFiles:function(t){_u=t},getOutputPaths:bu});function wu(t){var e,r;if(!t.length)return function(){return[]};function i(e){return t[e]}return r=n(277),e=new r(t.length),t.forEach((function(t){var n=t.bounds;e.add(n.xmin,n.ymin,n.xmax,n.ymax)})),e.finish(),function(t,n,r,o){return e.search(t,n,r,o).map(i)}}function Eu(t,e){!function(t,e,n){function r(t,n){var r=e[t];e[t]=e[n],e[n]=r}for(var i=0,o=e.length;i<o;i+=2)t[e[i]]>t[e[i+1]]&&r(i,i+1)}(t,e),function t(e,n,r,i){var o,a,s=r,u=i;for(;s<i;){for(o=e[n[r+i>>2<<1]];s<=u;){for(;e[n[s]]<o;)s+=2;for(;e[n[u]]>o;)u-=2;s<=u&&(a=n[s],n[s]=n[u],n[u]=a,a=n[s+1],n[s+1]=n[u+1],n[u+1]=a,s+=2,u-=2)}if(u-r<40?Su(e,n,r,u):t(e,n,r,u),i-s<40)return void Su(e,n,s,i);r=s,u=i}}(t,e,0,e.length-2)}function Su(t,e,n,r){for(var i,o,a=n+2;a<=r;a+=2){i=e[a],o=e[a+1];for(var s=a-2;s>=n&&t[i]<t[e[s]];s-=2)e[s+2]=e[s],e[s+3]=e[s+1];e[s+2]=i,e[s+3]=o}}function Iu(t,e,n){var r,i,o,a,s,u,c=e.getVertexData(),l=e.getMultiShapeBounds(t);function f(t,e,n){var r,u,l,f=s[n],p=0,h=c.xx,d=c.yy;r=n==a?i.length-f:s[n+1]-f;for(var g=0;g<r;g++)u=i[g+f],l=o[g+f],p+=yn.testRayIntersection(t,e,h[u],d[u],h[l],d[l]);return p}function p(t){var e=Math.floor((t-r)/u);return e<0&&(e=0),e>=a&&(e=a-1),e}!function(){var n,l,f,h,d,g,y,m,v,_,b=c.xx,x=0,w=0,E=-1;Cn(t,e,(function(){x++})),l=new Uint32Array(2*x),y=0,Cn(t,e,(function(t,e,n,r){l[y++]=t,l[y++]=e})),Eu(b,l),i=new Uint32Array(x),o=new Uint32Array(x),a=function(t){var e=Math.pow(t,.75)/10;return Math.ceil(e)}(x),s=new Uint32Array(a+1),r=b[l[0]],u=(b[l[l.length-2]]-r)/a,f=0,h=x-1;for(;w<x;){for(d=l[m=2*w],g=l[m+1],v=b[d],_=b[g],n=E,E=p(v);E>n;)n++,s[n]=f;_-v>=0==!1&&re("Invalid segment"),p(_)-E>1?(i[h]=d,o[h]=g,h--):(i[f]=d,o[f]=g,f++),w++}s[a]=f,f!=h+1&&re("Segment indexing error")}(),this.pointInPolygon=function(t,e){if(!l.containsPoint(t,e))return!1;var n=p(t),r=f(t,e,n);return n>0&&(r+=f(t,e,n-1)),r+=f(t,e,a),isNaN(r)?-1:r%2==1?1:0}}function Cu(t,e){var n=wu(function(t,e){var n=[];return t.forEach((function(t,r){for(var i=t?t.length:0,o=0;o<i;o++)n.push({ids:t[o],id:r,bounds:e.getSimpleShapeBounds(t[o])})})),n}(t,e)),r=xn(t,e).area();function i(t,n){return!!n.bounds.containsPoint(t[0],t[1])&&(!n.index&&n.bounds.area()>.01*r&&(n.index=new Iu([n.ids],e)),n.index?n.index.pointInPolygon(t[0],t[1]):yn.testPointInRing(t[0],t[1],n.ids,e))}function o(t,e){var n=!1,r=!1;return e.forEach((function(e){var o=i(t,e);-1==o?n=!0:1==o&&(r=!r)})),n||r}function s(t){var e,n,r=[];if(t.length>0){t.sort((function(t,e){return t.id-e.id}));for(var i=0;i<t.length;i++)n=t[i],0!==i&&n.id==t[i-1].id||r.push(e=[]),e.push(n)}return r}function u(t,e){var r=e>0?e:0;t[0],t[1];return n(t[0]-r,t[1]-r,t[0]+r,t[1]+r)}function c(t){var n=t[0],r=e.getVertex(n,0),i=e.getVertex(n,1);return[(r.x+i.x)/2,(r.y+i.y)/2]}this.findEnclosingShapes=function(t){var e=[];return s(u(t)).forEach((function(n){o(t,n)&&e.push(n[0].id)})),e},this.findEnclosingShape=function(t){var e=-1;return s(u(t)).forEach((function(n){o(t,n)&&(e=n[0].id)})),e},this.findShapesEnclosingArc=function(t){var e=c([t]);return this.findEnclosingShapes(e)},this.findPointEnclosureCandidates=function(t,e){var n=u(t,e);return a.pluck(n,"id")},this.pointIsEnclosed=function(t){return o(t,u(t))},this.findSmallestEnclosingPolygon=function(t){var n,r=e.getSimpleShapeBounds(t),o=c(t);return u(o).forEach((function(t){!t.bounds.contains(r)||t.bounds.sameBounds(r)||n&&n.bounds.area()<t.bounds.area()||i(o,t)&&(n=t)})),n?n.id:-1},this.arcIsEnclosed=function(t){return this.pointIsEnclosed(c([t]))},this.pathIsEnclosed=function(t){return this.pointIsEnclosed(c(t))},this.findEnclosedPaths=function(t){var r,i=e.getSimpleShapeBounds(t),o=n(i.xmin,i.ymin,i.xmax,i.ymax),a=[];return o.length>6&&(r=new Iu([t],e)),o.forEach((function(n){var o=c(n.ids);i.containsPoint(o[0],o[1])&&(r?r.pointInPolygon(o[0],o[1]):yn.testPointInRing(o[0],o[1],t,e))&&a.push(n.ids)})),a.length>0?a:null},this.findPathsInsideShape=function(t){var e=[];return t.forEach((function(t){var n=this.findEnclosedPaths(t);n&&(e=function(t,e){var n,r=[];for(n=0;n<t.length;n++)-1==e.indexOf(t[n])&&r.push(t[n]);for(n=0;n<e.length;n++)-1==t.indexOf(e[n])&&r.push(e[n]);return r}(e,n))}),this),e.length>0?e:null}}function Nu(t,e){t.shapes=t.shapes.map((function(t){return t?function(t,e){var n=Tn(t,e,"polygon");return n.sort((function(t,e){return Math.abs(e.area)-Math.abs(t.area)})),n.forEach((function(t,r){for(var i,o,a,s=!0,u=r;--u>=0;)if(Au(t,i=n[u],e)){s=!(i.area>0);break}a=s,(o=t).area>0!=a&&(o.area=-o.area,wn(o.ids))})),n.map((function(t){return t.ids}))}(t,e):null}))}function Au(t,e,n){if(!1===e.bounds.contains(t.bounds))return!1;var r=n.getVertex(t.ids[0],0);return 1==yn.testPointInRing(r.x,r.y,e.ids,n)}function Ou(t,e,n){var r,i=[],o=[],a=n?-1:1;return(t||[]).forEach((function(t){t.area*a>0?o.push([t]):t.area*a<0&&i.push(t)})),0===i.length||(r=wu(o.map((function(t,e){return{bounds:t[0].bounds,idx:e}}))),i.forEach((function(t){for(var n,i,s,u,c=-1,l=0,f=t.area*-a,p=t.bounds,h=r(p.xmin,p.ymin,p.xmax,p.ymax),d=0,g=h.length;d<g;d++)i=h[d].idx,s=(n=o[i][0]).area*a,(u=n.bounds.contains(t.bounds)&&s>f)&&h.length>1&&!Au(t,n,e)||u&&(0===l||s<l)&&(l=s,c=i);-1==c?ue("[groupPolygonRings()] polygon hole is missing a containing ring, dropping."):o[c].push(t)}))),o}function Pu(t){var e;return t&&0!==t.length?{bounds:(e={points:t,pointCount:t.length,bounds:yn.getPathBounds(t)}).bounds,pathData:[e],partCount:1,pointCount:e.pointCount}:{partCount:0,pointCount:0}}function Tu(t,e,n){if("point"==n)return Pu(t);var r=0,i=new me,o=[];return!t||"polyline"!=n&&"polygon"!=n||t.forEach((function(t,a){var s=function(t){var e,n,r,i,o=[],a=0;for(;t.hasNext();)e=t.x,n=t.y,0!==a&&r==e&&i==n||(o.push([e,n]),a++),r=e,i=n;return{points:o,pointCount:o.length}}(e.getShapeIter(t)),u=!0;s.ids=t,"polygon"==n?(s.area=yn.getPlanarPathArea2(s.points),u=s.pointCount>3&&0!==s.area):"polyline"==n&&(u=s.pointCount>1),u?(r+=s.pointCount,s.bounds=yn.getPathBounds(s.points),i.mergeBounds(s.bounds),o.push(s)):se("Skipping a collapsed",n,"path")})),{pointCount:r,pathData:o,pathCount:o.length,bounds:i}}var Mu=Object.freeze({__proto__:null,exportPointData:Pu,exportPathData:Tu});function Lu(t){return t.reduce((function(t,e){return null===t?t=e.name||null:t&&e.name&&(t=a.mergeNames(t,e.name)),t}),null)||""}function Ru(t,e){return(e=a.extend({},e)).v2=!e.gj2008,Du(t,e)}function Du(t,e){var n,r=(e=e||{}).extension||"json";return(e.precision||e.rfc7946)&&fa(t=pi(t),e.precision||1e-6),(e.v2||e.rfc7946)&&(n=ku(t))&&oe(n),e.file&&(r=Ro(e.file)),(e.combine_layers?[t.layers]:t.layers.map((function(t){return[t]}))).map((function(n){var i=Lu(n)||"output";return{content:Bu(a.defaults({layers:n},t),e,"buffer"),filename:i+"."+r}}))}function Fu(t,e,n,r,i){var o,a=qu(t.data,n),s=t.shapes,u=Yu(t.data,n);return i&&(o=n.prettify?js(["bbox","coordinates"]):JSON.stringify),a&&s&&a.length!==s.length&&re("Mismatch between number of properties and number of shapes"),(s||a||[]).reduce((function(c,l,f){var p=s?s[f]:null,h=Os.exporters[t.geometry_type],d=p?h(p,e.arcs,n):null;if(r)d={type:"Feature",geometry:d,properties:a?a[f]:null},u&&(d.id=u[f]);else if(!d)return c;return i&&(d=o(d),"buffer"==i&&(d=$n(d,"utf8"))),c.push(d),c}),[])}function ku(t){var e,n=Ui(t);return n&&qi(n)||(e="RFC 7946 warning: non-WGS84 GeoJSON output.",n&&(e+=' Tip: use "-proj wgs84" to convert.')),e}function ju(t,e){var n,r,i,o,a=Ui(t),s=e&&a&&qi(a),u=new me,c=new me;return t.layers.forEach((function(e){br(e)?An(e.shapes,null,(function(e){var n=t.arcs.getSimpleShapeBounds(e.arcs);(n.centerX()<0?u:c).mergeBounds(n)})):xr(e)&&be(e.shapes,(function(t){(t[0]<0?u:c).mergePoint(t[0],t[1])}))})),(n=(new me).mergeBounds(c).mergeBounds(u)).hasBounds()&&(o=n.toArray()),s&&c.hasBounds()&&u.hasBounds()&&(r=c.xmin-u.xmax,i=360+u.xmin-c.xmax,r>0&&r>i&&(o[0]=c.xmin,o[2]=u.xmax)),o||null}function Bu(t,e,n){var r,i,o,a={},s=t.layers,u=Uu(s,e);return u?(a.type="FeatureCollection",o="features"):(a.type="GeometryCollection",o="geometries"),e.gj2008&&Gu(t,a),e.bbox&&(i=ju(t,e.rfc7946||e.v2))&&(a.bbox=i),r=s.reduce((function(r,i,o){var a=Fu(i,t,e,u,n);return r.length>0?r.concat(a):a}),[]),"Feature"==e.geojson_type&&1==r.length?r[0]:n?Os.formatGeoJSON(a,r,o,n):(a[o]=r,a)}function Gu(t,e){var n=t.info||{};!n.crs&&"input_geojson_crs"in n&&(e.crs=n.input_geojson_crs)}function Uu(t,e){var n=e.geojson_type||"";return"Feature"==n||"FeatureCollection"==n||"GeometryCollection"!=n&&(n&&ie("Unsupported GeoJSON type:",e.geojson_type),a.some(t,(function(t){var n=t.data?t.data.getFields():[],r=zu(n,e),i=!!Vu(n,e);return r||i})))}function zu(t,e){return!(e.drop_table||e.cut_table||0===t.length||1==t.length&&t[0]==Os.ID_FIELD)}function qu(t,e){var n,r=t?t.getFields():[],i=Vu(r,e);return zu(r,e)?(n=t.getRecords(),i==Os.ID_FIELD?n.map((function(t){return delete(t=a.extend({},t))[i],t})):n):null}function Vu(t,e){var n=[],r=e.id_field;return a.isString(r)?n.push(r):a.isArray(r)&&(n=r),n.push(Os.ID_FIELD),a.find(n,(function(e){return a.contains(t,e)}))}function Yu(t,e){var n=Vu(t?t.getFields():[],e);return n?t.getRecords().map((function(t){return n in t?t[n]:null})):null}cu.mergeLayers=function(t,e){var n=t.filter(Sr),r={};return e=e||{},n.length?1==n.length?(oe("Use the target= option to specify multiple layers for merging"),n.concat()):(r.data=function(t,e){var n=a.uniq(t.reduce((function(t,e){return t.concat(e.data?e.data.getFields():[])}),[]));if(0===n.length)return null;var r=t.reduce((function(t,e){var n=e.data?e.data.getRecords():new yr(Sr(e)).getRecords();return t.concat(n)}),[]),i=function(t,e){return a.uniq(e.reduce((function(e,n){return e.concat(a.difference(t,n.data?n.data.getFields():[]))}),[]))}(n,t);(function(t,e){var n;t.length>0&&(n="["+t.join(", ")+"]",n=(1==t.length?"Field "+n+" is missing":"Fields "+n+" are missing")+" from one or more layers",e.force?!1!==e.verbose&&oe("Warning: "+n):ie(n))})(i,e),function(t,e){t.forEach((function(t){var n=function(t,e){return e.reduce((function(e,n){var r=n.data?ar(t,n.data.getRecords()):null;return r&&-1==e.indexOf(r)&&e.push(r),e}),[])}(t,e);n.length>1&&ie('Inconsistent data types in "'+t+'" field:',n.join(", "))}))}(n,t),i.length>0&&ir(r);return new yr(r)}(n,e),r.name=Lu(n),r.geometry_type=function(t){var e=a.uniq(a.pluck(t,"geometry_type")).filter((function(t){return!!t}));e.length>1&&ie("Incompatible geometry types:",e.join(", "));return e[0]||null}(n),r.geometry_type&&(r.shapes=function(t){return t.reduce((function(t,e){for(var n=e.shapes||[],r=Sr(e),i=-1;++i<r;)t.push(n[i]||null);return t}),[])}(n)),r.shapes&&r.data&&r.shapes.length!=r.data.size()&&re("Mismatch between geometry and attribute data"),[r]):null},Os.formatGeoJSON=function(t,e,n,r){var i=JSON.stringify(t).replace(/\}$/,', "'+n+'": [\n');return"buffer"==r?Os.joinOutputBuffers(i,"\n]}",e):i+e.join(",\n")+"\n]}"},Os.joinOutputBuffers=function(t,e,n){var r=a.createBuffer(",\n","utf8"),i=n.reduce((function(t,e,n){return n>0&&t.push(r),t.push(e),t}),[a.createBuffer(t,"utf8")]);return i.push(a.createBuffer(e,"utf8")),s.concat(i)},Os.exportPointGeom=function(t,e){var n=null;return 1==t.length?n={type:"Point",coordinates:t[0]}:t.length>1&&(n={type:"MultiPoint",coordinates:t}),n},Os.exportLineGeom=function(t,e){var n=Tu(t,e,"polyline");if(0===n.pointCount)return null;var r=n.pathData.map((function(t){return t.points}));return 1==r.length?{type:"LineString",coordinates:r[0]}:{type:"MultiLineString",coordinates:r}},Os.exportPolygonGeom=function(t,e,n){var r=Tu(t,e,"polygon");if(0===r.pointCount)return null;var i=Ou(r.pathData,e,n.invert_y),o=(n.rfc7946||n.v2)&&!n.invert_y,a=i.map((function(t){return t.map((function(t){return o&&t.points.reverse(),t.points}))}));return 1==a.length?{type:"Polygon",coordinates:a[0]}:{type:"MultiPolygon",coordinates:a}},Os.exporters={polygon:Os.exportPolygonGeom,polyline:Os.exportLineGeom,point:Os.exportPointGeom};var Xu=Object.freeze({__proto__:null,default:Os,exportGeoJSON2:Ru,exportGeoJSON:Du,exportLayerAsGeoJSON:Fu,getRFC7946Warnings:ku,getDatasetBbox:ju,exportDatasetAsGeoJSON:Bu,preserveOriginalCRS:Gu,useFeatureCollection:Uu,exportProperties:qu,getIdField:Vu,exportIds:Yu}),Ju={};function Wu(t){var e=Hu(t);return!!e&&e in Ju}function Hu(t){var e=t.data&&t.data.getReadOnlyRecordAt(0);return e&&e.type||null}function $u(t){return t.data&&t.data.getReadOnlyRecordAt(0)}function Ku(t,e){var n=Ju[t.type];return n||ie("Missing renderer for",t.type,"element"),n(t,e)||[]}var Zu=Object.freeze({__proto__:null,furnitureRenderers:Ju,layerHasFurniture:Wu,isFurnitureLayer:function(t){return!!t.furniture},getFurnitureLayerType:Hu,getFurnitureLayerData:$u,importFurniture:Ku});function Qu(t,e,n,r){var i=t*Math.PI/180,o=e*Math.cos(i),a=-e*Math.sin(i);return function(t,e){return[o*(t-r[0])-a*(e-r[1])+n[0]+r[0],a*(t-r[0])+o*(e-r[1])+n[1]+r[1]]}}cu.affine=function(t,e,n){var r,i,o,s=n.rotate||0,u=n.scale||1,c=n.shift?Qo(n.shift,Ui(e)):[0,0],l=e.arcs,f=[],p=[],h=[];e.layers.filter(_r).forEach((function(r){var i,o=[],a=[];-1==t.indexOf(r)?a=r.shapes:n.where?(i=es(n.where,r,e.arcs),r.shapes.forEach((function(t,e){(i(e)?o:a).push(t)}))):o=r.shapes,"point"==r.geometry_type?h=h.concat(o):(f=f.concat(o),p=p.concat(a))}));var d=function(t,e){var n,r;e.anchor?n=e.anchor:(r=di(t),n=[r.centerX(),r.centerY()]);return n}({arcs:e.arcs,layers:[{geometry_type:"point",shapes:h},{geometry_type:"polyline",shapes:f}]},n);o=Qu(s,u,c,d),f.length>0&&(r=new Uint8Array(l.size()),i=new Uint8Array(l.size()),bn(f,r),p.length>0&&(bn(p,i),function(t,e){for(var n=0,r=t.length;n<r;n++)0===e[n]&&(t[n]=0)}(i,r),e.arcs=function(t,e,n){for(var r,i=0,o=0,s=e.getVertexData(),u=[],c=[],l=[],f=[],p=0,h=n.length;p<h;p++)n[p]>0&&(f[p]=e.size()+i,r=s.nn[p],a.copyElements(s.xx,s.ii[p],u,o,r),a.copyElements(s.yy,s.ii[p],c,o,r),l.push(r),o+=r,i++);return In(t,(function(t){var e=we(t);if(n[e]>0)return t<0?~f[e]:f[e]})),au([e,new ii(l,u,c)])}(p,l,i)),e.arcs.transformPoints((function(t,e,n){if(n<r.length&&r[n]>0)return o(t,e)}))),be(h,(function(t){var e=o(t[0],t[1]);t[0]=e[0],t[1]=e[1]}))};var tc=pa(.01);function ec(t){return" "+tc(t[0])+" "+tc(t[1])}function nc(t){return t.length>2&&"C"==t[2]}function rc(t){if(0===t.length)return"";var e,n,r,i="M",o=!1;for(n=0,r=t.length;n<r;n++)nc(e=t[n])?(i+=" C"+ec(e)+ec(t[++n])+ec(t[++n]),o=!0):o?(i+=" L"+ec(e),o=!1):i+=ec(e);return i}function ic(t,e,n){var r=[(t[0]+e[0])/2,(t[1]+e[1])/2];return Qu(90,1/Math.tan(n/180*Math.PI/2),[0,0],r)(e[0],e[1])}function oc(t,e){var n=t.pop(),r=t.pop(),i=ic(r,n,e),o=i[0],a=i[1],s=r[0]-o,u=r[1]-a,c=n[0]-o,l=n[1]-a,f=s*s+u*u,p=f+s*c+u*l,h=4/3*(Math.sqrt(2*f*p)-p)/(s*l-u*c);t.push(r),t.push([o+s-h*u,a+u+h*s,"C"]),t.push([o+c+h*l,a+l-h*c,"C"]),t.push(n)}var ac=Object.freeze({__proto__:null,stringifyLineStringCoords:rc,findArcCenter:ic,addBezierArcControlPoints:oc});function sc(t){if(!t)return null;var e=function(t){return String(t).trim().split(/[, ]+(?![^(]*\))/)}(t),n=e[0]||"",r=null;return n.startsWith("dot")?(e[0]="dots",r=fc(e,t)):n.startsWith("square")?(e[0]="squares",r=fc(e,t)):n.startsWith("hatch")?(e[0]="hatches",r=cc(e,t)):n.startsWith("dash")?r=uc(e,t):isNaN(parseFloat(n))||(e.unshift("hatches"),r=cc(e,t)),r||oe("Invalid pattern, ignoring:",t),r}function uc(t,e){t.shift();for(var n,r=[],i=t.pop(),o=parseInt(t.pop());t.length>0;){if(lc(n=t.pop())){t.push(n);break}r.push(n)}var s=parseInt(t.pop()),u=[parseInt(t.pop()),parseInt(t.pop())].reverse(),c=45;return t.length>0&&(c=parseInt(t.pop())),t.length>0||s>0==!1?null:{type:"dashes",tileSize:[r.length*(s+o),a.sum(u)],colors:r,width:s,dashes:u,spacing:o,background:i,rotation:c}}function cc(t,e){t.shift();for(var n=t.length%2==1?parseInt(t.shift()):45,r=[],i=[],o=0;o<t.length;o+=2)i.push(parseInt(t[o])),r.push(t[o+1]);return Math.min.apply(null,i)>0==!1?null:{tileSize:[a.sum(i),10],type:"hatches",colors:r,widths:i,rotation:n}}function lc(t){return parseInt(t)>0}function fc(t,e){var n=[],r=t.shift(),i=0;lc(t[1])&&(i=parseInt(t.shift()));for(var o=parseInt(t.shift()),a=t.pop(),s=parseInt(t.pop());t.length>0;)n.push(t.shift());if(o>0==!1||s>=0==!1)return null;if(0===n.length)return null;var u=n.length*(o+s);return{type:r,tileSize:[u,u],colors:n,size:o,spacing:s,background:a,rotation:i}}function pc(t,e){var n=t["fill-pattern"],r=("hash_"+n).replace(/[()# ,_]+/g,"_"),i=a.find(e,(function(t){return t.id==r}));if(delete t["fill-pattern"],!i){if(!(i=function(t,e){var n,r=sc(t);if(!r)return null;"hatches"==r.type?n=function(t){for(var e=t.tileSize[1],n="",r=0,i=0;r<t.widths.length;r++)n+='<rect x="'.concat(i,'" y="0" width="').concat(t.widths[r],'" height="').concat(e,'" fill="').concat(t.colors[r],'"></rect>'),i+=t.widths[r];return n}(r):"dots"==r.type||"squares"==r.type?n=function(t){for(var e=t.size,n=t.colors.length,r=e+t.spacing,i=n*n,o="squares"==t.type?gc:dc,a="",s=0,u=0,c=0;s<i;s++)a+=o(u,c,e,t.colors[(s+Math.floor(s/n))%n]),0===(u=(s+1)%n*r)&&(c+=r);return a}(r):"dashes"==r.type&&(n=function(t){for(var e="",n=0,r=0;n<t.colors.length;n++)e+='<rect x="'.concat(r,'" y="0" width="').concat(t.width,'" height="').concat(t.dashes[0],'" fill="').concat(t.colors[n],'"></rect>'),r+=t.width+t.spacing;return e}(r));return{svg:hc(r,e,n),id:e,href:"url(#".concat(e,")")}}(n,r)))return;e.push(i)}t.fill=i.href}function hc(t,e,n){var r=t.tileSize[0],i=t.tileSize[1],o='<pattern id="'.concat(e,'" patternUnits="userSpaceOnUse" width="').concat(r,'" height="').concat(i,'" patternTransform="rotate(').concat(t.rotation,')">');return t.background&&(o+='<rect x="0" y="0" width="'.concat(r,'" height="').concat(i,'" fill="').concat(t.background,'"></rect>')),o+n+"</pattern>"}function dc(t,e,n,r){var i=n/2;return'<circle cx="'.concat(t+i,'" cy="').concat(e+i,'" r="').concat(i,'" fill="').concat(r,'"></circle>')}function gc(t,e,n,r){return'<rect x="'.concat(t,'" y="').concat(e,'" width="').concat(n,'" height="').concat(n,'" fill="').concat(r,'"></rect>')}var yc=Object.freeze({__proto__:null,parsePattern:sc,parseDashes:uc,parseHatches:cc,parseDots:fc,convertFillPattern:pc}),mc={class:"classname",dx:"measure",dy:"measure",fill:"color","fill-pattern":"pattern","font-family":null,"font-size":null,"font-style":null,"font-weight":null,"label-text":null,"letter-spacing":"measure","line-height":"measure",opacity:"number",r:"number",stroke:"color","stroke-dasharray":"dasharray","stroke-width":"number","stroke-opacity":"number","fill-opacity":"number","text-anchor":null},vc=a.extend({type:null,length:"number",rotation:"number","arrow-head-angle":"number","arrow-head-width":"number","arrow-stem-width":"number","arrow-stem-curve":"number","arrow-stem-taper":"number","arrow-scaling":"number",effect:null},mc),_c="class,opacity,stroke,stroke-width,stroke-dasharray,stroke-opacity,fill-opacity".split(","),bc={polygon:a.arrayToIndex(_c.concat("fill","fill-pattern")),polyline:a.arrayToIndex(_c),point:a.arrayToIndex(_c.concat("fill","r")),label:a.arrayToIndex(_c.concat("fill,r,font-family,font-size,text-anchor,font-weight,font-style,letter-spacing,dominant-baseline".split(",")))};function xc(t){return t in mc}function wc(t,e){var n=bc[e]||{};return t.filter((function(t){return t in n}))}function Ec(t,e){var n={},r=[];return Object.keys(e).forEach((function(i){var o=i.replace(/_/g,"-");if(o in vc){var a=e[i].trim();n[o]=Ic(a,o,t),r.push(o)}})),function(t){for(var e,i={},o=0;o<r.length;o++)i[e=r[o]]=n[e](t);return i}}function Sc(t,e){return e.indexOf(t.trim())>-1||/[(){}.+-/*?:&|=\[]/.test(t)}function Ic(t,e,n){var r,i=vc[e],o=n.data?n.data.getFields():[],a=null;return i&&-1===o.indexOf(t)&&(a=function(t,e){var n=null;"number"==e?n=Nc(t)?Number(t):null:"color"==e?n=Pc(t)?t:null:"classname"==e?n=Cc(t)?t:null:"measure"==e?n=Ac(t)?Oc(t):null:"dasharray"==e?n=/^[0-9]+( [0-9]+)*$/.test(t)?t:null:"pattern"==e&&(n=function(t){return!!sc(t)}(t)?t:null);return n}(t,i)),null===a&&Sc(t,o)&&(r=function(t,e){var n;try{(n=es(t,e,null,{context:Yt("defs"),no_warn:!0}))(0)}catch(t){n=null}return n}(t,n)),r||null!==a||i||(a=t),r||(null!==a?function(t){return a}:void ie("Unexpected value for",e+":",t))}function Cc(t){return/^( ?[_a-z][-_a-z0-9]*\b)+$/i.test(t)}function Nc(t){return a.isFiniteNumber(t)||a.isString(t)&&/^-?[.0-9]+$/.test(t)}function Ac(t){return a.isFiniteNumber(t)||a.isString(t)&&/^-?[.0-9]+[a-z]*$/.test(t)}function Oc(t){return a.isString(t)&&/[a-z]/.test(t)?t:Number(t)}function Pc(t){return/^[a-z]+$/i.test(t)||/^#[0-9a-f]+$/i.test(t)||/^rgba?\([0-9,. ]+\)$/.test(t)}var Tc=Object.freeze({__proto__:null,isSupportedSvgStyleProperty:xc,findPropertiesBySymbolGeom:wc,getSymbolDataAccessor:Ec,mightBeExpression:Sc,getSymbolPropertyAccessor:Ic,isSvgClassName:Cc,isSvgNumber:Nc,isSvgMeasure:Ac,parseSvgMeasure:Oc,isSvgColor:Pc}),Mc={},Lc={};function Rc(t,e){var n="translate("+t[0]+" "+t[1]+")";return e&&1!=e&&(n+=" scale("+e+")"),n}var Dc=Object.freeze({__proto__:null,symbolBuilders:Mc,symbolRenderers:Lc,getTransform:Rc});function Fc(t,e){return e=e||{},t.map((function(t,n){var r="Feature"==t.type?t.geometry:t,i=r&&r.type,o=null;return i&&r.coordinates&&(o=Wc[i](r.coordinates,t.properties,e)),o?(t.properties&&kc(o,i,t.properties),"id"in t&&(o.properties||(o.properties={}),o.properties.id=(e.id_prefix||"")+t.id),o):{tag:"g"}}))}function kc(t,e,n){var r=Os.translateGeoJSONType(e);"point"==r&&"label-text"in n&&(r="label");for(var i=wc(Object.keys(n),r),o=0,a=i.length;o<a;o++)jc(t,i[o],n[i[o]])}function jc(t,e,n){"r"==e||(t.properties||(t.properties={}),t.properties[e]=n,"stroke-dasharray"==e&&n&&(t.properties["stroke-linecap"]="butt"))}function Bc(t,e){for(var n,r=0;r<t.length;r++)0===r?n=e(t[r]):n.properties.d+=" "+e(t[r]).properties.d;return n}function Gc(t){return{tag:"path",properties:{d:rc(t)}}}function Uc(t){return{tag:"path",properties:{d:t.map(rc).join(" ")}}}function zc(t,e){var n=qc(t,e);return kc(n,"Point",t),n}function qc(t,e){var n,r,i=t["label-text"]||"",o=/\n|\\n|<br>/i,a=t.dx||0,s={y:t.dy||0,x:a};return e&&(s.transform=Rc(e)),o.test(i)&&(n=i.split(o),i=n.shift()),r={tag:"text",value:i,properties:s},n&&(r.children=[],n.forEach((function(e){var n={tag:"tspan",value:e,properties:{x:a,dy:t["line-height"]||"1.1em"}};r.children.push(n)}))),r}function Vc(t,e,n){var r=Lc[t.type];return r||ie(t.type?"Unknown symbol type: "+t.type:"Symbol is missing a type property"),r(t,e||0,n||0)}function Yc(t,e){return t?(a.isString(t)&&(t=JSON.parse(t)),{tag:"g",properties:{class:"mapshaper-svg-symbol",transform:e?Rc(e):null},children:Vc(t)}):{tag:"g",properties:{},children:[]}}function Xc(t,e,n){return"svg-symbol"in(e=e||{})?Yc(e["svg-symbol"],t):function(t,e,n){var r,i="label-text"in e,o=n.point_symbol||"",a=[],s=e.r||0;(s>0||!i)&&("square"==o?r={tag:"rect",properties:{x:t[0]-s,y:t[1]-s,width:2*s,height:2*s}}:(r={tag:"circle",properties:{cx:t[0],cy:t[1]}},s>0&&(r.properties.r=s)),a.push(r));i&&a.push(qc(e,t));return a.length>1?{tag:"g",children:a}:a[0]}(t,e,n||{})}function Jc(t){for(var e,n,r=0;r<t.length;r++)e=n?n.properties.d+" ":"",(n=Gc(t[r])).properties.d=e+n.properties.d+" Z";return n}var Wc={Point:Xc,Polygon:Jc,LineString:Gc,MultiPoint:function(t,e,n){return function(t,e,n){for(var r,i=[],o=0;o<t.length;o++)"g"==(r=Xc(t[o],e,n)).tag&&r.children?i=i.concat(r.children):i.push(r);return i.length>0?{tag:"g",children:i}:null}(t,e,n)},MultiLineString:function(t){return Bc(t,Gc)},MultiPolygon:function(t){return Bc(t,Jc)}},Hc=Object.freeze({__proto__:null,importGeoJSONFeatures:Fc,applyStyleAttributes:kc,importLineString:Gc,importMultiLineString:Uc,importStyledLabel:zc,importLabel:qc,renderSymbol:Vc,importSymbol:Yc,importPoint:Xc,importPolygon:Jc});function $c(t,e){return e.split(",").map((function(e){var n=Number(e),r=Number(t);return e?r/n:""})).reverse().join(",")}function Kc(t,e){var n,r,i=t.width()/t.height();return n=(r=e.pixels?Math.sqrt(+e.pixels*i):+e.width)/i,[Math.round(r),Math.round(n)]}function Zc(t){return"frame"==Hu(t)}function Qc(t){return a.find(t.layers,(function(t){return Zc(t)}))}function tl(t){var e=a.find(t.getLayers(),(function(t){return Zc(t.layer)}));return e?e.dataset:null}function el(t){return new me($u(t).bbox)}function nl(t){var e,n,r=new me(t.bbox);return t.crs?(e=zi(r.centerX(),r.centerY(),t.crs),n=t.crs.to_meter):(e=1,n=1),r.width()/e*n/t.width}cu.frame=function(t,e,n){var r,i,o,s;+n.width>0==!1&&+n.pixels>0==!1&&ie("Missing a width or area"),n.width&&n.height&&((n=a.extend({},n)).aspect_ratio=$c(n.width,n.height)),ei(i=di(o=cu.rectangle(e,n)))?ie("Frames require projected, not geographical coordinates"):Ui(o)||oe("Warning: missing projection data. Assuming coordinates are meters and k (scale factor) is 1"),(r=Kc(i,n))[0]>0==!1&&ie("Missing a valid frame width"),r[1]>0==!1&&ie("Missing a valid frame height"),s={info:{},layers:[{name:n.name||"frame",data:new yr([{width:r[0],height:r[1],bbox:i.toArray(),type:"frame"}])}]},t.addDataset(s)},Ju.frame=function(t){var e=Jc([[[.5,.5],[.5,t.height-.5],[t.width-.5,t.height-.5],[t.width-.5,.5],[.5,.5]]]);return a.extend(e.properties,{fill:"none",stroke:t.stroke||"black","stroke-width":t["stroke-width"]||1}),[e]};var rl=Object.freeze({__proto__:null,getAspectRatioArg:$c,getFrameSize:Kc,findFrameLayerInDataset:Qc,findFrameDataset:tl,findFrameLayer:function(t){var e=a.find(t.getLayers(),(function(t){return Zc(t.layer)}));return e&&e.layer||null},getFrameLayerBounds:el,getMapFrameMetersPerPixel:nl});function il(t,e){var n,r,i,o,a=Qc(t);return a?(n=new me((o=$u(a)).bbox),r=new me(0,0,o.width,o.height)):r=al(n=di(t),e),i=n.getTransform(r,e.invert_y),bi(t,(function(t,e){return i.transform(t,e)})),[Math.round(r.width()),Math.round(r.height())||1]}function ol(t){var e=(a.isNumber(t)?String(t):t||"").trim().split(/[, ] */);return 1==e.length&&e.push(e[0]),2==e.length&&e.push(e[0],e[1]),3==e.length&&e.push(e[2]),e.map((function(t){var e=parseFloat(t);return isNaN(e)?1:e}))}function al(t,e){var n,r,i,o,a,s=0,u=0,c=0,l=0,f=t.width(),p=t.height(),h=ol(e.margin),d=h[0]+h[2],g=h[1]+h[3];return e.fit_bbox?(c=e.fit_bbox[0],l=e.fit_bbox[1],f/p>(n=e.fit_bbox[2]-c)/(r=e.fit_bbox[3]-l)?r=0:n=0,d=g=0):e.svg_scale>0?(n=f/e.svg_scale+d,r=0):+e.pixels?(n=(i=Kc(t,e))[0],r=i[1]):(r=e.height||0,n=e.width||(r>0?0:800)),r>0&&(a=(p||f||1)/(r-g)),n>0&&(o=(f||p||1)/(n-d)),n?r||(a=o,r=p>0?g+p/a:n,e.max_height>0&&r>e.max_height&&(a=o*r/e.max_height,r=e.max_height)):(o=a,n=f>0?d+f/o:r),o>a?u=(a=o)*(r-g)-p:a>o&&(s=(o=a)*(n-d)-f),t.padBounds(h[0]*o+.5*s,h[1]*a+.5*u,h[2]*o+.5*s,h[3]*a+.5*u),n>0&&r>0||re("Missing valid height and width parameters"),o===a&&o>0||re("Missing valid margin parameters"),new me(c,l,n+c,r+l)}var sl=Object.freeze({__proto__:null,transformDatasetToPixels:il,parseMarginOption:ol,calcOutputSizeInPixels:al});function ul(t){var e,n;return t&&t.tag?(e="<"+t.tag,t.properties&&(e+=pl(t.properties)),t.children||t.value?(e+=">"+(n="text"==t.tag||"tspan"==t.tag?"":"\n"),t.value&&(e+=t.value),t.children&&(e+=t.children.map(ul).join(n)),e+=n+"</"+t.tag+">"):e+="/>",e):""}var cl=/[&<>"']/g,ll={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"};function fl(t){return String(t).replace(cl,(function(t){return ll[t]}))}function pl(t){return Object.keys(t).reduce((function(e,n){var r=t[n];return r||0===r?("href"==n&&(n="xlink:href"),e+" "+n+'="'+fl(a.isString(r)?r:JSON.stringify(r))+'"'):e}),"")}var hl=Object.freeze({__proto__:null,stringify:ul,stringEscape:fl,stringifyProperties:pl});function dl(t){for(var e,n,r,i,o,a,s,u=0,c=0,l=[],f=[e=1732584193,n=4023233417,~e,~n,3285377520],p=[],h=unescape(encodeURI(t)),d=h.length;c<=d;)p[c>>2]|=(h.charCodeAt(c)||128)<<8*(3-c++%4);for(p[s=d+8>>2|15]=d<<3;u<=s;u+=16){for(e=f,c=0;c<80;e=[0|[(a=((h=e[0])<<5|h>>>27)+e[4]+(l[c]=c<16?~~p[u+c]:a<<1|a>>>31)+1518500249)+((n=e[1])&(r=e[2])|~n&(i=e[3])),o=a+(n^r^i)+341275144,a+(n&r|n&i|r&i)+882459459,o+1535694389][0|c++/20],h,n<<30|n>>>2,r,i])a=l[c-3]^l[c-8]^l[c-14]^l[c-16];for(c=5;c;)f[--c]=f[c]+e[c]|0}for(t="";c<40;)t+=(f[c>>3]>>4*(7-c++%8)&15).toString(16);return t}var gl={};function yl(t,e){!function t(r){"path"==r.tag&&r.properties["fill-pattern"]&&pc(r.properties,e);"image"==r.tag?/\.svg/.test(r.properties.href||"")&&function(t,e){var r=t.properties.href,i=a.find(e,(function(t){return t.href==r}));i||((i={href:r,id:(o=r,dl(o).substr(0,12))}).svg=function(t,e){var r="";try{r=function(t,e){return(t=t.replace(/[^]*<svg/,"<svg")).replace(/^<svg[^>]*>/,(function(t){return t=(t=t.replace(/ id="[^"]*"/,"")).replace(/<svg/,'<svg id="'+e+'"')}))}(function(t){var e;0===t.indexOf("http")?e=function(t){if(t in gl)return gl[t];var e=n(278)("GET",t,{timeout:2e3}).getBody().toString();return gl[t]=e,e}(t):n(16).existsSync(t)?e=n(16).readFileSync(t,"utf8"):ie("Invalid SVG location:",t);return e}(t),e)+"\n",r="\x3c!-- "+t+"--\x3e\n"+r}catch(t){}return r}(r,i.id),e.push(i));var o;i.svg&&(t.tag="use",t.properties.href="#"+i.id)}(r,e):r.children&&r.children.forEach(t)}(t)}function ml(t,e){var n,r,i='xmlns="http://www.w3.org/2000/svg"',o=[];return e.final?t.arcs&&t.arcs.flatten():t=fi(t),a.extend(e,{invert_y:!0}),n=function(t,e){var n=il(t,e),r=e.precision||1e-4;return fa(t,r),n}(t,e),e.svg_data&&_l(t.layers,e.svg_data),r=t.layers.map((function(n){var r=vl(n,t,e);return yl(r,o),ul(r)})).join("\n"),o.length>0&&(r="<defs>\n"+a.pluck(o,"svg").join("")+"</defs>\n"+r),r.includes("xlink:")&&(i+=' xmlns:xlink="http://www.w3.org/1999/xlink"'),[{content:r=a.format('<?xml version="1.0"?>\n<svg %s version="1.2" baseProfile="tiny" width="%d" height="%d" viewBox="%s %s %s %s" stroke-linecap="round" stroke-linejoin="round">\n%s\n</svg>',i,n[0],n[1],0,0,n[0],n[1],r),filename:e.file||Fo(t)+".svg"}]}function vl(t,e,n){var r=xl(t,n);return Wu(t)?r.children=function(t,e,n){var r,i=Qc(e);return i?((r=$u(i)).crs=Ui(e),Ku($u(t),r)):[]}(t,e):r.children=function(t,e,n){var r=Bu(a.defaults({layers:[t]},e),n),i=Fc(r.features||r.geometries||(r.type?[r]:[]),n);n.svg_data&&t.data&&function(t,e,n){var r=e.getFields(),i=n.indexOf("*")>-1?r.concat():n,o=a.difference(i,r);o.length>0&&(i=a.difference(i,o));var s=bl(e.getRecords(),i);t.length!=s.length&&re("Mismatch between number of SVG symbols and data attributes");t.forEach((function(t,e){a.extend(t.properties||{},s[e])}))}(i,t.data,n.svg_data);return i}(t,e,n),r}function _l(t,e){var n=e.reduce((function(e,n){return function(t,e){return a.some(t,(function(t){return t.data&&t.data.fieldExists(e)||!1}))}(t,n)||e.push(n),e}),[]);n.length&&-1==n.indexOf("*")&&ie("Missing data field(s):",n.join(", "))}function bl(t,e){var n=/^[a-z_][a-z0-9_-]*$/i,r=/^xml/,i=e.filter((function(t){return n.test(t)&&!r.test(t)})),o=a.difference(e,i);return o.length>0&&(oe("Unable to add data-* attributes for field(s):",o.join(", ")),oe("data-* names should match pattern [a-z_][a-z0-9_-]*")),t.map((function(t){for(var e,n={},r=0;r<i.length;r++)n["data-"+i[r].toLowerCase()]=(e=t[i[r]],String(e));return n}))}function xl(t,e){var n={tag:"g",properties:{id:(e.id_prefix||"")+t.name},children:[]};return("polyline"==t.geometry_type||wl(t))&&(n.properties.fill="none"),"polyline"==t.geometry_type&&(n.properties.stroke="black",n.properties["stroke-width"]=1),(El(t)||wl(t)||Wu(t))&&(n.properties["font-family"]="sans-serif",n.properties["font-size"]="12",n.properties["text-anchor"]="middle"),n}function wl(t){return"point"==t.geometry_type&&t.data&&t.data.fieldExists("svg-symbol")}function El(t){return"point"==t.geometry_type&&t.data&&t.data.fieldExists("label-text")}var Sl=Object.freeze({__proto__:null,exportSVG:ml,exportLayerForSVG:vl,validateSvgDataFields:_l,exportDataAttributesForSVG:bl,getEmptyLayerForSVG:xl,layerHasSvgSymbols:wl,layerHasLabels:El});function Il(t,e,n){var r,i=t.data;return(!i||n.cut_table||n.drop_table)&&(i=new yr(t.shapes?t.shapes.length:0)),i.isEmpty()&&i.addIdField(),r=i.exportAsDbf?i.exportAsDbf(n):co.exportRecords(i.getRecords(),n.encoding,n.field_order),a.isInteger(n.ldid)&&(new Uint8Array(r)[29]=n.ldid),[{content:r,filename:t.name+".dbf"}]}function Cl(t,e){var n=function(t,e){var n=",",r=e.file?Ro(e.file):"";e.delimiter?n=e.delimiter:"tsv"==r?n="\t":"csv"==r?n=",":t.input_delimiter&&(n=t.input_delimiter);return n}(t.info,e),r=function(t,e){var n="txt";e.file?n=Ro(e.file):"\t"==t?n="tsv":","==t&&(n="csv");return n}(n,e);return t.layers.reduce((function(t,i){return i.data&&t.push({content:Nl(i,n,e),filename:(i.name||"output")+"."+r}),t}),[])}function Nl(t,e,n){var r=n||{},i=r.encoding||"utf8",o=t.data.getRecords(),a=dr(o,r.field_order);return Xn(i)&&!r.to_buffer&&(o.length<1e4||r.to_string)?function(t,e,n){var r=Ol(t,n),i=Al(t,n);return e.length?i+"\n"+e.map(r).join("\n"):i}(a,o,e):function(t,e,n,r){var i=Ol(t,n),o=Al(t,n),a=[$n(o,r)],u=[],c=e.length,l=0;for(;l<c;)u.push(i(e[l])),++l%1e3!=0&&l!=c||(o="\n"+u.join("\n"),u=[],a.push($n(o,r)));return s.concat(a)}(a,o,e,i)}function Al(t,e){var n=Pl(e);return t.map(n).join(e)}function Ol(t,e){var n=Pl(e);return function(r){return t.map((function(t){return n(r[t])})).join(e)}}function Pl(t){var e=new RegExp('["\n\r'+t+"]");function n(t){return e.test(t)&&(t='"'+t.replace(/"/g,'""')+'"'),t}return function(t){return null==t?"":a.isString(t)?n(t):a.isNumber(t)?t+"":a.isObject(t)?n(JSON.stringify(t)):t+""}}var Tl=Object.freeze({__proto__:null,exportDelim:Cl,exportLayerAsDSV:Nl,getDelimValueFormatter:Pl});function Ml(t,e){return t.layers.reduce((function(n,r){var i=function(t,e){var n=(e.info||{}).prj;if(!n)try{n=Ri(Ui(e))}catch(t){}n||oe("Unable to generate .prj file for",t.name+".shp");return n?{content:n,filename:t.name+".prj"}:null}(r,t);return n=(n=n.concat(function(t,e,n){var r,i=t.shapes||a.initializeArray(new Array(Sr(t)),null),o=new me,s=function(t){var e,n=t.geometry_type;e="point"==n?jn(t.shapes||[])<=1?Io.POINT:Io.MULTIPOINT:"polygon"==n?Io.POLYGON:"polyline"==n?Io.POLYLINE:Io.NULL;return e}(t),u=100,c=100+8*i.length,l=new Zi(c).bigEndian().position(100),f=i.map((function(n,r){var i=function(t,e,n){var r=Io.isMultiPartType(n),i=!r&&!Io.isMultiPointType(n),o=t.pointCount>0==!1,a=o?null:t.bounds,s=null;if(o)s=new Zi(12,!1).writeInt32(e).writeInt32(2).littleEndian().writeInt32(0);else if(i)s=new Zi(28,!1).writeInt32(e).writeInt32(10).littleEndian().writeInt32(n).writeFloat64(t.pathData[0].points[0][0]).writeFloat64(t.pathData[0].points[0][1]);else{var u=r?52+4*t.pathCount:48,c=u+16*t.pointCount,l=0;s=new Zi(c,!1).writeInt32(e).writeInt32((c-8)/2).littleEndian().writeInt32(n).writeFloat64(a.xmin).writeFloat64(a.ymin).writeFloat64(a.xmax).writeFloat64(a.ymax),r&&s.writeInt32(t.pathCount),s.writeInt32(t.pointCount),t.pathData.forEach((function(t,e){r&&s.position(52+4*e).writeInt32(l),s.position(u+16*l);for(var n=0,i=t.points.length;n<i;n++)s.writeFloat64(t.points[n][0]),s.writeFloat64(t.points[n][1]);l+=n})),t.pointCount!=l&&re("Shp record point count mismatch; pointCount:",l,"data.pointCount:",t.pointCount)}return{bounds:a,buffer:s.buffer()}}(Tu(n,e.arcs,t.geometry_type),r+1,s),a=i.buffer.byteLength;return l.writeInt32(u/2),l.writeInt32(a/2-4),u+=a,i.bounds&&o.mergeBounds(i.bounds),i.buffer}));r=new Zi(u,!1).writeInt32(9994).skipBytes(20).writeInt32(u/2).littleEndian().writeInt32(1e3).writeInt32(s),o.hasBounds()?r.writeFloat64(o.xmin||0).writeFloat64(o.ymin||0).writeFloat64(o.xmax||0).writeFloat64(o.ymax||0):r.skipBytes(32);return r.skipBytes(32),f.forEach((function(t){r.writeBuffer(t)})),l.position(0).writeBuffer(r.buffer(),100).position(24).writeInt32(c/2),[{content:r.buffer(),filename:t.name+".shp"},{content:l.buffer(),filename:t.name+".shx"}]}(r,t))).concat(Il(r,0,e)),i&&n.push(i),n}),[])}var Ll=Object.freeze({__proto__:null,exportShapefile:Ml});function Rl(t){var e=1e4/t;return function(t){return t===1/0?0:Math.ceil(t*e)}}function Dl(t,e,n){return Ou(Tn(t,e,"polygon"),e,n).map((function(t){return t.map((function(t){return t.ids}))}))}cu.explodeFeatures=function(t,e,n){var r=t.data?t.data.getRecords():null,i=r?[]:null,o=[],s=a.extend({},t);return t.shapes.forEach((function(s,u){var c,l;if(s?(c="polygon"==t.geometry_type&&s.length>1?n&&n.naive?function(t,e){return Tn(t,e,"polygon").map((function(t){return t.area<0&&wn(t.ids),[t.ids]}))}(s,e):Dl(s,e):function(t){return t.map((function(t){return[t.concat()]}))}(s),a.merge(o,c)):o.push(null),null!==i)for(var f=0,p=c?c.length:1;f<p;f++)i.push((l=r[u],Object.assign({},l)))})),s.shapes=o,null!==i&&(s.data=new yr(i)),s};var Fl=Object.freeze({__proto__:null,explodePolygon:Dl});function kl(t,e){var n="."+(e.extension||"json"),r=!e.final||yi(t)&&t.arcs.getRetainedInterval()>0,i=JSON.stringify;return r&&(t=pi(t)),e.prettify&&(i=js("coordinates,arcs,bbox,translate,scale".split(","))),e.width>0||e.height>0?il(t,e=a.defaults({invert_y:!0},e)):e.fit_bbox&&il(t,{fit_bbox:e.fit_bbox}),e.precision&&fa(t,e.precision),e.singles?li(t).map((function(t){return{content:i(Rs.exportTopology(t,e)),filename:(t.layers[0].name||"output")+n}})):[{filename:e.file||Fo(t)+n,content:i(Rs.exportTopology(t,e))}]}Rs.getPresimplifyFunction=Rl,Rs.exportTopology=function(t,e){var n={type:"Topology",arcs:[]},r=yi(t),i=di(t);return e.bbox&&i.hasBounds()&&(n.bbox=i.toArray()),r&&e.presimplify&&!t.arcs.getVertexData().zz&&cu.simplify(t,e),e.no_quantization||!e.quantization&&!r||(n.transform=Rs.transformDataset(t,i,e)),r&&(si(t),n.arcs=Rs.exportArcs(t.arcs,i,e),n.transform&&Rs.deltaEncodeArcs(n.arcs)),n.objects=t.layers.reduce((function(n,r,i){return n[r.name||"layer"+(i+1)]=Rs.exportLayer(r,t.arcs,e),n}),{}),e.metadata&&(n.metadata=function(t){var e=Ui(t),n=null;return e&&(n=Li(e)),{proj4:n}}(t)),n},Rs.transformDataset=function(t,e,n){var r=Rs.calcExportBounds(e,t.arcs,n),i=e.getTransform(r),o=i.invert();function a(t,e){var n=i.transform(t,e);return[Math.round(n[0]),Math.round(n[1])]}return t.arcs&&t.arcs.transformPoints(a),n.no_point_quantization||t.layers.filter(xr).forEach((function(t){Er(t,a)})),{scale:[o.mx,o.my],translate:[o.bx,o.by]}},Rs.exportArcs=function(t,e,n){var r=null,i=[];return n.presimplify&&(r=Rl(e.width())),t.forEach2((function(t,e,n,o,a){for(var s,u=[],c=t+e;t<c;t++)s=[n[t],o[t]],r&&s.push(r(a[t])),u.push(s);i.push(u.length>1?u:null)})),i},Rs.deltaEncodeArcs=function(t){t.forEach((function(t){for(var e,n,r,i,o,a=0,s=t.length;a<s;a++)r=(o=t[a])[0],i=o[1],a>0&&(o[0]=r-e,o[1]=i-n),e=r,n=i}))},Rs.calcExportResolution=function(t,e){var n=vn(t);return[n[0]*e,n[1]*e]},Rs.calcExportBounds=function(t,e,n){var r;return r=n.topojson_precision>0?Rs.calcExportResolution(e,n.topojson_precision):n.quantization>0?[t.width()/(n.quantization-1),t.height()/(n.quantization-1)]:n.precision>0?[n.precision,n.precision]:Rs.calcExportResolution(e,.02),new me(0,0,Math.ceil(t.width()/r[0])||0,Math.ceil(t.height()/r[1])||0)},Rs.exportProperties=function(t,e,n){var r=qu(e,n),i=Yu(e,n);t.forEach((function(t,e){r&&(t.properties=r[e]),i&&(t.id=i[e])}))},Rs.exportLayer=function(t,e,n){for(var r,i=Sr(t),o=[],a=Rs.exporters[t.geometry_type]||null,s=0;s<i;s++)r=a&&t.shapes[s],o[s]=r?a(r,e,n):{type:null};return t.data&&Rs.exportProperties(o,t.data,n),{type:"GeometryCollection",geometries:o}},Rs.exportPolygonGeom=function(t,e,n){var r={};return(t=Pn(t,e))&&0!==t.length?t.length>1?(r.arcs=Dl(t,e,n.invert_y),1==r.arcs.length?(r.arcs=r.arcs[0],r.type="Polygon"):r.type="MultiPolygon"):(r.arcs=t,r.type="Polygon"):r.type=null,r},Rs.exportLineGeom=function(t,e){var n={};return(t=Pn(t,e))&&0!==t.length?1==t.length?(n.type="LineString",n.arcs=t[0]):(n.type="MultiLineString",n.arcs=t):n.type=null,n},Rs.exporters={polygon:Rs.exportPolygonGeom,polyline:Rs.exportLineGeom,point:Os.exportPointGeom};var jl=Object.freeze({__proto__:null,exportTopoJSON:kl});function Bl(t,e){var n=e.file||null,r=t.info&&t.info.input_formats&&t.info.input_formats[0],i=null;return e.format?e.format:(n?i=Gl(n,r):r&&(i=r),"json"==i&&gi(t)&&(i="geojson"),i||null)}function Gl(t,e){var n=Ro(t).toLowerCase(),r=null;return"shp"==n?r="shapefile":"dbf"==n?r="dbf":"svg"==n?r="svg":/json$/.test(n)?(r="geojson","topojson"==n||"topojson"==e&&"geojson"!=n?r="topojson":"json"==n&&"json"==e&&(r="json")):Ca(t)?r="dsv":e&&(r=e),r}var Ul=Object.freeze({__proto__:null,getOutputFormat:Bl,inferOutputFormat:Gl});function zl(t,e){return function(t,e){var n,r=Bl(t[0],e);"svg"==r||"topojson"==r||"geojson"==r&&e.combine_layers?t.length>1&&(t=[ru(t)],"topojson"==r&&$s(t[0]),e=a.defaults({final:!0},e)):function(t){Yl(t.reduce((function(t,e){return t.concat(e.layers)}),[]))}(t=t.map(hi));return Xl(n=t.reduce((function(t,n){return Vt()?a.sortOn(n.layers,"stack_id",!0):a.sortOn(n.layers,"target_id",!0),t.concat(ql(n,e))}),[])),n}(t.map((function(t){return a.defaults({layers:t.layers},t.dataset)})),e)}function ql(t,e){var n,r,i=e.format=Bl(t,e),o=Vl[i],s=[];return i?o||re("Unknown output format:",i):re("Missing output format"),t=a.defaults({layers:t.layers.map((function(t){return a.extend({},t)}))},t),e.file&&"topojson"!=i&&"svg"!=i&&t.layers.forEach((function(t){t.name=Lo(e.file)})),Yl(t.layers),e.precision&&"svg"!=i&&"geojson"!=i&&"topojson"!=i&&fa(t=pi(t),e.precision),e.cut_table&&(s=(n=t.layers,r=[],n.forEach((function(t){t.data&&r.push({content:JSON.stringify(t.data),filename:(t.name?t.name+"-":"")+"table.json"})})),r).concat(s)),e.extension&&(e.extension=e.extension.replace(/^\.+/,"")),function(t){t.forEach((function(t){t.geometry_type?(a.contains(["polygon","polyline","point"],t.geometry_type)||re("A layer has an invalid geometry type:",t.geometry_type),t.shapes||re("A layer is missing shape data")):t.shapes&&a.some(t.shapes,(function(t){return!!t}))&&re("A layer contains shape records and a null geometry type")}))}(t.layers),s=o(t,e).concat(s),e.bbox_index&&s.push(function(t){var e=t.layers.map((function(e){return{bbox:Br(e,t.arcs).toArray(),name:e.name}}));return{content:JSON.stringify(e),filename:"bbox-index.json"}}(t)),function(t){var e={};t.forEach((function(t,n){var r=t.filename;r||re("Missing a filename for file"+n),r in e&&re("Duplicate filename",r),e[r]=!0}))}(s),s}var Vl={geojson:Ru,topojson:kl,shapefile:Ml,dsv:Cl,dbf:function(t,e){return t.layers.reduce((function(n,r){return r.data&&(n=n.concat(Il(r,t,e))),n}),[])},json:Us,svg:ml};function Yl(t){var e=t.map((function(t){return t.name||"layer"})),n=a.uniqifyNames(e);t.forEach((function(t,e){t.name=n[e]}))}function Xl(t){var e=t.map((function(t){return t.filename})),n=a.uniqifyNames(e,Jl);t.forEach((function(t,e){t.filename=n[e]}))}function Jl(t,e){var n,r,i=t.split(".");return i.length<2?a.formatVersionedName(t,e):(n=i.pop(),r=i.join("."),a.formatVersionedName(r,e)+"."+n)}var Wl=Object.freeze({__proto__:null,exportTargetLayers:zl,exportFileContent:ql,assignUniqueLayerNames:Yl,assignUniqueFileNames:Xl,formatVersionedFileName:Jl});function Hl(t){return t.reduce((function(t,e){return e.layers.forEach((function(n){t.push({layer:n,dataset:e.dataset})})),t}),[])}function $l(t,e,n){var r=Kl(t,e,!0);return n&&(r=r.filter((function(t){return t.layer.geometry_type==n}))),t.forEach((function(t){t.layer.target_id=-1})),r.forEach((function(t,e){t.layer.target_id=e})),function(t){var e=[],n=[];return t.forEach((function(t){var r=e.indexOf(t.dataset);-1==r?(e.push(t.dataset),n.push({layers:[t.layer],dataset:t.dataset})):n[r].layers.push(t.layer)})),n}(r)}function Kl(t,e,n){var r=[],i=[],o={};return e.split(",").forEach((function(e,n){var a=Zl(e),s=!1;t.forEach((function(t,e){e in o?s=!0:a(t.layer,e+1)&&(r.push(t),o[e]=!0,s=!0)})),0==s&&i.push(e)})),n&&i.length&&ie(a.format("Missing layer%s: %s",1==i.length?"":"s",i.join(","))),r}function Zl(t){var e=a.isInteger(Number(t)),n=e?null:a.wildcardToRegExp(t);return function(r,i){return e?String(i)==t:n.test(r.name||"")}}var Ql=Object.freeze({__proto__:null,expandCommandTargets:Hl,findCommandTargets:$l,findMatchingLayers:Kl,getLayerMatch:Zl,countTargetLayers:function(t){return t.reduce((function(t,e){return t+e.layers.length}),0)},getLayerTargetId:function(t,e){var n,r=0;return e.name,t.getLayers().forEach((function(t,i){e.name&&t.layer.name==e.name&&r++,e==t.layer&&(n=String(i+1))})),n||re("Layer not found"),1==r?e.name:n}});function tf(t){var e=t.options,n=t._;n.length>0&&!e.files&&(e.files=n),e.files&&(e.files=jo.expandInputFiles(e.files),"-"!=e.files[0]&&"/dev/stdin"!=e.files[0]||(delete e.files,e.stdin=!0)),"precision"in e&&e.precision>0==!1&&re("precision= option should be a positive number"),e.encoding&&(e.encoding=Vn(e.encoding))}function ef(t){var e=t.options,n=t._[0];n&&(/^[0-9.]+%?$/.test(n)?e.percentage=a.parsePercent(n):re("Unparsable option:",n)),e.interval||e.percentage||e.resolution||re("Command requires an interval, percentage or resolution parameter")}function nf(t){var e=t._;e.length>0&&!t.options.crs&&(t.options.crs=e.join(" "),e=[]),e.length>0&&re("Received one or more unexpected parameters: "+e.join(", ")),t.options.crs||t.options.match||t.options.init||ie("Missing projection data")}function rf(t){var e=t.options;if(1==t._.length){var n=t._[0].split(",");e.cols=parseInt(n[0],10),e.rows=parseInt(n[1],10)||e.cols}}function of(t){t.options.expression||re("Command requires a JavaScript expression")}function af(t){var e=t._,n=t.options,r=e[0]||"",i=Mo(r);e.length>1&&re("Command takes one file or directory argument"),"-"==r||"/dev/stdout"==r?n.stdout=!0:r&&!i.extension?(jo.isDirectory(r)||re("Unknown output option:",r),n.directory=r):r&&(i.directory&&(n.directory=i.directory),n.file=i.filename,Oa(n.file)&&re("Output file looks like an unsupported file type:",n.file)),n.format&&(n.format=n.format.toLowerCase(),"csv"==n.format?(n.format="dsv",n.delimiter=n.delimiter||","):"tsv"==n.format&&(n.format="dsv",n.delimiter=n.delimiter||"\t"),Na(n.format)||re("Unsupported output format:",n.format)),n.delimiter&&(n.delimiter=n.delimiter.replace(/^["']?\\t["']?$/,"\t"),Ss(n.delimiter)||re("Unsupported delimiter:",n.delimiter)),n.encoding&&(n.encoding=Vn(n.encoding)),n.field_order&&"ascending"!=n.field_order&&re("Unsupported field order:",n.field_order),"quantization"in n&&n.quantization>0==!1&&re("quantization= option should be a nonnegative integer"),"topojson_precision"in n&&n.topojson_precision>0==!1&&re("topojson-precision= option should be a positive number")}function sf(t){var e=new RegExp("(([^'\"\\s])+|'((\\\\'|[^'])*?)'|\"((\\\\\"|[^\"])*?)\")*","g");return(t.match(e)||[]).filter((function(t){return!!t&&"\\"!=t})).map(a.trimQuotes)}function uf(t){var e=ff(t,",");return 1==e.length&&(e=ff(e[0],",")),e}function cf(t){var e=ff(t.replace(/, *(?=[^(]*\))/g,"~~~"),", ");return 1==e.length&&(e=ff(e[0],", ")),e=e.map((function(t){return t.replace(/~~~/g,",")}))}function lf(t){return t=(t=t.map((function(t){return t.trim()}))).filter((function(t){return""!==t}))}function ff(t,e){for(var n,r=new RegExp("^("+("([^"+e+"'\"][^"+e+"]*)")+"|'((\\\\'|[^'])*?)'|\"((\\\\\"|[^\"])*?)\")(["+e+"]+|$)"),i=[];null!==(n=r.exec(t));)i.push(n[1]),t=t.substr(n[0].length);return i.filter((function(t){return!!t&&"\\"!=t})).map(a.trimQuotes)}var pf=Object.freeze({__proto__:null,splitShellTokens:sf,parseStringList:uf,parseColorList:cf,cleanArgv:lf,formatOptionValue:function(t){return(t=String(t)).indexOf(" ")>-1&&(t=JSON.stringify(t)),t}});function hf(){var t,e=/^--?([a-z][\w-]*)$/i,n=/^--?[a-z][\w-]*[=]/i,r=/^([a-z0-9_+-]+)=(?!\=)(.*)$/i,i="",o=[],s=[],u=null;if(this instanceof hf==!1)return new hf;function c(){return s.map((function(t){return t.done()}))}function l(t,e){return a.find(e,(function(e){return e.name===t||e.alias===t||e.old_alias===t}))}function f(t,e){return a.find(e.options,(function(e){return e.name===t||e.alias===t||e.old_alias===t}))}this.usage=function(t){return i=t,this},this.note=function(e){return t=e,this},this.default=function(t){u=t},this.example=function(t){o.push(t)},this.command=function(t){var e=new df(t);return s.push(e),e},this.section=function(t){return this.command("").title(t)},this.parseArgv=function(t){var i,o,s,p=c(),h=[],d=lf(t);for(1==d.length&&l(d[0],c())?d.unshift("-help"):d.length>0&&!g(d[0])&&u&&d.unshift("-"+u);d.length>0;){for((o=_(d))||ie("Invalid command:",d[0]),(s=l(o,p))||(s={name:o,options:[],multi_arg:!0}),i={name:s.name,options:{},_:[]};d.length>0&&!g(d[0]);)y(i,d,s);try{i._.length>0&&s.no_arg&&re("Received one or more unexpected parameters:",i._.join(" ")),i._.length>1&&!s.multi_arg&&re("Command expects a single value. Received:",i._.join(" ")),s.default&&1==i._.length&&v(i,s),s.validate&&s.validate(i)}catch(t){ie("["+o+"] "+t.message)}h.push(i)}return h;function g(t){return n.test(t)&&ie("Invalid command syntax:",t),e.test(t)}function y(t,e,n){var i,o,s,u=e.shift();r.test(u)?(o=f((s=function(t){var e=r.exec(t),n=e[1],i=a.trimQuotes(e[2]);return[n,i]}(u))[0],n))&&("flag"==o.type||o.assign_to?ie("-"+n.name+" "+s[0]+" option doesn't take a value"):e.unshift(s[1])):o=f(u,n),o?(o.alias_to&&(o=f(o.alias_to,n)),i=(i=o.name).replace(/-/g,"_"),o.assign_to?t.options[o.assign_to]=o.name:"flag"==o.type?t.options[i]=!0:t.options[i]=m(e,o)):t._.push(a.trimQuotes(u))}function m(t,e){return(0===t.length||g(t[0]))&&ie("Missing value for "+e.name+" option"),function(t,e){var n,r,i=e.type;n="number"==i?Number(t):"integer"==i?Math.round(Number(t)):"colors"==i?cf(t):"strings"==i?uf(t):"bbox"==i||"numbers"==i?t.split(",").map(parseFloat):t;n!=n&&(r="Invalid numeric value");r&&ie(r+" for "+e.name+" option");return n}(t.shift(),e)}function v(t,e){var n=f(e.default,e);t.options[e.default]=m(t._,n)}function _(t){var n=e.exec(t[0]);return n?(t.shift(),n[1]):null}},this.getHelpMessage=function(e){var n,r;return e?((n=l(e,c()))||ie(e,"is not a known command"),r=function(t){var e=[];e.push("COMMAND",s(t)),t.options.length>0&&(e.push("","OPTIONS"),t.options.forEach((function(n){e=e.concat(function(t,e){var n,r=[],i=t.describe;i&&(t.label?r.push([t.label,i]):t.name==e.default?(n=t.name+"=",r.push(["<"+t.name+">","shortcut for "+n]),r.push([n,i])):(n=t.name,t.alias&&(n+=", "+t.alias),"flag"==t.type||t.assign_to||(n+="="),r.push([n,i])));return r}(n,t))})));t.examples&&(e.push("","EXAMPLE"+(t.examples.length>1?"S":"")),t.examples.forEach((function(t,n){n>0&&e.push(""),t.split("\n").forEach((function(t,n){e.push("  "+t)}))})));return e}(n)):r=function(e){var n=[];i&&n.push(i);e.forEach((function(t){t.title?n.push("",t.title):n.push(s(t))})),o.length>0&&(n.push("","Examples"),o.forEach((function(t){n.push("",t)})));t&&n.push("",t);return n}(c().filter((function(t){return t.name&&t.describe||t.title}))),function(t){var e=function(t){var e=0;return t.forEach((function(t){Array.isArray(t)&&(e=Math.max(e,t[0].length))})),e}(t),n=Vt()?"":"  ";return t.map((function(t){return Array.isArray(t)&&(t=n+a.rpad(t[0],e," ")+"  "+t[1]),t})).join("\n")}(r);function s(t){var e=t.name?"-"+t.name:"";return t.alias&&(e+=", -"+t.alias),[e,t.describe||"(undocumented command)"]}},this.printHelp=function(t){ae(this.getHelpMessage(t))}}function df(t){var e={name:t,options:[]};this.validate=function(t){return e.validate=t,this},this.describe=function(t){return e.describe=t,this},this.example=function(t){return e.examples||(e.examples=[]),e.examples.push(t),this},this.alias=function(t){return e.alias=t,this},this.oldAlias=function(t){return e.old_alias=t,this},this.title=function(t){return e.title=t,this},this.flag=function(t){return e[t]=!0,this},this.option=function(t,n){return n=a.extend({},n),a.isString(t)&&t||re("Missing option name"),a.isObject(n)||re("Invalid option definition:",n),n.DEFAULT&&(e.default=t),n.name=t,e.options.push(n),this},this.done=function(){return e}}function gf(){var t={describe:"layer(s) to target (comma-sep. list)"},e={describe:"rename the edited layer(s)"},n={alias:"+",type:"flag",label:"+, no-replace",describe:"retain both input and output layer(s)"},r={type:"flag"},i={describe:"text encoding (applies to .dbf and delimited text files)"},o={describe:"snapping distance in source units (default is tiny)",type:"distance"},a={old_alias:"min-gap-area",describe:"threshold for filling gaps, e.g. 1.5km2 (default is small)",type:"area"},s={describe:"boost gap-fill-area of slivers (0-1, default is 1)",type:"number"},u={describe:"use a JS expression to aggregate data values"},c={describe:"fields to sum when dissolving  (comma-sep. list)",type:"strings"},l={describe:"fields to copy when dissolving (comma-sep. list)",type:"strings"},f={DEFAULT:!0,type:"strings",describe:"(optional) field(s) to dissolve on (comma-sep. list)"},p={describe:"type hints for csv source files, e.g. FIPS:str,ZIPCODE:str",type:"strings"},h={describe:"csv field(s) to import as strings, e.g. FIPS,ZIPCODE",type:"strings"},d={type:"bbox",describe:"comma-sep. bounding box: xmin,ymin,xmax,ymax"},g={type:"flag",describe:"retain only features that would have been deleted"},y={describe:"use a JS expression to select a subset of features"},m={describe:"filter polygon boundaries using a JS expression (with A and B)"},v={describe:"aspect ratio as a number or range (e.g. 2 0.8,1.6 ,2)"},_={describe:"padding as distance or pct of h/w (single value or list)",type:"distance"},b=new hf;return b.usage("Usage:  mapshaper -<command> [options] ..."),b.note("Enter mapshaper -help <command> to view options for a single command"),b.section("I/O commands"),b.default("i"),b.command("i").describe("input one or more files").validate(tf).flag("multi_arg").option("files",{DEFAULT:!0,type:"strings",describe:"one or more files to import, or - to use stdin"}).option("combine-files",{describe:"import files to separate layers with shared topology",type:"flag"}).option("merge-files",{type:"flag"}).option("no-topology",{describe:"treat each shape as topologically independent",type:"flag"}).option("precision",{describe:"coordinate precision in source units, e.g. 0.001",type:"number"}).option("snap",{type:"flag",describe:"snap nearly identical points to fix minor topology errors"}).option("auto-snap",{alias_to:"snap"}).option("snap-interval",o).option("encoding",i).option("id-field",{describe:"import Topo/GeoJSON id property to this field"}).option("string-fields",h).option("field-types",p).option("name",{describe:"Rename the imported layer(s)"}).option("geometry-type",{}).option("json-path",{}).option("csv-skip-lines",{type:"integer",describe:"[CSV] number of lines to skip at the beginning of the file"}).option("csv-lines",{type:"integer",describe:"[CSV] number of data records to read"}).option("csv-field-names",{type:"strings",describe:"[CSV] comma-sep. list of field names to assign each column"}).option("csv-dedup-fields",{type:"flag",describe:"[CSV] rename fields with duplicate names"}).option("csv-filter",{describe:"[CSV] JS expression for filtering records"}).option("csv-fields",{type:"strings",describe:"[CSV] comma-sep. list of fields to import"}).option("json-path",{old_alias:"json-subtree",describe:"[JSON] path to JSON input data; separator is /"}),b.command("o").describe("output edited content").validate(af).option("_",{label:"<file|directory>",describe:"(optional) name of output file or directory, - for stdout"}).option("format",{describe:"options: shapefile,geojson,topojson,json,dbf,csv,tsv,svg"}).option("target",t).option("force",{describe:"allow overwriting input files",type:"flag"}).option("dry-run",{type:"flag"}).option("ldid",{type:"number"}).option("precision",{describe:"coordinate precision in source units, e.g. 0.001",type:"number"}).option("bbox-index",{describe:"export a .json file with bbox of each layer",type:"flag"}).option("cut-table",{describe:"detach data attributes from shapes and save as a JSON file",type:"flag"}).option("drop-table",{describe:"remove data attributes from output",type:"flag"}).option("encoding",{describe:"(Shapefile/CSV) text encoding (default is utf8)"}).option("field-order",{describe:"(Shapefile/CSV) field-order=ascending sorts columns A-Z"}).option("id-field",{describe:"(Topo/GeoJSON/SVG) field to use for id property",type:"strings"}).option("bbox",{type:"flag",describe:"(Topo/GeoJSON) add bbox property"}).option("extension",{describe:'(Topo/GeoJSON) set file extension (default is ".json")'}).option("prettify",{type:"flag",describe:"(Topo/GeoJSON) format output for readability"}).option("singles",{describe:"(TopoJSON) save each target layer as a separate file",type:"flag"}).option("quantization",{describe:"(TopoJSON) specify quantization (auto-set by default)",type:"integer"}).option("no-quantization",{describe:"(TopoJSON) export coordinates without quantization",type:"flag"}).option("no-point-quantization",{type:"flag"}).option("presimplify",{describe:"(TopoJSON) add per-vertex data for dynamic simplification",type:"flag"}).option("topojson-precision",{type:"number"}).option("rfc7946",{type:"flag"}).option("gj2008",{describe:"(GeoJSON) use original GeoJSON spec (not RFC 7946)",type:"flag"}).option("combine-layers",{describe:"(GeoJSON) output layers as a single file",type:"flag"}).option("geojson-type",{describe:"(GeoJSON) FeatureCollection, GeometryCollection or Feature"}).option("width",{describe:"(SVG/TopoJSON) pixel width of output (SVG default is 800)",type:"number"}).option("height",{describe:"(SVG/TopoJSON) pixel height of output (optional)",type:"number"}).option("max-height",{describe:"(SVG/TopoJSON) max pixel height of output (optional)",type:"number"}).option("margin",{describe:"(SVG/TopoJSON) space betw. data and viewport (default is 1)"}).option("pixels",{describe:"(SVG/TopoJSON) output area in pix. (alternative to width=)",type:"number"}).option("fit-bbox",{type:"bbox",describe:"(TopoJSON) scale and shift coordinates to fit a bbox"}).option("svg-scale",{describe:"(SVG) source units per pixel (alternative to width= option)",type:"number"}).option("point-symbol",{describe:"(SVG) circle or square (default is circle)"}).option("svg-data",{type:"strings",describe:"(SVG) fields to export as data-* attributes"}).option("id-prefix",{describe:"(SVG) prefix for namespacing layer and feature ids"}).option("delimiter",{describe:"(CSV) field delimiter"}).option("final",{type:"flag"}).option("metadata",{type:"flag"}),b.section("Editing commands"),b.command("affine").describe("transform coordinates by shifting, scaling and rotating").flag("no_args").option("shift",{type:"strings",describe:"x,y offsets in source units (e.g. 5000,-5000)"}).option("scale",{type:"number",describe:"scale (default is 1)"}).option("rotate",{type:"number",describe:"angle of rotation in degrees (default is 0)"}).option("anchor",{type:"numbers",describe:"center of rotation/scaling (default is center of selected shapes)"}).option("where",y).option("target",t),b.command("buffer").option("radius",{describe:"radius of buffer, as an expression or a constant",DEFAULT:!0}).option("tolerance",{}).option("backtrack",{type:"integer"}).option("type",{}).option("planar",{type:"flag"}).option("v2",{type:"flag"}).option("debug-division",{type:"flag"}).option("debug-mosaic",{type:"flag"}).option("no-cleanup",{type:"flag"}).option("units",{describe:"distance units (meters|miles|km|feet) (default is meters)"}).option("name",e).option("target",t).option("no-replace",n),b.command("clean").describe("fixes geometry issues, such as polygon overlaps and gaps").option("gap-fill-area",a).option("sliver-control",s).option("snap-interval",o).option("no-snap",r).option("allow-empty",{describe:"keep null geometries (removed by default)",type:"flag"}).option("rewind",{describe:"fix errors in the CW/CCW winding order of polygon rings",type:"flag"}).option("arcs",{alias_to:"only-arcs"}).option("only-arcs",{describe:"delete unused arcs but don't remove gaps and overlaps",type:"flag"}).option("debug",{type:"flag"}).option("no-arc-dissolve",{type:"flag"}).option("target",t),b.command("clip").describe("use a polygon layer to clip another layer").example("$ mapshaper states.shp -clip land_area.shp -o clipped.shp").option("source",{DEFAULT:!0,describe:"file or layer containing clip polygons"}).option("remove-slivers",{describe:"remove sliver polygons created by clipping",type:"flag"}).option("bbox",d).option("bbox2",{type:"bbox",describe:"experimental fast bbox clipping"}).option("name",e).option("no-snap",r).option("target",t).option("no-replace",n),b.command("colorizer").describe("define a function to convert data values to color classes").flag("no_arg").option("colors",{describe:"comma-separated list of CSS colors",type:"colors"}).option("breaks",{describe:"ascending-order list of breaks for sequential color scheme",type:"numbers"}).option("categories",{describe:"comma-sep. list of keys for categorical color scheme",type:"strings"}).option("random",{describe:"randomly assign colors",type:"flag"}).option("other",{describe:"default color for categorical scheme (defaults to no-data color)"}).option("nodata",{describe:"color to use for invalid or missing data (default is white)"}).option("name",{describe:"function name to use in -each and -svg-style commands"}).option("precision",{describe:"rounding precision to apply before classification (e.g. 0.1)",type:"number"}).example("Define a sequential color scheme and use it to create a new field\n$ mapshaper data.json -colorizer name=getColor nodata=#eee breaks=20,40 \\\n  colors=#e0f3db,#a8ddb5,#43a2ca -each 'fill = getColor(RATING)' -o output.json"),b.command("dissolve").describe("merge features within a layer").example("Dissolve all polygons in a feature layer into a single polygon\n$ mapshaper states.shp -dissolve -o country.shp").example("Generate state-level polygons by dissolving a layer of counties\n(STATE_FIPS, POPULATION and STATE_NAME are attribute field names)\n$ mapshaper counties.shp -dissolve STATE_FIPS copy-fields=STATE_NAME sum-fields=POPULATION -o states.shp").option("field",{}).option("fields",f).option("calc",u).option("sum-fields",c).option("copy-fields",l).option("multipart",{type:"flag",describe:"make multipart features instead of dissolving"}).option("where",y).option("group-points",{type:"flag",describe:"[points] group points instead of converting to centroids"}).option("weight",{describe:"[points] field or expression to use for weighting centroid"}).option("planar",{type:"flag",describe:"[points] use 2D math to find centroids of latlong points"}).option("name",e).option("target",t).option("no-replace",n),b.command("dissolve2").describe("merge adjacent polygons (repairs overlaps and gaps)").option("field",{}).option("fields",f).option("calc",u).option("sum-fields",c).option("copy-fields",l).option("gap-fill-area",a).option("sliver-control",s).option("name",e).option("no-snap",r).option("target",t).option("no-replace",n),b.command("divide").describe("divide lines by polygons, copy polygon data to lines").option("fields",{describe:"fields to copy (comma-sep.) (default is all but key field)",type:"strings"}).option("calc",{describe:"use a JS expression to assign values (for many-to-one joins)"}).option("force",{describe:"replace values from same-named fields",type:"flag"}).option("source",{DEFAULT:!0,describe:"file or layer containing polygons"}).option("target",t),b.command("dots").describe("").option("field",{describe:"field containing number of dots"}).option("target",t),b.command("drop").describe("delete layer(s) or elements within the target layer(s)").flag("no_arg").option("geometry",{describe:"delete all geometry from the target layer(s)",type:"flag"}).option("holes",{describe:"delete holes from polygons",type:"flag"}).option("fields",{type:"strings",describe:"delete a list of attribute data fields, e.g. 'id,name' '*'"}).option("target",t),b.command("each").describe("create/update/delete data fields using a JS expression").example("Add two calculated data fields to a layer of U.S. counties\n$ mapshaper counties.shp -each 'STATE_FIPS=CNTY_FIPS.substr(0, 2), AREA=$.area'").option("expression",{DEFAULT:!0,describe:"JS expression to apply to each target feature"}).option("where",y).option("target",t),b.command("erase").describe("use a polygon layer to erase another layer").example("$ mapshaper land_areas.shp -erase water_bodies.shp -o erased.shp").option("source",{DEFAULT:!0,describe:"file or layer containing erase polygons"}).option("remove-slivers",{describe:"remove sliver polygons created by erasing",type:"flag"}).option("bbox",d).option("name",e).option("no-snap",r).option("target",t).option("no-replace",n),b.command("explode").describe("divide multi-part features into single-part features").option("naive",{type:"flag"}).option("target",t),b.command("filter").describe("delete features using a JS expression").option("expression",{DEFAULT:!0,describe:"delete features that evaluate to false"}).option("bbox",{describe:"delete features outside bbox (xmin,ymin,xmax,ymax)",type:"bbox"}).option("invert",g).option("remove-empty",{type:"flag",describe:"delete features with null geometry"}).option("keep-shapes",{type:"flag"}).option("cleanup",{type:"flag"}).option("name",e).option("target",t).option("no-replace",n),b.command("filter-fields").describe("retain a subset of data fields").option("fields",{DEFAULT:!0,type:"strings",describe:"fields to retain (comma-sep.), e.g. 'fips,name'"}).option("target",t),b.command("filter-geom").describe("").option("bbox",{type:"bbox",describe:"remove non-intersecting geometry (xmin,ymin,xmax,ymax)"}).option("target",t),b.command("filter-islands2").option("min-area",{type:"area",describe:"remove small-area islands (e.g. 10km2)"}).option("min-vertices",{type:"integer",describe:"remove low-vertex-count islands"}).option("keep-shapes",{type:"flag",describe:"only filter smaller parts of multipart polygons"}).option("remove-empty",{type:"flag",describe:"delete features with null geometry"}).option("target",t),b.command("filter-islands").describe("remove small detached polygon rings (islands)").option("min-area",{type:"area",describe:"remove small-area islands (e.g. 10km2)"}).option("min-vertices",{type:"integer",describe:"remove low-vertex-count islands"}).option("remove-empty",{type:"flag",describe:"delete features with null geometry"}).option("target",t),b.command("filter-slivers").describe("remove small polygon rings").option("min-area",{type:"area",describe:"area threshold (e.g. 2sqkm)"}).option("sliver-control",{describe:"boost area threshold of slivers (0-1, default is 1)",type:"number"}).option("weighted",{type:"flag"}).option("target",t),b.command("graticule").describe("create a graticule layer"),b.command("grid").describe("create a grid of square or hexagonal polygons").option("type",{describe:"square, hex or hex2 (default is square)"}).option("interval",{describe:"side length (e.g. 500m, 12km)",type:"distance"}).option("debug",{type:"flag"}).option("name",e).option("target",t).option("no-replace",n),b.command("inlay").describe("inscribe a polygon layer inside another polygon layer").option("source",{DEFAULT:!0,describe:"file or layer containing polygons to inlay"}).option("target",t),b.command("innerlines").describe("convert polygons to polylines along shared edges").flag("no_arg").option("where",m).option("name",e).option("target",t).option("no-replace",n),b.command("join").describe("join data records from a file or layer to a layer").example("Join a csv table to a Shapefile (don't auto-convert FIPS column to numbers)\n$ mapshaper states.shp -join data.csv keys=STATE_FIPS,FIPS string-fields=FIPS -o joined.shp").validate((function(t){t.options.source||re("Command requires the name of a layer or file to join")})).option("source",{DEFAULT:!0,describe:"file or layer containing data records"}).option("keys",{describe:"join by matching target,source key fields, e.g. keys=FID,id",type:"strings"}).option("calc",{describe:"use a JS expression to assign values (for many-to-one joins)"}).option("where",{describe:"use a JS expression to filter source records"}).option("fields",{describe:"fields to copy (comma-sep.) (default is all but key field)",type:"strings"}).option("prefix",{describe:"prefix for renaming fields joined from the source table"}).option("interpolate",{describe:"(polygon-polygon join) list of area-interpolated fields",type:"strings"}).option("point-method",{describe:"(polygon-polygon join) join polygons via inner points",type:"flag"}).option("planar",{type:"flag"}).option("string-fields",h).option("field-types",p).option("sum-fields",{describe:"fields to sum in a many-to-one join (or use calc= for this)",type:"strings"}).option("force",{describe:"replace values from same-named fields",type:"flag"}).option("unjoined",{describe:'copy unjoined records from source table to "unjoined" layer',type:"flag"}).option("unmatched",{describe:'copy unmatched records in target table to "unmatched" layer',type:"flag"}).option("encoding",i).option("target",t),b.command("lines").describe("convert a polygon or point layer to a polyline layer").option("fields",{DEFAULT:!0,describe:"field(s) to create a hierarchy of boundary lines",type:"strings"}).option("where",m).option("each",{describe:"apply a JS expression to each polygon boundary (with A and B)"}).option("segments",{describe:"convert paths to segments, for debugging",type:"flag"}).option("callouts",{type:"flag"}).option("arcs",{describe:"convert paths to arcs, for debugging",type:"flag"}).option("groupby",{describe:"field for grouping point input into multiple lines"}).option("name",e).option("target",t).option("no-replace",n),b.command("merge-layers").describe("merge multiple layers into as few layers as possible").flag("no_arg").option("force",{type:"flag",describe:"merge layers with inconsistent data fields"}).option("name",e).option("target",t),b.command("mosaic").describe("convert a polygon layer with overlaps into a flat mosaic").option("calc",u).option("debug",{type:"flag"}).option("name",e).option("target",t).option("no-replace",n),b.command("point-grid").describe("create a rectangular grid of points").validate(rf).option("-",{label:"<cols,rows>",describe:"size of the grid, e.g. -point-grid 100,100"}).option("interval",{describe:"distance between adjacent points, in source units",type:"distance"}).option("cols",{type:"integer"}).option("rows",{type:"integer"}).option("bbox",{type:"bbox",describe:"xmin,ymin,xmax,ymax (default is bbox of data)"}).option("name",e),b.command("points").describe("create a point layer from a different layer type").flag("no_arg").option("x",{describe:"field containing x coordinate"}).option("y",{describe:"field containing y coordinate"}).option("inner",{describe:"create an interior point for each polygon's largest ring",type:"flag"}).option("centroid",{describe:"create a centroid point for each polygon's largest ring",type:"flag"}).option("vertices",{describe:"capture unique vertices of polygons and polylines",type:"flag"}).option("vertices2",{describe:"like vertices, but without removal of duplicate coordinates",type:"flag"}).option("endpoints",{describe:"capture unique endpoints of polygons and polylines",type:"flag"}).option("intersections",{type:"flag"}).option("interpolated",{describe:"interpolate points along polylines; requires interval=",type:"flag"}).option("interval",{describe:"distance between interpolated points (meters or projected units)",type:"distance"}).option("name",e).option("target",t).option("no-replace",n),b.command("polygons").describe("convert polylines to polygons").option("gap-tolerance",{describe:"specify gap tolerance in source units",type:"distance"}).option("from-rings",{describe:"do simple conversion from a layer of closed paths",type:"flag"}).option("target",t),b.command("proj").describe("project your data (using Proj.4)").flag("multi_arg").option("crs",{DEFAULT:!0,describe:"set destination CRS using a Proj.4 definition or alias"}).option("projection",{alias_to:"crs"}).option("match",{describe:"set destination CRS using a .prj file or layer id"}).option("source",{alias_to:"match"}).option("from",{alias_to:"init",describe:"(deprecated) alias for init="}).option("init",{describe:"set source CRS (if unset) using a string, .prj or layer id"}).option("densify",{type:"flag",describe:"add points along straight segments to approximate curves"}).option("target",t).validate(nf),b.command("rectangle").describe("create a rectangle from a bbox or target layer extent").option("bbox",{describe:"rectangle coordinates (xmin,ymin,xmax,ymax)",type:"bbox"}).option("offset",_).option("aspect-ratio",v).option("source",{describe:"name of layer to enclose"}).option("name",e).option("target",t).option("no-replace",n),b.command("rectangles").describe("create a rectangle around each feature in a layer").option("offset",_).option("aspect-ratio",v).option("name",e).option("target",t).option("no-replace",n),b.command("rename-fields").describe("rename data fields").option("fields",{DEFAULT:!0,type:"strings",describe:"list of replacements (comma-sep.), e.g. 'fips=STATE_FIPS,st=state'"}).option("target",t),b.command("rename-layers").describe("assign new names to layers").option("names",{DEFAULT:!0,type:"strings",describe:"list of replacements (comma-sep.)"}).option("target",t),b.command("simplify").validate(ef).example("Retain 10% of removable vertices\n$ mapshaper input.shp -simplify 10%").describe("simplify the geometry of polygon and polyline features").option("percentage",{DEFAULT:!0,alias:"p",type:"percent",describe:"percentage of removable points to retain, e.g. 10%"}).option("dp",{alias:"rdp",describe:"use Ramer-Douglas-Peucker simplification",assign_to:"method"}).option("visvalingam",{describe:'use Visvalingam simplification with "effective area" metric',assign_to:"method"}).option("weighted",{describe:"use weighted Visvalingam simplification (default)",assign_to:"method"}).option("method",{}).option("weighting",{type:"number",describe:"weighted Visvalingam coefficient (default is 0.7)"}).option("resolution",{describe:"output resolution as a grid (e.g. 1000x500)"}).option("interval",{describe:"output resolution as a distance (e.g. 100)",type:"distance"}).option("variable",{describe:"JS expr. assigning to one of: interval= percentage= resolution=",type:"flag"}).option("planar",{describe:"simplify decimal degree coords in 2D space (default is 3D)",type:"flag"}).option("cartesian",{alias_to:"planar"}).option("keep-shapes",{describe:"prevent small polygon features from disappearing",type:"flag"}).option("lock-box",{type:"flag"}).option("no-repair",{describe:"don't remove intersections introduced by simplification",type:"flag"}).option("stats",{describe:"display simplification statistics",type:"flag"}).option("target",t),b.command("slice").option("source",{DEFAULT:!0,describe:"file or layer containing clip polygons"}).option("id-field",{describe:"slice id field (from source layer)"}).option("name",e).option("no-snap",r).option("target",t).option("no-replace",n),b.command("snap").describe("snap together nearby vertices").option("interval",{describe:"snap together vertices within a tolerance (default is small)",DEFAULT:!0,type:"distance"}).option("precision",{describe:"round all coordinates to a given decimal precision (e.g. 0.000001)",type:"number"}).option("target",t),b.command("sort").describe("sort features using a JS expression").option("expression",{DEFAULT:!0,describe:"JS expression to generate a sort key for each feature"}).option("ascending",{describe:"sort in ascending order (default)",type:"flag"}).option("descending",{describe:"sort in descending order",type:"flag"}).option("target",t),b.command("split").describe("split a layer into single-feature or multi-feature layers").option("field",{alias_to:"expression"}).option("expression",{DEFAULT:!0,describe:"expression or field for grouping features and naming split layers"}).option("target",t).option("no-replace",n),b.command("split-on-grid").describe("split features into separate layers using a grid").validate(rf).option("-",{label:"<cols,rows>",describe:"size of the grid, e.g. -split-on-grid 12,10"}).option("cols",{type:"integer"}).option("rows",{type:"integer"}).option("id-field",{describe:"assign each feature a cell id instead of splitting layer"}).option("target",t),b.command("style").oldAlias("svg-style").describe("set SVG style properties using JS or literal values").option("where",y).option("class",{describe:"name of CSS class or classes (space-separated)"}).option("fill",{describe:"fill color; examples: #eee pink rgba(0, 0, 0, 0.2)"}).option("fill-pattern",{describe:'pattern fill, ex: "hatches 2px grey 2px blue"'}).option("fill-opacity",{describe:"fill opacity"}).option("fill-hatch",{alias_to:"fill-pattern"}).option("stroke",{describe:"stroke color"}).option("stroke-width",{describe:"stroke width"}).option("stroke-dasharray",{describe:'stroke dashes. Examples: "4" "2 4"'}).option("stroke-opacity",{describe:"stroke opacity"}).option("opacity",{describe:"opacity; example: 0.5"}).option("r",{describe:"symbol radius (set this to export points as circles)"}).option("label-text",{describe:"label text (set this to export points as labels)"}).option("text-anchor",{describe:"label alignment; one of: start, end, middle (default)"}).option("dx",{describe:"x offset of labels (default is 0)"}).option("dy",{describe:"y offset of labels (default is 0/baseline-aligned)"}).option("font-size",{describe:"size of label text (default is 12)"}).option("font-family",{describe:"CSS font family of labels (default is sans-serif)"}).option("font-weight",{describe:"CSS font weight property of labels (e.g. bold, 700)"}).option("font-style",{describe:"CSS font style property of labels (e.g. italic)"}).option("letter-spacing",{describe:"CSS letter-spacing property of labels"}).option("line-height",{describe:"line spacing of multi-line labels (default is 1.1em)"}).option("target",t),b.command("symbols").option("type",{describe:"symbol type"}).option("stroke",{}).option("stroke-width",{}).option("fill",{}).option("length",{}).option("rotation",{}).option("effect",{}).option("arrow-head-angle",{}).option("arrow-stem-width",{}).option("arrow-head-width",{}).option("arrow-stem-curve",{}).option("arrow-stem-taper",{}).option("arrow-scaling",{}).option("where",y).option("target",t),b.command("target").describe("set active layer (or layers)").option("target",{DEFAULT:!0,describe:"name or index of layer to target"}).option("type",{describe:"type of layer to target (polygon|polyline|point)"}).option("name",{describe:"rename the target layer"}),b.command("union").describe("create a flat mosaic from two or more polygon layers").option("fields",{type:"strings",describe:"fields to retain (comma-sep.) (default is all fields)"}).option("name",e).option("target",{describe:"specify layers to target (comma-sep. list)"}).option("no-replace",n),b.command("uniq").describe("delete features with the same id as a previous feature").option("expression",{DEFAULT:!0,describe:"JS expression to obtain the id of a feature"}).option("max-count",{type:"number",describe:"max features with the same id (default is 1)"}).option("index",{type:"flag"}).option("invert",g).option("verbose",{describe:"print each removed feature",type:"flag"}).option("target",t),b.section("Experimental commands (may give unexpected results)"),b.command("cluster").describe("group polygons into compact clusters").option("id-field",{describe:'field name of cluster id (default is "cluster")'}).option("pct",{alias:"p",type:"percent",describe:"percentage of shapes to retain, e.g. 50%"}).option("max-width",{describe:"max width of cluster bounding box",type:"number"}).option("max-height",{describe:"max height of cluster bounding box",type:"number"}).option("max-area",{describe:"max area of a cluster",type:"number"}).option("group-by",{describe:"field name; only same-value shapes will be grouped"}).option("target",t),b.command("data-fill").describe("fill in missing values in a polygon layer").option("field",{describe:"name of field to fill in"}).option("postprocess",{alias_to:"contiguous"}).option("contiguous",{describe:"remove non-contiguous data islands",type:"flag"}).option("weight-field",{describe:"use field values to calculate data island weights"}),b.command("external").option("module",{DEFAULT:!0,describe:"name of Node module containing the command"}),b.command("frame").option("bbox",{describe:"frame coordinates (xmin,ymin,xmax,ymax)",type:"bbox"}).option("offset",_).option("width",{describe:"pixel width of output (default is 800)"}).option("height",{describe:"pixel height of output (may be a range)"}).option("pixels",{describe:"area of output in pixels (alternative to width and height)",type:"number"}).option("source",{describe:"name of layer to enclose"}).option("name",e),b.command("include").describe("import JS data and functions for use in JS expressions").option("file",{DEFAULT:!0,describe:"file containing a JS object with key:value pairs to import"}),b.command("fuzzy-join").describe("join points to polygons, with data fill and fuzzy match").option("source",{DEFAULT:!0,describe:"file or layer containing data records"}).option("field",{describe:"field to join"}).option("dedup-points",{describe:"uniqify points with the same location and field value",type:"flag"}).option("no-dropouts",{describe:"try to retain all values from the point layer",type:"flag"}).option("postprocess",{alias_to:"contiguous"}).option("contiguous",{describe:"remove non-contiguous data islands",type:"flag"}).option("target",t),b.command("require").describe("require a Node module for use in -each expressions").option("module",{DEFAULT:!0,describe:"name of Node module or path to module file"}).option("alias",{describe:"Set the module name to an alias"}).option("init",{describe:"JS expression to run after the module loads"}),b.command("run").describe("create commands on-the-fly and run them").option("include",{}).option("commands",{DEFAULT:!0,describe:"command string or JS expresson to generate command(s)"}).option("target",t),b.command("scalebar").option("top",{}).option("right",{}).option("bottom",{}).option("left",{}).option("font-size",{}).option("label-position",{}).option("label-text",{}),b.command("shape").describe("create a polyline or polygon from coordinates").option("coordinates",{describe:"list of vertices as x,y,x,y...",type:"numbers"}).option("offsets",{describe:"list of vertices as offsets from coordinates list",type:"numbers"}).option("closed",{describe:"close an open path to create a polygon",type:"flag"}).option("name",e),b.command("subdivide").describe("recursively split a layer using a JS expression").validate(of).option("expression",{DEFAULT:!0,describe:"boolean JS expression"}).option("target",t),b.section("Informational commands"),b.command("calc").describe("calculate statistics about the features in a layer").example("Calculate the total area of a polygon layer\n$ mapshaper polygons.shp -calc 'sum($.area)'").example("Count census blocks in NY with zero population\n$ mapshaper ny-census-blocks.shp -calc 'count()' where='POPULATION == 0'").validate(of).option("expression",{DEFAULT:!0,describe:"functions: sum() average() median() max() min() count()"}).option("where",y).option("target",t),b.command("encodings").describe("print list of supported text encodings (for .dbf import)"),b.command("help").alias("h").describe("print help; takes optional command name").option("command",{DEFAULT:!0,describe:"view detailed information about a command"}),b.command("info").describe("print information about data layers").option("target",t),b.command("inspect").describe("print information about a feature").option("expression",{DEFAULT:!0,describe:"boolean JS expression for selecting a feature"}).option("target",t).validate(of),b.command("projections").describe("print list of supported projections"),b.command("quiet").describe("inhibit console messages"),b.command("verbose").describe("print verbose processing messages"),b.command("version").alias("v").describe("print mapshaper version"),b.command("debug"),b}function yf(t,e){return function(t){return/[$][{]/.test(t)}(t)?((e.length>1||1!=e[0].layers.length)&&ie("Interpolated names are not compatible with multiple targets."),mf(t,e[0].layers[0])):t}function mf(t,e){var n={target:e.name||""},r="with($$ctx) { return `"+t+"`; }";try{t=new Function("$$ctx",r)(n)}catch(e){ie("Unable to interpolate ["+t+"]")}return t}function vf(t,e,n){var r,i=e.findSingleLayer(t);return i||((r=pu(t,a.defaults({no_topology:!0},n)))?r.layers.length>1&&ie("Multiple-layer sources are not supported"):ie(a.format("Unable to find source [%s]",t)),i={dataset:r,layer:r.layers[0],disposable:!0}),i}var _f=Object.freeze({__proto__:null,convertSourceName:yf,convertInterpolatedName:mf,findCommandSource:vf});function bf(){var t=[],e=[];function n(t,e){return{layer:t,dataset:e}}function r(t,e){var n=-1;return e.forEach((function(e,r){e.layer==t&&(n=r)})),n}this.forEachLayer=function(e){var n=0;t.forEach((function(t){t.layers.forEach((function(r){e(r,t,n++)}))}))},this.deleteLayer=function(t,n){this.getActiveLayer().layer==t&&(e=[]),n.layers.splice(n.layers.indexOf(t),1),0===n.layers.length&&this.removeDataset(n),e=e.filter((function(e){var n=e.layers.indexOf(t);return-1==n||(e.layers.splice(n,1),e.layers.length>0)}))},this.findLayer=function(t){var e="function"==typeof t?t:null,r=null;return this.forEachLayer((function(i,o){(e?e(i,o):i==t)&&(r=n(i,o))})),r},this.findCommandTargets=function(t,e){return t?$l(this.getLayers(),t,e):this.getDefaultTargets()||[]},this.findSingleLayer=function(t){var e=Kl(this.getLayers(),t);return e.length>1&&ie("Ambiguous pattern (multiple layers were matched):",t),e[0]||null},this.removeDataset=function(n){e=e.filter((function(t){return t.dataset!=n})),t=t.filter((function(t){return t!=n}))},this.getDatasets=function(){return t},this.getLayers=function(){var t=[];return this.forEachLayer((function(e,r){t.push(n(e,r))})),t},this.addDataset=function(t){return this.setDefaultTarget(t.layers,t),this},this.findNextLayer=function(t){var e=this.getLayers(),n=r(t,e);return n>-1?e[(n+1)%e.length]:null},this.findPrevLayer=function(t){var e=this.getLayers(),n=r(t,e);return n>-1?e[(n-1+e.length)%e.length]:null},this.isEmpty=function(){return 0===t.length},this.getDefaultTargets=function(){return 0!==e.length||this.isEmpty()||(e=[{dataset:t[0],layers:t[0].layers.slice(0,1)}]),e},this.setDefaultTarget=function(n,r){-1==t.indexOf(r)&&t.push(r),e=[{layers:n.concat(),dataset:r}]},this.setDefaultTargets=function(t){e=t},this.getActiveLayer=function(){var t=(this.getDefaultTargets()||[])[0];return t?{layer:t.layers[0],dataset:t.dataset}:null}}function xf(t){var e=[];return t.forEachLayer((function(t,n,r){e.push("  ["+(r+1)+"]  "+(t.name||"[unnamed]"))})),e.length>0?e.join("\n"):"[none]"}var wf=Object.freeze({__proto__:null,Catalog:bf,getFormattedLayerList:xf}),Ef={stack:[],start:function(){Ef.stack.push(+new Date)},stop:function(t){var e=+new Date-Ef.stack.pop(),n=e+"ms";return t&&(n=t+" "+n),se(n),e}};function Sf(t,e){Fn(t.shapes,(function(t){if(yn.getPathArea(t,e)<=0)return null}))}function If(t,e){var n=sa(t);return function(r,i,o){var a=e?yn.getSphericalPathArea:yn.getPlanarPathArea;Dn(r,(function(e){var r=n(e);0===r.length&&ue("[getRingDivider()] Defective path:",e),r.forEach((function(e,n){var r=a(e,t.arcs);r>0?i.push(e):r<0&&o.push(e)}))}))}}var Cf=Object.freeze({__proto__:null,deleteHoles:Sf,getHoleDivider:If});function Nf(t,e,n){var r=e.getConnectedArcs(t);return n&&(r=r.filter(n)),0===r.length?t:function(t,e,n){var r,i,o,a,s=n.getVertexData(),u=s.xx,c=s.yy,l=n.indexOfVertex(t,-1),f=u[l],p=c[l],h=n.indexOfVertex(t,-2),d=u[h],g=c[h],y=t;e.length>0&&(y=e[0],r=n.indexOfVertex(y,-2));for(a=1;a<e.length;a++)i=e[a],o=n.indexOfVertex(i,-2),2==Af(d,g,f,p,u[r],c[r],u[o],c[o])&&(y=i,r=o);y==t&&re("Pathfinder error");return y}(t,r,e.arcs)}function Af(t,e,n,r,i,o,a,s){var u,c=yn.signedAngle(t,e,n,r,i,o),l=yn.signedAngle(t,e,n,r,a,s);return c<=0||l<=0?(ue("[chooseRighthandPath()] 0 angle(s):",c,l),c<=0&&ue("  A orient2D:",yn.orient2D(t,e,n,r,i,o)),l<=0&&ue("  B orient2D:",yn.orient2D(t,e,n,r,a,s)),u=c>0?1:l>0?2:0):c<l?u=1:l<c?u=2:isNaN(c)||isNaN(l)?re("Invalid node geometry"):ue("[chooseRighthandPath()] equal angles:",c,"fallback test:",u=Of(i-n,o-r,a-n,s-r)),u}function Of(t,e,n,r){var i=yn.orient2D(t,e,0,0,n,r);return i>0?2:i<0?1:0}var Pf=Object.freeze({__proto__:null,getRightmostArc:Nf,chooseRighthandVector:Of});function Tf(t,e,n){return t&~n|e&n}function Mf(t,e,n){var r,i=we(e);i==e?r=-4:(r=-49,t<<=4),n[i]&=t|r}function Lf(t,e){var n=we(t),r=e[n];return n!=t&&(r>>=4),7&r}function Rf(t,e,n,r,i,o,a){In(t,(function(t){var s=t<0,u=s?~t:t,c=n[u],l=s?i:r,f=s?r:i,p=c;e.arcIsLollipop(t)?(ue("lollipop"),p=0):(l&&(p|=3),f&&(p|=48),a>0&&(p|=a),o&&34==(34&p)&&(p&=-18)),n[u]=p}))}function Df(t,e,n,r,i,o){In(t,(function(t){var e=t<0,a=e?~t:t,s=n[a],u=255;(e?i:r)&&(o&&(u&=-2),u^=2),(e?r:i)&&(o&&(u&=-17),u^=32),n[a]=s&u}))}function Ff(t,e,n){var r=null;return n&&(r=function(t){return n(~t)}),function(n){var i,o=[],a=n;do{if(!e(a))return null;if(o.push(a),(a=~Nf(i=a,t,r))==~i)return ue("Pathfinder warning: dead-end path"),null}while(a!=n);return 0===o.length?null:o}}function kf(t,e){var n=t.arcs,r=Ff(t,(function(t){var n=Lf(t,e),r=!1;3==n&&(r=!0,Mf(1,t,e));return r}),(function(t){return 1==(1&Lf(t,e))}));return e=e||new Uint8Array(n.size()),function(t,i){var o,a="dissolve"==i,s="flatten"==i;return t.length>0?(o=[],Rf(t,n,e,!0,s,a),Dn(t,(function(t){for(var e,n=0,i=t.length;n<i;n++)(e=r(t[n]))&&o.push(e)})),Df(t,0,e,!0,s,!0)):o=t,o}}var jf=Object.freeze({__proto__:null,setBits:Tf,andBits:function(t,e,n){return t&(~n|e)},setRouteBits:Mf,getRouteBits:Lf,openArcRoutes:Rf,closeArcRoutes:Df,getPathFinder:Ff,getRingIntersector:kf});function Bf(t,e,n){var r=n.min_gap_area||n.min_area||n.gap_fill_area;if(0==+r)return{filter:function(){return!1},threshold:0};var i=n.sliver_control>=0?n.sliver_control:0,o=Ui(e),a=r?$o(r,o):zf(t,e.arcs);return{threshold:a,filter:i>0?Gf(e.arcs,a,i):function(t,e){var n=e.arcs.isPlanar()?yn.getPlanarPathArea:yn.getSphericalPathArea;return function(r){var i=n(r,e.arcs);return Math.abs(i)<t}}(a,e),label:function(t,e){e&&(t=t.replace(" ","+ ")+" variable");return t+" threshold"}(ea(a,o),i>0)}}function Gf(t,e,n){n>=0==!1&&(n=1),(n>1||e>0==!1)&&re("Invalid parameter");var r=Uf(t,n);return function(t){return Math.abs(r(t))<e}}function Uf(t,e){var n=Math.sqrt(e);return function(e){var r=yn.getPathArea(e,t),i=yn.getPathPerimeter(e,t),o=yn.calcPolsbyPopperCompactness(r,i);return r*(n*o+1-n)}}function zf(t,e){var n=0,r=e.isPlanar()?yn.distance2D:yn.greatCircleDistance,i=0,o=0,a=function(t,e,n,a){var s=r(n[t],a[t],n[e],a[e]);o++,i+=(s-i)/o};Fn(t.shapes,(function(t){n++,Nn(t,e,a)}));var s=o/n,u=Math.pow(s,.75),c=i*i/50*u;return c=ha(c,2)}var qf=Object.freeze({__proto__:null,getSliverFilter:Bf,getSliverTest:Gf,getSliverAreaFunction:Uf,getDefaultSliverThreshold:zf,calcMaxSliverArea:function(t){var e=t.getBounds().width()/2,n=t.getBounds().height()/2,r=0,i=0;return t.forEachSegment((function(t,o,a,s){var u=Math.abs(a[t]-a[o]),c=Math.abs(s[t]-s[o]);u<e&&c<n&&(i+=(Math.sqrt(u*u+c*c)-i)/++r)})),i*i}});function Vf(t){return Yf(t).modes[0]}function Yf(t,e){var n=function(t){var e,n,r=[],i={},o=[];for(e=0;e<t.length;e++)(n=t[e])in i==!1?(i[n]=r.length,r.push(n),o.push(1)):o[i[n]]++;return{values:r,counts:o}}(t),r=function(t){var e,n,r=t.counts,i=t.values,o=r.length>0?function(t){var e,n=-1/0;for(e=0;e<t.length;e++)t[e]>n&&(n=t[e]);return n}(r):0,a=0,s=[];for(e=0;e<r.length;e++)(n=r[e])===o?s.push(i[e]):n>a&&(a=n);return{modes:s,margin:s.length>1?0:o-a,count:o}}(n);return e&&(r.counts=n.counts,r.values=n.values),r}var Xf=Object.freeze({__proto__:null,getMode:Vf,getModeData:Yf});function Jf(t,e,n){var r=a.extend({},t),i={expression:n.where,invert:!!n.invert,verbose:!1,no_replace:n.no_replace};return cu.filterFeatures(r,e,i)}function Wf(t,e,n){return Hf(t,e,n)()}function Hf(t,e,n){var r,i,o=0,s=0,u=[],c={count:y,sum:g,average:g,median:g,min:g,max:g,mode:m,collect:m,first:function(t){0===o&&(u[s]=t);return s++,t},last:y},l={count:h((function(){return o}),0),sum:h(a.sum,0),median:h(a.findMedian),min:h((function(t){return a.getArrayBounds(t).min})),max:h((function(t){return a.getArrayBounds(t).max})),average:h(a.mean),mode:h(Vf),collect:h(p),first:h(p),last:h(p)},f=Sr(t);return t.geometry_type&&(c.width=c.height=function(){},l.width=function(){return Br(t,e).width()},l.height=function(){return Br(t,e).height()}),r=os(n,t,e,{context:c,no_assign:!0,no_warn:!0}),i=os(n,t,e,{returns:!0,context:l,no_warn:!0}),function(t,e){var n;return t?function(t){t.forEach(d)}(t):function(){for(var t=0;t<f;t++)d(t)}(),n=i(void 0,e),o=0,s=0,u=[],n};function p(t){return t}function h(t,e){var n=arguments.length>1?e:null;return function(){var e=s++;return o>0?t(u[e]):n}}function d(t){(t<0||t>=f)&&re("Invalid record index"),r(t),o++,s=0}function g(t){return isNaN(t)&&t&&ie("Expected a number, received:",t),m(t)}function y(t){return u[s++]=t,t}function m(t){var e;return 0===o&&(u[s]=[]),(e=u[s]).length!=o&&ie("Evaluation failed"),e.push(t),s++,t}}cu.calc=function(t,e,n){var r,i,o=n.expression;return n.where&&(t=Jf(t,e,n),o+=" where "+n.where),i=Yt("defs"),oe(o+":  "+(r=Hf(t,e,n.expression)(null,i))),r};var $f=Object.freeze({__proto__:null,evalCalcExpression:Wf,compileCalcExpression:Hf});function Kf(t,e){var n=Hf({data:t},null,e);return function(t,e){t||(t=[]),n(t,e)}}var Zf=Object.freeze({__proto__:null,getJoinCalc:Kf});function Qf(t,e){if(!t||0===t.length)return function(){return 0};t.forEach((function(t){Ir(e,t)}));var n={},r=0,i=e.getRecords(),o=tp(t);return function(t){var e=o(i[t]);return e in n==!1&&(n[e]=r++),n[e]}}function tp(t){return t.reduce((function(t,e){var n=function(t){return String(t[e])};return t?function(e){return t(e)+"~~"+n(e)}:n}),null)}function ep(t,e,n){return rp(t,function(t,e){for(var n,r=[],i=0;i<e;i++)(n=t(i))in r?r[n].push(i):r[n]=[i];return r}(e,t.length),n)}function np(t,e,n,r){for(var i=[],o=0;o<n;o++)i.push(e(o));return rp(t,i,r)}function rp(t,e,n){var r,i=n.sum_fields||[],o=n.copy_fields||[];function a(e,n){for(var r,i=0,o=0;o<n.length;o++)i+=(r=t[n[o]])&&r[e]||0;return i}return n.fields&&(o=o.concat(n.fields)),n.calc&&(r=Kf(new yr(t),n.calc)),e.map((function(e){var n,s,u={};for(s=t[(e=e||[])[0]],n=0;n<i.length;n++)u[i[n]]=a(i[n],e);for(n=0;n<o.length;n++)u[o[n]]=s?s[o[n]]:null;return r&&r(e,u),u}))}var ip=Object.freeze({__proto__:null,getCategoryClassifier:Qf,getMultiFieldKeyFunction:tp,aggregateDataRecords:ep,recombineDataRecords:np});function op(t,e,n,r){var i=function(t,e){var n=[];return An(t,(function(t){var r=e(t.shapeId);r in n==!1&&(n[r]=[]),n[r].push(t.arcId)})),n}(t.shapes,e),o=function(t){var e=new Uint8Array(t.size()),n=function(t){return e[we(t)]>0},r=function(t){e[we(t)]=0},i=new ai(t);return function(t){t.forEach((function(t){e[we(t)]=1}));var o=ap(function(t,e,n){var r=[];return t.forEach((function(t){0===e.getConnectedArcs(t,n).length&&r.push(~t),0===e.getConnectedArcs(~t,n).length&&r.push(t)})),r}(t,i,n),i,n,r),a=ap(t,i,n,r),s=o.concat(a);return t.forEach((function(t){e[we(t)]=0})),s}}(n);return i.map(o)}function ap(t,e,n,r){var i=[];return t.forEach((function(t){for(var o,a=[],s=t;n(s)&&(a.push(s),o=n(s)?e.getConnectedArcs(s,n):[],r(s),o.length>0);)s=~o[0];a.length>0&&i.push(a)})),i}function sp(t,e){return function(t,e,n){var r=[];return t.forEach((function(t){if(t.used)return;s(t)||i(t)})),r;function i(t){var e,i,a=[t.arcId],s=o(t);for(t.used=!0;s&&s!=t;)a.push(s.arcId),s.used=!0,(s=o(s))&&s!=t&&s.used&&re("buildRing() topology error");s||re("buildRing() traversal error"),t.used=!0,e=a,(i=n(t.shapeId))in r==0&&(r[i]=[]),r[i].push(e)}function o(n,r){var i,a=up(n,t,e);return r=r||0,a!=n&&(i=s(a))&&(r>100&&re("deep recursion -- unhandled topology problem"),a=1==e[i.shapeId][i.partId].length?o(a,r+1):o(i,r+1)),a}function s(e){var r,i=n(e.shapeId);return null===(r=a.find(e.group,(function(r){var o=e,a=t[r];return o!=a&&!a.used&&n(a.shapeId)===i&&o.arcId==~a.arcId})))?null:t[r]}}(function(t,e){var n=[],r=[],i=[],o=t.map((function(t,n){return e(n)}));return An(t,s),r.forEach((function t(e){var n=u(e,f)||u(e,p)||u(e,h);n&&(d(e=e.filter((function(t){return!a.contains(n,t)}))),d(n),e.length>2&&t(e))})),i;function s(t){var e=t.arcId,o=e<0?~e:e,a=i.length,s=n[o];s||(s=[],n[o]=s),s.push(a),t.group=s,i.push(t),3==s.length&&r.push(s)}function u(t,e){for(var n,r,o=0;o<t.length-1;o++){n=i[t[o]];for(var a=o+1;a<t.length;a++)if(e(n,r=i[t[a]]))return[n.segId,r.segId]}return null}function c(e,n){return up(e,i,t).arcId===~up(n,i,t).arcId}function l(e,n){return cp(e,i,t).arcId===~cp(n,i,t).arcId}function f(t,e){return h(t,e)&&c(t,e)&&l(t,e)}function p(t,e){return h(t,e)&&(c(t,e)||l(t,e))}function h(t,e){return t.arcId===~e.arcId&&o[t.shapeId]===o[e.shapeId]}function d(t){t.forEach((function(e){i[e].group=t}))}}(t,e),t,e)}function up(t,e,n){return lp(t,e,n,1)}function cp(t,e,n){return lp(t,e,n,-1)}function lp(t,e,n,r){var i,o=n[t.shapeId][t.partId].length,a=(t.i+r)%o;return a<0&&(a+=o),(i=e[t.segId-t.i+a])&&i.shapeId==t.shapeId||re("index error"),i}var fp,pp=Object.freeze({__proto__:null,dissolvePolygonGeometry:sp});function hp(t,e,n,r){var i,o,s,u,c=null;if(t.data)for(var l=0,f=(c=ep(t.data.getRecords(),n,r)).length;l<f;l++)e&&!e[l]&&(e[l]=null);return i={name:r.no_replace?null:t.name,shapes:e,data:c?new yr(c):null,geometry_type:t.geometry_type},r.silent||(o=i,s=Sr(t),u=Sr(o),oe(a.format("Dissolved %,d feature%s into %,d feature%s",s,a.pluralSuffix(s),u,a.pluralSuffix(u)))),i}function dp(t,e){var n=new Int32Array(t.length);a.initializeArray(n,-1);var r=[],i=[];function o(t,o,a){var u=n[o];if(-1!=u&&e.flat){if(!(a&&a(t)>a(u)))return;s(o,u),n[o]=u,u=-1}-1==u?n[o]=t:-2==u?r[o].push(t):(r[o]=[u,t],n[o]=-2),i[t].push(o)}function s(t,e){for(var n=i[e],r=0;r<n.length;r++)if(n[r]===t){n[r]=-1;break}}this.getTileIdsByShapeId=function(t){var e=i[t];return e?e.filter((function(t){return t>=0})):[]},this.getShapeIdByTileId=function(t){var e=n[t];return e>=0?e:-1},this.getShapeIdsByTileId=function(t){var e=n[t];return e>=0?[e]:-1==e?[]:r[t]},this.indexTileIdsByShapeId=function(t,e,n){i[t]=[];for(var r=0;r<e.length;r++)o(t,e[r],n)},this.flatten=function(){r.forEach((function(t,e){!function(t){var e,i=r[t],o=i[0];n[t]=o;for(var a=0;a<i.length;a++)(e=i[a])!=o&&s(t,e)}(e)})),r=[]},this.getUnusedTileIds=function(){for(var t=[],e=0,r=n.length;e<r;e++)-1==n[e]&&t.push(e);return t},this.addTileToShape=function(t,e){t in i!=!1&&-1==n[e]||re("Internal error"),n[e]=t,i[t].push(e)}}function gp(t,e){var n,r,i=a.extend({},e),o=t.getBounds(),s=(!t.isPlanar()&&yn.containsBounds(ti(),o.toArray()),o.ymin),u=o.ymax-s,c=i.stripes||bp(t),l=new Uint32Array(c),f=c>1&&u>0?function(t){return Math.floor((c-1)*(t-s)/u)}:function(t){return 0};i.tolerance>=0==!1&&(i.tolerance=rn(o.toArray())),t.forEachSegment((function(t,e,n,r){for(var i=f(r[t]),o=f(r[e]);l[i]=l[i]+2,i!=o;)i+=o>i?1:-1}));var p,h,d=(p=a.sum(l),h=4*p,(!fp||fp.byteLength<h)&&(fp=new ArrayBuffer(h)),new Uint32Array(fp,0,p)),g=0,y=[];a.forEach(l,(function(t){var e=g;g+=t,y.push(d.subarray(e,g))})),a.initializeArray(l,0),t.forEachSegment((function(t,e,n,r){for(var i,o,a=f(r[t]),s=f(r[e]);i=l[a],l[a]=i+2,(o=y[a])[i]=t,o[i+1]=e,a!=s;)a+=s>a?1:-1}));var m,v=t.getVertexData(),_=[];for(n=0;n<c;n++)for(m=xp(y[n],v.xx,v.yy,i),r=0;r<m.length;r++)_.push(m[r]);return yp(_,i.unique?vp:null)}function yp(t,e){var n={},r=e||mp;return t.filter((function(t){var e=r(t);return!(e in n)&&(n[e]=!0,!0)}))}function mp(t){return t.a.join(",")+";"+t.b.join(",")}function vp(t){return t.x+","+t.y}function _p(t){var e=t.getFilteredPointCount()-t.size(),n=2*Math.pow(e,.4);return Math.ceil(n)||1}function bp(t){var e=t.getFilteredPointCount()-t.size(),n=Math.ceil(Math.pow(10*e,.6)/40);return n>0?n:1}function xp(t,e,n,r){var i,o,a,s,u,c,l,f,p,h,d,g,y,m,v,_,b,x=t.length-2,w=[],E=(r||{}).tolerance;for(Eu(e,t),_=0;_<x;){for(i=t[_],o=t[_+1],u=e[i],c=e[o],p=n[i],h=n[o],b=_;b<x&&(a=t[b+=2],!(c<(l=e[a])));){if(d=n[a],s=t[b+1],f=e[s],g=n[s],p>=d){if(p>g&&h>d&&h>g)continue}else if(p<g&&h<d&&h<g)continue;i!=a&&i!=s&&o!=a&&o!=s&&(y=yn.segmentIntersection(u,p,c,h,l,d,f,g,E))&&(m=[i,o],v=[a,s],w.push(wp(y,m,v,e,n)),4==y.length&&w.push(wp(y.slice(2),m,v,e,n)))}_+=2}return w}function wp(t,e,n,r,i){var o,a=t[0],s=t[1];return e=Ep(a,s,e[0],e[1],r,i),n=Ep(a,s,n[0],n[1],r,i),{x:a,y:s,a:o=e[0]<n[0]?e:n,b:o==e?n:e}}function Ep(t,e,n,r,i,o){return i[n]==t&&o[n]==e?[n,n]:i[r]==t&&o[r]==e?[r,r]:n<r?[n,r]:[r,n]}cu.dissolve=function(t,e,n){var r,i;return(n=a.extend({},n)).where?function(t,e,n,r){r&&r.where||re('Missing required "where" parameter');var i=t(Jf(e,n,r),n,a.defaults({where:null},r)),o=Jf(e,n,a.defaults({invert:!0},r));return cu.mergeLayers([o,i],{verbose:!1,force:!0})[0]}(cu.dissolve,t,e,n):(n.field&&(n.fields=[n.field]),i=Qf(n.fields,t.data),n.multipart||n.group_points?r=function(t,e){Rn(t.shapes);var n=[];return t.shapes.forEach((function(t,r){var i=e(r);t&&(n[i]?n[i].push.apply(n[i],t):n[i]=t)})),n}(t,i):"polygon"==t.geometry_type?r=sp(t.shapes,i):"polyline"==t.geometry_type?r=op(t,i,e):"point"==t.geometry_type&&(r=function(t,e,n){var r=!n.planar&&ei(Br(t)),i=n.weight?es(n.weight,t):null,o=[];return 0!==Fr(t.shapes)&&ie("Dissolving multi-part points is not supported"),t.shapes.forEach((function(t,n){var a,s=e(n),u=i?i(n):1,c=t&&t[0];c&&(r&&(a=[],yn.lngLatToXYZ(c[0],c[1],a),c=a),o[s]=function(t,e,n){var r,i,o=e[0],a=e[1];o==o&&a==a&&n>0&&(t?(r=t.sum+n,i=t.sum/r,t.centroid[0]=i*t.centroid[0]+n*o/r,t.centroid[1]=i*t.centroid[1]+n*a/r,3==e.length&&(t.centroid[2]=i*t.centroid[2]+n*e[2]/r),t.sum=r):t={sum:n,centroid:e.concat()});return t}(o[s],c,u))})),o.map((function(t){var e,n;return t?(r?(e=t.centroid,n=[],yn.xyzToLngLat(e[0],e[1],e[2],n)):n=t.centroid,t?[n]:null):null}))}(t,i,n)),hp(t,r,i,n))};var Sp=Object.freeze({__proto__:null,getIntersectionPoints:function(t){return t.map((function(t){return[t.x,t.y]}))},findSegmentIntersections:gp,sortIntersections:function(t){t.sort((function(t,e){return t.x-e.x||t.y-e.y}))},dedupIntersections:yp,calcSegmentIntersectionStripeCount2:_p,calcSegmentIntersectionStripeCount:bp,intersectSegments:xp,formatIntersection:wp,formatIntersectingSegment:Ep});function Ip(t,e){var n,r=e||{},i=t.arcs,o=i&&i.getBounds();return o&&o.hasBounds()?(ue("addIntersectionCuts() snap dist:",n=r.snap_interval?Zo(r.snap_interval,Ui(t)):!r.no_snap&&o.hasBounds()?rn(o.toArray()):0),i.flatten(),function(t,e){var n,r,i,o=t.arcs,a=e>0?{}:{tolerance:0},s=!1;n=an(o,e),r=o.dedupCoords(),((i=Ap(t,a))>0||n>0||r>0)&&(s=!0);i>0&&(i=0,n=an(o,e),o.dedupCoords(),n>0&&(i=Ap(t,a)),i>0&&(o.dedupCoords(),ue("Second-pass vertices added:",i,"consider third pass?")));s&&$s(t)}(t,n),t.layers.forEach((function(t){br(t)&&ia(t.shapes,i,t.geometry_type)})),function(t){var e=new ai(t.arcs),n=function(t){for(var e,n=new Int32Array(t.arcs.size()),r=0,i=0,o=t.arcs.size();i<o;i++)e=t.findDuplicateArc(i),n[i]=e,i!=e&&r++;return r>0?n:null}(e);n&&Cp(t,n);(function(t){var e=kr(t.layers,t.arcs),n=t.arcs.size(),r=t.arcs.deleteArcs(e),i=t.arcs.size(),o=n-i;o>0&&Cp(t,r);return o})(t)>0&&(e=new ai(t.arcs));return e}(t)):new ai([])}function Cp(t,e){var n=function(t){for(var n,r,i,o=0;o<t.length;o++)r=we(n=t[o]),i=e[r],t[o]=n==r?i:~i;return t};t.layers.forEach((function(t){br(t)&&Fn(t.shapes,n)}))}function Np(t,e){return Pp(Rp(t,e),t)}function Ap(t,e){var n=t.arcs.getPointCount(),r=Np(t.arcs,e),i=t.arcs.getPointCount();return Op(t,r),i-n}function Op(t,e){var n=function(t,e){return function(t){for(var e=[],r=0;r<t.length;r++)n(t[r],e);return e};function n(n,r){var i,o=n<0,a=o?~n:n,s=t[a],u=(a>=t.length-1?e:t[a+1])-1;do{o?(i=~u,u--):(i=s,s++),r.push(i)}while(u-s>=0)}}(e,t.arcs.size());t.layers.forEach((function(t){br(t)&&Fn(t.shapes,n)}))}function Pp(t,e){var n,r,i,o,a=e.getVertexData(),s=a.xx,u=a.yy,c=a.nn,l=0,f=0,p=[],h=e.size(),d=new Uint32Array(h),g=Lp(Mp(t,s,u),e),y=e.getPointCount()+2*g.length,m=new Float64Array(y),v=new Float64Array(y);g.reverse(),o=g.pop();for(var _=0,b=0;_<h;_++){for(i=c[_],d[_]=b,n=0,r=0;n<i;){for(m[f]=s[l],v[f]=u[l],f++,r++;o&&o.i==l;)m[f]=o.x,v[f]=o.y,f++,r++,p[b++]=r,r=0,m[f]=o.x,v[f]=o.y,f++,r++,o=g.pop();n++,l++}p[b++]=r}return f!=y&&re("[insertCutPoints()] Counting error"),e.updateVertexData(p,m,v,null),d}function Tp(t,e,n,r,i,o){i[n],o[n],i[r],o[r];return(r<n||r>n+1)&&re("Out-of-sequence arc ids:",n,r),{x:t,y:e,i:n}}function Mp(t,e,n){return t.sort((function(t,r){return t.i!=r.i?t.i-r.i:yn.distanceSq(e[t.i],n[t.i],t.x,t.y)-yn.distanceSq(e[r.i],n[r.i],r.x,r.y)})),t}function Lp(t,e){var n=[],r=0;return e.forEach2((function(e,i,o,a){for(var s,u,c=e+i-1,l=o[e],f=a[e],p=o[c],h=a[c];r<t.length&&t[r].i<=c;)s=t[r],u=n[n.length-1],s.x==l&&s.y==f||s.x==p&&s.y==h||u&&u.x==s.x&&u.y==s.y&&u.i==s.i||n.push(s),r++})),n}function Rp(t,e){var n=gp(t,e),r=t.getVertexData();return function(t,e,n){for(var r,i,o,a=[],s=0,u=t.length;s<u;s++)i=Tp((r=t[s]).x,r.y,r.a[0],r.a[1],e,n),o=Tp(r.x,r.y,r.b[0],r.b[1],e,n),i&&a.push(i),o&&a.push(o);return a}(n,r.xx,r.yy)}var Dp=Object.freeze({__proto__:null,addIntersectionCuts:Ip,divideArcs:Np,cutPathsAtIntersections:Ap,remapDividedArcs:Op,insertCutPoints:Pp,getCutPoint:Tp,sortCutPoints:Mp,filterSortedCutPoints:Lp,findClippingPoints:Rp});function Fp(t){Ef.start(),t.detachAcyclicArcs();var e=function(t){for(var e=t.arcs,n=[],r=[],i=[],o=[],a=new Uint8Array(e.size()),s=Ff(t,(function(t){return f(t,!0)})),u=0,c=a.length;u<c;u++)l(u),l(~u);return{cw:n,ccw:r,empty:i,lostArcs:o};function l(t){var a,u;if(f(t)){if(!(a=s(t)))return o.push(t),void ue("Dead-end arc:",t);(u=yn.getPlanarPathArea(a,e))>0?n.push(a):u<0?r.push(a):i.push(a)}}function f(t,e){var n=we(t),r=n==t?1:2,i=0==(a[n]&r);return e&&i&&(a[n]|=r),i}}(t),n=e.cw.map((function(t){return[t]}));Ef.stop("Find mosaic rings"),Ef.start();var r=[],i=new Cu(n,t.arcs);return e.ccw.forEach((function(t){var e=i.findSmallestEnclosingPolygon(t);e>-1?n[e].push(t):(wn(t),r.push([t]))})),Ef.stop(a.format("Detect holes (holes: %d, enclosures: %d)",e.ccw.length-r.length,r.length)),{mosaic:n,enclosures:r,lostArcs:e.lostArcs}}var kp=Object.freeze({__proto__:null,mosaic:function(t,e){var n,r,i,o,a,s,u,c,l=[];return t.arcs||ie("Dataset is missing path data"),r=Fp(n=Ip(t,e)),l.push({name:"mosaic",shapes:r.mosaic,geometry_type:"polygon"}),e.debug&&(l.push({geometry_type:"polygon",name:"mosaic-enclosure",shapes:r.enclosures}),r.lostArcs.length>0&&(l=l.concat((i=r.lostArcs,o=n.arcs,a={geometry_type:"polyline",name:"lost-arcs",shapes:[]},s={geometry_type:"point",name:"lost-arc-endpoints",shapes:[]},u=[],c=[],i.forEach((function(t){var e=o.getVertex(t,0),n=o.getVertex(t,-1);u.push({ARCID:t}),a.shapes.push([[t]]),c.push({ARCID:t},{ARCID:t}),s.shapes.push([[e.x,e.y]],[[n.x,n.y]])})),a.data=new yr(u),s.data=new yr(c),[a,s])))),l},buildPolygonMosaic:Fp});function jp(t){var e=new Int32Array(t),n=new Int32Array(t);a.initializeArray(e,-1),a.initializeArray(n,-1),this.setId=function(t,r){t<0?n[~t]=r:e[t]=r},this.getId=function(r){var i=r<0?~r:r;return i>=t?-1:r<0?n[i]:e[i]}}function Bp(t,e,n,r){var i,o,a,s=n.arcs,u=new ra(t.length),c=If(n),l=new ra(s.size()),f=new ra(s.size());function p(t){i=i?i.concat(t):t}function h(e){o=s.getSimpleShapeBounds2(e),l.setIds(e),function(e){var n,r,i=e.concat();for(;i.length>0;)n=i.pop(),(r=g(n))>=0&&d(i,t[r])}(e),l.clearIds(e),u.clearIds(a)}function d(t,e){for(var n,r,i,o,a=0,s=e.length;a<s;a++)for(var u=0,c=(r=e[a]).length;u<c;u++)n=r[u],o=void 0,void 0,o=~(i=n),!(l.hasId(i)||l.hasId(o)||f.hasId(i)||f.hasId(o))&&t.push(~n)}function g(t){var n=e.getShapeIdByArcId(t);return-1==n||u.hasId(n)?-1:!1===s.arcIsContained(we(t),o)?(ue("Out-of-bounds ring arc",t),-1):(u.setId(n),a.push(n),n)}this.getTilesInShape=function(t,e){var n,o=[],s=[];return a=[],i=[],e,r.no_holes?c(t,o,s):(c(t,o,s),s.forEach(p),f.setIds(i)),o.forEach(h),n=a,a=null,f.clearIds(i),i=null,n}}var Gp=Object.freeze({__proto__:null,PolygonTiler:Bp});function Up(t,e,n){var r=n||{},i=t.shapes,o=(If(e),Fp(e).mosaic),a=new zp(o,e.arcs),s=new ra(o.length),u=new dp(o,r),c=new Bp(o,a,e,r),l=null;function f(t,e){return o[t]}function p(t){for(var n,r,i,s,c=o[t][0],l=e.arcs,f=-1,p=0,h=0;h<c.length;h++)n=c[h],(i=a.getShapeIdByArcId(~n))<0||(r=u.getShapeIdByTileId(i))<0||(s=yn.getPathPerimeter([n],l))>p&&(f=r,p=s);f>-1&&u.addTileToShape(f,t)}!r.simple&&r.flat&&(l=function(t,e){var n=[];return function(r){return r in n?n[r]:n[r]=Math.abs(yn.getShapeArea(t[r],e))}}(t.shapes,e.arcs)),this.mosaic=o,this.nodes=e,this.getSourceIdsByTileId=u.getShapeIdsByTileId,this.getTileIdsByShapeId=u.getTileIdsByShapeId,i.forEach((function(t,e){var n=c.getTilesInShape(t,e);u.indexTileIdsByShapeId(e,n,l)})),r.flat&&u.flatten(),this.removeGaps=function(t){r.flat||re("MosaicIndex#removeGaps() should only be called with a flat mosaic");var e=u.getUnusedTileIds(),n=e.filter((function(e){var n=o[e];return t(n[0])}));return n.forEach(p),{removed:n.length,remaining:e.length-n.length}},this.getUnusedTiles=function(){return u.getUnusedTileIds().map(f)},this.getTilesByShapeIds=function(t){return function(t){var e,n,r,i,o=[];for(r=0;r<t.length;r++)for(n=u.getTileIdsByShapeId(t[r]),i=0;i<n.length;i++)e=n[i],s.hasId(e)||(s.setId(e),o.push(e));return s.clearIds(o),o}(t).map(f)}}function zp(t,e){var n,r=new jp(e.size());function i(t){for(var e,i=0,o=t.length;i<o;i++)e=t[i],r.setId(e,n)}t.forEach((function(t,e){n=e,t.forEach(i)})),this.getShapeIdByArcId=function(t){return r.getId(t)}}var qp=Object.freeze({__proto__:null,MosaicIndex:Up,ShapeArcIndex:zp});function Vp(t,e,n){(n=a.extend({},n)).field&&(n.fields=[n.field]);var r=Qf(n.fields,t.data),i=function(t,e){return t.shapes.reduce((function(t,n,r){var i=e(r);return i in t==!1&&(t[i]=[]),t[i].push(r),t}),[])}(t,r);return hp(t,Xp(i,t,e,n),r,n)}function Yp(t,e){var n=e.map((function(t,e){return{tile_id:e}}));return a.defaults({shapes:e,data:new yr(n)},t)}function Xp(t,e,n,r){var i=_n(e.shapes,n.arcs),o=new Up(e,new ai(n.arcs,i),{flat:!0,simple:1==t.length}),s=Bf(e,n,a.extend({sliver_control:1},r)),u=o.removeGaps(s.filter),c=kf(o.nodes),l=t.map((function(t){var e=o.getTilesByShapeIds(t);return r.tiles?e.reduce((function(t,e){return t.concat(e)}),[]):function(t,e){for(var n,r,i=[],o=[],a=0,s=t.length;a<s;a++)r=t[a],i.push(r[0]),r.length>1&&(o=o.concat(r.slice(1)));(n=e(i.concat(o),"dissolve")).length;return n.length>0?n:null}(e,c)}));l=function(t,e){var n=function(t,n){wn(n);var r=e([n],"flatten");return r.length>1?(r.forEach(wn),t=t.concat(r)):t.push(wn(n)),t};return t.map((function(t){return t?t.reduce(n,[]):null}))}(l,c);var f,p,h,d=(f=u.removed,p=u.remaining,h=s.label,f>0==0?"":a.format("Closed %,d / %,d gap%s using %s",f,f+p,a.pluralSuffix(f),h));return d&&oe(d),l}var Jp=Object.freeze({__proto__:null,dissolvePolygonLayer2:Vp,composeMosaicLayer:Yp,dissolvePolygonGroups2:Xp});function Wp(t,e){var n,r=e||{},i=t.layers[0],o=Ip(t,{});if(r.debug_division)return function(t,e){var n=If(e),r=[],i=[];return t.shapes.forEach(o),t.shapes=r,t.data=new yr(i),t;function o(t){var e=[],o=[];n(t,e,o),e.forEach((function(t){r.push([t]),i.push({type:"ring"})})),o.forEach((function(t){r.push([wn(t)]),i.push({type:"hole"})}))}}(i,o);var a=new Up(i,o,{flat:!1,no_holes:!1});if(r.debug_mosaic)return n=Yp(i,a.mosaic),i.shapes=n.shapes,void(i.data=n.data);var s=kf(a.nodes),u=i.shapes.map((function(t,e){for(var n=a.getTilesByShapeIds([e]),r=[],i=0;i<n.length;i++)r.push(n[i][0]);return s(r,"dissolve")}));i.shapes=u,r.no_dissolve||si(t)}function Hp(t,e){return Ho(t).value&&Ko(t,e)||null}function $p(t,e){var n=Ui(t),r=e.tolerance?Hp(e.tolerance,n):0;return function(t){return r||(r||.01*t)}}function Kp(t,e,n){n.radius||ie("Missing expected radius parameter");var r=n.units||"",i=Ui(e),o=Hp(n.radius+r,i);if(o)return function(){return o};var a=es(n.radius,t,null,{});return function(t){var e=a(t);return e&&Hp(e+r,i)||0}}var Zp=Object.freeze({__proto__:null,dissolveBufferDataset:Wp,getBufferToleranceFromCircleSegments:function(t){return 1-Math.cos(Math.PI/t)},getArcDegreesFromTolerancePct:function(t){return 360*Math.acos(1-t)/Math.PI},getBufferToleranceFromCircleSegments2:function(t){return 1/Math.cos(Math.PI/t)-1},getArcDegreesFromTolerancePct2:function(t){return 360*Math.acos(1/(t+1))/Math.PI},parseConstantBufferDistance:Hp,getBufferToleranceFunction:$p,getBufferDistanceFunction:Kp});function Qp(t,e,n,r){var i=function(t,e,n,r){var i=r.backtrack>=0?r.backtrack:50,o=new Wr(t),a=r.cap_style||"round";function s(t,n,r,o,a,s){for(var u=o+a,c=o+10;c<u;)p(t,e(n,r,c,s),i),c+=10}function u(t,e,n,r,i){return yn.distance2D(t,e,n,r)<i}function c(t,e){var n=t[t.length-1];u(n[0],n[1],e[0],e[1],1e-10)||t.push(e)}function l(t,n,r,i){return"flat"==a?[[t,n]]:function(t,n,r,i){var o=[],a=r-90,s=10;for(;s<180;)o.push(e(t,n,a+s,i)),s+=10;return o}(t,n,r,i)}function f(t,e){var n=e-t;return n>180&&(n-=360),n<-180&&(n+=360),n}function p(t,e,n){for(var r,i,o,a,s=0,u=t.length-3;s<n&&u>=0;s++,u--)if(o=t[t.length-1],r=t[u],i=t[u+1],a=th(r[0],r[1],i[0],i[1],o[0],o[1],e[0],e[1])){for(;t.length>u+1;)t.pop();c(t,a)}c(t,e)}return function(t,r){var a,c,h,d,g,y,m,v,_,b,x,w,E,S,I,C,N=[],A=0;for(o.init(t);o.hasNext();)o.x===g&&o.y===y||(h=g,d=y,g=o.x,y=o.y,A>=1&&(b=_,_=n(h,d,g,y),m=e(h,d,_-90,r),v=e(g,y,_-90,r)),1==A&&(x=_,a=h,c=d,N.push(m,v)),A>1&&(w=f(b,_),E=N,S=m[0],I=m[1],C=void 0,u((C=E[E.length-1])[0],C[1],S,I,1e-6)?p(N,v,i):w>0?(s(N,h,d,b-90,w,r),p(N,m,i),p(N,v,i)):(p(N,m,i),p(N,v,i))),A++);return g==a&&y==c?(w=f(_,x))>0&&s(N,g,y,_-90,w,r):N.push.apply(N,l(g,y,_,r)),N}}(t,e,n,r),o=r.geometry_type,a="polyline"==r.output_geometry?"polyline":"polygon";function s(t,e){var n,r=i(t,e);return"polyline"==o&&(n=wn(t.concat()),r=r.concat(i(n,e))),r.push(r[0]),"polyline"==a?r:[r]}return function(t,e){for(var n={type:"polyline"==a?"MultiLineString":"MultiPolygon",coordinates:[]},r=0;r<t.length;r++)n.coordinates.push(s(t[r],e));return 0==n.coordinates.length?null:n}}function th(t,e,n,r,i,o,a,s){return t<i&&t<a&&n<i&&n<a||t>i&&t>a&&n>i&&n>a||e<o&&e<s&&r<o&&r<s||e>o&&e>s&&r>o&&r>s?null:yn.segmentIntersection(t,e,n,r,i,o,a,s)}var eh=Object.freeze({__proto__:null,getPolylineBufferMaker:Qp,addBufferVertex:function(t,e,n){for(var r,i,o,a,s=0,u=t.length-3;s<n&&u>=0;s++,u--)if(o=t[t.length-1],r=t[u],i=t[u+1],a=th(r[0],r[1],i[0],i[1],o[0],o[1],e[0],e[1])){for(a.length;t.length>u+1;)t.pop();t.push(a)}t.push(e)},bufferIntersection:th});function nh(t,e,n){return!!n.containsPoint(t[0],t[1])||!!(yn.segmentIntersection(t[0],t[1],e[0],e[1],n.xmin,n.ymin,n.xmin,n.ymax)||yn.segmentIntersection(t[0],t[1],e[0],e[1],n.xmin,n.ymax,n.xmax,n.ymax)||yn.segmentIntersection(t[0],t[1],e[0],e[1],n.xmax,n.ymax,n.xmax,n.ymin)||yn.segmentIntersection(t[0],t[1],e[0],e[1],n.xmax,n.ymin,n.xmin,n.ymin))}function rh(t,e,n,r){var i=n/180*Math.PI;return[t+Math.sin(i)*r,e+Math.cos(i)*r]}function ih(t,e,n,r){var i=Math.PI/180,o=Math.cos(e*i),a=2*o*o-1,s=2*o*a-o,u=2*o*s-a,c=1e3*(111.41513*o-.09455*s+12e-5*(2*o*u-s)),l=1e3*(111.13209-.56605*a+.0012*u),f=n*i,p=e+Math.cos(f)*r/l;return[t+Math.sin(f)*r/c,p]}function oh(t,e){if(!qi(Ui(t)))return rh;if(!e)return ih;var r=function(t){var e=Ui(t);qi(e)||re("Expected an unprojected CRS");var r=e.es/(1+Math.sqrt(e.one_es));return new(n(20).internal.GeographicLib.Geodesic.Geodesic)(e.a,r)}(t);return function(t,e,n,i){var o=r.Direct(e,t,n,i);return[o.lon2,o.lat2]}}function ah(t,e,n,r){var i=t[0],o=t[1],a=e[0],s=e[1],u=a-n[0],c=s-n[1],l=r[0]+u,f=r[1]+c,p=yn.orient2D(i,o,a,s,l,f);return p?p<0?1:-1:0}function sh(t,e,n,r){return 180*yn.bearing(t,e,n,r)/Math.PI}function uh(t,e,n,r){return 180*yn.bearing2D(t,e,n,r)/Math.PI}function ch(t){return qi(Ui(t))?sh:uh}var lh=Object.freeze({__proto__:null,getGeodeticSegmentFunction:oh,segmentTurn:ah,getBearingFunction:ch});function fh(t,e,n,r){var i=function(t,e,n,r){var i,o,a,s,u=r.backtrack>=0?r.backtrack:50,c=new Wr(t);r.cap_style;function l(t,n,r,i,o){for(var a=r+i,s=r+10;s<a;)h(e(t,n,s,o)),s+=10}function f(t,e,n,r,i){return yn.distance2D(t,e,n,r)<i}function p(t,e){var n=t[t.length-1];f(n[0],n[1],e[0],e[1],1e-10)||t.push(e)}function h(t){var e,n,r,i,a,c=o;i=r=c[c.length-1];for(var l=0,f=c.length-3;f>=0;l++,f--){if(e=c[f],n=c[f+1],a=th(e[0],e[1],n[0],n[1],r[0],r[1],t[0],t[1])){if(1==ah(e,n,r,t)){d();break}for(;c.length>f+1;)c.pop();p(c,a),r=a}if(l>=u){s||(s=new me).mergePoint(e[0],e[1]),s.mergePoint(n[0],n[1]),nh(i,t,s)&&d();break}}p(c,t)}function d(){var t=o[o.length-1],e=a[a.length-1],n=[];g(n,o),a.reverse(),g(n,a),n.push(n[0]),i.push(n),o.push(t),a.push(e)}function g(t,e){for(e.reverse();e.length>0;)t.push(e.pop())}return function(t,r){var s,u,p,g,y,m,v,_,b,x,w,E,S,I;for(i=[],o=[],a=[],c.init(t),c.hasNext()&&(p=c.x,g=c.y);c.hasNext();)c.x===p&&c.y===g||(s=p,u=g,p=c.x,g=c.y,_=v,v=n(s,u,p,g),y=e(s,u,v-90,r),m=e(p,g,v-90,r),0===a.length?(0===i.length&&v,o.push(y,m),a.push([s,u],[p,g])):(I=void 0,(I=v-_)>180&&(I-=360),I<-180&&(I+=360),b=I,x=o,w=y[0],E=y[1],S=void 0,f((S=x[x.length-1])[0],S[1],w,E,1e-6)?h(m):b>0?(l(s,u,_-90,b,r),h(y),h(m)):(h(y),h(m)),a.push([p,g])));return a.length>1&&d(),i}}(t,e,n,r),o=r.geometry_type;function a(t){return[t]}function s(e,n){var s,u,c;return function(t,e){return"polyline"==o?"right"!=r.type:"outer"==r.type?1==yn.getPathWinding(t,e):"inner"!=r.type||-1==yn.getPathWinding(t,e)}(e,t)&&(s=i(e,n)),"polyline"==o&&"left"!=r.type&&(c=wn(e.concat()),u=i(c,n)),(s||[]).concat(u||[]).map(a)}return function(t,e){for(var n={type:"MultiPolygon",coordinates:[]},r=0;r<t.length;r++)n.coordinates=n.coordinates.concat(s(t[r],e));return 0==n.coordinates.length?null:n}}function ph(t,e,n){var r=Kp(t,e,n),i=($p(e,n),oh(e,!1)),o=ch(e),a=Object.assign({geometry_type:t.geometry_type},n),s=(n.v2?fh:Qp)(e.arcs,i,o,a);t.data&&t.data.getRecords();return{type:"GeometryCollection",geometries:t.shapes.map((function(e,n){var i=r(n);return i&&e?s(e,i,t.geometry_type):null}))}}function hh(t,e,n){return Ts(function(t,e,n){var r=n.vertices||72,i=Kp(t,e,n),o=oh(e);return{type:"GeometryCollection",geometries:t.shapes.map((function(t,e){var n=i(e);return n&&t?function(t,e,n,r){var i=[];if(!t||!t.length)return null;for(var o=0;o<t.length;o++)i.push(dh(t[o],e,n,r));return 1==i.length?{type:"Polygon",coordinates:i[0]}:{type:"MultiPolygon",coordinates:i}}(t,n,r,o):null}))}}(t,e,n),{})}function dh(t,e,n,r){for(var i=[],o=360/n,a=0;a<n;a++)i.push(r(t[0],t[1],a*o,e));return i.push(i[0].concat()),[i]}function gh(t,e,n,r){var i=new Cu(e,n.arcs);return t.map((function(t){return function(t){var e=null;t&&(e=t.reduce(o,[]));return e&&e.length>0?e:null}(t)}));function o(t,e){for(var n,o,a=null,s=0;s<e.length;s++)n=e[s],(o=i.arcIsEnclosed(n))&&"clip"==r||!o&&"erase"==r?(a||t.push(a=[]),a.push(n)):a=null;return t}}cu.buffer=function(t,e,n){return function(t,e,n){var r,i;"point"==t.geometry_type?r=hh(t,e,n):"polyline"==t.geometry_type?r=function(t,e,n){var r=Ts(ph(t,e,n),{});return Wp(r,n),r}(t,e,n):"polygon"==t.geometry_type?r=function(t,e,n){var r=Ts(ph(t,e,n),{});return Wp(r),r}(t,e,n):ie("Unsupported geometry type");var o=nu(e,[r]);(i=o[0]).name=t.name,t.data&&!i.data&&(i.data=n.no_replace?t.data.clone():t.data);return o}(t[0],e,n)},cu.cleanLayers=function(t,e,n){var r,i=n||{},o=!i.only_arcs,s=a.some(t,br);i.debug?Ip(e,i):(t.forEach((function(t){_r(t)&&("polygon"==t.geometry_type&&i.rewind&&Nu(t,e.arcs),o&&(r||(r=Ip(e,i)),"polygon"==t.geometry_type?function(t,e,n){var r=t.shapes.map((function(t,e){return[e]}));t.shapes=Xp(r,t,e,n)}(t,e,i):"polyline"==t.geometry_type?function(t,e,n){var r,i=_n(t.shapes,e.arcs),o=new ai(e.arcs,i);function a(t){for(var e,n=t.length,i=[],a=0;a<n;a++)e=t[a],i.push(e),a<n-1&&o.getConnectedArcs(e).length>1&&(r.push(i),i=[]);i.length>0&&r.push(i)}t.shapes=t.shapes.map((function(t,e){return t?(r=[],Dn(t,a),r):null}))}(t,e):"point"==t.geometry_type&&function(t,e,n){var r,i;function o(t){var e=t.join("~");e in r||(r[e]=!0,i.push(t))}t.shapes=t.shapes.map((function(t,e){return t&&t.length>0!=!1?1==t.length?t:(r={},i=[],t.forEach(o),0===i.length?null:i):null}))}(t)),i.allow_empty||cu.filterFeatures(t,e.arcs,{remove_empty:!0}))})),!i.no_arc_dissolve&&s&&e.arcs&&si(e))},cu.filterSlivers=function(t,e,n){return"polygon"!=t.geometry_type?0:function(t,e,n){var r=a.extend({sliver_control:1},n),i=Bf(t,e,r),o=i.filter,s=0;return Fn(t.shapes,(function(t,e,n){if(o(t))return s++,null})),oe(a.format("Removed %'d sliver%s using %s",s,a.pluralSuffix(s),i.label)),s}(t,e,n)};var yh=Object.freeze({__proto__:null,clipPolylines:gh});function mh(t,e){e=e&&!t.arcs.isPlanar();var n=new Uint8Array(t.arcs.size()),r=If(t,e),i=kf(t,n);return function(e){if(!e)return null;var n=[],o=[];r(e,n,o),n=i(n,"flatten"),o.forEach(wn),(o=i(o,"flatten")).forEach(wn);var a=function(t,e){for(var n=0,r=e.length;n<r;n++)t.push(e[n]);return t}(n,o),s=i(a,"dissolve");return s.length>1&&(s=function(t,e){if(t.length<=1)return t;var n=Tn(t,e,"polygon"),r=new Cu(t.map((function(t){return[t]})),e);return t.filter((function(t,e){var i,o=r.findSmallestEnclosingPolygon(t),a=!0;o>-1&&(i=n[e].area>0,n[o].area>0==i&&(a=!1));return a}))}(s,t.arcs)),s.length>0?s:null}}function vh(t,e,n,r,i){var o=n.arcs,a=i||{},s=new Uint8Array(o.size()),u=new Uint8Array(o.size()),c=0,l=0,f=[],p=Ff(n,(function(t){var e,n,i=t>=0,o=i?t:~t,a=u[o],c=s[o];i?(e=a,n=c):(e=a>>4,n=c>>4);n&=3;var p=!1;3==(e&=3)?1==n||2==n&&"erase"==r||(p=!0):0===e&&3==n&&(f.push(t),p=!0);p&&(3==n&&l++,a=i?Tf(a,1,3):Tf(a,16,48));return a|=i?4:64,u[o]=a,p}),(function(t){var e=t>=0,n=e?t:~t,r=e?1:16,i=u[n],o=s[n];o>0&&c++;return(i&r)>0||(o&r)>0})),h=mh(n);a.bbox2||(t=t.map(h)),Rf(e,o,s,"clip"==r,"erase"==r,!0,17);var d=new Cu(e,o),g=t.map((function(t,e){return t?function(t,e,n){var r=[],i="clip"==e,a="erase"==e;Rf(t,o,u,!0,!1,!1),Dn(t,(function(t){for(var e,o=0,s=t.length;o<s;o++)if(c=0,l=0,e=p(t[o]))if(0===c||0===l){var u=n.pathIsEnclosed(e);(i&&u||a&&!u)&&r.push(e)}else r.push(e)})),Df(t,0,u,!0,!0,!0),f.length>0&&(Df(f,0,u,!0,!0,!0),f=[]);return 0===r.length?null:r}(t,r,d):null})),y=function(t){return t.map((function(t){var e=[];return Dn(t,(function(t){for(var n,r,i,o=!0,a=!1,c=0;c<t.length;c++){if(n=t[c],r=u,i=void 0,void 0,i=we(n),0!=(68&r[i])){o=!1;break}!a&&m(t[c],s)&&(a=!0)}o&&a&&e.push(t)})),e.length>0?e:null}))}(e);return Df(e,0,u,!0,!0),d=new Cu(y,o),t.forEach((function(t,e){var n=t?function(t,e,n){var r=n.findPathsInsideShape(t),i=[];if(!r)return null;"erase"==e&&r.forEach(wn);r.length<=1?i=r:(Rf(r,o,u,!0,!1,!0),r.forEach((function(t){for(var e,n=0;n<t.length;n++)(e=p(t[n]))&&i.push(e)})));return i.length>0?i:null}(t,r,d):null;n&&(g[e]=(g[e]||[]).concat(n))})),g;function m(t,e){return(17&e[we(t)])>0}}function _h(t,e,n,r){var i=new Cu(e,n);return t.reduce((function(t,e){for(var n,o=e?e.length:0,a=[],s=0;s<o;s++)n=i.findEnclosingShape(e[s])>-1,("clip"==r&&n||"erase"==r&&!n)&&a.push(e[s].concat());return t.push(a.length>0?a:null),t}),[])}var bh=Object.freeze({__proto__:null,clipPoints:_h});function xh(t,e,n,r){a.some(t,br);var i,o,s,u=r.bbox||r.bbox2;return n&&n.geometry_type&&(n={dataset:e,layer:n,disposable:!0}),u?(o=function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=[[e,n],[e,i],[r,i],[r,n],[e,n]];i>n&&r>e||ie("Invalid bbox (should be [xmin, ymin, xmax, ymax]):",t);return{arcs:new ii([o]),layers:[{shapes:[[[0]]],geometry_type:"polygon"}]}}(u),s=o.layers[0]):n?(s=n.layer,o=a.defaults({layers:[s]},n.dataset)):ie("Command requires a source file, layer id or bbox"),e.arcs!=o.arcs?(n&&!n.disposable&&(o.layers[0]=Dr(o.layers[0])),$s(i=ou([e,o]))):((i=a.extend({},e)).layers=e.layers.filter((function(t){return t!=s})),i.layers.push(s)),i}var wh=Object.freeze({__proto__:null,mergeLayersForOverlay:xh});function Eh(t,e){var n=t.arcs,r=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=[],s=[],u=[],c=[];return t.forEachSegment((function(t,e,f,p){var h,d=f[t],g=p[t],y=f[e],m=p[e];Sh(d,g,y,m,n,r,i,o)||Ih(d,g,y,m,n,r,i,o)||((h=yn.segmentIntersection(n,o,i,o,d,g,y,m))&&l(a,h,t,e,f,p),(h=yn.segmentIntersection(n,r,i,r,d,g,y,m))&&l(u,h,t,e,f,p),(h=yn.segmentIntersection(n,r,n,o,d,g,y,m))&&l(c,h,t,e,f,p),(h=yn.segmentIntersection(i,r,i,o,d,g,y,m))&&l(s,h,t,e,f,p))})),{cutPoints:c.concat(u,s,a),bboxPoints:Ch(e,c,a,s,u)};function l(t,e,n,r,i,o){e&&(t.push(f(e[0],e[1],n,r,i,o)),4==e.length&&t.push(f(e[2],e[3],n,r,i,o)))}function f(t,e,n,r,i,o){var a=Ep(t,e,n,r,i,o);return Tp(t,e,a[0],a[1],i,o)}}(n,e),i=Pp(r.cutPoints,n);n.dedupCoords(),Op(t,i);var o=ou([t,function(t){for(var e,n,r=[],i=[],o={geometry_type:"polygon",shapes:[[i]]},a=0,s=t.length-1;a<s;a++)e=t[a],n=t[a+1],r.push([[e.x,e.y],[n.x,n.y]]),i.push(a);return{arcs:new ii(r),layers:[o]}}(r.bboxPoints)]),a=o.layers.pop();return t.arcs=o.arcs,t.layers=o.layers,a}function Sh(t,e,n,r,i,o,a,s){return t<i&&n<i||t>a&&n>a||e<o&&r<o||e>s&&r>s}function Ih(t,e,n,r,i,o,a,s){return t>i&&n>i&&t<a&&n<a&&e>o&&r>o&&e<s&&r<s}function Ch(t,e,n,r,i){var o={x:t[0],y:t[1]},s={x:t[0],y:t[3]},u={x:t[2],y:t[3]},c={x:t[2],y:t[1]};return e=a.sortOn(e.concat([o,s]),"y",!0),n=a.sortOn(n.concat([s,u]),"x",!0),r=a.sortOn(r.concat([u,c]),"y",!1),i=a.sortOn(i.concat([c,o]),"x",!1),e.concat(n,r,i).reduce((function(t,e){var n=t.length>0?t[t.length-1]:null;return null!==n&&n.x==e.x&&n.y==e.y||t.push(e),t}),[])}var Nh=Object.freeze({__proto__:null,divideDatasetByBBox:Eh,segmentOutsideBBox:Sh,segmentInsideBBox:Ih});function Ah(t,e,n,r,i){var o,s,u=a.some(t,br);return(i=i||{no_cleanup:!0}).bbox2&&u?Oh(t,n,i):(o=xh(t,n,e,i),u?(s=Ip(o,i),n.arcs=o.arcs):s=new ai(o.arcs),Ph(t,o.layers.pop(),s,r,i))}function Oh(t,e,n){return Ph(t,Eh(e,n.bbox2),new ai(e.arcs),"clip",n)}function Ph(t,e,n,r,i){return Pr(e,"Requires a polygon clipping layer"),t.reduce((function(t,o){return"slice"==r?t=t.concat(function(t,e,n,r){return cu.splitLayer(e,r.id_field,{no_replace:!0}).map((function(e,i){var o=Th(t,e,n,"clip",r);return o.name=function(t,e,n){return"slice-"+(e?t.data.getRecords()[0][e]:n+1)}(e,r.id_field,i),o}))}(o,e,n,i)):t.push(Th(o,e,n,r,i)),t}),[])}function Th(t,e,n,r,i){var o,a,s,u=n.arcs,c=t.shapes?t.shapes.length:0,l=0;return 0===c?t:(t===e&&ie("Can't clip a layer with itself"),"point"==t.geometry_type?a=_h(t.shapes,e.shapes,u,r):"polygon"==t.geometry_type?a=vh(t.shapes,e.shapes,n,r,i):"polyline"==t.geometry_type?a=gh(t.shapes,e.shapes,n,r):ie("Invalid target layer:",t.name),s={name:t.name,geometry_type:t.geometry_type,shapes:a,data:t.data},i.remove_slivers&&"polygon"==s.geometry_type&&(l=function(t,e,n){var r=Gf(n,zf(t,n),1),i=new Uint8Array(n.size()),o=0;return bn(e.shapes,i),Fn(t.shapes,(function(t){for(var e=0,n=0,a=0,s=t&&t.length||0;a<s;a++)i[we(t[a])]>0?n++:e++;if(n>0&&e>0&&r(t))return o++,null})),o}(s,e,u)),cu.filterFeatures(s,u,{remove_empty:!0,verbose:!1}),s.data&&(s.data=s.data.clone()),(o=c-s.shapes.length)&&l&&oe(Mh(o,l)),s)}function Mh(t,e){var n=t?a.format("%,d null feature%s",t,a.pluralSuffix(t)):"",r=e?a.format("%,d sliver%s",e,a.pluralSuffix(e)):"";return n||r?a.format("Removed %s%s%s",n,n&&r?" and ":"",r):""}cu.clipLayers=function(t,e,n,r){return Ah(t,e,n,"clip",r)},cu.eraseLayers=function(t,e,n,r){return Ah(t,e,n,"erase",r)},cu.clipLayer=function(t,e,n,r){return cu.clipLayers([t],e,n,r)[0]},cu.eraseLayer=function(t,e,n,r){return cu.eraseLayers([t],e,n,r)[0]},cu.sliceLayers=function(t,e,n,r){return Ah(t,e,n,"slice",r)},cu.sliceLayer=function(t,e,n,r){return cu.sliceLayers([t],e,n,r)};var Lh=Object.freeze({__proto__:null,clipLayersByBBox:Oh,clipLayersByLayer:Ph,getClipMessage:Mh});function Rh(t,e){var n=arguments[2]||{},r=!n.reusable,i=e.size(),o=new Int32Array(i),s=new Int32Array(i);function u(t,e){var i,a=we(t),u=o[a],c=s[a];return-1==u||null===(i=e(u,c))||!1===i?null:(r&&(o[a]=-1,s[a]=-1),n.filter&&!n.filter(u,c)?null:i)}return a.initializeArray(o,-1),a.initializeArray(s,-1),An(t,(function(t){var e=we(t.arcId),n=t.shapeId,r=o[e];-1==r?o[e]=n:n<r?(s[e]=r,o[e]=n):s[e]=n})),function(t){return function(e){return u(e,t)}}}var Dh=Object.freeze({__proto__:null,getArcClassifier:Rh});function Fh(t,e){var n,r,i,o=Rh(t.shapes,e,{reusable:!0})((function(t,e){return-1==e?-1:t==n?e:t}));function a(t){var e=o(t);-1!=e&&(i?i(e,t):-1==r.indexOf(e)&&r.push(e))}return function(e,o){if(n=e,!o)return r=[],In(t.shapes[e],a),r;i=o,In(t.shapes[e],a),i=null}}function kh(t,e){var n=Rh(t,e)((function(t,e){return e>-1&&t>-1?[t,e]:null})),r=[],i={};return In(t,(function(t){var e,o=n(t);o&&(e=o.join("~"))in i==!1&&(r.push(o),i[e]=!0)})),r}var jh=Object.freeze({__proto__:null,getNeighborLookupFunction:Fh,findPairsOfNeighbors:kh});function Bh(t){var e,n=t.nodata||"white",r=t.precision?pa(t.precision):null;return t.random||t.colors&&t.colors.length||ie("Missing colors= parameter"),t.random?e=function(t){t&&t.length||(t="#ccc,#888,#444".split(","));return function(e){var n=t.length,r=void 0===e?Math.floor(Math.random()*n):function(t){var e=String(t),n=5381,r=e.length;for(;r>0;)n=33*n^e.charCodeAt(--r);return Math.abs(n)}(e)%n;return t[r]}}(t.colors):t.breaks?e=Gh(t.colors,t.breaks,r):t.categories?e=function(t,e,n){t.length!=n.length&&ie("Number of colors should be equal to the number of categories");return function(r){var i=n.indexOf(r);return i>=0?t[i]:r&&e?e:null}}(t.colors,t.other,t.categories):ie("Missing categories= or breaks= parameter"),function(t){return e(t)||n}}function Gh(t,e,n){var r;return t.length!=e.length+1&&ie("Number of colors should be one more than number of class breaks"),Uh(r=e,a.genericSort(r.map(parseFloat)))||(!function(t){return Uh(t,a.genericSort(t.map(parseFloat),!1))}(e)?ie("Invalid class breaks:",e.join(",")):(e=e.concat().reverse(),t=t.concat().reverse())),function(r){var i=-1;return Number(r)===r&&(n&&(r=r(n)),i=function(t,e){var n=0;if(!(t>=-1/0&&t<=1/0))return-1;for(;n<e.length&&t>=e[n];)n++;return n}(r,e)),i>-1&&i<t.length?t[i]:null}}function Uh(t,e){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return t.length==e.length}cu.cluster=function(t,e,n){Pr(t);var r=function(t,e,n){var r,i=function(t){var e=t.max_width||1/0,n=t.max_height||1/0,r=t.max_area||1/0;return function(t,i){var o=t.area+i.area,a=yn.distance2D(t.centroid.x,t.centroid.y,i.centroid.x,i.centroid.y),s=t.bounds.clone().mergeBounds(i.bounds);return(o>r||s.width()>e||s.height()>n)&&(a=-1),a}}(n),o=t.shapes.length,s=n.pct?a.parsePercent(n.pct):1,u=Math.round(o*s),c=n.group_by||null,l=t.shapes.map((function(n,r){var i=c&&t.data.getRecordAt(r)[c]||null;return{ids:[r],area:yn.getShapeArea(n,e),bounds:e.getMultiShapeBounds(n),centroid:yn.getShapeCentroid(n,e),group:i,friends:[]}})),f=[],p={};c&&!t.data&&ie("Missing attribute data table");kh(t.shapes,e).forEach((function(t,e){var n,r,i=l[t[0]],o=l[t[1]];i.group===o.group&&((n={ids:t}).score=g(n),n.score<0||(r=f.length,i.friends.push(r),o.friends.push(r),f.push(n)))}));for(;u-- >0&&(r=d());)h(r);return l.filter(Boolean).reduce((function(t,e,n){for(var r=e.ids,i=0;i<r.length;i++)t[r[i]]=n;return t}),[]);function h(t){var e,n,r,i=(e=t.ids,n=l[e[0]],r=l[e[1]],n.bounds.mergeBounds(r.bounds),n.area+=r.area,n.ids=n.ids.concat(r.ids),function(t,e){var n=t.area/(t.area+e.area),r=t.centroid,i=e.centroid;r.x=r.x*n+i.x*(1-n),r.y=r.y*n+i.y*(1-n)}(n,r),l[e[0]]=null,l[e[1]]=null,n.friends=function(t){for(var e,n={},r=[],i=0;i<t.length;i++)(e=t[i])in n==0&&null!==f[e]&&(r.push(e),n[e]=!0);return r}(n.friends.concat(r.friends)),n),o=l.length;l[o]=i,function(t,e,n){for(var r,i,o=0,a=t.length;o<a;o++)i=t[o],r=f[i],s=r.ids,u=e,(s[0]===u[0]||s[0]===u[1]||s[1]===u[0]||s[1]===u[1])&&(f[i]=y(r,e,n));var s,u}(i.friends,t.ids,o)}function d(){var t,e,n,r=-1,i=1/0;for(e=0,n=f.length;e<n;e++)null!==(t=f[e])&&t.score<i&&(i=t.score,r=e);return-1==r?null:(t=f[r],f[r]=null,t)}function g(t){return i(l[t.ids[0]],l[t.ids[1]])}function y(t,e,n){var r,i=t.ids[0],o=t.ids[1];return e[0]!=i&&e[1]!=i||(i=n),e[0]!=o&&e[1]!=o||(o=n),i==o?null:(t.ids=[i,o],(r=function(t){var e=t.ids[0],n=t.ids[1];n<e&&(e=n,n=t.ids[0]);return e+","+n}(t))in p?null:(p[r]=!0,t.score=g(t),t.score<0?null:t))}}(t,e,n);return mr(t,n.id_field||"cluster",r),t},cu.colorizer=function(t){var e;t.name||ie("Missing required name= parameter"),e=t.name,/^(stroke|stroke-width|stroke-dasharray|stroke-opacity|fill|fill-opacity|opacity|r|class)$/.test(e)&&ie('"'+t.name+'" is a reserved name'),Yt("defs")[t.name]=Bh(t)};var zh=Object.freeze({__proto__:null,getColorizerFunction:Bh,getSequentialColorFunction:Gh});function qh(t,e,n,r){var i=e.data.getRecords(),o=Xh(t,e,n,r),a=function(t,e){var n=e.data.getRecords();return function(e){var r=n[e];return!!r&&Yh(r[t])}}(t,e),s={},u=0;return e.shapes.forEach((function(t,e){if(a(e)){var n=o(e);n.group&&function(t,e){var n,r=e[t.group];if(!r)return void(e[t.group]={shapes:[t.shape],weights:t.weights,values:t.values});r.shapes.push(t.shape);for(var i=0,o=t.values.length;i<o;i++)n=r.values.indexOf(t.values[i]),r.weights[n]+=t.weights[i]}(n,s)}})),Object.keys(s).forEach((function(e){var n,r,o=s[e],a=Vh(o);n=o.shapes,r=a,n.forEach((function(e){u++,i[e][t]=r}))})),u>0&&(u+=qh(t,e,n,r)),u}function Vh(t){var e=Math.max.apply(null,t.weights),n=t.weights.indexOf(e);return t.values[n]}function Yh(t){return!t&&0!==t}function Xh(t,e,n,r){var i,o=n.isPlanar(),a=e.data.getRecords();function s(e,r){var s,u,c=a[e][t];Yh(c)||(s=yn.calcPathLen([r],n,!o),-1==(u=i.values.indexOf(c))?(i.values.push(c),i.weights.push(s)):i.weights[u]+=s)}return function(t){return i={shape:t,weights:[],values:[],group:""},r(t,s),i.group=i.values.concat().sort().join("~"),i}}function Jh(t,e){var n=function(t,e){var n,r,i,o={isMax:function(t){return t===r.max},isMin:function(t){return t===r.min},isMode:function(t){return r.modes.indexOf(t)>-1}};return Object.defineProperty(o,"target",{get:function(){return i},enumerable:!0}),n=os(t,{data:e},null,{context:o,returns:!0}),function(t,e,o){return r=o,i=e,n(t)}}(e,t),r=null;return function(t){return a.some(["isMax","isMin","isMode"],(function(e){return t.indexOf(e)>-1}))}(e)&&(r=function(t,e){var n,r,i,o;return o=os(t,{data:e},null,{context:{isMax:function(t){t>r&&(r=t)},isMin:function(t){t<i&&(i=t)},isMode:function(t){n||(n=[]),n.push(t)}}}),function(t){var e;r=-1/0,i=1/0,n=null;for(var a=0;a<t.length;a++)o(t[a]);return e=n?Yf(n):null,{max:r,min:i,modes:e?e.modes:null,margin:e?e.margin:null}}}(e,t)),function(t,e){var i,o,a=r?r(t):null,s=[];for(o=0;o<t.length;o++)!0===(i=n(t[o],e,a))?s.push(t[o]):!1!==i&&ie('"where" expression must return true or false');return s}}cu.dataFill=function(t,e,n){var r=n.field;r||ie("Missing required field= parameter"),Ir(t,r),"polygon"!=t.geometry_type&&ie("Target layer must be polygon type");var i,o,s,u=Fh(t,e),c=(s=t.data.getRecords().map((function(t){return Yh(t[r])})),function(t){return s[t]});i=qh(r,t,e,u),function(t,e,n,r,i){var o=Xh(t,e,n,r),a=e.data.getRecords(),s=0;e.shapes.forEach((function(e,n){if(i(n)){var r=o(n);if(!(r.values.length<2)){var u=a[n][t],c=Vh(r);u!=c&&(a[n][t]=c,s++)}}}))}(r,t,e,u,c),n.contiguous&&(o=function(t,e,n,r,i){var o=e.data.getRecords(),a={},s=new Uint8Array(e.shapes.length),u=null,c=0,l=i.weight_field||null;l&&Ir(e,l);e.shapes.forEach((function(t,e){p(e)})),Object.keys(a).forEach((function(t){var e,n,r,i=a[t];i.length<2||(n=-1/0,r=-1,i.forEach((function(t,e){t.weight>n&&(r=e,n=t.weight)})),-1!=(e=r)&&i.filter((function(t,n){return n!=e})).forEach(f))})),c>0&&qh(t,e,n,r);return c;function f(e){c++,e.shapes.forEach((function(e){o[e][t]=null}))}function p(i){if(1!=s[i]){var c=o[i][t],f=!1;if(!Yh(c)){if(u){if(c!=u.value)return}else f=!0,u={value:c,shapes:[],weight:0},c in a==!1&&(a[c]=[]),a[c].push(u);u.weight+=l?o[i][l]:yn.getShapeArea(e.shapes[i],n),u.shapes.push(i),s[i]=1,r(i).forEach(p),f&&(u=null)}}}}(r,t,e,u,n)),oe("Filled",i,"empty polygons"+a.pluralSuffix(i)),o>0&&oe("Removed",o,"non-contiguous polygon group"+a.pluralSuffix(o))},cu.dissolve2=function(t,e,n){t.forEach(Pr);Ip(e,n);return t.map((function(t){return Vp(t,e,n)}))};var Wh=Object.freeze({__proto__:null,getJoinFilter:Jh});function Hh(t,e,n,r){var i,o,s,u,c,l,f,p,h,d,g,y=e.getRecords(),m=t.getRecords(),v=r.prefix||"",_=[],b=ed(t.getFields(),e.getFields(),r),x=r.sum_fields||[],w=a.difference(b,x),E=new Uint32Array(y.length),S=0,I=0,C=[],N=0,A={};for(r.where&&(l=Jh(e,r.where)),r.calc&&(f=Kf(e,r.calc)),p=0,d=m.length;p<d;p++){for(s=m[p],(u=n(p))&&l&&(N+=u.length,N-=(u=l(u,s)).length),h=0,c=0,g=u?u.length:0;h<g;h++)i=y[o=u[h]],0===c?w.length>0&&Zh(s,i,w,v):1==c&&(w.length>0&&!v&&td(s,i,w,C),I++),x.length>0&&Qh(s,i,x,v),E[o]++,c++;f&&f(u,s),c>0?S++:s&&(r.unmatched&&_.push(a.extend({},s)),Kh(s,w,x,v))}return function(t,e,n,r,i,o,s){if(t>0==!1)return void oe("No records could be joined");oe(a.format("Joined data from %'d source record%s to %'d target record%s",n,a.pluralSuffix(n),t,a.pluralSuffix(t))),t<e&&oe(a.format("%d/%d target records received no data",e-t,e));n<r&&oe(a.format("%d/%d source records could not be joined",r-n,r));i>0&&oe(a.format("%d/%d source records were skipped",i,r));o>0&&(oe(a.format("%d/%d target records were matched by multiple source records (many-to-one relationship)",o,e)),s.length>0&&oe(a.format("Inconsistent values were found in field%s [%s] during many-to-one join. Values in the first joining record were used.",a.pluralSuffix(s.length),s.join(","))))}(S,m.length,function(t){for(var e=0,n=0,r=t.length;n<r;n++)t[n]>0&&e++;return e}(E),y.length,N,I,C),r.unjoined&&(A.unjoined={name:"unjoined",data:new yr(y.filter((function(t,e){return 0===E[e]})))}),r.unmatched&&(A.unmatched={name:"unmatched",data:new yr(_)}),A}function $h(t){t.forEach((function(t){/:(str|num)/.test(t)&&ie("Unsupported use of type hints. Use string-fields= or field-types= options instead")}))}function Kh(t,e,n,r){Zh(t,{},e,r),Qh(t,{},n,r)}function Zh(t,e,n,r){var i,o;r=r||"";for(var a=0,s=n.length;a<s;a++)o=r+(i=n[a]),Object.prototype.hasOwnProperty.call(e,i)?t[o]=e[i]:Object.prototype.hasOwnProperty.call(t,o)||(t[o]=null)}function Qh(t,e,n,r){var i,o;r=r||"";for(var a=0;a<n.length;a++)t[o=r+(i=n[a])]=(t[o]||0)+(e[i]||0)}function td(t,e,n,r){for(var i,o=0,a=n.length;o<a;o++)t[i=n[o]]!==e[i]&&-1===r.indexOf(i)&&r.push(i)}function ed(t,e,n){var r;return n.fields?n.fields.indexOf("*")>-1?r=e:$h(r=n.fields):(r=e,n.keys&&(r=a.difference(r,[n.keys[1]]))),n.force||n.prefix||(r=a.difference(r,t)),r}var nd=Object.freeze({__proto__:null,joinTables:Hh,validateFieldNames:$h,updateUnmatchedRecord:Kh,findCollisionFields:td,getFieldsToJoin:ed});cu.divide=function(t,e,n,r){t.forEach(Or);var i=xh(t,e,n,r),o=Ip(i,r),s=i.layers.pop();Pr(s),e.arcs=i.arcs,t.forEach((function(t){!function(t,e,n,r){var i,o,s,u=new Cu(e.shapes,n.arcs),c=t.data?t.data.getRecords():[],l=[],f=[],p=[];function h(t){for(var e,n,r,a,c=[],l=[],f=[],p=null,h=0,d=t.length;h<d;h++)a=t[h],e=u.findShapesEnclosingArc(we(a)),(n=e.sort().join(","))===p?r.push(a):(r=[a],c.push(r),l.push(n),f.push(e)),p=n;!function(t,e,n){for(var r,a,u=0;u<t.length;u++)a=e[u],-1==(r=o.indexOf(a))?(o.push(a),i.push([t[u]]),s.push(n[u])):i[r].push(t[u])}(c,l,f)}t.shapes.forEach((function(t,e){var n=c[e]||{};if(!t)return l.push(null),void f.push(n);i=[],o=[],s=[],Dn(t,h),i.forEach((function(t,e){l.push(t),f.push(e>0?a.extend({},n):n),p.push(s[e])}))})),t.shapes=l,t.data=new yr(f),Hh(t.data,e.data,(function(t){return p[t]||[]}),r)}(t,s,o,r)}))},cu.dots=function(t,e,n){Pr(t),Ir(t,n.field);var r=t.data?t.data.getRecords():[],i=[];return t.shapes.forEach((function(t,o){var a=r[o],s=a?+a[n.field]:0,u=null;s>0&&(u=function(t,e,n){if(!t||1!=t.length)return null;return function(t,e,n){yn.getPlanarShapeArea(t,e),e.getMultiShapeBounds(t)}(t,e)}(t,e)),i.push(u)})),{type:"point",shapes:i}},cu.drop2=function(t,e,n){e.forEach((function(e){cu.drop(t,e.layers,e.dataset,n)}))},cu.drop=function(t,e,n,r){var i=!1;e.forEach((function(e){var o=e.data&&r.fields,a=o&&or(o,e.data.getFields()),s=!o&&!r.geometry&&!r.holes||a&&r.geometry;r.geometry&&(i|=br(e),delete e.shapes,delete e.geometry_type),r.holes&&"polygon"==e.geometry_type&&Sf(e,n.arcs),s?t.deleteLayer(e,n):a?delete e.data:o&&r.fields.forEach(e.data.deleteField,e.data)})),i&&vi(n)},cu.evaluateEachFeature=function(t,e,n,r){var i,o,a=Sr(t);a>0&&!t.data&&(t.data=new yr(a)),r&&r.where&&(o=es(r.where,t,e)),i=os(n,t,e,{context:Yt("defs")});for(var s=0;s<a;s++)o&&!o(s)||i(s)};var rd={};function id(t,e,n){var r=new me(t);return"point"==e.geometry_type?function(t){return function(e){return t.containsPoint(e[0],e[1])?e:null}}(r):function(t,e){var n=t.toArray(),r=n[0],i=n[1],o=n[2],a=n[3];return function(n){if(!t.intersects(e.getSimpleShapeBounds(n)))return null;var s,u,c,l,f=!1,p=e.getShapeIter(n);for(p.hasNext()&&(s=p.x,u=p.y);p.hasNext();)if(c=s,l=u,!Sh(s=p.x,u=p.y,c,l,r,i,o,a)){if(Ih(s,u,c,l,r,i,o,a)){f=!0;break}if(yn.segmentIntersection(r,a,o,a,s,u,c,l)||yn.segmentIntersection(r,i,o,i,s,u,c,l)||yn.segmentIntersection(r,i,r,a,s,u,c,l)||yn.segmentIntersection(o,i,o,a,s,u,c,l)){f=!0;break}}return!f&&yn.testPointInRing(r,i,n,e)&&(f=!0),f?n:null}}(r,n)}function od(t,e,n){var r=id(t,e,n);return function(t){var n=e.shapes[t];if(!n)return!1;for(var i=0;i<n.length;i++)if(r(n[i]))return!0;return!1}}cu.external=function(t){var e,i;t.module||ie('Missing required "module" parameter'),jo.isFile(t.module)?e=t.module:jo.isFile(t.module+".js")?e=t.module+".js":i=t.module,e&&(e=n(37).join(r.cwd(),e));try{n(95)(e||i)(Iy)}catch(t){ie("Unable to load external module:",t.message)}},cu.registerCommand=function(t,e){var n={name:t,options:e.options||[]};n.options.push({name:"target"}),a.defaults(n,e),function(t){"function"!=typeof t.command&&ie('Expected "command" parameter function');t.target||ie('Missing required "target" parameter')}(n),rd[t]=n},cu.runExternalCommand=function(t,e){var n=t.name,r=rd[n];r||ie("Unsupported command");var i=r.target,o=function(t,e,n){var r=new hf,i=r.command(t);return(e.options||[]).forEach((function(t){i.option(t.name,t)})),r.parseArgv(["-"+t].concat(n))[0]}(n,r,t._),a=e.findCommandTargets(o.target||"*"),s=a[0];s||ie("Missing a target"),"layer"==i&&(1!=s.layers.length||a.length>1)&&ie("This command only supports targeting a single layer"),a.length>1&&ie("Targetting layers from multiple datasets is not supported"),"layer"==i?r.command(s.layers[0],s.dataset,o.options):"layers"==i&&r.command(s.layers,s.dataset,o.options)},cu.filterGeom=function(t,e,n){_r(t)||ie("Layer is missing geometry"),n.bbox&&function(t,e,n){var r=id(n.bbox,t,e);Fn(t.shapes,r)}(t,e,n),cu.filterFeatures(t,e,{remove_empty:!0,verbose:!1})};var ad=Object.freeze({__proto__:null,getBBoxIntersectionTest:od,findShapesIntersectingBBox:function(t,e,n){for(var r=od(t,e,n),i=[],o=0;o<e.shapes.length;o++)r(o)&&i.push(o);return i}});function sd(t,e){return t&&e&&function(n){return t(n)&&e(n)}||t||e}function ud(t,e){return function(n){return yn.countVerticesInPath(n,e)<=t}}function cd(t,e,n){for(var r=0,i=t.length;r<i;r++)if(n.arcIntersectsBBox(we(t[r]),e))return!0;return!1}function ld(t,e,n){for(var r,i,o=n.getSimpleShapeBounds2(t),a=0,s=e.length;a<s;a++)if((r=e[a])&&r!=t&&cd(r,o,n)&&(i=n.getVertex(r[0],0),yn.testPointInRing(i.x,i.y,t,n)))return!0;return!1}function fd(t){return(t||[]).reduce((function(t,e){var n=e.split("="),r=a.trimQuotes(n[0]),i=n.length>1?a.trimQuotes(n[1]):r;return i&&r||ie("Invalid name assignment:",e),t[i]=r,t}),{})}function pd(t){var e=Object.keys(t);return function(n){for(var r,i={},o=0,a=e.length;o<a;o++)r=e[o],i[t[r]]=n[r];return i}}function hd(t,e){var n,r,i,o=a.isNonNegNumber(e.buffer)?e.buffer:.001;function s(t,e){for(var a,s=0;s<i.length;s++)(a=yn.distanceSq(i[s][0],i[s][1],t[0],t[1]))<n&&a<=o*o&&(n=a,r=e)}this.findNearestPointFeature=function(e){return n=1/0,r=-1,i=e||[],be(t,s),r}}function dd(t,e,n,r){var i=vd(t,e,n,r);return md(t,n),Hh(t.data,n.data,i,r)}function gd(t,e,n,r){var i=_d(t,e,n,r);return md(t,e),Hh(t.data,e.data,i,r)}function yd(t,e,n){var r=function(t,e,n){var r=t.shapes,i=new hd(e.shapes,{});return function(t){var e=i.findNearestPointFeature(r[t]);return e>-1?[e]:null}}(t,e);return md(t,e),Hh(t.data,e.data,r,n)}function md(t,e){t.data||(t.data=new yr(t.shapes.length)),e.data||ie("Can't join a layer that is missing attribute data")}function vd(t,e,n,r){var i=_d(n,t,e,r),o=[],a=!!r.first_match;return n.shapes.forEach((function(t,e){for(var n,r=i(e),s=r?r.length:0,u=0;u<s&&((n=r[u])in o?o[n].push(e):o[n]=[e],!a);u++);})),function(t){return o[t]||null}}function _d(t,e,n,r){var i=new Cu(e.shapes,n),o=t.shapes;return function(t){var e=o[t],n=e?i.findEnclosingShapes(e[0]):[];return n.length>0?n:null}}cu.filterFeatures=function(t,e,n){var r,i=t.data?t.data.getRecords():null,o=t.shapes||null,s=Sr(t),u=o?[]:null,c=i?[]:null,l=Lr(t,n),f=!!n.invert;return n.expression&&(r=es(n.expression,t,e)),n.remove_empty&&(r=sd(r,function(t,e){var n=t.shapes;if("polygon"==t.geometry_type)return function(t,e){return function(n){return!!t[n]&&yn.getPlanarShapeArea(t[n],e)>0}}(n,e);return function(t){return!!n[t]}}(t,e))),n.bbox&&(r=sd(r,od(n.bbox,t,e))),r||ie("Missing a filter criterion"),a.repeat(s,(function(t){var e=r(t);f&&(e=!e),!0===e?(o&&u.push(o[t]||null),i&&c.push(i[t]||null)):!1!==e&&ie("Expression must return true or false")})),l.shapes=u,l.data=c?new yr(c):null,n.no_replace&&(l=Rr(l)),!1!==n.verbose&&oe(a.format("Retained %,d of %,d features",Sr(l),s)),l},cu.filterIslands=function(t,e,n){var r=a.extend({sliver_control:0},n),i=e.arcs,o=0;"polygon"==t.geometry_type&&(r.min_area||r.min_vertices?(o+=function(t,e,n){var r=0,i=new Uint8Array(e.size());bn(t.shapes,i);var o=function(t,o,a){if(1==t.length&&1===i[we(t[0])]&&(!n||n(t))&&!ld(t,a,e))return r++,null};return Fn(t.shapes,o),r}(t,i,r.min_area?Bf(t,e,r).filter:ud(r.min_vertices,i)),r.remove_empty&&cu.filterFeatures(t,i,{remove_empty:!0,verbose:!1}),oe(a.format("Removed %'d island%s",o,a.pluralSuffix(o)))):oe("Missing a criterion for filtering islands; use min-area or min-vertices"))},cu.filterIslands2=function(t,e,n){var r=a.extend({sliver_control:0},n),i=e.arcs,o=0;"polygon"==t.geometry_type&&(r.min_area||r.min_vertices?(o+=function(t,e,n){var r=0,i=new Uint8Array(e.size());bn(t.shapes,i);var o=function(t,o,a){if(1==t.length&&1===i[we(t[0])]&&(!n||n(t))&&!ld(t,a,e))return r++,null};return Fn(t.shapes,o),r}(t,i,r.min_area?Bf(t,e,r).filter:ud(r.min_vertices,i)),r.remove_empty&&cu.filterFeatures(t,i,{remove_empty:!0,verbose:!1}),oe(a.format("Removed %'d island%s",o,a.pluralSuffix(o)))):oe("Missing a criterion for filtering islands; use min-area or min-vertices"))},cu.filterFields=function(t,e){var n=t.data;if(Cr(n,e=e||[]),n){var r=fd(e);t.data.update(pd(r))}},cu.renameFields=function(t,e){var n=fd(e);Cr(t.data,Object.keys(n)),a.defaults(n,fd(t.data.getFields())),t.data.update(pd(n))};var bd=Object.freeze({__proto__:null,joinPointsToPolygons:dd,joinPolygonsToPoints:gd,joinPointsToPoints:yd,prepJoinLayers:md,getPolygonToPointsFunction:vd});function xd(t,e){return{type:"Feature",properties:e,geometry:{type:"LineString",coordinates:t}}}cu.fuzzyJoin=function(t,e,n,r){var i=n?n.layer:null;i&&xr(i)||ie("Missing a point layer to join from"),Ir(i,r.field),Pr(t),r.dedup_points&&cu.uniq(i,null,{expression:'this.x + "~" + this.y + "~" + this.properties['+JSON.stringify(r.field)+"]",verbose:!1}),function(t,e,n,r){var i=r.field,o=vd(t,e,n,{first_match:!0}),s=function(t,e){var n=t.data.getRecords();return function(t){for(var r,i=[],o=0;o<t.length;o++)r=n[t[o]],i.push(r[e]);return i}}(n,i),u=[],c=[],l=[];if(t.shapes.forEach((function(t,a){var f=o(a)||[],p=Yf(s(f),!0),h=p.margin>0?p.modes[0]:null;null===h&&p.modes.length>1&&(h=function(t,e,n,r,i,o){var a=t.map((function(){return 0}));n.forEach((function(n){var s=e.shapes[n],u=e.data.getRecordAt(n)[r],c=t.indexOf(u);if(-1!==c){var l=function(t,e,n){var r=t[0];return yn.getPointToShapeDistance(r[0],r[1],e,n)}(s,i,o);a[c]+=l}}));var s=Math.max.apply(null,a);return t[a.indexOf(s)]}(p.modes,n,f,i,t,e)),l[a]=p.count||0,r.no_dropouts&&c.push(p),u.push(h)})),mr(t,"join-count",l),mr(t,i,u),cu.dataFill(t,e,{field:i,weight_field:"join-count",contiguous:r.contiguous}),r.no_dropouts){var f=function(t,e,n){var r=lr(e.data.getRecords(),n),i=lr(t.data.getRecords(),n);return a.difference(r,i)}(t,n,i);f.length>0&&function(t,e,n,r){var i=t.data.getRecords(),o=[],s=[];n.map((function(t){var n=function(t,e){var n=-1,r=0;return e.forEach((function(e,i){var o=e.values.indexOf(t),a=o>-1?e.counts[o]:0;a>r&&(n=i,r=a)})),n}(t,r);n>-1&&-1===s.indexOf(n)?(i[n][e]=t,s.push(n)):o.push(t)}));oe("Restored",s.length,"dropout value"+a.pluralSuffix(s.length)),o.length>0&&oe("Failed to restore dropout value(s):",o.join(", "))}(t,i,f,c)}}(t,e,i,r)},cu.graticule=function(t,e){var n,r,i=function(t){var e=Math.round(36)+1,n=Math.round(18)+1,r=a.range(e,-180,10),i=a.range(n,-90,10),o=r.map((function(t){var e=-90,n=90;return t%90!=0&&(e+=10,n-=10),function(t,e,n,r){for(var i=[],o=e;o<n;o+=r)i.push([t,o]);return i.push([t,n]),xd(i,{type:"meridian",value:t})}(t,e,n,1)})),s=i.map((function(t){return function(t,e,n,r){for(var i=[],o=e;o<n;o+=r)i.push([o,t]);return i.push([n,t]),xd(i,{type:"parallel",value:t})}(t,-180,180,1)})),u=Ts({type:"FeatureCollection",features:o.concat(s)},{});return u.layers[0].name="graticule",u}();return t&&(n=Ui(t),r=ji("wgs84"),n||ie("Coordinate system is unknown, unable to create a graticule"),yu(i,r,n,{})),i},cu.include=function(t){var e,r,i;if(t.file||ie("Missing name of a JS file to load"),jo.checkFileExists(t.file,t.input),"string"==typeof(e=jo.readFile(t.file,"utf8",t.input))){/^\s*\{[\s\S]*\}\s*$/.test(e)||ie("Expected a JavaScript object containing key:value pairs");try{(i=ls()).require=n(95),r=Function("ctx","with(ctx) {return ("+e+");}").call({},i)}catch(t){ie(t.name,"in JS source:",t.message)}}else"object"==o(e)&&(r=e);a.extend(Yt("defs"),r)};function wd(t){for(var e=0,n=0,r=t.length;n<r;n++)e+=Ed(t.charCodeAt(n));return e}function Ed(t){return t>=4352&&(t<=4447||9001==t||9002==t||t>=11904&&t<=42191&&12351!=t||t>=44032&&t<=55203||t>=63744&&t<=64255||t>=65040&&t<=65049||t>=65072&&t<=65135||t>=65280&&t<=65376||t>=65504&&t<=65510||t>=131072&&t<=196605||t>=196608&&t<=262141)?2:1}function Sd(t,e){var n=Sr(t),r={geometry_type:t.geometry_type,feature_count:n,null_shape_count:0,null_data_count:t.data?Id(t.data.getRecords()):n};return t.shapes&&(r.null_shape_count=function(t){for(var e=0,n=0;n<t.length;n++)t[n]&&0!==t[n].length||e++;return e}(t.shapes),r.bbox=Br(t,e.arcs).toArray(),r.proj4=Mi(e)),r}function Id(t){for(var e=0,n=0;n<t.length;n++)t[n]||e++;return e}function Cd(t,e){return t.data&&0!==t.data.size()&&0!==t.data.getFields().length?"\nAttribute data\n"+function(t,e){var n=hr(t.getFields(),"ascending"),r=n.map((function(n){return t.getReadOnlyRecordAt(e||0)[n]})),i=r.reduce((function(t,e){return a.isNumber(e)&&(t=Math.max(t,Od(e))),t}),0),o=["Field"].concat(n),s=r.reduce((function(t,e){return t.push(Pd(e,i)),t}),[e>=0?"Value":"First value"]),u=Ad(o),c=Ad(s),l=(a.rpad("",u+2,"-")+"+"+a.rpad("",c+2,"-")).substr(0,50)+"\n",f=l;return o.forEach((function(t,e){var n=wd(t);f+=" "+t+a.rpad("",u-n," ")+" | "+s[e]+"\n",0===e&&(f+=l)})),f+l}(t.data,e):"Attribute data: [none]\n"}function Nd(t){return t+""}function Ad(t){return t.reduce((function(t,e){var n=wd(e);return n>t?n:t}),0)}function Od(t){return a.isNumber(t)?(Nd(t)+".").indexOf("."):0}function Pd(t,e){return a.isNumber(t)?a.lpad("",e-Od(t)," ")+Nd(t):a.isString(t)?function(t){var e={"\n":"\\n","\r":"\\r","\t":"\\t"};return"'"+(t=t.replace(/[\r\t\n]/g,(function(t){return t in e?e[t]:""})))+"'"}(t):a.isDate(t)?a.formatDateISO(t)+" (Date)":a.isObject(t)?JSON.stringify(t):String(t)}cu.printInfo=function(t){var e="";t.forEach((function(t,n){var r="Layer:    "+(t.layer.name||"[unnamed layer]"),i=Cd(t.layer),o=function(t){return Math.max.apply(null,t.split("\n").map((function(t){return wd(t)})))}(i),s=Math.min(Math.max(r.length,o),50);e+="\n",e+=a.lpad("",s,"=")+"\n",e+=r+"\n",e+=a.lpad("",s,"-")+"\n",e+=function(t,e){var n=Sd(t,e),r="";r+="Type:     "+(n.geometry_type||"tabular data")+"\n",r+=a.format("Records:  %,d\n",n.feature_count),n.null_shape_count>0&&(r+=a.format("Nulls:     %'d",n.null_shape_count)+"\n");n.geometry_type&&n.feature_count>n.null_shape_count&&(r+="Bounds:   "+n.bbox.join(",")+"\n",r+="CRS:      "+n.proj4+"\n");return r+="Source:   "+(Tr(0,e)||"n/a")+"\n"}(t.layer,t.dataset),e+=i})),oe(e)};var Td=Object.freeze({__proto__:null,getLayerData:Sd,getAttributeTableInfo:Cd,formatTableValue:Pd});function Md(t,e){for(var n=e.arcs,r=_n(t.shapes,n),i=[],o=[],a=0,s=n.size();a<s;a++)r(a)&&(i.push({arcid:a}),o.push([[a]]));return{geometry_type:"polyline",data:new yr(i),shapes:o}}function Ld(t,e){for(var n,r=e.arcs,i={type:"FeatureCollection",features:[]},o=_n(t.shapes,r),a=0,s=r.size();a<s;a++)o(n=a)&&r.forEachArcSegment(n,u);function u(t,e,r,o){var a=r[t],s=o[t],u=r[e],c=o[e];i.features.push({type:"Feature",properties:{arc:n,i1:t,i2:e,x1:a,y1:s,x2:u,y2:c},geometry:{type:"LineString",coordinates:[[a,s],[u,c]]}})}var c=ou([e,Ts(i,{})]);return e.arcs=c.arcs,c.layers.pop()}function Rd(t){var e=[];return be(t,(function(t){e.push(t.concat())})),{type:"LineString",coordinates:e}}function Dd(t,e,n){var r,i=(n=n||{}).where?rs(n.where,t,e):null,o=n.each?function(t,e,n){var r,i=Rh(e.shapes,n)((function(t,e){o(t,e,r)})),o=is(t,e,n);return function(t,e){return r=t,i(e[0][0]),t}}(n.each,t,e):null,s=Rh(t.shapes,e,{filter:i}),u=a.isArray(n.fields)?n.fields:[],c=0,l=[],f=[];return u.length>0&&!t.data&&ie("Missing a data table"),p(function(t,e){return jd(t,e((function(t,e){return-1==e?String(t):null})))}(t.shapes,s),"outer"),u.forEach((function(e){var n=t.data.getRecords();Ir(t,e),p(jd(t.shapes,s((function(t,r){var i=n[t],o=n[r];return i&&o&&i[e]!==o[e]?t+"-"+r:null}))),e)})),p(kd(t.shapes,s),"inner"),(r=Fd(l,f)).name=n.no_replace?null:t.name,r;function p(t,e){var n=t.map((function(t,n){var r={RANK:c,TYPE:e};return o&&o(r,t),r}));l=a.merge(t,l),f=a.merge(n,f),c++}}function Fd(t,e){return{geometry_type:"polyline",shapes:t,data:e?new yr(e):null}}function kd(t,e){return jd(t,e((function(t,e){return e>-1?t+"-"+e:null})))}function jd(t,e){var n,r=[],i={},o=null,a=null;return An(t,(function(t){var s,u,c=t.arcId,l=e(c);l&&(u=l in i?i[l]:null,s=l==a&&t.shapeId==o.shapeId&&t.partId==o.partId,u?s?u[u.length-1].push(c):u.push([c]):(u=[[c]],i[l]=u,r.push(u)),t.i==n.arcs.length-1&&u.length>1&&u[0][0]==n.arcs[0]&&(u[0]=u.pop().concat(u[0])));o=t,a=l}),(function(t){n=t})),r}cu.inlay=function(t,e,n,r){var i=xh(t,n,e,r),o=i.layers[i.layers.length-1];Pr(o),t.forEach(Pr);var a={layer:Rr(o),dataset:i},s=cu.eraseLayers(t,a,i,r).map((function(t){var e=Rr(o),n=cu.mergeLayers([t,e],{force:!0})[0];return n.name=t.name,n}));return n.arcs=i.arcs,s},cu.lines=function(t,e,n){return(n=n||{}).callouts?(Ar(t),function(t,e,n){var r=t.data?t.data.getRecords():null,i=Br(t).width()/50,o=function(t){return[t,[t[0]+i,t[1]]]},a=Ts({type:"FeatureCollection",features:t.shapes.map((function(t,e){return{type:"Feature",properties:r?r[e]:null,geometry:{type:"MultiLineString",coordinates:t.map(o)}}}))}),s=nu(e,[a]);n.no_replace||(s[0].name=t.name||s[0].name);return s}(t,e,n)):"point"==t.geometry_type?function(t,e,n){var r=Ts(n.groupby?function(t,e,n){var r=[],i=Qf([e],t.data),o=a.defaults({fields:[e]},n),s=ep(t.data.getRecords(),i,o);return t.shapes.forEach((function(t,e){var n=i(e);n in r==!1&&(r[n]=[]),r[n].push(t)})),{type:"FeatureCollection",features:r.map((function(t,e){return{type:"Feature",properties:s[e],geometry:t.length>1?Rd(t):null}}))}}(t,n.groupby,n):Rd(t.shapes)),i=nu(e,[r]);n.no_replace||(i[0].name=t.name||i[0].name);return i}(t,e,n):n.segments?[Ld(t,e)]:n.arcs?[Md(t,e)]:"polygon"==t.geometry_type?Dd(t,e.arcs,n):void Pr(t,"Command requires a polygon or point layer")};var Bd=Object.freeze({__proto__:null,polygonsToLines:Dd,createLineLayer:Fd,extractInnerLines:kd});function Gd(t,e,n,r){var i=xh([t],e,n,r),o=Ip(i,r),s=i.layers.pop();e.arcs=i.arcs,md(t,s);var u=new Up({geometry_type:"polygon",shapes:t.shapes.concat(s.shapes)},o,{flat:!1}),c=a.extend({},r),l=function(t,e,n){var r=(i=t.shapes.length,o=e.shapes.length,function(t){for(var e,n=[],r=0;r<t.length;r++)(e=t[r]-i)>=0&&e<o&&n.push(e);return n});var i,o;return function(t){for(var e,i=n.getTileIdsByShapeId(t),o=[],s=0;s<i.length;s++)e=n.getSourceIdsByTileId(i[s]),e=r(e),o=o.length>0?o.concat(e):e;return o=a.uniq(o)}}(t,s,u),f=Hh(t.data,s.data,l,c);return r.interpolate&&function(t,e,n,r){var i=r.interpolate,o=r.planar?yn.getPlanarShapeArea:yn.getShapeArea,a=(e.shapes.length,t.shapes.length),s=n.mosaic,u=n.nodes.arcs,c=s.map((function(t,e){return{area:o(t,u),weight:0,sourceId:-1}}));e.shapes.forEach((function(t,e){for(var r,i=n.getTileIdsByShapeId(e+a),s=o(t,u),l=0;l<i.length;l++)(r=c[i[l]]).sourceId>-1||(r.weight=r.area/s,r.sourceId=e)})),t.data.getRecords().forEach((function(t,r){var o,a,s=e.data.getRecords(),u=n.getTileIdsByShapeId(r),l=[];for(o=0;o<u.length;o++)l.push(c[u[o]]);for(o=0;o<i.length;o++)t[a=i[o]]=Ud(a,l,s)}))}(t,s,u,r),f}function Ud(t,e,n){for(var r,i,o=0,a=0;a<e.length;a++)-1!=(r=e[a]).sourceId&&(i=n[r.sourceId],o+=r.weight*i[t]);return o}function zd(t){var e=/^([nsew+-]?)([0-9.]+)[d]? ?([0-9.]*)[']? ?([0-9.]*)["]? ?([nsew]?)$/i.exec(t.trim()),n=NaN;return e&&(n=+(e[2]||"0")+ +(e[3]||"0")/60+ +(e[4]||"0")/3600,(/[sw-]/i.test(e[1])||/[sw]/i.test(e[5]))&&(n=-n)),n}function qd(t,e,n){var r=!e.isPlanar(),i=t?1==t.length?t[0]:function(t,e,n){var r=0,i=null;return t.forEach((function(t){var o=yn.calcPathLen(t,e,n);o>r&&(r=o,i=t)})),i}(t,e,r):null;if(!i)return null;var o=e.getSimpleShapeBounds(i);return function(t,e,n,r,i){for(var o,a,s,u,c=i?yn.greatCircleDistance:yn.distance2D,l=1/0,f=0;f<n.length;f++)for(u=r.getShapeIter(n[f]);u.hasNext();)(s=c(t,e,u.x,u.y))<l&&(l=s,o=u.x,a=u.y);return l<1/0?{x:o,y:a}:null}(o.centerX(),o.centerY(),[i],e,r)}function Vd(t,e,n,r,i){var o=1-i;return[t*o+n*i,e*o+r*i]}function Yd(t,e,n){var r=n.inner?Ya:yn.getShapeCentroid;return t.shapes.map((function(t){var n=r(t,e);return n?[[n.x,n.y]]:null}))}function Xd(t){var e;if(a.isFiniteNumber(t))return t;if(a.isString(t)&&""!==t){if(e=+t,a.isFiniteNumber(e))return e;if(e=zd(t),a.isFiniteNumber(e))return e}return NaN}function Jd(t){var e=/^(lng|long?|longitude|x)$/i;return a.find(t,(function(t){return e.test(t)}))}function Wd(t){var e=/^(lat|latitude|y)$/i;return a.find(t,(function(t){return e.test(t)}))}function Hd(t,e){return t||ie("Layer is missing a data table"),e.x&&e.y&&t.fieldExists(e.x)&&t.fieldExists(e.y)||ie("Missing x,y data fields"),t.getRecords().map((function(t){var n=Xd(t[e.x]),r=Xd(t[e.y]);return isNaN(n)||isNaN(r)?null:[[n,r]]}))}cu.innerlines=function(t,e,n){n=n||{},Pr(t);var r=n.where?rs(n.where,t,e):null,i=Rh(t.shapes,e,{filter:r}),o=kd(t.shapes,i),a=Fd(o,null);return 0===o.length&&oe("No shared boundaries were found"),a.name=n.no_replace?null:t.name,a},cu.inspect=function(t,e,n){var r=function(t,e,n){var r,i=Sr(t),o=[];n.expression||ie("Missing a JS expression for selecting a feature");return r=es(n.expression,t,e),a.repeat(i,(function(t){var e=r(t);!0===e?o.push(t):!1!==e&&ie("Expression must return true or false")})),o}(t,e,n);oe(1==r.length?function(t,e,n){var r="Feature "+t+"\n";return r+=function(t,e,n){var r,i,o=e.shapes?e.shapes[t]:null,s=e.geometry_type;if(!o||!s)return"Geometry: [null]\n";i="Geometry\n  Type: "+s+"\n","point"==s?i+="  Points: "+o.length+"\n":"polyline"==s?i+="  Parts: "+o.length+"\n":"polygon"==s&&(r=function(t,e){for(var n,r={rings:t.length,cw:0,ccw:0,area:0},i=0;i<t.length;i++)(n=yn.getPlanarPathArea(t[i],e))>0?r.cw++:n<0&&r.ccw++,r.area+=n;e.isPlanar()||(r.sph_area=yn.getSphericalShapeArea(t,e));return r}(o,n),i+=a.format("  Rings: %d cw, %d ccw\n",r.cw,r.ccw),i+="  Planar area: "+r.area+"\n",r.sph_area&&(i+="  Spherical area: "+r.sph_area+" sq. meters\n"));return i}(t,e,n),r+=Cd(e,t)}(r[0],t,e):a.format("Expression matched %d feature%s. Select one feature for details",r.length,a.pluralSuffix(r.length)))},cu.createPointLayer=function(t,e,n){var r=Lr(t,n),i=e.arcs;n.intersections?(!function(t){var e=t.getFilteredPointCount(),n=t.size(),r=e-n,i=_p(t),o=Math.ceil(i/10),a=10*i,s=bp(t);console.log("points:",e,"arcs:",n,"segs:",r),[o,i,a,s].forEach((function(e){console.time(e+" stripes"),gp(t,{stripes:e}),console.timeEnd(e+" stripes")}))}(i),r=t):n.interpolated?r.shapes=function(t,e,n){var r,i=Zo(n.interval,Ui(e));i>0==!1&&ie("Invalid interpolation interval:",n.interval);"polyline"!=t.geometry_type&&ie("Expected a polyline layer");return t.shapes.map((function(t,e){return r=[],t&&t.forEach(o),r.length>0?r:null}));function o(t){var n=function(t,e,n){var r,i,o,a,s,u=e.getShapeIter(t),c=e.isPlanar()?yn.distance2D:yn.greatCircleDistance,l=[],f=0;u.hasNext()&&(l.push([u.x,u.y]),r=u.x,i=u.y);for(;u.hasNext();){for(o=c(r,i,u.x,u.y);f+o>=n;)a=(n-f)/o,s=Vd(r,i,u.x,u.y,a),f=0,l.push(s),r=s[0],i=s[1],o=c(r,i,u.x,u.y);f+=o,r=u.x,i=u.y}f>0&&l.push([r,i]);return l}(t,e.arcs,i);r=r.concat(n)}}(t,e,n):n.vertices?r.shapes=function(t,e,n){var r,i;"polygon"!=t.geometry_type&&"polyline"!=t.geometry_type&&ie("Expected a polygon or polyline layer");return t.shapes.map((function(t,e){return r=[],i={},(t||[]).forEach(o),r.length>0?r:null}));function o(t){for(var n,o,a=e.getShapeIter(t);a.hasNext();)o=void 0,(o=(n=a).x+"~"+n.y)in i==0&&(i[o]=!0,r.push([n.x,n.y]))}}(t,i):n.vertices2?r.shapes=function(t,e,n){var r;"polygon"!=t.geometry_type&&"polyline"!=t.geometry_type&&ie("Expected a polygon or polyline layer");return t.shapes.map((function(t,e){return r=[],(t||[]).forEach(i),r.length>0?r:null}));function i(t){for(var n=e.getShapeIter(t);n.hasNext();)r.push([n.x,n.y])}}(t,i):n.endpoints?r.shapes=function(t,e){var n,r;"polygon"!=t.geometry_type&&"polyline"!=t.geometry_type&&ie("Expected a polygon or polyline layer");return t.shapes.map((function(t,e){return n=[],r={},(t||[]).forEach(o),n.length>0?n:null}));function i(t){var e=t.x+"~"+t.y;e in r==!1&&(r[e]=!0,n.push([t.x,t.y]))}function o(t){for(var n=0;n<t.length;n++)i(e.getVertex(t[n],0)),i(e.getVertex(t[n],-1))}}(t,i):n.x||n.y?r.shapes=Hd(t.data,n):"polygon"==t.geometry_type?r.shapes=Yd(t,i,n):"polyline"==t.geometry_type?r.shapes=function(t,e,n){return t.shapes.map((function(t){var n=qd(t,e);return n?[[n.x,n.y]]:null}))}(t,i):t.geometry_type?ie("Expected a polygon or polyline layer"):r.shapes=function(t){var e=t?t.getFields():[],n={x:Jd(e),y:Wd(e)};return Hd(t,n)}(t.data),r.geometry_type="point";var o=r.shapes.reduce((function(t,e){return e||t++,t}),0);return o>0&&oe(a.format("%,d of %,d points are null",o,r.shapes.length)),t.data&&(r.data=n.no_replace?t.data.clone():t.data),r};var $d=Object.freeze({__proto__:null,pointsFromPolygons:Yd,coordinateFromValue:Xd,findXField:Jd,findYField:Wd});function Kd(t,e){return{geometry_type:"point",shapes:Yd(t,e.arcs,{inner:!0}),data:t.data}}function Zd(t,e,n,r){return r.point_method?function(t,e,n,r){var i,o,a=n.layer,s=n.dataset;return t.shapes.length>a.shapes.length?(o=gd(i=Kd(t,e),a,s.arcs,r),t.data=i.data):(i=Kd(a,s),o=dd(t,e.arcs,i,r)),o}(t,e,n,r):Gd(t,e,n,r)}function Qd(t,e,n){var r=n.keys,i=r[0],o=r[1],a=t.data,s=function(t,e,n,r){var i,o,a=t.getRecords(),s=n.getRecords(),u=function(t,e){for(var n,r,i={},o=0,a=t.length;o<a;o++)n=t[o],(r=n[e])in i==!1?i[r]=o:Array.isArray(i[r])?i[r].push(o):i[r]=[i[r],o];return i}(s,r);if(0==s.length)return function(t){return[]};Ir(n,r,"External table is missing a field named:"),Ir(t,e,"Target layer is missing key field:"),i=ar(r,n.getRecords()),o=ar(e,a),tg(r,i),tg(e,o),i!=o&&ie("Join keys have mismatched data types:",o,"and",i);return function(t){var n=a[t],r=n?n[e]:null,i=null;return n&&r in u&&(i=u[r],Array.isArray(i)||(i=[i])),i}}(a,i,e,o);return $h(r),Hh(a,e,s,n)}function tg(t,e){e&&"object"!=e||ie("["+t+"] field has an unsupported data type. Expected string or number.")}cu.join=function(t,e,n,r){var i,o,s;n&&n.layer.data&&n.dataset||ie("Missing a joinable data source"),r.keys?(2!=r.keys.length&&ie("Expected two key fields: a target field and a source field"),s=Qd(t,n.layer.data,r)):(i=n.layer.geometry_type,o=t.geometry_type,"point"==i&&"polygon"==o?s=dd(t,e.arcs,n.layer,r):"polygon"==i&&"point"==o?s=gd(t,n.layer,n.dataset.arcs,r):"point"==i&&"point"==o?s=yd(t,n.layer,r):"polygon"==i&&"polygon"==o?s=Zd(t,e,n,r):ie(a.format("Unable to join %s geometry to %s geometry",i||"null",o||"null"))),s.unmatched&&e.layers.push(s.unmatched),s.unjoined&&e.layers.push(s.unjoined)};var eg=Object.freeze({__proto__:null,joinAttributesToFeatures:Qd});function ng(t,e,n){var r={},i=e?Ui(e):null;return n.interval?r.interval=Zo(n.interval,i):ie("Missing required interval option"),n.bbox?r.bbox=n.bbox:e?(e=a.defaults({layers:t},e),r.bbox=di(e).toArray()):ie("Missing grid bbox"),r.width=r.bbox[2]-r.bbox[0],r.height=r.bbox[3]-r.bbox[1],r.type=n.type||"square",r}function rg(t){var e=[];return t.forEach((function(t){t.forEach((function(t){e.push({type:"Point",coordinates:t})}))})),{type:"GeometryCollection",geometries:e}}function ig(t){var e,n,r,i,o,a,s,u,c,l,f=[],p=t.length-2;for(s=0;s<p;s++)for(u=(l=s%2==0)?0:2,c=l?0:-1;e=t[s][u],n=t[s+1][u+c],r=t[s+2][u],i=t[s+2][u+1],o=t[s+1][u+2+c],a=t[s][u+1],i&&o;u+=3)f.push({type:"Polygon",coordinates:[[e,n,r,i,o,a,e]]});return{type:"GeometryCollection",geometries:f}}function og(t){for(var e,n,r=t.interval,i=Math.sqrt(3)*r/2,o=r/2,a=t.width+2*r,s=t.height+2*i,u=-i,c=[];u<s;){for(e=c.length%2==0?0:-o,n=[],c.push(n);e<a;)n.push([e,u]),e+=r;u+=i}return c}function ag(t){for(var e,n,r=0,i=[],o=t.interval,a=t.width+o,s=t.height+o;r<s;){for(e=0,n=[],i.push(n);e<a;)n.push([e,r]),e+=o;r+=o}return i}function sg(t,e){var n=function(t){var e={Point:function(t){var e=t.coordinates;return[e[0],e[1],e[0],e[1]]},Polygon:function(t){return t.coordinates[0].reduce((function(t,e){return t?(n(t,e[0],e[1]),t):[e[0],e[1],e[0],e[1]]}),null)}};return t.geometries.reduce((function(t,r){var i=(0,e[r.type])(r);return t?(n(t,i[0],i[1]),n(t,i[2],i[3]),t):i}),null);function n(t,e,n){e<t[0]&&(t[0]=e),n<t[1]&&(t[1]=n),e>t[2]&&(t[2]=e),n>t[3]&&(t[3]=n)}}(t);!function(t,e,n){t.geometries.forEach((function(t){"Point"==t.type&&(t.coordinates=[t.coordinates[0]+e,t.coordinates[1]+n]),"Polygon"==t.type&&(t.coordinates[0]=t.coordinates[0].map((function(t){return[t[0]+e,t[1]+n]})))}))}(t,(e[2]+e[0])/2-(n[2]+n[0])/2,(e[3]+e[1])/2-(n[3]+n[1])/2)}function ug(t,e,n){var r=n.gap_tolerance?Zo(n.gap_tolerance,Ui(e)):0,i=e.arcs,o=_n(t.shapes,i),a=new ai(e.arcs,o),s=function(t,e){return t.findDanglingEndpoints().filter((function(n){return yn.calcPathLen([n.arc],t.arcs)>e}))}(a,r);if(0===s.length)return a;var u=new Cu(function(t,e){for(var n=[],r=0,i=t.size();r<i;r++)n.push(e(r)?[[r]]:null);return n}(i,o),i),c=s.reduce((function(t,e){var n=function(t,e,n,r){var i=we(t.arc),o=null;return e.forEach((function(e){var a;e!=i&&(a=yn.getPointToPathInfo(t.point[0],t.point[1],[e],n))&&a.distance<=r&&(!o||a.distance<o.distance)&&(o=a)})),o}(e,u.findPointEnclosureCandidates(e.point,r),i,r);return n&&t.push(function(t,e,n){var r=n.getVertex(e,-1),i=[r.x,r.y],o=n.getVertex(e,-2),a=[o.x,o.y],s=t.segment[0],u=t.segment[1],c=yn.findClosestPointOnSeg(i[0],i[1],s[0],s[1],u[0],u[1]);l=c,f=s,p=u,l[0]==f[0]&&l[1]==f[1]||l[0]==p[0]&&l[1]==p[1]||(c=function(t,e){var n=yn.distance2D(t[0],t[1],e[0],e[1]),r=(n+1e-6)/n;return[t[0]+r*(e[0]-t[0]),t[1]+r*(e[1]-t[1])]}(a,c),yn.segmentIntersection(a[0],a[1],c[0],c[1],s[0],s[1],u[0],u[1])||(c=function(t,e,n){return yn.distance2D(t[0],t[1],e[0],e[1])<yn.distance2D(t[0],t[1],n[0],n[1])?e:n}(a,s,u)));var l,f,p;return{arc:e,point:c}}(n,e.arc,i)),t}),[]);return e.arcs=function(t,e){var n=t.getVertexData();return e.forEach((function(e){var r=t.indexOfVertex(e.arc,-1);n.xx[r]=e.point[0],n.yy[r]=e.point[1]})),t.updateVertexData(n.nn,n.xx,n.yy,n.zz),t}(i,c),Ip(e,{})}function cg(t,e,n){var r=ei(t);return n.offset&&(t=function(t,e,n){var r=ta(t,n,e);return e.padBounds(r[0],r[1],r[2],r[3]),e}(n.offset,t,e)),t.area()>0==!1?null:(n.aspect_ratio&&(t=lg(n.aspect_ratio,t)),r&&(t=ni(t)),t)}function lg(t,e){var n,r,i=String(t).split(",").map(parseFloat),o=e.width()/e.height();return 1==i.length?i.push(i[0]):i[0]>i[1]&&i.reverse(),n=i[0],r=i[1],n||r?(n||(n=-1/0),r||(r=1/0),o<n?e.fillOut(n):o>r&&e.fillOut(r),e):e}function fg(t,e){return{type:"Polygon",coordinates:[[[t[0],t[1]],[t[0],t[3]],[t[2],t[3]],[t[2],t[1]],[t[0],t[1]]]]}}cu.mosaic=function(t,e,n){var r=t[0];(!r||t.length>1)&&ie("Command takes a single target layer"),Pr(r);var i,o=new Up(r,Ip(e,n),{flat:!1}),a=o.mosaic,s={name:"name"in r?r.name:void 0,shapes:a,geometry_type:"polygon"};return n.calc&&(i=np(r.data.getRecords(),o.getSourceIdsByTileId,a.length,n),s.data=new yr(i)),[s]},cu.polygonGrid=function(t,e,n){Bi(e);var r,i=ng(t,e,n);"square"==i.type?r=function(t){for(var e,n,r,i,o=[],a=0,s=t.length-1;a<s;a++)for(var u=0,c=t[a].length-1;u<c;u++)e=t[a][u],n=t[a+1][u],r=t[a+1][u+1],i=t[a][u+1],o.push({type:"Polygon",coordinates:[[e,n,r,i,e]]});return{type:"GeometryCollection",geometries:o}}(ag(i)):"hex"==i.type?r=ig(og(i)):"hex2"==i.type?(r=ig(og(function(t){var e=t.bbox;return a.defaults({width:t.height,height:t.width,bbox:[e[1],e[0],e[3],e[2]]},t)}(i))),r.geometries.forEach((function(t){t.coordinates[0]=t.coordinates[0].map((function(t){return[t[1],t[0]]}))}))):ie("Unsupported grid type"),sg(r,i.bbox);var o=Ts(r,{});return o.info=e.info,$s(o),o.layers[0].name=n.name||"grid",n.debug&&o.layers.push(cu.pointGrid2(t,e,n)),o},cu.pointGrid2=function(t,e,n){var r,i=ng(t,e,n);"square"==i.type?r=rg(ag(i)):"hex"==i.type?r=rg(og(i)):ie("Unsupported grid type"),sg(r,i.bbox);var o=Ts(r,{});return n.name&&(o.layers[0].name=n.name),o.layers[0]},cu.pointGrid=function(t,e){return function(t,e){var n,r=[];t.forEach((function(t,e){for(var n=0;n<t.length;n++)r.push([t[n]])})),n={geometry_type:"point",shapes:r},e.name&&(n.name=e.name);return n}(function(t){var e,n,r,i,o,a,s,u,c,l=t.bbox,f=l[2]-l[0],p=l[3]-l[1],h=[];t.interval>0?(i=t.interval,o=t.interval,n=Math.round(f/i)-1,r=Math.round(p/o)-1,a=l[0]+(f-n*i)/2,s=l[1]+(p-r*o)/2):t.rows>0&&t.cols>0&&(n=t.cols,r=t.rows,i=f/n,o=p/r,a=l[0]+i/2,s=l[1]+o/2);i>0!=!1&&o>0!=!1||ie("Invalid grid parameters");c=s;for(;c<=l[3];){for(u=a,h.push(e=[]);u<=l[2];)e.push([u,c]),u+=i;c+=o}return h}(function(t,e){var n={},r=t?Ui(t):null;e.interval?n.interval=Zo(e.interval,r):e.rows>0&&e.cols>0&&(n.rows=e.rows,n.cols=e.cols);e.bbox?n.bbox=e.bbox:n.bbox=t?di(t).toArray():[-180,-90,180,90];return n}(t,e)),e)},cu.polygons=function(t,e,n){return t.forEach(Or),Ip(e,n),t.map((function(t){return"polyline"!=t.geometry_type&&ie("Expected a polyline layer"),n.from_rings?function(t,e){var n=e.arcs,r=0;Fn(t.shapes,(function(t){return yn.pathIsClosed(t,n)?t:(r++,null)})),r>0&&oe("Removed",r,"open "+(1==r?"ring":"rings"));return t.geometry_type="polygon",Nu(t,n),t}(t,e):function(t,e,n){var r=Fp(ug(t,e,n));return{geometry_type:"polygon",name:t.name,shapes:r.mosaic}}(t,e,n)}))},cu.rectangles=function(t,e,n){_r(t)||ie("Layer is missing geometric shapes");var r=Ui(e),i=t.data?t.data.getRecords():null,o=Ts({type:"FeatureCollection",features:t.shapes.map((function(i){var o="point"==t.geometryType?_e(i):e.arcs.getMultiShapeBounds(i);return(o=cg(o,r,n))?fg(o.toArray(),n):null})).map((function(t,e){var r=i&&i[e]||null;return r&&n.no_replace&&(r=a.extend({},r)),{type:"Feature",properties:r,geometry:t}}))},{}),s=nu(e,[o]);return n.no_replace||(s[0].name=t.name||s[0].name),s},cu.rectangle2=function(t,e){var n=t.layers.map((function(n){var r=cu.rectangle({layer:n,dataset:t.dataset},e);return e.no_replace||(r.layers[0].name=n.name||r.layers[0].name),r}));return nu(t.dataset,n)},cu.rectangle=function(t,e){var n,r,i;t?(n=Br(t.layer,t.dataset.arcs),i=t.dataset.info,r=Ui(t.dataset)):e.bbox&&(n=new me(e.bbox),r=ji("wgs84")),(n=n&&cg(n,r,e))&&n.hasBounds()||ie("Missing rectangle extent");var o=Ts(fg(n.toArray(),e),{});return o.layers[0].name=e.name||"rectangle",i&&Gi(o,i),o};var pg=Object.freeze({__proto__:null,applyAspectRatio:lg});function hg(t){return Array.isArray(t)&&a.isObject(t[0])?t.map((function(t){return{name:t.name,options:Object.assign({},t.options)}})):(a.isString(t)&&(t=sf(t)),gf().parseArgv(t))}function dg(t){var e=t.replace(/^mapshaper\b/,"").trim();return/^[a-z]/.test(e)&&(e="-"+e),e}cu.renameLayers=function(t,e,n){e&&e.join("").indexOf("=")>-1?function(t,e){var n=function(t){return(t||[]).reduce((function(t,e){var n=e.split("="),r=a.trimQuotes(n[0]),i=a.trimQuotes(n[1]||"");return i||ie("Invalid name assignment:",e),t[i]=r,t}),{})}(t);e.forEachLayer((function(t){n[t.name]&&(t.name=n[t.name])}))}(e,n):function(t,e){var n=t&&t.length||0,r="",i="";e.forEach((function(o,a){a<n&&(r=t[a]),r&&n<e.length&&a>=n-1&&(i=(i||0)+1),o.name=r+i}))}(e,t)};var gg=Object.freeze({__proto__:null,parseCommands:hg,standardizeConsoleCommands:dg,parseConsoleCommands:function(t){var e,n=["i","include","require","external"];return(e=hg(dg(t))).forEach((function(t){var e=n.indexOf(t.name);e>-1&&ie("The -"+n[e]+" command cannot be run in the browser")})),e}});function yg(t,e){var n,r,i,o,s,u=ls();1==e.length&&(i=e[0],o=i.layers[0],(s=Sd(o,i.dataset)).layer=o,s.dataset=i.dataset,r=s,Object.defineProperty(u,"target",{value:r})),a.extend(u,Yt("defs"));try{n=Function("ctx","with(ctx) {return ("+t+");}").call({},u)}catch(t){ie(t.name,"in JS source:",t.message)}return n}function mg(t){return t+(_g(t)>1?" MILES":" MILE")}function vg(t){var e=function(t){var e=/miles?$/.test(t.toLowerCase()),n=/(km|kilometers?|kilometres?)$/.test(t.toLowerCase());return(e?"mile":n&&"km")||""}(t),n=_g(t);return e&&n?"mile"==e?1.60934*n:n:NaN}function _g(t){var e,n,r=/^([0-9]+) ?\/ ?([0-9]+)/;return t=t.replace(/[\s]/g,"").replace(/,/g,""),(n=r.test(t)?+(e=r.exec(t))[1]/+e[2]:parseFloat(t))>0&&n<1/0?n:NaN}cu.run=function(t,e,n,r){var i;n.include&&cu.include({file:n.include}),n.commands||ie("Missing commands parameter"),(i=yg(n.commands,t))?wy(hg(i),e,r):r(null)},cu.require=function(t,e){var i,o,a,s=Yt("defs");e.module||ie("Missing module name or path to module"),jo.isFile(e.module)?i=e.module:jo.isFile(e.module+".js")?i=e.module+".js":o=e.module,i&&(i=n(37).join(r.cwd(),i));try{a=n(95)(i||o)}catch(t){ie(t)}o||e.alias?s[e.alias||o]=a:Object.assign(s,a),e.init&&yg(e.init,t)},Lc.circle=function(t,e,n){var r=Xc([e,n],t,{});return kc(r,"Point",t),[r]},Lc.label=function(t,e,n){return[zc(t,[e,n])]},Lc.image=function(t,e,n){var r=t.width||20,i=t.height||20;return[{tag:"image",properties:{width:r,height:i,x:e-r/2,y:n-i/2,href:t.href||""}}]},Lc.square=function(t,e,n){var r=Xc([e,n],t,{point_symbol:"square"});return kc(r,"Point",t),[r]},Lc.line=function(t,e,n){var r;return kc(r=Gc([[e,n],[e+(t.dx||0),n+(t.dy||0)]]),"LineString",t),[r]},Lc.polyline=function(t,e,n){var r=Uc(t.coordinates||[]);return kc(r,"LineString",t),[r]},Lc.polygon=function(t,e,n){var r=Jc(t.coordinates||[]);return kc(r,"Polygon",t),[r]},Lc.group=function(t,e,n){return(t.parts||[]).reduce((function(r,i){var o=Vc(i,e,n);return t.chained&&(e+=i.dx||0,n+=i.dy||0),r.concat(o)}),[])},cu.scalebar=function(t,e){var n,r,i=tl(t);i||ie("Missing a map frame"),n=a.defaults({type:"scalebar"},e),r={name:e.name||"scalebar",data:new yr([n])},i.layers.push(r)},Ju.scalebar=function(t,e){var n=function(t){var e={valign:"top",halign:"left",voffs:10,hoffs:10};return+t.left>0&&(e.hoffs=+t.left),+t.top>0&&(e.voffs=+t.top),+t.right>0&&(e.hoffs=+t.right,e.halign="right"),+t.bottom>0&&(e.voffs=+t.bottom,e.valign="bottom"),e}(t),r=nl(e),i=t.label_text||function(t,e){var n=100*e/1e3;return"1/8 1/5 1/4 1/2 1 1.5 2 3 4 5 8 10 12 15 20 25 30 40 50 75 100 150 200 250 300 350 400 500 750 1,000 1,200 1,500 2,000 2,500 3,000 4,000 5,000".split(" ").reduce((function(t,e){if(t)return t;var r=mg(e);return vg(r)>n?r:void 0}),null)||""}(e.width,r),o=vg(i),a=+t.font_size||13,s=Math.round(o/r*1e3),u=Math.round(7+.8*a),c="top"==t.label_position?"top":"bottom",l="left"==n.halign?0:s,f=7,p="right"==n.halign?e.width-s-n.hoffs:n.hoffs,h="bottom"==n.valign?e.height-u-n.voffs:n.voffs;"top"==c&&(f=-4,h+=Math.round(4+.8*a)),s>0==!1&&ie("Null scalebar length");var d={tag:"rect",properties:{fill:"black",x:0,y:0,width:s,height:3}},g={"label-text":i,"font-size":a,"text-anchor":"left"==n.halign?"start":"end","dominant-baseline":"top"==c?"auto":"hanging"};return[{tag:"g",children:[d,Lc.label(g,l,f)[0]],properties:{transform:"translate("+p+" "+h+")"}}]};var bg=Object.freeze({__proto__:null,formatDistanceLabelAsMiles:mg,parseScalebarLabelToKm:vg});function xg(t){var e=2*t.size(),n=new ai(t).size();return t.getPointCount()-e+n}function wg(){var t,e,n,r=a.expandoBuffer(Int32Array),i=a.expandoBuffer(Int32Array),o=0;function s(t){for(var e=f(t);e>t;)u(t,e),e=f(t=e)}function u(t,n){var r=e[t];c(t,e[n]),c(n,r)}function c(t,r){n[r]=t,e[t]=r}function l(n,r){var i=e[n],o=e[r],a=t[i],s=t[o];return a>s||a===s&&i>o}function f(t){var e=2*t+1,n=e+1,r=o;return e<r&&l(t,e)&&(t=e),n<r&&l(t,n)&&(t=n),t}this.init=function(a){var u;for(t=a,o=a.length,e=r(o),n=i(o),u=0;u<o;u++)c(u,u);for(u=o-2>>1;u>=0;u--)s(u)},this.size=function(){return o},this.updateValue=function(e,r){var i=n[e];t[e]=r,i>=0&&i<o||re("Out-of-range heap index."),s(function(t){var e;for(;t>0&&!l(t,e=t-1>>1);)u(t,e),t=e;return t}(i))},this.popValue=function(){return t[this.pop()]},this.pop=function(){var t;return o<=0&&re("Tried to pop from an empty heap."),t=e[0],c(0,e[--o]),s(0),t}}var Eg={};function Sg(t,e){var n=Vg(e),r={dp:"Ramer-Douglas-Peucker",visvalingam:"Visvalingam",weighted_visvalingam:"Weighted Visvalingam"}[n]||"Unknown",i=zg(t,e),o=function(t,e){var n,r=e?function(t,e,n,r,i,o){var a=[],s=[],u=[];return yn.convLngLatToSph([t,n,i],[e,r,o],a,s,u),yn.pointSegDistSq3D(a[0],s[0],u[0],a[1],s[1],u[1],a[2],s[2],u[2])}:yn.pointSegDistSq,i=e?yn.signedAngleSph:yn.signedAngle,o=0,s=0,u=0,c=0,l=0,f=-1,p=-1,h=[],d=[],g=t.getVertexData().zz;return t.forEachSegment((function(t,e,n,a){var y,m,v,_,b,x,w,E,S;if(y=n[t],m=a[t],v=n[e],_=a[e],t==p&&((E=i(n[f],a[f],y,m,v,_))>Math.PI&&(E=2*Math.PI-E),isNaN(E)||d.push(180*E/Math.PI)),f=t,p=e,g[t]<1/0&&s++,!((w=e-t-1)<1))if(o+=w,y==v&&m==_)u++;else{for(b=0;++t<e;)S=r(n[t],a[t],y,m,v,_),b=Math.max(b,S);b,x=Math.sqrt(b),l+=x,h.push(x),c=Math.max(c,x)}})),n={angleMean:0,displacementMean:0,displacementMax:c,collapsedRings:u,removed:o,retained:s,uniqueCount:xg(t),removableCount:o+s},d.length>0&&(n.angleMean=a.sum(d)/d.length,n.angleQuartiles=[a.findValueByPct(d,.75),a.findValueByPct(d,.5),a.findValueByPct(d,.25)]),h.length>0&&(n.displacementMean=l/h.length,n.displacementQuartiles=[a.findValueByPct(h,.75),a.findValueByPct(h,.5),a.findValueByPct(h,.25)]),n}(t,i),s=(o.removed+o.collapsedRings)/o.uniqueCount||0,u=o.removed/o.removableCount||0,c=o.angleQuartiles,l=o.displacementQuartiles,f=["Simplification statistics"];f.push(a.format("Method: %s (%s) %s",r,i?"spherical":"planar","weighted_visvalingam"==n?"(weighting="+Eg.getWeightCoefficient(e)+")":"")),f.push(a.format("Removed vertices: %,d",o.removed+o.collapsedRings)),f.push(a.format("   %.1f% of %,d unique coordinate locations",100*s,o.uniqueCount)),f.push(a.format("   %.1f% of %,d filterable coordinate locations",100*u,o.removableCount)),f.push(a.format("Simplification threshold: %.4f %s",t.getRetainedInterval(),i?"meters":"")),f.push(a.format("Collapsed rings: %,d",o.collapsedRings)),f.push("Displacement statistics"),f.push(a.format("   Mean displacement: %.4f",o.displacementMean)),f.push(a.format("   Max displacement: %.4f",o.displacementMax)),l&&f.push(a.format("   Quartiles: %.2f, %.2f, %.2f",l[0],l[1],l[2])),f.push("Vertex angle statistics"),f.push(a.format("   Mean angle: %.2f degrees",o.angleMean)),c&&f.push(a.format("   Quartiles: %.2f, %.2f, %.2f",c[0],c[1],c[2])),oe(f.join("\n   "))}function Ig(t){var e,n=gp(t),r=Cg(t,n),i=n.length,o=r.length,s=i>o?i-o:0;i>0&&(e=a.format("Repaired %'i intersection%s",s,a.pluralSuffix(s)),o>0&&(e+=a.format("; %'i intersection%s could not be repaired",o,a.pluralSuffix(o))),oe(e))}function Cg(t,e){for(;Ng(t,e)>0;)e=gp(t);return e}function Ng(t,e){var n,r,i,o,s=t.getVertexData(),u=t.getRetainedInterval(),c=0,l=0;for(r=Ag(e,u,s.zz),a.sortOn(r,"z",!0);r.length>0;)for(1==(n=Tg(i=r.pop(),u,s.xx,s.yy,s.zz)).length&&(n=Pg(n[0],u,s.zz),c++),o=0;o<n.length;o++)Og(r,n[o]);return++l>5e5?(se("Caught an infinite loop at intersection:",i),0):c}function Ag(t,e,n){return t.reduce((function(t,r){var i=function(t,e,n){var r,i=Sn(n,e,t.a[0],t.a[1]),o=Sn(n,e,t.b[0],t.b[1]);r=-1==i&&-1==o?null:-1==o||-1!=i&&n[i]>n[o]?{a:t.a,b:t.b,z:n[i]}:{a:t.b,b:t.a,z:n[o]};return r}(r,e,n);return null!==i&&t.push(i),t}),[])}function Og(t,e){for(var n=t.length;n>0&&!(t[n-1].z<=e.z);)t[n]=t[n-1],n--;t[n]=e}function Pg(t,e,n){for(var r=[],i=t.a[0],o=t.a[1],a=t.z,s=i+1;s<=o;s++)n[s]!=a&&s!=o||(r.push({a:[i,s],b:t.b,z:a}),s!=o&&(n[s]=e),i=s);return r.length<2&&re("Error in unwindIntersection()"),r}function Tg(t,e,n,r,i){return Ag(xp(function(t,e,n,r,i){var o=Mg(t.a,e,n,r,i);return o=o.concat(Mg(t.b,e,n,r,i))}(t,e,n,r,i),n,r),e,i)}function Mg(t,e,n,r,i){var o,a,s,u=[];t[0]<=t[1]?(o=t[0],a=t[1]):(o=t[1],a=t[0]),s=o;for(var c=o+1;c<=a;c++)i[c]>=e&&(n[s]<n[c]?u.push(s,c):u.push(c,s),s=c);return u}Eg.getArcCalculator=function(t,e){var n=new wg,r=a.expandoBuffer(Int32Array),i=a.expandoBuffer(Int32Array),o=e?function(e,n,r,i,o,a){return t(i[e],o[e],a[e],i[n],o[n],a[n],i[r],o[r],a[r])}:function(e,n,r,i,o){return t(i[e],o[e],i[n],o[n],i[r],o[r])};return function(t,a,s,u){var c,l,f,p,h=t.length,d=r(h),g=i(h),y=-1/0;for(u&&!e?re("[visvalingam] Received z-axis data for 2D simplification"):!u&&e?re("[visvalingam] Missing z-axis data for 3D simplification"):t.length>a.length&&re("[visvalingam] Incompatible data arrays:",t.length,a.length),f=0;f<h;f++)p=f+1,c=(l=f-1)<0||p>=h?1/0:o(l,f,p,a,s,u),t[f]=c,g[f]=p,d[f]=l;for(n.init(t);n.size()>0&&(c=t[f=n.pop()])!==1/0;)c<y?t[f]=y:y=c,l=d[f],p=g[f],l>0&&(c=o(d[l],l,p,a,s,u),n.updateValue(l,c)),p<h-1&&(c=o(l,p,g[p],a,s,u),n.updateValue(p,c)),g[l]=p,d[p]=l}},Eg.standardMetric=yn.triangleArea,Eg.standardMetric3D=yn.triangleArea3D,Eg.getWeightedMetric=function(t){var e=Eg.getWeightFunction(t);return function(t,n,r,i,o,a){var s=yn.triangleArea(t,n,r,i,o,a),u=yn.cosine(t,n,r,i,o,a);return e(u)*s}},Eg.getWeightedMetric3D=function(t){var e=Eg.getWeightFunction(t);return function(t,n,r,i,o,a,s,u,c){var l=yn.triangleArea3D(t,n,r,i,o,a,s,u,c),f=yn.cosine3D(t,n,r,i,o,a,s,u,c);return e(f)*l}},Eg.getWeightCoefficient=function(t){return t&&a.isNumber(t&&t.weighting)?t.weighting:.7},Eg.getWeightFunction=function(t){var e=Eg.getWeightCoefficient(t);return function(t){return-t*e+1}},Eg.weight=function(t){return.7*-t+1},Eg.getEffectiveAreaSimplifier=function(t){var e=t?Eg.standardMetric3D:Eg.standardMetric;return Eg.getPathSimplifier(e,t)},Eg.getWeightedSimplifier=function(t,e){var n=e?Eg.getWeightedMetric3D(t):Eg.getWeightedMetric(t);return Eg.getPathSimplifier(n,e)},Eg.getPathSimplifier=function(t,e){return Eg.scaledSimplify(Eg.getArcCalculator(t,e))},Eg.scaledSimplify=function(t){return function(e,n,r,i){t(e,n,r,i);for(var o=1,a=e.length-1;o<a;o++)e[o]=.65*Math.sqrt(e[o])}};var Lg=Object.freeze({__proto__:null,postSimplifyRepair:Ig,repairIntersections:Cg}),Rg={};function Dg(t,e){e.forEach((function(e){"polygon"==e.geometry_type&&function(t,e){e.forEach((function(e){Fg(t,e)}))}(t,e.shapes)}))}function Fg(t,e){for(var n,r,i=0,o=e?e.length:0,a=0;a<o;a++)(r=t.getSimpleShapeBounds(e[a]).area())>i&&(n=e[a],i=r);n&&0!==n.length?function(t,e){var n,r=t.getRetainedInterval();t.setRetainedInterval(1/0),n=yn.getPlanarPathArea(e,t);for(;n<=1e-10;){if(0===kg(t,e)){se("[protectMultiRing()] Failed on ring:",e);break}n=yn.getPlanarPathArea(e,t)}t.setRetainedInterval(r)}(t,n):se("[protectShape()] Invalid shape:",e)}function kg(t,e){for(var n,r,i,o,a,s,u=0,c=t.getVertexData(),l=0;l<e.length;l++)(r=e[l])<0&&(r=~r),s=(a=c.ii[r])+c.nn[r]-1,-1!=(i=Sn(c.zz,1/0,a,s))&&(o=c.zz[i])>u&&(u=o,n=r);return u>0?(s=(a=c.ii[n])+c.nn[n]-1,jg(c.zz,u,1/0,a,s)):0}function jg(t,e,n,r,i){for(var o=0,a=r;a<=i;a++)t[a]===e&&(t[a]=n,o++);return o}Rg.metricSq3D=yn.pointSegDistSq3D,Rg.metricSq=yn.pointSegDistSq,Rg.calcArcData=function(t,e,n,r){var i=t.length,o=!!r;t[0]=t[i-1]=1/0,i>2&&function i(a,s,u,c){var l,f,p=e[a],h=n[a],d=e[s],g=n[s];o&&(l=r[a],f=r[s]);for(var y,m=0,v=0,_=0,b=0,x=a+1;x<s;x++)(y=o?Rg.metricSq3D(e[x],n[x],r[x],p,h,l,d,g,f):Rg.metricSq(e[x],n[x],p,h,d,g))>=m&&(m=y,v=x);c<m&&(m=c);v-a>1&&(_=i(a,v,u+1,m));s-v>1&&(b=i(v,s,u+1,m));1==u&&p==d&&h==g&&(m=Math.max(_,b));return t[v]=Math.sqrt(m),m}(0,i-1,1,Number.MAX_VALUE)};var Bg=Object.freeze({__proto__:null,keepEveryPolygon:Dg,protectShape:Fg,replaceInArray:jg});function Gg(t,e){var n=t.arcs;e.keep_shapes&&Dg(n,t.layers),!e.no_repair&&n.getRetainedInterval()>0&&Ig(n),e.stats&&Sg(n,e),t.info=a.defaults({simplify:e},t.info)}function Ug(t,e){return e=e||{},a.defaults({method:Vg(e),spherical:zg(t.arcs,e)},e)}function zg(t,e){return!e.planar&&!t.isPlanar()}function qg(t,e){var n=function(t){var e;"dp"==t.method?e=Rg.calcArcData:"visvalingam"==t.method?e=Eg.getEffectiveAreaSimplifier(t.spherical):"weighted_visvalingam"==t.method?e=Eg.getWeightedSimplifier(t,t.spherical):ie("Unsupported simplify method:",t.method);return e}(e);t.setThresholds(new Float64Array(t.getPointCount())),e.spherical?(!function(t,e){var n=a.expandoBuffer(Float64Array),r=a.expandoBuffer(Float64Array),i=a.expandoBuffer(Float64Array);t.forEach3((function(t,o,a,s){var u=t.length,c=n(u),l=r(u),f=i(u);yn.convLngLatToSph(t,o,c,l,f),e(a,c,l,f)}))}(t,n),Xg(t)):function(t,e){t.forEach3((function(t,n,r,i){e(r,t,n)}))}(t,n),e.lock_box&&function(t){var e=1e-14,n=t.getBounds();n.padBounds(-e,-e,-e,-e),Yg(t,n.toArray(),!0)}(t)}function Vg(t){var e=t.method;return(!e||"weighted"==e||"visvalingam"==e&&t.weighting)&&(e="weighted_visvalingam"),e}function Yg(t,e,n){var r=t.getBounds().toArray();!0!==yn.containsBounds(e,r)&&t.forEach3((function(t,r,i){for(var o,a,s=n?1/0:0,u=0,c=i.length;u<c;u++)o=t[u],a=r[u],(o>=e[2]||o<=e[0]||a<=e[1]||a>=e[3])&&(0===s&&(s=Jg(i)),i[u]!==1/0&&(i[u]=s))}))}function Xg(t){Yg(t,ti(1e-12),!1)}function Jg(t){for(var e,n=0,r=0,i=t.length;r<i;r++)(e=t[r])>n&&e<1/0&&(n=e);return n}function Wg(t){var e,n,r;return a.isNumber(t)?(n=t,r=t):a.isString(t)&&(e=t.split(/[x ,]/),n=Number(e[0])||0,r=2==e.length?Number(e[1])||0:n),n>=0&&r>=0&&n+r>0||ie("Invalid simplify resolution:",t),[n,r]}function Hg(t,e,n,r){return 0!==t&&n/r>t/e||0===e?n/t:r/e}function $g(t,e,n){return Hg(t,e,yn.degreesToMeters(n.width())*Math.cos(n.centerY()*yn.D2R),yn.degreesToMeters(n.height()))}function Kg(t,e,n){var r=Ui(e);return zg(e.arcs,n)?Ko(t,r):Zo(t,r)}function Zg(t,e,n){var r,i=Wg(t),o=e.getBounds();return r=zg(e,n)?$g(i[0],i[1],o):Hg(i[0],i[1],o.width(),o.height()),r*=.5}cu.simplify=function(t,e){var n=t.arcs;if(n&&0!==n.size()){if(qg(n,e=Ug(t,e)),e.percentage||0===e.percentage)n.setRetainedPct(a.parsePercent(e.percentage));else if(e.interval||0===e.interval)n.setRetainedInterval(Kg(e.interval,t,e));else if(e.resolution)n.setRetainedInterval(Zg(e.resolution,n,e));else{if(e.presimplify)return;ie("Missing a simplification amount")}Gg(t,e)}};var Qg=Object.freeze({__proto__:null,finalizeSimplification:Gg,getStandardSimplifyOpts:Ug,useSphericalSimplify:zg,simplifyPaths:qg,getSimplifyMethod:Vg,protectWorldEdges:Xg,parseSimplifyResolution:Wg,calcPlanarInterval:Hg,calcSphericalInterval:$g,convertSimplifyInterval:Kg,convertSimplifyResolution:Zg});function ty(t,e){var n;return e?(t={name:t.name,data:t.data},n=es(e,t,null),function(t){var e=n(t);return String(e)}):function(e){return(t&&t.name||"split")+"-"+(e+1)}}cu.sortFeatures=function(t,e,n){var r=Sr(t),i=!n.descending,o=es(n.expression,t,e),s=[];a.repeat(r,(function(t){s.push(o(t))}));var u=a.getSortedIds(s,i);t.shapes&&a.reorderArray(t.shapes,u),t.data&&a.reorderArray(t.data.getRecords(),u)},cu.snap=function(t,e){var n=0,r=0,i=t.arcs,o=i&&i.getBounds();o&&o.hasBounds()||ie("Dataset is missing path data"),e.precision?fa(t,e.precision):n=e.interval?Zo(e.interval,Ui(t)):rn(o.toArray()),i.flatten(),n>0&&(r=an(i,n),oe(a.format("Snapped %s point%s",r,a.pluralSuffix(r)))),(r>0||e.precision)&&(i.dedupCoords(),$s(t))},cu.splitLayer=function(t,e,n){var r=n&&n.no_replace?Rr(t):t,i=r.data?r.data.getRecords():null,o=r.shapes,s={},u=[],c=ty(r,e);return a.repeat(Sr(r),(function(t){var e,n=c(t);n in s==!1?(s[n]=u.length,e={geometry_type:r.geometry_type,name:n,data:i?new yr:null,shapes:o?[]:null},u.push(e)):e=u[s[n]],o&&e.shapes.push(o[t]),i&&e.data.getRecords().push(i[t])})),u};var ey=Object.freeze({__proto__:null,getSplitNameFunction:ty});function ny(t,e){var n=e/t;return n>.6?.6/n:1}function ry(t,e){return[t[0]+e[0],t[1]+e[1]]}function iy(t,e){var n=t["arrow-head-angle"]||90,r=t["arrow-stem-curve"]||0,i=t["arrow-head-width"]||9,o=oy(i,n),a=ny(e,o),s=i*a,u=o*a,c=function(t,e){var n=Math.abs(e/2)/180*Math.PI;return[t*Math.sin(n)*(e>0?-1:1),t*Math.cos(n)]}(e,r),l=[[0,0],c.concat()];if(r&&oc(l,r),!u)return[l];var f=[ry([-s/2,-u],c),c.concat(),ry([s/2,-u],c)];return sy(l,t.rotation),sy(f,t.rotation),[l,f]}function oy(t,e){return t*(1/Math.tan(Math.PI*e/180/2)/2)}function ay(t,e){var n=t["arrow-head-angle"]||40,r=t["arrow-stem-width"]||2,i=t["arrow-head-width"]||3*r,o=oy(i,n),a=ny(e,o),s=o*a,u=e-s,c=i*a/2,l=r*a/2,f=l*(1-(t["arrow-stem-taper"]||0)),p=[[f,0],[l,u],[c,u],[0,u+s],[-c,u],[-l,u],[-f,0],[f,0]];return sy(p,t.rotation),[p]}function sy(t,e){var n=Qu(e||0,1,[0,0],[0,0]);t.forEach((function(t){var e=n?n(t[0],t[1]):t;t[0]=e[0],t[1]=-e[1]}))}function uy(t){var e=t.type,n=Mc[e];return e?n||ie("Unknown symbol type:",e):ie('Missing required "type" parameter'),n(t)}cu.svgStyle=function(t,e,n){var r;t.data||Gr(t),n.where&&(r=es(n.where,t,e.arcs)),Object.keys(n).forEach((function(e){var i=e.replace("_","-");if(xc(i)){var o=Ic(n[e].trim(),i,t);vr(t).getRecords().forEach((function(t,e){r&&!r(e)?i in t==!1&&(t[i]=void 0):t[i]=o(e)}))}}))},Mc.arrow=function(t){var e="length"in t?t.length:10;return"fill"in t?function(t,e){return{type:"polygon",coordinates:ay(t,e),fill:t.fill||"magenta"}}(t,e):function(t,e){return{type:"polyline",coordinates:iy(t,e),stroke:t.stroke||"magenta","stroke-width":"stroke-width"in t?t["stroke-width"]:1}}(t,e)},cu.symbols=function(t,e){var n,r;Ar(t),n=Ec(t,e),e.where&&(r=es(e.where,t,null)),vr(t).getRecords().forEach((function(t,e){r&&r(e)?"svg-symbol"in t==!1&&(t["svg-symbol"]=void 0):t["svg-symbol"]=uy(n(e))}))};var cy=Object.freeze({__proto__:null,buildSymbol:uy});function ly(t,e,n){for(var r,i=0;i<t.length;i++)if((r=t[i])>=e&&r<e+n)return r-e;return-1}function fy(t,e,n){for(var r=0;r<e.length;r++)t.push(n?n[e[r]]:null)}function py(t,e,n){return es(t,e,n)}function hy(t,e,n){var r,i,o,s,u,c,l,f,p,h,d=t.name,g=t.options;try{if(Ef.start(),e||(e=new bf),"rename-layers"==d?l=(u=e.findCommandTargets(g.target||"*")).reduce((function(t,e){return t.concat(e.layers)}),[]):"o"==d?u=e.findCommandTargets(g.target||g.combine_layers&&"*"):"info"==d||"proj"==d||"drop"==d||"target"==d?u=e.findCommandTargets(g.target):((u=e.findCommandTargets(g.target)).length>1&&("merge-layers"==d||"union"==d)&&(u=iu(u,e)),1==u.length?(f=(c=u[0].dataset).arcs,l=u[0].layers,e.setDefaultTarget(l,c)):u.length>1&&ie("This command does not support targetting layers from different datasets")),0===u.length&&(g.target&&ie(a.format("Missing target: %s\nAvailable layers: %s",g.target,xf(e))),"graticule"!=d&&"i"!=d&&"help"!=d&&"point-grid"!=d&&"shape"!=d&&"rectangle"!=d&&"include"!=d))throw new le("No data is available");if(g.source&&(r=vf(yf(g.source,u),e,g)),"affine"==d)cu.affine(l,c,g);else if("buffer"==d)o=cu.buffer(l,c,g);else if("data-fill"==d)dy(cu.dataFill,l,f,g);else if("cluster"==d)dy(cu.cluster,l,f,g);else if("calc"==d)dy(cu.calc,l,f,g);else if("clean"==d)cu.cleanLayers(l,c,g);else if("clip"==d)o=cu.clipLayers(l,r,c,g);else if("colorizer"==d)o=cu.colorizer(g);else if("dissolve"==d)o=dy(cu.dissolve,l,f,g);else if("dissolve2"==d)o=cu.dissolve2(l,c,g);else if("divide"==d)cu.divide(l,c,r,g);else if("dots"==d)o=dy(cu.dots,l,f,g);else if("drop"==d)cu.drop2(e,u,g);else if("each"==d)dy(cu.evaluateEachFeature,l,f,g.expression,g);else if("erase"==d)o=cu.eraseLayers(l,r,c,g);else if("explode"==d)o=dy(cu.explodeFeatures,l,f,g);else if("external"==d)cu.external(g);else if("filter"==d)o=dy(cu.filterFeatures,l,f,g);else if("filter-fields"==d)dy(cu.filterFields,l,g.fields);else if("filter-geom"==d)dy(cu.filterGeom,l,f,g);else if("filter-islands"==d)dy(cu.filterIslands,l,c,g);else if("filter-islands2"==d)dy(cu.filterIslands2,l,c,g);else if("filter-slivers"==d)dy(cu.filterSlivers,l,c,g);else if("frame"==d)cu.frame(e,r,g);else if("fuzzy-join"==d)dy(cu.fuzzyJoin,l,f,r,g);else if("graticule"==d)e.addDataset(cu.graticule(c,g));else if("help"==d)gf().printHelp(t.options.command);else if("i"==d)g.replace&&(e=new bf),(c=cu.importFiles(t.options))&&(e.addDataset(c),o=c.layers);else if("include"==d)cu.include(g);else if("info"==d)cu.printInfo(Hl(u));else if("inlay"==d)o=cu.inlay(l,r,c,g);else if("inspect"==d)dy(cu.inspect,l,f,g);else if("innerlines"==d)o=dy(cu.innerlines,l,f,g);else if("join"==d)dy(cu.join,l,c,r,g);else if("lines"==d)o=dy(cu.lines,l,c,g);else if("merge-layers"==d)o=cu.mergeLayers(l,g);else if("mosaic"==d)o=cu.mosaic(l,c,g);else{if("o"==d)return s=zl(u,g),g.final&&(e=null),vu(s,g,y);if("point-grid"==d)o=[cu.pointGrid(c,g)],c||e.addDataset({layers:o});else if("grid"==d)i=cu.polygonGrid(l,c,g);else if("points"==d)o=dy(cu.createPointLayer,l,c,g);else if("polygons"==d)o=cu.polygons(l,c,g);else{if("proj"==d)return void Pi(g,(function(){var t=null;try{u.forEach((function(t){var n,r,i=g.match||g.crs||g.projection;g.init&&((n=gu(g.init,e)).crs||ie("Unknown projection source:",g.init),Gi(t.dataset,n)),i&&(r=gu(i,e),cu.proj(t.dataset,r,g))}))}catch(e){t=e}y(t)}));if("rectangle"==d)r||g.bbox||0===u.length?e.addDataset(cu.rectangle(r,g)):o=cu.rectangle2(u[0],g);else if("rectangles"==d)o=dy(cu.rectangles,l,c,g);else if("rename-fields"==d)dy(cu.renameFields,l,g.fields);else if("rename-layers"==d)cu.renameLayers(l,g.names,e);else if("require"==d)cu.require(u,g);else{if("run"==d)return void cu.run(u,e,g,y);"scalebar"==d?cu.scalebar(e,g):"shape"==d?e.addDataset(cu.shape(g)):"simplify"==d?g.variable?cu.variableSimplify(l,c,g):cu.simplify(c,g):"slice"==d?o=cu.sliceLayers(l,r,c,g):"snap"==d?cu.snap(c,g):"sort"==d?dy(cu.sortFeatures,l,f,g):"split"==d?o=dy(cu.splitLayer,l,g.expression,g):"split-on-grid"==d?o=dy(cu.splitLayerOnGrid,l,f,g):"stitch"==d?cu.stitch(c):"style"==d?dy(cu.svgStyle,l,c,g):"symbols"==d?dy(cu.symbols,l,g):"subdivide"==d?o=dy(cu.subdivideLayer,l,f,g.expression):"target"==d?cu.target(e,g):"union"==d?o=cu.union(l,c,g):"uniq"==d?dy(cu.uniq,l,f,g):cu.runExternalCommand(t,e)}}}"name"in g&&o&&o.forEach((function(t){t.name=g.name})),i?(e.addDataset(i),o=i.layers,l&&!g.no_replace&&l.forEach((function(t){e.deleteLayer(t,c)}))):o&&c&&o!=c.layers&&(g.no_replace?(p=o,h=l||[],a.some(h,(function(t){return p.indexOf(t)>-1}))&&re("Command returned invalid output"),c.layers=c.layers.concat(o)):(_i(c,l,o),("clip"==d||"erase"==d||"rectangle"==d||"rectangles"==d||"filter"==d&&g.cleanup)&&!g.no_cleanup&&si(c)),e.setDefaultTarget(o,c)),c&&mi(c)}catch(t){return y(t)}function y(t){Ef.stop("-"),n(t,t?null:e)}y(null)}function dy(t,e){var n=a.toArray(arguments).slice(2);return e.reduce((function(e,r){var i=t.apply(null,[r].concat(n));return a.isArray(i)?e=e.concat(i):i&&e.push(i),e}),[])}function gy(t){var e=vy.apply(null,arguments);if(by(t,e,(function(t){e.callback(t)})),e.promise)return e.promise}function yy(t){var e=vy.apply(null,arguments),n=e.callback,r=e.output=[];if(by(t,e,(function(t){return t?n(t):e.legacy?n(null,xy(r)):n(null,_y(r))})),e.promise)return e.promise}function my(t){var e,o=vy.apply(null,arguments),a=n(37).join(i,"bin/mapshaper"),s=parseFloat(o.options.xl)||8;if(s<1||s>64)return ce(e=new Error("Unsupported heap size:"+s+"GB")),o.callback(e),o.promise;ne()||(t+=" -quiet");var u=Math.round(1e3*s),c=[r.execPath,"--max-old-space-size="+u,a,t].join(" "),l=n(284).exec(c,{},(function(t,e,n){o.callback(t)}));return l.stdout.pipe(r.stdout),l.stderr.pipe(r.stderr),o.promise?o.promise:void 0}function vy(t,e,n){var r={options:{}};return a.isFunction(e)?r.callback=e:a.isFunction(n)?(r.callback=n,r.legacy=e&&null!=Ea(e),r.input=e):r.promise=new Promise((function(t,e){r.callback=function(n,r){n?e(n):t(r)}})),!r.legacy&&a.isObject(e)&&(e.xl?r.options=e:r.input=e),r}function _y(t){return t.reduce((function(t,e){return t[e.filename]=e.content,t}),{})}function by(t,e,n){var r,i=e.output||null,o=e.input;try{r=hg(t)}catch(t){return ce(t),n(t)}e.legacy&&(oe("Warning: deprecated input format"),r=function(t,e){var n=a.find(t,(function(t){return"i"==t.name})),r=a.find(t,(function(t){return"o"==t.name}));n||(n={name:"i",options:{}},t.unshift(n));n.options.files=["__input__"],n.options.input={__input__:e},r||t.push({name:"o",options:{}});return t}(r,o),o=null),r.forEach((function(t){var e;"i"!=(e=t.name)&&"join"!=e&&"erase"!=e&&"clip"!=e&&"include"!=e||!o||(t.options.input=o),"o"==t.name&&i&&(t.options.output=i)})),wy(r,null,n)}function xy(t){return t.length>1?a.pluck(t,"content"):1==t.length?t[0].content:null}function wy(t,e,n){if(e?e instanceof bf==!1&&re("Changed in v0.4: runParsedCommands() takes a Catalog object"):(n=Jt(n),e=new bf),a.isFunction(i)||re("Missing a callback function"),a.isArray(t)||re("Expected an array of parsed commands"),0===t.length)return i(new le("No commands to run"));if(t=function(t){return t.filter((function(t){if("verbose"==t.name)Xt("VERBOSE",!0);else if("quiet"==t.name)Xt("QUIET",!0);else{if("debug"!=t.name)return!0;Xt("DEBUG",!0)}return!1}))}(t),Vt()||function(){var t=/^--max-old-space-size=([0-9]+)$/,e=r.execArgv.find((function(e){return t.test(e)}));e&&oe("Allocating",t.exec(e)[1]/1e3,"GB of heap memory")}(),0===(t=Ey(t)).length)return i(null);function i(t,e){t&&ce(t),n(t,e),Xt("current_command",null)}Vt()||"o"!=t[t.length-1].name||(t[t.length-1].options.final=!0),t=function(t){var e=t[0],n=e.options;if("i"!=e.name||n.stdin||n.merge_files||n.combine_files||!n.files||n.files.length<2)return t;return n.files.reduce((function(e,r){var i={name:"i",options:a.defaults({files:[r],replace:!0},n)};return e.push(i),e.push.apply(e,t.slice(1)),e}),[])}(t),a.reduceAsync(t,e,(function(t,e,n){Xt("current_command",e.name),hy(e,t,n)}),i)}function Ey(t){return t.filter((function(t){if("version"==t.name)ae("0.5.28");else if("encodings"==t.name)tr();else{if("projections"!=t.name)return!0;Vi()}return!1}))}cu.target=function(t,e){var n=(e.type||"").toLowerCase().replace("linestring","polyline"),r=e.target||"*",i=t.findCommandTargets(r,n);n&&-1=="polygon,polyline,point".split(",").indexOf(n)&&ie("Invalid layer type:",e.type),0===i.length&&ie("No layers were matched (pattern: "+r+(n?" type: "+n:"")+")"),(e.name||""===e.name)&&(i[0].layers[0].name=e.name),t.setDefaultTargets(i)},cu.union=function(t,e,n){t.length<2&&ie("Command requires at least two target layers"),t.forEach(Pr);var r=Ip(e,n),i=[],o=[],s=[];t.forEach((function(t,e){var r=t.data?t.data.getFields():[];n.fields&&(r=n.fields.indexOf("*")>1?r:r.filter((function(t){return n.fields.indexOf(t)>-1}))),s.push({layer:t,fields:r,records:t.data?t.data.getRecords():null,offset:o.length,size:t.shapes.length}),i=i.concat(r),o=o.concat(t.shapes)}));var u=a.uniqifyNames(i,(function(t,e){return t+"_"+e})),c=new Up({geometry_type:"polygon",shapes:o},r,{flat:!1}),l=c.mosaic,f=l.map((function(t,e){for(var n,r,i,o=c.getSourceIdsByTileId(e),a=[],l=0,f=s.length;l<f;l++)i=-1==(r=ly(o,(n=s[l]).offset,n.size))||null===n.records?null:n.records[r],fy(a,n.fields,i);return function(t,e){for(var n={},r=0;r<t.length;r++)n[t[r]]=e[r];return n}(u,a)}));return[{name:"union",geometry_type:"polygon",shapes:l,data:new yr(f)}]},cu.uniq=function(t,e,n){var r=Sr(t),i=es(n.expression,t,e),o=n.max_count||1,s={},u=[],c=!!n.verbose,l=!!n.invert,f=!!n.index,p=t.data?t.data.getRecords():null,h=function(t,e){return u[e]};a.repeat(r,(function(t){var e,n=i(t),r=n in s?s[n]+1:1,h=r<=o;f?(h=!0,(e=p&&p[t])&&(e.index=r)):l&&(h=!h),u[t]=h,s[n]=r,c&&!h&&oe(a.format("Removing feature %i key: [%s]",t,n))})),t.shapes&&(t.shapes=t.shapes.filter(h)),p&&(t.data=new yr(p.filter(h))),!1!==n.verbose&&oe(a.format("Retained %,d of %,d features",Sr(t),r))},cu.shape=function(t){var e,n,r,i,o,a=t.coordinates,s=t.offsets||[],u=[];for(a&&a.length>=2!=!1||ie("Missing list of coordinates"),r=0;r<a.length;r+=2)i=a[r],o=a[r+1],u.push([i,o]);for(r=0;r<s.length;r+=2)i+=s[r],o+=s[r+1],u.push([i,o]);return Os.pathIsRing(u)?n="Polygon":t.closed&&u.length>=3?(n="Polygon",u.push(u[0])):n="LineString",(e=Ts({type:n,coordinates:"Polygon"==n?[u]:u},{})).layers[0].name=t.name||"shape",e},cu.variableSimplify=function(t,e,n){var r,i,o=t[0],s=e.arcs;1!=t.length&&ie("Variable simplification requires a single target layer"),br(o)||ie("Target layer is missing path data"),qg(s,n=Ug(e,n)),n.interval?r=function(t,e,n,r){var i=py(t,e,n.arcs);return function(t){return Kg(i(t),n,r)}}(n.interval,o,e,n):n.percentage?r=function(t,e,n,r){var i=py(t,e,n.arcs),o=$r(n.arcs);return function(t){var e=i(t),n=a.parsePercent(e);return o(n)}}(n.percentage,o,e):n.resolution?r=function(t,e,n,r){var i=py(t,e,n.arcs);return function(t){return Zg(i(t),n.arcs,r)}}(n.resolution,o,e,n):ie("Missing a simplification expression"),i=function(t,e,n){var r,i=new Float64Array(e.size());a.initializeArray(i,-1),t.shapes.forEach((function(t,e){r=n(e),In(t||[],u)}));for(var o=0,s=i.length;o<s;o++)-1==i[o]&&(i[o]=0);return i;function u(t){var e=t<0?~t:t,n=i[e];(n>r||-1==n)&&(i[e]=r)}}(o,s,r),function(t,e){t.getVertexData().zz;t.forEach2((function(t,n,r,i,o,a){for(var s=e[a],u=1;u<n-1;u++)o[t+u]>=s&&(o[t+u]=1/0)}))}(s,i),s.setRetainedInterval(1e20),Gg(e,n),s.flatten()},cu.splitLayerOnGrid=function(t,e,n){var r,i=t.shapes,o=t.geometry_type,s=!!n.id_field,u=n.id_field||"__split__",c=function(t,e,n){var r=t.xmin,i=t.ymin,o=t.width(),s=t.height();n>0!=!1&&e>0!=!1||ie("Invalid grid parameters");o>0!=!1&&s>0!=!1||(e=1,n=1);return function(t){var u=Math.floor((t.centerX()-r)/o*e),c=Math.floor((t.centerY()-i)/s*n);return u=a.clamp(u,0,e-1)||0,"r"+(c=a.clamp(c,0,n-1)||0)+"c"+u}}(Br(t,e),n.cols,n.rows);return o||ie("Layer has no geometry"),t.data||(t.data=new yr(i.length)),r=t.data.getRecords(),t.shapes.forEach((function(t,n){var i="point"==o?ve([t]):e.getMultiShapeBounds(t),a=i.hasBounds()?c(i):"";(r[n]=r[n]||{})[u]=a})),s?t:cu.splitLayer(t,u).filter((function(t){var e=t.data.getRecordAt(0)[u];return t.name=e,t.data.deleteField(u),!!e}))},cu.subdivideLayer=function(t,e,n){return function t(e,n,r){var i,o,s,u,c,l=Wf(e,n,r),f=[];a.isBoolean(l)||ie("Expression must evaluate to true or false");l?(o=Br(e,n),i=function(t,e,n){var r,i,o=t.data?t.data.getRecords():null,s=t.shapes;r={geometry_type:t.geometry_type,shapes:[],data:o?[]:null},i={geometry_type:t.geometry_type,shapes:[],data:o?[]:null};var u=n&&n.width()>n.height(),c=s.map((function(t){var n=e.getMultiShapeBounds(t);return u?n.centerX():n.centerY()})),l=a.range(c.length);l.sort((function(t,e){return c[t]-c[e]})),l.forEach((function(t,e){var n=e<s.length/2?r:i;n.shapes.push(s[t]),o&&n.data.push(o[t])})),o&&(r.data=new yr(r.data),i.data=new yr(i.data));return[r,i]}(e,n,o),(s=i[0]).shapes.length>1&&s.shapes.length<e.shapes.length?a.merge(f,t(s,n,r)):f.push(s),(u=i[1]).shapes.length>1&&u.shapes.length<e.shapes.length?a.merge(f,t(u,n,r)):f.push(u)):f.push(e);return c=ty(e),f.forEach((function(t,n){t.name=c(n),a.defaults(t,e)})),f}(t,e,n)};var Sy=Object.freeze({__proto__:null,runCommands:gy,applyCommands:yy,runCommandsXL:my,testCommands:function(t,e){by(t,{},(function(t,n){var r,i=n?n.getDefaultTargets():[];!t&&i.length>0&&(r=i[0].dataset),e(t,r)}))},runParsedCommands:wy,runAndRemoveInfoCommands:Ey}),Iy={runCommands:gy,applyCommands:yy,runCommandsXL:my,enableLogging:ee};function Cy(t,e){return t&&e&&t[0]===e[0]&&t[1]===e[1]}function Ny(t,e,n){var r=n[0],i=n[2];return t>i[0]?(e>i[1]?4:e>=r[1]&&5)||6:t>=r[0]?(e>i[1]?3:e>=r[1]&&8)||7:(e>i[1]?2:e>=r[1]&&1)||0}function Ay(t){return 0==t||2==t||4==t||6==t}function Oy(t,e){return e<8&&e>=0?(e+8-2*t)%8:e}function Py(t,e,n){t.push(function(t,e){if(Ay(t))return e[t/2].concat();re("Invalid corner sector:",t)}(e,n))}function Ty(t,e,n,r){var i,o,a=e?Ny(e[0],e[1],r):-1,s=Ny(n[0],n[1],r);8==a&&8==s?t.push(n):a==s||(-1==a?8==s?t.push(n):Ay(s)&&Py(t,s,r):8==a?(Ly(t,e,n,r),Ay(s)&&Py(t,s,r)):8==s?(Ly(t,e,n,r),t.push(n)):(r=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3];return 0===t?e=[n,r,i,o]:1==t?e=[r,i,o,n]:2==t?e=[i,o,n,r]:3==t?e=[o,n,r,i]:re("Invalid rotation number"),e}(i=(o=a)>1&&o<8?Math.floor(o/2):0,r),a=Oy(i,a),s=Oy(i,s),0==a?0===s||1===s||7===s||(2==s||6==s?Py(t,s,r):3==s?Ly(t,e,n,r)||Py(t,2,r):4==s?(Ly(t,e,n,r)||(yn.orient2D(e[0],e[1],n[0],n[1],r[0][0],r[0][1])>1?Py(t,6,r):Py(t,2,r)),Py(t,s,r)):5==s&&(Ly(t,e,n,r)||Py(t,6,r))):1==a?2==s||0===s?Py(t,s,r):3==s?Ly(t,e,n,r)||Py(t,2,r):4==s?(Ly(t,e,n,r)||Py(t,2,r),Py(t,4,r)):5==s?Ly(t,e,n,r):6==s?(Ly(t,e,n,r)||Py(t,0,r),Py(t,6,r)):7==s&&(Ly(t,e,n,r)||Py(t,0,r)):re("Sector error")))}function My(t,e,n,r,i){var o=yn.segmentIntersection(e[0],e[1],n[0],n[1],r[0],r[1],i[0],i[1]);o&&t.push(o)}function Ly(t,e,n,r){var i=[];return My(i,e,n,r[0],r[1]),My(i,e,n,r[0],r[3]),My(i,e,n,r[1],r[2]),My(i,e,n,r[2],r[3]),i.length>0&&(t.push.apply(t,i),!0)}function Ry(t,e){var n=sa(e);t.shapes=t.shapes.map((function(t,r){return function(t){var r=[];return Dn(t,(function(t){var i=n(t);if(0===i.length)re("[cleanPolygon()] Defective path:",t);else if(1==i.length)r.push(i[0]);else{var o,a=yn.getPlanarPathArea(t,e.arcs)>0?1:-1;i.reduce((function(t,n,r){var i=yn.getPlanarPathArea(n,e.arcs)*a;return i>t&&(o=n,t=i),t}),0);o&&r.push(o)}})),r.length>0?r:null}(t)}))}var Dy=Object.freeze({__proto__:null,repairPolygonGeometry:function(t,e,n){var r=Ip(e);return t.forEach((function(t){Ry(t,r)})),t},repairSelfIntersections:Ry}),Fy={};Fy.svg=Object.assign({},Dc,hl,ac,Hc),Object.assign(Fy,{Dbf:co,DbfReader:uo,DouglasPeucker:Rg,geojson:Os,ShpType:Io,topojson:Rs,Visvalingam:Eg,ArcCollection:ii,Bounds:me,clipIterByBounds:function(t,e){for(var n,r,i,o,a=[],s=function(t){return[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin]]}(e);t.hasNext();)Ty(a,r,n=[t.x,t.y],s),r=n,i||(i=n);return(o=Cy(i,n))&&a.length>0&&!Cy(a[0],a[a.length-1])&&a.push(a[0].concat()),(o&&a.length<4||a.length<2)&&(a=[]),a},CommandParser:hf,DataTable:yr,editArcs:Wi,GeoJSONReader:ks,Heap:wg,NodeCollection:ai,parseDMS:zd,PathIndex:Cu,PolygonIndex:Iu,ShpReader:Vo,Transform:ye}),Object.assign(Fy,$a,Dh,ci,Nh,Qi,Zp,$f,Xf,wf,Lh,bh,zh,Ni,ip,xi,gr,So,Tl,As,xs,er,Fl,Wl,fs,xu,du,ko,qo,Pa,ad,rl,Zu,lh,Xu,Ls,eu,Td,Dp,eg,Zf,Wh,nd,Ws,qs,Bg,ri,Ur,Bd,ge,fu,uu,qp,pf,Ul,wh,gg,eh,qr,Mu,jf,Pf,_a,ca,Mn,sl,bd,$d,xe,pp,Jp,Cf,kp,jh,Dy,Gp,yh,Lg,mu,Ji,pg,da,Sy,bg,Sp,Hr,Bn,Ao,Ll,xa,Qg,Va,Qr,qf,un,_f,ey,Ht,Bs,Sl,Tc,cy,Ql,jl,Fs,Zs,na,yc);var ky=Object.assign({cli:jo,geom:yn,utils:a,internal:Fy,importFile:pu},cu,Iy);"object"===o(e)&&e.exports?e.exports=ky:"object"===("undefined"==typeof window?"undefined":o(window))&&window&&(window.mapshaper=ky)}()}).call(this,n(179).setImmediate,n(181)(t),n(26),"/")},function(t,e,n){"use strict";var r=n(0),i=n(2),o=n(42),a=n(6),s=n(11),u=n(5),c=n(54),l=n(55),f=n(43),p=n(4),h=n(56),d=p("isConcatSpreadable"),g=h>=51||!i((function(){var t=[];return t[d]=!1,t.concat()[0]!==t})),y=f("concat"),m=function(t){if(!a(t))return!1;var e=t[d];return void 0!==e?!!e:o(t)};r({target:"Array",proto:!0,forced:!g||!y},{concat:function(t){var e,n,r,i,o,a=s(this),f=l(a,0),p=0;for(e=-1,r=arguments.length;e<r;e++)if(m(o=-1===e?a:arguments[e])){if(p+(i=u(o.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<i;n++,p++)n in o&&c(f,p,o[n])}else{if(p>=9007199254740991)throw TypeError("Maximum allowed index exceeded");c(f,p++,o)}return f.length=p,f}})},function(t,e,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);e.f=o?function(t){var e=i(this,t);return!!e&&e.enumerable}:r},function(t,e,n){var r=n(1),i=n(6),o=r.document,a=i(o)&&i(o.createElement);t.exports=function(t){return a?o.createElement(t):{}}},function(t,e,n){var r=n(1),i=n(14);t.exports=function(t,e){try{i(r,t,e)}catch(n){r[t]=e}return e}},function(t,e,n){var r=n(72),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(t){return i.call(t)}),t.exports=r.inspectSource},function(t,e,n){var r=n(1),i=n(70),o=r["__core-js_shared__"]||i("__core-js_shared__",{});t.exports=o},function(t,e,n){var r=n(29),i=n(72);(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.8.1",mode:r?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(2);t.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},function(t,e,n){var r=n(30);t.exports=r("navigator","userAgent")||""},function(t,e,n){var r=n(4),i=n(45),o=r("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||a[o]===t)}},function(t,e,n){var r=n(57),i=n(45),o=n(4)("iterator");t.exports=function(t){if(null!=t)return t[o]||t["@@iterator"]||i[r(t)]}},function(t,e,n){var r={};r[n(4)("toStringTag")]="z",t.exports="[object z]"===String(r)},function(t,e,n){var r=n(4)("iterator"),i=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){i=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o={};o[r]=function(){return{next:function(){return{done:n=!0}}}},t(o)}catch(t){}return n}},function(t,e,n){"use strict";var r=n(0),i=n(12).map,o=n(43),a=n(19),s=o("map"),u=a("map");r({target:"Array",proto:!0,forced:!s||!u},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";var r=n(0),i=n(84).left,o=n(33),a=n(19),s=n(56),u=n(61),c=o("reduce"),l=a("reduce",{1:0});r({target:"Array",proto:!0,forced:!c||!l||!u&&s>79&&s<83},{reduce:function(t){return i(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var r=n(44),i=n(11),o=n(38),a=n(5),s=function(t){return function(e,n,s,u){r(n);var c=i(e),l=o(c),f=a(c.length),p=t?f-1:0,h=t?-1:1;if(s<2)for(;;){if(p in l){u=l[p],p+=h;break}if(p+=h,t?p<0:f<=p)throw TypeError("Reduce of empty array with no initial value")}for(;t?p>=0:f>p;p+=h)p in l&&(u=n(u,l[p],p,c));return u}};t.exports={left:s(!1),right:s(!0)}},function(t,e){t.exports=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}},function(t,e,n){var r,i,o,a=n(1),s=n(2),u=n(32),c=n(104),l=n(69),f=n(113),p=n(61),h=a.location,d=a.setImmediate,g=a.clearImmediate,y=a.process,m=a.MessageChannel,v=a.Dispatch,_=0,b={},x=function(t){if(b.hasOwnProperty(t)){var e=b[t];delete b[t],e()}},w=function(t){return function(){x(t)}},E=function(t){x(t.data)},S=function(t){a.postMessage(t+"",h.protocol+"//"+h.host)};d&&g||(d=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return b[++_]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},r(_),_},g=function(t){delete b[t]},p?r=function(t){y.nextTick(w(t))}:v&&v.now?r=function(t){v.now(w(t))}:m&&!f?(o=(i=new m).port2,i.port1.onmessage=E,r=u(o.postMessage,o,1)):a.addEventListener&&"function"==typeof postMessage&&!a.importScripts&&h&&"file:"!==h.protocol&&!s(S)?(r=S,a.addEventListener("message",E,!1)):r="onreadystatechange"in l("script")?function(t){c.appendChild(l("script")).onreadystatechange=function(){c.removeChild(this),x(t)}}:function(t){setTimeout(w(t),0)}),t.exports={set:d,clear:g}},function(t,e,n){"use strict";var r=n(0),i=n(63);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},function(t,e,n){"use strict";var r=n(10);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){"use strict";var r=n(117).charAt;t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},function(t,e,n){var r=n(6),i=n(23),o=n(4)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},function(t,e,n){"use strict";var r=n(11),i=n(31),o=n(5);t.exports=function(t){for(var e=r(this),n=o(e.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),u=a>2?arguments[2]:void 0,c=void 0===u?n:i(u,n);c>s;)e[s++]=t;return e}},function(t,e,n){var r=n(6),i=n(49);t.exports=function(t,e,n){var o,a;return i&&"function"==typeof(o=e.constructor)&&o!==n&&r(a=o.prototype)&&a!==n.prototype&&i(t,a),t}},function(t,e,n){"use strict";var r=n(15),i=n(13);t.exports="".repeat||function(t){var e=String(i(this)),n="",o=r(t);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},function(t){t.exports=JSON.parse('[["0","\\u0000",127,""],["8140","",5,"",9,"",6,""],["8180","",6,"",4,"",4,"",5,""],["8240","",4,"",8,"",4,"",11],["8280","",10,"",4,"",7,"",5,"",8,"",20,"",4,"",6,""],["8340","",17,"",5,"",10,"",4,"",9,""],["8380","",5,"",13,"",28,"",4,"",4,"",5],["8440","",5,"",5,""],["8480","",9,"",4,"",6,"",6,"",9,"",5,"",10,"",7,""],["8540","",9,""],["8580","",4,"",6,"",4,"",4,"",7,""],["8640","",4,"",5,"",4,"",5,""],["8680","",4,"",4,"",5,"",6,"",8,"",4,"",4,"",4,""],["8740","",7,"",11,"",4,"",4],["8780","",7,"",6,"",14,"",10,"",6,"",12,"",8,"",5,"",6],["8840","",9,"",4,"",4,""],["8880","",4,"",6,"",8,"",6,"",7,"",4,"",4,"",7],["8940","",5,"",6,"",4,"",5,"",4,"",16,""],["8980","",4,"",4,"",7,"",17,"",10,"",13,"",5,"",7,"",4,""],["8a40","",4,"",12,""],["8a80","",5,"",6,"",4,"",11,"",6,"",4,"",4,"",9,"",5],["8b40","",8,"",17,"",6,"",13,""],["8b80","",4,"",4,"",5,"",4,"",4,"",22,"",11,"",25,"",7,"",6],["8c40","",7,""],["8c80","",8,"",4,"",6,"",6,"",6,"",4,"",4,"",4],["8d40","",5,"",5,"",5,"",6,"",9,"",4],["8d80","",5,"",4,"",4,"",4,"",7,"",7,"",10,"",10,"",12,"",21,""],["8e40","",21,"",12,"",6,"",12,""],["8e80","",4,"",7,"",4,"",4,"",5,"",6,"",4,"",14,"",4,"",4,"",6],["8f40","",5,"",11,"",8,""],["8f80","",6,"",14,"",5,"",5,"",4,""],["9040","",4,"",4,"",6,""],["9080","",7,"",4,"",4,"",4,"",4,"",18,"",6],["9140","",6,"",6,"",18,"",4,""],["9180","",6,"",8,"",9,"",5,"",4,"",4,"",16,"",13,"",8,"",5,"",4,""],["9240","",6,"",5,""],["9280","",5,"",7,"",6,""],["9340","",6,"",4,"",4,"",5,""],["9380","",5,"",4,"",6,"",4,"",7,"",9,"",6,"",8,"",4,"",6,""],["9440","",24,"",7,"",7,"",4,"",8],["9480","",4,"",4,"",14,"",7,"",7,""],["9540","",4,"",4,"",6,""],["9580","",4,"",4,"",8,"",4,"",4,"",25,"",7,"",5,""],["9640","",5,"",4,""],["9680","",7,"",9,"",7,"",4,"",6,"",6,"",5],["9740","",7,"",8,"",7,"",9,""],["9780","",6,"",5,"",4,"",9,"",4,"",11,"",7,"",16,""],["9840","",4,"",5,"",9,""],["9880","",7,"",5,"",11,"",9,"",9,"",11,"",5,"",5,"",6,"",4,"",7,"",6,""],["9940","",4,"",10,"",6,"",8,"",4,"",7,"",5],["9980","",114,"",6],["9a40","",11,"",7,"",13,""],["9a80","",4,"",7,"",7,"",6,"",4,"",4,"",7,"",6,"",4,"",4,""],["9b40","",4,""],["9b80","",5,"",4,"",4,"",5,""],["9c40","",7,""],["9c80","",7,"",7,"",10,"",14,"",4,"",6,"",5],["9d40","",7,"",4,"",9,"",6,""],["9d80","",9,"",5,"",6,"",12,"",4,"",10,"",5,"",5,"",6,"",10,""],["9e40","",7,"",32,"",7,"",6,"",6],["9e80","",9,"",17,"",13,"",11,"",12,"",12,""],["9f40","",6,"",10,"",4,"",10,"",7,""],["9f80","",13,"",12,"",4,"",4,"",5,"",4,"",4,"",6,"",5,"",8,"",9,"",4],["a040","",9,"",5,"",9,"",11,"",19],["a080","",9,"",6,"",4,"",11,"",11,"",6,""],["a1a1","",7,""],["a2a1","",9],["a2b1","",19,"",19,"",9],["a2e5","",9],["a2f1","",11],["a3a1","",88,""],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a6e0",""],["a6ee",""],["a6f4",""],["a7a1","",5,"",25],["a7d1","",5,"",25],["a840","",35,"",6],["a880","",7,""],["a8a1",""],["a8bd",""],["a8c0",""],["a8c5","",36],["a940","",8,""],["a959",""],["a95c",""],["a960","",9,"",8],["a980","",4,""],["a996",""],["a9a4","",75],["aa40","",5,"",5,"",8],["aa80","",7,"",10,""],["ab40","",11,"",4,"",5,"",4],["ab80","",6,"",4],["ac40","",10,"",8,"",5,"",4,"",11],["ac80","",6,"",12,"",4,""],["ad40","",10,"",7,"",15,"",12],["ad80","",9,"",8,"",6,""],["ae40","",6,"",7,"",4,""],["ae80","",7,"",6,"",4,""],["af40","",4,""],["af80",""],["b040","",6,"",5,"",4,"",6,"",7,""],["b080","",7,"",8,"",9,""],["b140","",4,"",7,"",10,""],["b180","",4,"",7,"",7,""],["b240","",11,"",5,"",11,"",4],["b280","",12,"",8,"",4,""],["b340","",5,""],["b380","",11,"",7,"",6,""],["b440","",7,"",9],["b480","",4,"",5,"",6,""],["b540","",5,"",9,"",4,"",14,"",4,"",8,""],["b580","",6,"",4,""],["b640","",6,"",11,"",10,"",4,"",5,""],["b680","",6,"",4,""],["b740","",14,"",5,"",9,"",4,"",16],["b780","",6,""],["b840","",4,"",10,"",10,"",9,"",5,""],["b880","",4,""],["b940","",5,"",10,"",6,""],["b980","",7,""],["ba40","",4,"",4,"",7,"",5,""],["ba80","",4,"",5,"",12,"",5,""],["bb40","",9,"",36,"",5,"",9],["bb80","",6,"",4,""],["bc40","",6,"",6,"",5,"",7,"",13,"",5],["bc80","",14,"",6,""],["bd40","",54,"",7],["bd80","",32,""],["be40","",12,"",6,"",42],["be80","",32,""],["bf40","",62],["bf80","",4,"",4,"",21,""],["c040","",35,"",23,""],["c080","",6,"",9,""],["c140","",4,"",7,"",4,"",4,"",6,""],["c180","",4,"",4,"",5,""],["c240","",6,"",5,""],["c280","",13,"",5,"",11,""],["c340","",5,"",4,"",6,""],["c380","",12,"",4,""],["c440","",5,"",4,"",4,"",5,"",4,""],["c480","",7,"",5,"",6,""],["c540","",14,"",4,"",5,"",4,"",5,""],["c580","",7,"",7,""],["c640",""],["c680","",4,"",9,""],["c740","",4,"",4,"",6,"",6,"",6,""],["c780",""],["c840","",4,"",5,"",5,"",7,"",5,"",7,""],["c880","",6,"",4,"",4,""],["c940","",4,"",7,"",12,""],["c980","",4,"",4,"",10,""],["ca40","",8,"",8,"",9,"",4,"",10],["ca80","",4,"",8,""],["cb40","",6,"",10,"",6,"",5,"",6,"",6,"",4,""],["cb80","",5,"",6,"",14,""],["cc40","",4,"",10,"",15,"",13,""],["cc80","",11,"",4,"",7,""],["cd40","",6,"",6,"",4,"",5,"",4,"",4,""],["cd80",""],["ce40","",6,"",5,"",7,""],["ce80","",4,"",6,"",4,""],["cf40","",4,"",4,"",6,"",9],["cf80","",5,"",7,"",4,""],["d040","",13,"",5,"",5,"",5,"",6,""],["d080","",4,"",4,"",5,""],["d140","",4,"",4,"",6,"",5],["d180","",4,"",4,"",4,""],["d240","",8,"",24,"",5,"",19,""],["d280","",26,""],["d340","",30,"",6],["d380","",4,"",5,"",21,""],["d440","",31,"",8,"",21],["d480","",25,"",6,""],["d540","",7,"",7,"",46],["d580","",32,""],["d640","",34,"",27],["d680","",30,""],["d740","",31,"",4,"",25],["d780","",24,""],["d840","",8,"",7,"",5,"",6,"",6,"",6,""],["d880","",6,"",20,""],["d940","",62],["d980","",32,""],["da40","",14,"",8,"",4,"",9,""],["da80","",12,""],["db40","",6,"",7,"",4,""],["db80","",4,"",5,"",11,""],["dc40","",4,"",6,"",6,"",11,"",6,"",7],["dc80","",10,"",21,""],["dd40","",62],["dd80","",32,""],["de40","",32,""],["de80","",4,""],["df40","",5,"",4,"",4,"",5,"",4,"",6,""],["df80","",4,""],["e040","",19,""],["e080","",10,"",6,"",8,""],["e140","",4,"",6,"",5,"",5,""],["e180","",10,"",9,"",8,""],["e240","",62],["e280","",32,"",5,""],["e340","",45,"",16],["e380","",7,"",24,""],["e440","",5,"",24,"",31],["e480","",32,""],["e540","",51,"",10],["e580","",31,""],["e640","",34,"",27],["e680","",29,""],["e740","",7,"",54],["e780","",32,"",6,"",4,""],["e840","",14,"",43,""],["e880","",20,""],["e940","",7,"",42],["e980","",32,""],["ea40","",27,"",6,""],["ea80","",4,"",12,""],["eb40","",9,"",7,"",9,"",6,""],["eb80","",4,""],["ec40","",8,"",4,"",18,"",7],["ec80","",4,"",7,"",4,"",4,""],["ed40","",6,"",46],["ed80","",4,"",23,""],["ee40","",62],["ee80","",32,"",4,"",6,""],["ef40","",5,"",37,"",4],["ef80","",30,"",4,"",8,""],["f040","",4,"",28,"",26],["f080","",9,"",12,"",4,"",6,""],["f140","",10,"",47],["f180","",32,""],["f240","",62],["f280","",32,""],["f340","",17,"",6,"",4,""],["f380","",8,"",6,""],["f440","",5,"",10,"",10,"",7,"",5],["f480","",32,""],["f540","",62],["f580","",32,""],["f640","",62],["f680","",32,"",5,"",5,"",4,"",7,""],["f740","",62],["f780","",4,"",4,""],["f840","",62],["f880","",32],["f940","",62],["f980","",32],["fa40","",62],["fa80","",32],["fb40","",27,"",9,""],["fb80","",5,"",8,"",5,""],["fc40","",8,"",4,"",8,"",6],["fc80","",4,"",5,"",8,""],["fd40","",4,"",4,"",10,"",38],["fd80","",5,"",11,"",4,""],["fe40",""]]')},function(t,e){function n(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=95},function(t,e,n){var r=n(7),i=n(2),o=n(69);t.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(8),i=n(155),o=n(22),a=n(9);t.exports=function(t,e){for(var n=i(e),s=a.f,u=o.f,c=0;c<n.length;c++){var l=n[c];r(t,l)||s(t,l,u(e,l))}}},function(t,e,n){var r=n(1);t.exports=r},function(t,e,n){var r=n(8),i=n(21),o=n(41).indexOf,a=n(40);t.exports=function(t,e){var n,s=i(t),u=0,c=[];for(n in s)!r(a,n)&&r(s,n)&&c.push(n);for(;e.length>u;)r(s,n=e[u++])&&(~o(c,n)||c.push(n));return c}},function(t,e,n){var r=n(76);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(t,e,n){"use strict";var r=n(0),i=n(12).filter,o=n(43),a=n(19),s=o("filter"),u=a("filter");r({target:"Array",proto:!0,forced:!s||!u},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var r=n(0),i=n(156);r({target:"Array",stat:!0,forced:!n(81)((function(t){Array.from(t)}))},{from:i})},function(t,e,n){var r=n(10);t.exports=function(t){var e=t.return;if(void 0!==e)return r(e.call(t)).value}},function(t,e,n){var r=n(30);t.exports=r("document","documentElement")},function(t,e,n){"use strict";var r=n(0),i=n(159),o=n(60),a=n(49),s=n(48),u=n(14),c=n(18),l=n(4),f=n(29),p=n(45),h=n(106),d=h.IteratorPrototype,g=h.BUGGY_SAFARI_ITERATORS,y=l("iterator"),m=function(){return this};t.exports=function(t,e,n,l,h,v,_){i(n,e,l);var b,x,w,E=function(t){if(t===h&&A)return A;if(!g&&t in C)return C[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},S=e+" Iterator",I=!1,C=t.prototype,N=C[y]||C["@@iterator"]||h&&C[h],A=!g&&N||E(h),O="Array"==e&&C.entries||N;if(O&&(b=o(O.call(new t)),d!==Object.prototype&&b.next&&(f||o(b)===d||(a?a(b,d):"function"!=typeof b[y]&&u(b,y,m)),s(b,S,!0,!0),f&&(p[S]=m))),"values"==h&&N&&"values"!==N.name&&(I=!0,A=function(){return N.call(this)}),f&&!_||C[y]===A||u(C,y,A),p[e]=A,h)if(x={values:E("values"),keys:v?A:E("keys"),entries:E("entries")},_)for(w in x)(g||I||!(w in C))&&c(C,w,x[w]);else r({target:e,proto:!0,forced:g||I},x);return x}},function(t,e,n){"use strict";var r,i,o,a=n(60),s=n(14),u=n(8),c=n(4),l=n(29),f=c("iterator"),p=!1;[].keys&&("next"in(o=[].keys())?(i=a(a(o)))!==Object.prototype&&(r=i):p=!0),null==r&&(r={}),l||u(r,f)||s(r,f,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:p}},function(t,e,n){"use strict";var r=n(0),i=n(38),o=n(21),a=n(33),s=[].join,u=i!=Object,c=a("join",",");r({target:"Array",proto:!0,forced:u||!c},{join:function(t){return s.call(o(this),void 0===t?",":t)}})},function(t,e,n){var r=n(0),i=n(162);r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},function(t,e,n){var r=n(0),i=n(11),o=n(59);r({target:"Object",stat:!0,forced:n(2)((function(){o(1)}))},{keys:function(t){return o(i(t))}})},function(t,e,n){var r=n(80),i=n(18),o=n(163);r||i(Object.prototype,"toString",o,{unsafe:!0})},function(t,e,n){"use strict";var r,i,o,a,s=n(0),u=n(29),c=n(1),l=n(30),f=n(164),p=n(18),h=n(112),d=n(48),g=n(62),y=n(6),m=n(44),v=n(85),_=n(71),b=n(165),x=n(81),w=n(34),E=n(86).set,S=n(166),I=n(167),C=n(168),N=n(114),A=n(169),O=n(24),P=n(53),T=n(4),M=n(61),L=n(56),R=T("species"),D="Promise",F=O.get,k=O.set,j=O.getterFor(D),B=f,G=c.TypeError,U=c.document,z=c.process,q=l("fetch"),V=N.f,Y=V,X=!!(U&&U.createEvent&&c.dispatchEvent),J="function"==typeof PromiseRejectionEvent,W=P(D,(function(){if(!(_(B)!==String(B))){if(66===L)return!0;if(!M&&!J)return!0}if(u&&!B.prototype.finally)return!0;if(L>=51&&/native code/.test(B))return!1;var t=B.resolve(1),e=function(t){t((function(){}),(function(){}))};return(t.constructor={})[R]=e,!(t.then((function(){}))instanceof e)})),H=W||!x((function(t){B.all(t).catch((function(){}))})),$=function(t){var e;return!(!y(t)||"function"!=typeof(e=t.then))&&e},K=function(t,e){if(!t.notified){t.notified=!0;var n=t.reactions;S((function(){for(var r=t.value,i=1==t.state,o=0;n.length>o;){var a,s,u,c=n[o++],l=i?c.ok:c.fail,f=c.resolve,p=c.reject,h=c.domain;try{l?(i||(2===t.rejection&&et(t),t.rejection=1),!0===l?a=r:(h&&h.enter(),a=l(r),h&&(h.exit(),u=!0)),a===c.promise?p(G("Promise-chain cycle")):(s=$(a))?s.call(a,f,p):f(a)):p(r)}catch(t){h&&!u&&h.exit(),p(t)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&Q(t)}))}},Z=function(t,e,n){var r,i;X?((r=U.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),c.dispatchEvent(r)):r={promise:e,reason:n},!J&&(i=c["on"+t])?i(r):"unhandledrejection"===t&&C("Unhandled promise rejection",n)},Q=function(t){E.call(c,(function(){var e,n=t.facade,r=t.value;if(tt(t)&&(e=A((function(){M?z.emit("unhandledRejection",r,n):Z("unhandledrejection",n,r)})),t.rejection=M||tt(t)?2:1,e.error))throw e.value}))},tt=function(t){return 1!==t.rejection&&!t.parent},et=function(t){E.call(c,(function(){var e=t.facade;M?z.emit("rejectionHandled",e):Z("rejectionhandled",e,t.value)}))},nt=function(t,e,n){return function(r){t(e,r,n)}},rt=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,K(t,!0))},it=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw G("Promise can't be resolved itself");var r=$(e);r?S((function(){var n={done:!1};try{r.call(e,nt(it,n,t),nt(rt,n,t))}catch(e){rt(n,e,t)}})):(t.value=e,t.state=1,K(t,!1))}catch(e){rt({done:!1},e,t)}}};W&&(B=function(t){v(this,B,D),m(t),r.call(this);var e=F(this);try{t(nt(it,e),nt(rt,e))}catch(t){rt(e,t)}},(r=function(t){k(this,{type:D,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=h(B.prototype,{then:function(t,e){var n=j(this),r=V(w(this,B));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=M?z.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&K(n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new r,e=F(t);this.promise=t,this.resolve=nt(it,e),this.reject=nt(rt,e)},N.f=V=function(t){return t===B||t===o?new i(t):Y(t)},u||"function"!=typeof f||(a=f.prototype.then,p(f.prototype,"then",(function(t,e){var n=this;return new B((function(t,e){a.call(n,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof q&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return I(B,q.apply(c,arguments))}}))),s({global:!0,wrap:!0,forced:W},{Promise:B}),d(B,D,!1,!0),g(D),o=l(D),s({target:D,stat:!0,forced:W},{reject:function(t){var e=V(this);return e.reject.call(void 0,t),e.promise}}),s({target:D,stat:!0,forced:u||W},{resolve:function(t){return I(u&&this===o?B:this,t)}}),s({target:D,stat:!0,forced:H},{all:function(t){var e=this,n=V(e),r=n.resolve,i=n.reject,o=A((function(){var n=m(e.resolve),o=[],a=0,s=1;b(t,(function(t){var u=a++,c=!1;o.push(void 0),s++,n.call(e,t).then((function(t){c||(c=!0,o[u]=t,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(t){var e=this,n=V(e),r=n.reject,i=A((function(){var i=m(e.resolve);b(t,(function(t){i.call(e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},function(t,e,n){var r=n(18);t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},function(t,e,n){var r=n(77);t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},function(t,e,n){"use strict";var r=n(44),i=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)};t.exports.f=function(t){return new i(t)}},function(t,e,n){"use strict";var r=n(2);function i(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=r((function(){var t=i("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=r((function(){var t=i("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},function(t,e,n){"use strict";var r=n(117).charAt,i=n(24),o=n(105),a=i.set,s=i.getterFor("String Iterator");o(String,"String",(function(t){a(this,{type:"String Iterator",string:String(t),index:0})}),(function(){var t,e=s(this),n=e.string,i=e.index;return i>=n.length?{value:void 0,done:!0}:(t=r(n,i),e.index+=t.length,{value:t,done:!1})}))},function(t,e,n){var r=n(15),i=n(13),o=function(t){return function(e,n){var o,a,s=String(i(e)),u=r(n),c=s.length;return u<0||u>=c?t?"":void 0:(o=s.charCodeAt(u))<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):a-56320+(o-55296<<10)+65536}};t.exports={codeAt:o(!1),charAt:o(!0)}},function(t,e,n){"use strict";var r=n(64),i=n(10),o=n(5),a=n(13),s=n(89),u=n(65);r("match",1,(function(t,e,n){return[function(e){var n=a(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var a=i(t),c=String(this);if(!a.global)return u(a,c);var l=a.unicode;a.lastIndex=0;for(var f,p=[],h=0;null!==(f=u(a,c));){var d=String(f[0]);p[h]=d,""===d&&(a.lastIndex=s(c,o(a.lastIndex),l)),h++}return 0===h?null:p}]}))},function(t,e,n){"use strict";var r=n(64),i=n(90),o=n(10),a=n(13),s=n(34),u=n(89),c=n(5),l=n(65),f=n(63),p=n(2),h=[].push,d=Math.min,g=!p((function(){return!RegExp(4294967295,"y")}));r("split",2,(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=String(a(this)),o=void 0===n?4294967295:n>>>0;if(0===o)return[];if(void 0===t)return[r];if(!i(t))return e.call(r,t,o);for(var s,u,c,l=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,g=new RegExp(t.source,p+"g");(s=f.call(g,r))&&!((u=g.lastIndex)>d&&(l.push(r.slice(d,s.index)),s.length>1&&s.index<r.length&&h.apply(l,s.slice(1)),c=s[0].length,d=u,l.length>=o));)g.lastIndex===s.index&&g.lastIndex++;return d===r.length?!c&&g.test("")||l.push(""):l.push(r.slice(d)),l.length>o?l.slice(0,o):l}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var i=a(this),o=null==e?void 0:e[t];return void 0!==o?o.call(e,i,n):r.call(String(i),e,n)},function(t,i){var a=n(r,t,this,i,r!==e);if(a.done)return a.value;var f=o(t),p=String(this),h=s(f,RegExp),y=f.unicode,m=(f.ignoreCase?"i":"")+(f.multiline?"m":"")+(f.unicode?"u":"")+(g?"y":"g"),v=new h(g?f:"^(?:"+f.source+")",m),_=void 0===i?4294967295:i>>>0;if(0===_)return[];if(0===p.length)return null===l(v,p)?[p]:[];for(var b=0,x=0,w=[];x<p.length;){v.lastIndex=g?x:0;var E,S=l(v,g?p:p.slice(x));if(null===S||(E=d(c(v.lastIndex+(g?0:x)),p.length))===b)x=u(p,x,y);else{if(w.push(p.slice(b,x)),w.length===_)return w;for(var I=1;I<=S.length-1;I++)if(w.push(S[I]),w.length===_)return w;x=b=E}}return w.push(p.slice(b)),w}]}),!g)},function(t,e,n){var r=n(1),i=n(121),o=n(58),a=n(14),s=n(4),u=s("iterator"),c=s("toStringTag"),l=o.values;for(var f in i){var p=r[f],h=p&&p.prototype;if(h){if(h[u]!==l)try{a(h,u,l)}catch(t){h[u]=l}if(h[c]||a(h,c,f),i[f])for(var d in o)if(h[d]!==o[d])try{a(h,d,o[d])}catch(t){h[d]=o[d]}}}},function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,e,n){"use strict";var r=n(123),i=n(173),o=n(174),a=n(176);function s(t,e){for(var n=new Array(t.length-1),r=1;r<t.length;++r)for(var i=n[r-1]=new Array(t.length-1),o=0,a=0;o<t.length;++o)o!==e&&(i[a++]=t[r][o]);return n}function u(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",u(t.slice(0,e)),",",u(t.slice(e)),")"].join("")}function c(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var e=[],n=0;n<t.length;++n)e.push(["scale(",u(c(s(t,n))),",",(r=n,1&r?"-":""),t[0][n],")"].join(""));return e;var r}function l(t){for(var e=[],n=[],l=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var r=0;r<t;++r)e[n][r]=["m",r,"[",t-n-1,"]"].join("")}return e}(t),f=[],p=0;p<t;++p)0==(1&p)?e.push.apply(e,c(s(l,p))):n.push.apply(n,c(s(l,p))),f.push("m"+p);var h=u(e),d=u(n),g="orientation"+t+"Exact",y=["function ",g,"(",f.join(),"){var p=",h,",n=",d,",d=sub(p,n);return d[d.length-1];};return ",g].join("");return new Function("sum","prod","scale","sub",y)(i,r,o,a)}var f=l(3),p=l(4),h=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var r,i=(t[1]-n[1])*(e[0]-n[0]),o=(t[0]-n[0])*(e[1]-n[1]),a=i-o;if(i>0){if(o<=0)return a;r=i+o}else{if(!(i<0))return a;if(o>=0)return a;r=-(i+o)}var s=33306690738754716e-32*r;return a>=s||a<=-s?a:f(t,e,n)},function(t,e,n,r){var i=t[0]-r[0],o=e[0]-r[0],a=n[0]-r[0],s=t[1]-r[1],u=e[1]-r[1],c=n[1]-r[1],l=t[2]-r[2],f=e[2]-r[2],h=n[2]-r[2],d=o*c,g=a*u,y=a*s,m=i*c,v=i*u,_=o*s,b=l*(d-g)+f*(y-m)+h*(v-_),x=7771561172376103e-31*((Math.abs(d)+Math.abs(g))*Math.abs(l)+(Math.abs(y)+Math.abs(m))*Math.abs(f)+(Math.abs(v)+Math.abs(_))*Math.abs(h));return b>x||-b>x?b:p(t,e,n,r)}];function d(t){var e=h[t.length];return e||(e=h[t.length]=l(t.length)),e.apply(void 0,t)}!function(){for(;h.length<=5;)h.push(l(h.length));for(var e=[],n=["slow"],r=0;r<=5;++r)e.push("a"+r),n.push("o"+r);var i=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(r=2;r<=5;++r)i.push("case ",r,":return o",r,"(",e.slice(0,r).join(),");");i.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(i.join(""));var o=Function.apply(void 0,n);for(t.exports=o.apply(void 0,[d].concat(h)),r=0;r<=5;++r)t.exports[r]=h[r]}()},function(t,e,n){"use strict";t.exports=function(t,e,n){var i=t*e,o=r*t,a=o-(o-t),s=t-a,u=r*e,c=u-(u-e),l=e-c,f=s*l-(i-a*c-s*c-a*l);if(n)return n[0]=f,n[1]=i,n;return[f,i]};var r=+(Math.pow(2,27)+1)},function(t,e,n){var r=n(4);e.f=r},function(t,e,n){var r=n(98),i=n(8),o=n(124),a=n(9).f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});i(e,t)||a(e,t,{value:o.f(t)})}},function(t,e,n){"use strict";var r=n(12).forEach,i=n(33),o=n(19),a=i("forEach"),s=o("forEach");t.exports=a&&s?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},function(t,e,n){"use strict";var r=n(0),i=n(41).indexOf,o=n(33),a=n(19),s=[].indexOf,u=!!s&&1/[1].indexOf(1,-0)<0,c=o("indexOf"),l=a("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:u||!c||!l},{indexOf:function(t){return u?s.apply(this,arguments)||0:i(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";var r=n(21),i=n(15),o=n(5),a=n(33),s=n(19),u=Math.min,c=[].lastIndexOf,l=!!c&&1/[1].lastIndexOf(1,-0)<0,f=a("lastIndexOf"),p=s("indexOf",{ACCESSORS:!0,1:0}),h=l||!f||!p;t.exports=h?function(t){if(l)return c.apply(this,arguments)||0;var e=r(this),n=o(e.length),a=n-1;for(arguments.length>1&&(a=u(a,i(arguments[1]))),a<0&&(a=n+a);a>=0;a--)if(a in e&&e[a]===t)return a||0;return-1}:c},function(t,e,n){"use strict";var r=n(0),i=n(31),o=n(15),a=n(5),s=n(11),u=n(55),c=n(54),l=n(43),f=n(19),p=l("splice"),h=f("splice",{ACCESSORS:!0,0:0,1:2}),d=Math.max,g=Math.min;r({target:"Array",proto:!0,forced:!p||!h},{splice:function(t,e){var n,r,l,f,p,h,y=s(this),m=a(y.length),v=i(t,m),_=arguments.length;if(0===_?n=r=0:1===_?(n=0,r=m-v):(n=_-2,r=g(d(o(e),0),m-v)),m+n-r>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(l=u(y,r),f=0;f<r;f++)(p=v+f)in y&&c(l,f,y[p]);if(l.length=r,n<r){for(f=v;f<m-r;f++)h=f+n,(p=f+r)in y?y[h]=y[p]:delete y[h];for(f=m;f>m-r+n;f--)delete y[f-1]}else if(n>r)for(f=m-r;f>v;f--)h=f+n-1,(p=f+r-1)in y?y[h]=y[p]:delete y[h];for(f=0;f<n;f++)y[f+v]=arguments[f+2];return y.length=m-r+n,l}})},function(t,e,n){"use strict";var r=n(1),i=n(7),o=n(131),a=n(14),s=n(112),u=n(2),c=n(85),l=n(15),f=n(5),p=n(132),h=n(197),d=n(60),g=n(49),y=n(25).f,m=n(9).f,v=n(91),_=n(48),b=n(24),x=b.get,w=b.set,E=r.ArrayBuffer,S=E,I=r.DataView,C=I&&I.prototype,N=Object.prototype,A=r.RangeError,O=h.pack,P=h.unpack,T=function(t){return[255&t]},M=function(t){return[255&t,t>>8&255]},L=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},R=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},D=function(t){return O(t,23,4)},F=function(t){return O(t,52,8)},k=function(t,e){m(t.prototype,e,{get:function(){return x(this)[e]}})},j=function(t,e,n,r){var i=p(n),o=x(t);if(i+e>o.byteLength)throw A("Wrong index");var a=x(o.buffer).bytes,s=i+o.byteOffset,u=a.slice(s,s+e);return r?u:u.reverse()},B=function(t,e,n,r,i,o){var a=p(n),s=x(t);if(a+e>s.byteLength)throw A("Wrong index");for(var u=x(s.buffer).bytes,c=a+s.byteOffset,l=r(+i),f=0;f<e;f++)u[c+f]=l[o?f:e-f-1]};if(o){if(!u((function(){E(1)}))||!u((function(){new E(-1)}))||u((function(){return new E,new E(1.5),new E(NaN),"ArrayBuffer"!=E.name}))){for(var G,U=(S=function(t){return c(this,S),new E(p(t))}).prototype=E.prototype,z=y(E),q=0;z.length>q;)(G=z[q++])in S||a(S,G,E[G]);U.constructor=S}g&&d(C)!==N&&g(C,N);var V=new I(new S(2)),Y=C.setInt8;V.setInt8(0,2147483648),V.setInt8(1,2147483649),!V.getInt8(0)&&V.getInt8(1)||s(C,{setInt8:function(t,e){Y.call(this,t,e<<24>>24)},setUint8:function(t,e){Y.call(this,t,e<<24>>24)}},{unsafe:!0})}else S=function(t){c(this,S,"ArrayBuffer");var e=p(t);w(this,{bytes:v.call(new Array(e),0),byteLength:e}),i||(this.byteLength=e)},I=function(t,e,n){c(this,I,"DataView"),c(t,S,"DataView");var r=x(t).byteLength,o=l(e);if(o<0||o>r)throw A("Wrong offset");if(o+(n=void 0===n?r-o:f(n))>r)throw A("Wrong length");w(this,{buffer:t,byteLength:n,byteOffset:o}),i||(this.buffer=t,this.byteLength=n,this.byteOffset=o)},i&&(k(S,"byteLength"),k(I,"buffer"),k(I,"byteLength"),k(I,"byteOffset")),s(I.prototype,{getInt8:function(t){return j(this,1,t)[0]<<24>>24},getUint8:function(t){return j(this,1,t)[0]},getInt16:function(t){var e=j(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=j(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return R(j(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return R(j(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return P(j(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return P(j(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){B(this,1,t,T,e)},setUint8:function(t,e){B(this,1,t,T,e)},setInt16:function(t,e){B(this,2,t,M,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){B(this,2,t,M,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){B(this,4,t,L,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){B(this,4,t,L,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){B(this,4,t,D,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){B(this,8,t,F,e,arguments.length>2?arguments[2]:void 0)}});_(S,"ArrayBuffer"),_(I,"DataView"),t.exports={ArrayBuffer:S,DataView:I}},function(t,e){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},function(t,e,n){var r=n(15),i=n(5);t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=i(e);if(e!==n)throw RangeError("Wrong length or index");return n}},function(t,e,n){var r=n(13),i="["+n(134)+"]",o=RegExp("^"+i+i+"*"),a=RegExp(i+i+"*$"),s=function(t){return function(e){var n=String(r(e));return 1&t&&(n=n.replace(o,"")),2&t&&(n=n.replace(a,"")),n}};t.exports={start:s(1),end:s(2),trim:s(3)}},function(t,e){t.exports="\t\n\v\f\r \u2028\u2029\ufeff"},function(t,e,n){"use strict";var r=n(0),i=n(15),o=n(200),a=n(93),s=n(2),u=1..toFixed,c=Math.floor,l=function(t,e,n){return 0===e?n:e%2==1?l(t,e-1,n*t):l(t*t,e/2,n)};r({target:"Number",proto:!0,forced:u&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){u.call({})}))},{toFixed:function(t){var e,n,r,s,u=o(this),f=i(t),p=[0,0,0,0,0,0],h="",d="0",g=function(t,e){for(var n=-1,r=e;++n<6;)r+=t*p[n],p[n]=r%1e7,r=c(r/1e7)},y=function(t){for(var e=6,n=0;--e>=0;)n+=p[e],p[e]=c(n/t),n=n%t*1e7},m=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==p[t]){var n=String(p[t]);e=""===e?n:e+a.call("0",7-n.length)+n}return e};if(f<0||f>20)throw RangeError("Incorrect fraction digits");if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(h="-",u=-u),u>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(u*l(2,69,1))-69)<0?u*l(2,-e,1):u/l(2,e,1),n*=4503599627370496,(e=52-e)>0){for(g(0,n),r=f;r>=7;)g(1e7,0),r-=7;for(g(l(10,r,1),0),r=e-1;r>=23;)y(1<<23),r-=23;y(1<<r),g(1,1),y(2),d=m()}else g(0,n),g(1<<-e,0),d=m()+a.call("0",f);return d=f>0?h+((s=d.length)<=f?"0."+a.call("0",f-s)+d:d.slice(0,s-f)+"."+d.slice(s-f)):h+d}})},function(t,e,n){var r=n(2);t.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(t,e,n){var r=n(90);t.exports=function(t){if(r(t))throw TypeError("The method doesn't accept regular expressions");return t}},function(t,e,n){var r=n(4)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,"/./"[t](e)}catch(t){}}return!1}},function(t,e,n){var r=n(13),i=/"/g;t.exports=function(t,e,n,o){var a=String(r(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+String(o).replace(i,"&quot;")+'"'),s+">"+a+"</"+e+">"}},function(t,e,n){var r=n(2);t.exports=function(t){return r((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},function(t,e,n){var r=n(220);t.exports=function(t,e){var n=r(t);if(n%e)throw RangeError("Wrong offset");return n}},function(t){t.exports=JSON.parse('[["a140","",62],["a180","",32],["a240","",62],["a280","",32],["a2ab","",5],["a2e3",""],["a2ef",""],["a2fd",""],["a340","",62],["a380","",31,""],["a440","",62],["a480","",32],["a4f4","",10],["a540","",62],["a580","",32],["a5f7","",7],["a640","",62],["a680","",32],["a6b9","",7],["a6d9","",6],["a6ec",""],["a6f3",""],["a6f6","",8],["a740","",62],["a780","",32],["a7c2","",14],["a7f2","",12],["a896","",10],["a8bc",""],["a8bf",""],["a8c1",""],["a8ea","",20],["a958",""],["a95b",""],["a95d",""],["a989","",11],["a997","",12],["a9f0","",14],["aaa1","",93],["aba1","",93],["aca1","",93],["ada1","",93],["aea1","",93],["afa1","",93],["d7fa","",4],["f8a1","",93],["f9a1","",93],["faa1","",93],["fba1","",93],["fca1","",93],["fda1","",93],["fe50",""],["fe80","",6,"",93]]')},function(t){t.exports=JSON.parse('[["0","\\u0000",127],["a140",""],["a1a1","",4,""],["a240","",7,""],["a2a1","",9,"",9,"",8,"",25,"",21],["a340","",16,"",6,"",16,"",6,"",10],["a3a1","",25,""],["a3e1",""],["a440",""],["a4a1",""],["a540",""],["a5a1",""],["a640",""],["a6a1",""],["a740",""],["a7a1",""],["a840",""],["a8a1",""],["a940",""],["a9a1",""],["aa40",""],["aaa1",""],["ab40",""],["aba1",""],["ac40",""],["aca1",""],["ad40",""],["ada1",""],["ae40",""],["aea1",""],["af40",""],["afa1",""],["b040",""],["b0a1",""],["b140",""],["b1a1",""],["b240",""],["b2a1",""],["b340",""],["b3a1",""],["b440",""],["b4a1",""],["b540",""],["b5a1",""],["b640",""],["b6a1",""],["b740",""],["b7a1",""],["b840",""],["b8a1",""],["b940",""],["b9a1",""],["ba40",""],["baa1",""],["bb40",""],["bba1",""],["bc40",""],["bca1",""],["bd40",""],["bda1",""],["be40",""],["bea1",""],["bf40",""],["bfa1",""],["c040",""],["c0a1",""],["c140",""],["c1a1",""],["c240",""],["c2a1",""],["c340",""],["c3a1",""],["c440",""],["c4a1",""],["c540",""],["c5a1",""],["c640",""],["c940",""],["c9a1",""],["ca40",""],["caa1",""],["cb40",""],["cba1",""],["cc40",""],["cca1",""],["cd40",""],["cda1",""],["ce40",""],["cea1",""],["cf40",""],["cfa1",""],["d040",""],["d0a1",""],["d140",""],["d1a1",""],["d240",""],["d2a1",""],["d340",""],["d3a1",""],["d440",""],["d4a1",""],["d540",""],["d5a1",""],["d640",""],["d6a1",""],["d740",""],["d7a1",""],["d840",""],["d8a1",""],["d940",""],["d9a1",""],["da40",""],["daa1",""],["db40",""],["dba1",""],["dc40",""],["dca1",""],["dd40",""],["dda1",""],["de40",""],["dea1",""],["df40",""],["dfa1",""],["e040",""],["e0a1",""],["e140",""],["e1a1",""],["e240",""],["e2a1",""],["e340",""],["e3a1",""],["e440",""],["e4a1",""],["e540",""],["e5a1",""],["e640",""],["e6a1",""],["e740",""],["e7a1",""],["e840",""],["e8a1",""],["e940",""],["e9a1",""],["ea40",""],["eaa1",""],["eb40",""],["eba1",""],["ec40",""],["eca1",""],["ed40",""],["eda1",""],["ee40",""],["eea1",""],["ef40",""],["efa1",""],["f040",""],["f0a1",""],["f140",""],["f1a1",""],["f240",""],["f2a1",""],["f340",""],["f3a1",""],["f440",""],["f4a1",""],["f540",""],["f5a1",""],["f640",""],["f6a1",""],["f740",""],["f7a1",""],["f840",""],["f8a1",""],["f940",""],["f9a1",""]]')},function(t,e,n){e.dash=n(276),e.readFile=n(145),e.readFileSync=n(147),e.writeFile=n(148),e.writeFileSync=n(150)},function(t,e,n){(function(e){var r=n(16),i=n(146);function o(t,e,n){var r=i(e);t.on("error",n),t.on("data",(function(t){r.push(t)})),t.on("end",(function(){n(null,r.value())}))}t.exports=function(t,n,i){switch(arguments.length<3&&(i=n,n=null),t){case"/dev/stdin":return o(e.stdin,n,i)}r.stat(t,(function(e,a){return e?i(e):a.isFile()?r.readFile(t,n,i):void o(r.createReadStream(t,n?{flags:n.flag||"r"}:{}),n,i)}))}}).call(this,n(26))},function(t,e,n){(function(e){function n(t){var n=[];return{push:function(t){n.push(t)},value:function(){return e.concat(n).toString(t)}}}t.exports=function(t){if(t){if("string"==typeof t)return n(t);if(null!==t.encoding)return n(t.encoding)}return r=[],{push:function(t){r.push(t)},value:function(){return e.concat(r)}};var r}}).call(this,n(35).Buffer)},function(t,e,n){(function(e){var r=n(16),i=n(146);t.exports=function(t,n){if(r.statSync(t).isFile())return r.readFileSync(t,n);for(var a=r.openSync(t,n&&n.flag||"r"),s=i(n);;){try{var u=new e(o),c=r.readSync(a,u,0,o)}catch(t){if("EOF"===t.code)break;throw r.closeSync(a),t}if(0===c)break;s.push(u.slice(0,c))}return r.closeSync(a),s.value()};var o=65536}).call(this,n(35).Buffer)},function(t,e,n){(function(e){var r=n(16),i=n(149);function o(t,e,n,r,o){t.on("error",(function(t){o("EPIPE"===t.code?null:t)})),t[e](i(n,r),(function(t){o(t&&"EPIPE"===t.code?null:t)}))}t.exports=function(t,n,i,a){switch(arguments.length<4&&(a=i,i=null),t){case"/dev/stdout":return o(e.stdout,"write",n,i,a);case"/dev/stderr":return o(e.stderr,"write",n,i,a)}r.stat(t,(function(e,s){return e&&"ENOENT"!==e.code?a(e):s&&s.isFile()?r.writeFile(t,n,i,a):void o(r.createWriteStream(t,i?{flags:i.flag||"w"}:{}),"end",n,i,a)}))}}).call(this,n(26))},function(t,e,n){(function(e){t.exports=function(t,n){return"string"==typeof t?new e(t,"string"==typeof n?n:n&&null!==n.encoding?n.encoding:"utf8"):t}}).call(this,n(35).Buffer)},function(t,e,n){var r=n(16),i=n(149);t.exports=function(t,e,n){var o;try{o=r.statSync(t)}catch(t){if("ENOENT"!==t.code)throw t}if(!o||o.isFile())r.writeFileSync(t,e,n);else{for(var a=r.openSync(t,n&&n.flag||"w"),s=0,u=(e=i(e,n)).length;s<u;)try{s+=r.writeSync(a,e,s,u-s,null)}catch(t){if("EPIPE"===t.code)break;throw r.closeSync(a),t}r.closeSync(a)}}},function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),o=function(t,e){for(var n=e&&e.plainObjects?Object.create(null):{},r=0;r<t.length;++r)void 0!==t[r]&&(n[r]=t[r]);return n};t.exports={arrayToObject:o,assign:function(t,e){return Object.keys(e).reduce((function(t,n){return t[n]=e[n],t}),t)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],n=[],r=0;r<e.length;++r)for(var i=e[r],o=i.obj[i.prop],a=Object.keys(o),s=0;s<a.length;++s){var u=a[s],c=o[u];"object"==typeof c&&null!==c&&-1===n.indexOf(c)&&(e.push({obj:o,prop:u}),n.push(c))}return function(t){for(var e;t.length;){var n=t.pop();if(e=n.obj[n.prop],Array.isArray(e)){for(var r=[],i=0;i<e.length;++i)void 0!==e[i]&&r.push(e[i]);n.obj[n.prop]=r}}return e}(e)},decode:function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}},encode:function(t){if(0===t.length)return t;for(var e="string"==typeof t?t:String(t),n="",r=0;r<e.length;++r){var o=e.charCodeAt(r);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?n+=e.charAt(r):o<128?n+=i[o]:o<2048?n+=i[192|o>>6]+i[128|63&o]:o<55296||o>=57344?n+=i[224|o>>12]+i[128|o>>6&63]+i[128|63&o]:(r+=1,o=65536+((1023&o)<<10|1023&e.charCodeAt(r)),n+=i[240|o>>18]+i[128|o>>12&63]+i[128|o>>6&63]+i[128|63&o])}return n},isBuffer:function(t){return null!=t&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},merge:function t(e,n,i){if(!n)return e;if("object"!=typeof n){if(Array.isArray(e))e.push(n);else{if("object"!=typeof e)return[e,n];(i.plainObjects||i.allowPrototypes||!r.call(Object.prototype,n))&&(e[n]=!0)}return e}if("object"!=typeof e)return[e].concat(n);var a=e;return Array.isArray(e)&&!Array.isArray(n)&&(a=o(e,i)),Array.isArray(e)&&Array.isArray(n)?(n.forEach((function(n,o){r.call(e,o)?e[o]&&"object"==typeof e[o]?e[o]=t(e[o],n,i):e.push(n):e[o]=n})),e):Object.keys(n).reduce((function(e,o){var a=n[o];return r.call(e,o)?e[o]=t(e[o],a,i):e[o]=a,e}),a)}}},function(t,e,n){"use strict";var r=String.prototype.replace,i=/%20/g;t.exports={default:"RFC3986",formatters:{RFC1738:function(t){return r.call(t,i,"+")},RFC3986:function(t){return t}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},function(t,e,n){"use strict";var r=n(170),i=n(172),o=n(177),a=n(178),s=n(122)[3];function u(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;for(var o,s=function(t){for(var e=t[0],n=t[0],r=t[0],o=t[0],s=0;s<t.length;s++){var u=t[s];u[0]<e[0]&&(e=u),u[0]>r[0]&&(r=u),u[1]<n[1]&&(n=u),u[1]>o[1]&&(o=u)}var c=[e,n,r,o],l=c.slice();for(s=0;s<t.length;s++)a(t[s],c)||l.push(t[s]);var f=i(l),p=[];for(s=0;s<f.length;s++)p.push(l[f[s]]);return p}(t),u=r(16,["[0]","[1]","[0]","[1]"]).load(t),l=[],f=0;f<s.length;f++){var p=s[f];u.remove(p),o=g(p,o),l.push(o)}var h=r(16);for(f=0;f<l.length;f++)h.insert(d(l[f]));for(var m=e*e,v=n*n;l.length;){var _=l.shift(),b=_.p,x=_.next.p,w=y(b,x);if(!(w<v)){var E=w/m;(p=c(u,_.prev.p,b,x,_.next.next.p,E,h))&&Math.min(y(p,b),y(p,x))<=E&&(l.push(_),l.push(g(p,_)),u.remove(p),h.remove(_),h.insert(d(_)),h.insert(d(_.next)))}}_=o;var S=[];do{S.push(_.p),_=_.next}while(_!==o);return S.push(_.p),S}function c(t,e,n,r,i,a,s){for(var u=new o(null,l),c=t.data;c;){for(var p=0;p<c.children.length;p++){var d=c.children[p],g=c.leaf?m(d,n,r):f(n,r,d);g>a||u.push({node:d,dist:g})}for(;u.length&&!u.peek().node.children;){var y=u.pop(),v=y.node,_=m(v,e,n),b=m(v,r,i);if(y.dist<_&&y.dist<b&&h(n,v,s)&&h(r,v,s))return v}(c=u.pop())&&(c=c.node)}return null}function l(t,e){return t.dist-e.dist}function f(t,e,n){if(p(t,n)||p(e,n))return 0;var r=v(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===r)return 0;var i=v(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===i)return 0;var o=v(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var a=v(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===a?0:Math.min(r,i,o,a)}function p(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function h(t,e,n){for(var r,i,o,a,u=Math.min(t[0],e[0]),c=Math.min(t[1],e[1]),l=Math.max(t[0],e[0]),f=Math.max(t[1],e[1]),p=n.search({minX:u,minY:c,maxX:l,maxY:f}),h=0;h<p.length;h++)if(r=p[h].p,i=p[h].next.p,o=t,r!==(a=e)&&i!==o&&s(r,i,o)>0!=s(r,i,a)>0&&s(o,a,r)>0!=s(o,a,i)>0)return!1;return!0}function d(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function g(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function y(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function m(t,e,n){var r=e[0],i=e[1],o=n[0]-r,a=n[1]-i;if(0!==o||0!==a){var s=((t[0]-r)*o+(t[1]-i)*a)/(o*o+a*a);s>1?(r=n[0],i=n[1]):s>0&&(r+=o*s,i+=a*s)}return(o=t[0]-r)*o+(a=t[1]-i)*a}function v(t,e,n,r,i,o,a,s){var u,c,l,f,p=n-t,h=r-e,d=a-i,g=s-o,y=t-i,m=e-o,v=p*p+h*h,_=p*d+h*g,b=d*d+g*g,x=p*y+h*m,w=d*y+g*m,E=v*b-_*_,S=E,I=E;0===E?(c=0,S=1,f=w,I=b):(f=v*w-_*x,(c=_*w-b*x)<0?(c=0,f=w,I=b):c>S&&(c=S,f=w+_,I=b)),f<0?(f=0,-x<0?c=0:-x>v?c=S:(c=-x,S=v)):f>I&&(f=I,-x+_<0?c=0:-x+_>v?c=S:(c=-x+_,S=v));var C=(1-(l=0===f?0:f/I))*i+l*a-((1-(u=0===c?0:c/S))*t+u*n),N=(1-l)*o+l*s-((1-u)*e+u*r);return C*C+N*N}t.exports=u,t.exports.default=u},function(t,e,n){var r=n(1),i=n(71),o=r.WeakMap;t.exports="function"==typeof o&&/native code/.test(i(o))},function(t,e,n){var r=n(30),i=n(25),o=n(75),a=n(10);t.exports=r("Reflect","ownKeys")||function(t){var e=i.f(a(t)),n=o.f;return n?e.concat(n(t)):e}},function(t,e,n){"use strict";var r=n(32),i=n(11),o=n(157),a=n(78),s=n(5),u=n(54),c=n(79);t.exports=function(t){var e,n,l,f,p,h,d=i(t),g="function"==typeof this?this:Array,y=arguments.length,m=y>1?arguments[1]:void 0,v=void 0!==m,_=c(d),b=0;if(v&&(m=r(m,y>2?arguments[2]:void 0,2)),null==_||g==Array&&a(_))for(n=new g(e=s(d.length));e>b;b++)h=v?m(d[b],b):d[b],u(n,b,h);else for(p=(f=_.call(d)).next,n=new g;!(l=p.call(f)).done;b++)h=v?o(f,m,[l.value,b],!0):l.value,u(n,b,h);return n.length=b,n}},function(t,e,n){var r=n(10),i=n(103);t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(e){throw i(t),e}}},function(t,e,n){var r=n(7),i=n(9),o=n(10),a=n(59);t.exports=r?Object.defineProperties:function(t,e){o(t);for(var n,r=a(e),s=r.length,u=0;s>u;)i.f(t,n=r[u++],e[n]);return t}},function(t,e,n){"use strict";var r=n(106).IteratorPrototype,i=n(47),o=n(27),a=n(48),s=n(45),u=function(){return this};t.exports=function(t,e,n){var c=e+" Iterator";return t.prototype=i(r,{next:o(1,n)}),a(t,c,!1,!0),s[c]=u,t}},function(t,e,n){var r=n(2);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},function(t,e,n){var r=n(6);t.exports=function(t){if(!r(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},function(t,e,n){"use strict";var r=n(7),i=n(2),o=n(59),a=n(75),s=n(68),u=n(11),c=n(38),l=Object.assign,f=Object.defineProperty;t.exports=!l||i((function(){if(r&&1!==l({b:1},l(f({},"a",{enumerable:!0,get:function(){f(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol();return t[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(t){e[t]=t})),7!=l({},t)[n]||"abcdefghijklmnopqrst"!=o(l({},e)).join("")}))?function(t,e){for(var n=u(t),i=arguments.length,l=1,f=a.f,p=s.f;i>l;)for(var h,d=c(arguments[l++]),g=f?o(d).concat(f(d)):o(d),y=g.length,m=0;y>m;)h=g[m++],r&&!p.call(d,h)||(n[h]=d[h]);return n}:l},function(t,e,n){"use strict";var r=n(80),i=n(57);t.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},function(t,e,n){var r=n(1);t.exports=r.Promise},function(t,e,n){var r=n(10),i=n(78),o=n(5),a=n(32),s=n(79),u=n(103),c=function(t,e){this.stopped=t,this.result=e};t.exports=function(t,e,n){var l,f,p,h,d,g,y,m=n&&n.that,v=!(!n||!n.AS_ENTRIES),_=!(!n||!n.IS_ITERATOR),b=!(!n||!n.INTERRUPTED),x=a(e,m,1+v+b),w=function(t){return l&&u(l),new c(!0,t)},E=function(t){return v?(r(t),b?x(t[0],t[1],w):x(t[0],t[1])):b?x(t,w):x(t)};if(_)l=t;else{if("function"!=typeof(f=s(t)))throw TypeError("Target is not iterable");if(i(f)){for(p=0,h=o(t.length);h>p;p++)if((d=E(t[p]))&&d instanceof c)return d;return new c(!1)}l=f.call(t)}for(g=l.next;!(y=g.call(l)).done;){try{d=E(y.value)}catch(t){throw u(l),t}if("object"==typeof d&&d&&d instanceof c)return d}return new c(!1)}},function(t,e,n){var r,i,o,a,s,u,c,l,f=n(1),p=n(22).f,h=n(86).set,d=n(113),g=n(61),y=f.MutationObserver||f.WebKitMutationObserver,m=f.document,v=f.process,_=f.Promise,b=p(f,"queueMicrotask"),x=b&&b.value;x||(r=function(){var t,e;for(g&&(t=v.domain)&&t.exit();i;){e=i.fn,i=i.next;try{e()}catch(t){throw i?a():o=void 0,t}}o=void 0,t&&t.enter()},!d&&!g&&y&&m?(s=!0,u=m.createTextNode(""),new y(r).observe(u,{characterData:!0}),a=function(){u.data=s=!s}):_&&_.resolve?(c=_.resolve(void 0),l=c.then,a=function(){l.call(c,r)}):a=g?function(){v.nextTick(r)}:function(){h.call(f,r)}),t.exports=x||function(t){var e={fn:t,next:void 0};o&&(o.next=e),i||(i=e,a()),o=e}},function(t,e,n){var r=n(10),i=n(6),o=n(114);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){var r=n(1);t.exports=function(t,e){var n=r.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}},function(t,e){t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},function(t,e,n){"use strict";t.exports=i,t.exports.default=i;var r=n(171);function i(t,e){if(!(this instanceof i))return new i(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function o(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function a(t,e){s(t,0,t.children.length,e,t)}function s(t,e,n,r,i){i||(i=g(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,a=e;a<n;a++)o=t.children[a],u(i,t.leaf?r(o):o);return i}function u(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function c(t,e){return t.minX-e.minX}function l(t,e){return t.minY-e.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function p(t){return t.maxX-t.minX+(t.maxY-t.minY)}function h(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function d(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function g(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y(t,e,n,i,o){for(var a,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=i||(a=e+Math.ceil((n-e)/i/2)*i,r(t,a,e,n,o),s.push(e,a,a,n))}i.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!d(t,e))return n;for(var i,o,a,s,u=[];e;){for(i=0,o=e.children.length;i<o;i++)a=e.children[i],d(t,s=e.leaf?r(a):a)&&(e.leaf?n.push(a):h(t,s)?this._all(a,n):u.push(a));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!d(t,e))return!1;for(var r,i,o,a,s=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],d(t,a=e.leaf?n(o):o)){if(e.leaf||h(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=g([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,a,s=this.data,u=this.toBBox(t),c=[],l=[];s||c.length;){if(s||(s=c.pop(),r=c[c.length-1],n=l.pop(),a=!0),s.leaf&&-1!==(i=o(t,s.children,e)))return s.children.splice(i,1),c.push(s),this._condense(c),this;a||s.leaf||!h(s,u)?r?(n++,s=r.children[n],a=!1):s=null:(c.push(s),l.push(n),n=0,r=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:c,compareMinY:l,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,s=this._maxEntries;if(o<=s)return a(i=g(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(i=g([])).leaf=!1,i.height=r;var u,c,l,f,p=Math.ceil(o/s),h=p*Math.ceil(Math.sqrt(s));for(y(t,e,n,h,this.compareMinX),u=e;u<=n;u+=h)for(y(t,u,l=Math.min(u+h-1,n),p,this.compareMinY),c=u;c<=l;c+=p)f=Math.min(c+p-1,l),i.children.push(this._build(t,c,f,r-1));return a(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,a,s,u,c,l,p,h,d;r.push(e),!e.leaf&&r.length-1!==n;){for(l=p=1/0,i=0,o=e.children.length;i<o;i++)u=f(a=e.children[i]),h=t,d=a,(c=(Math.max(d.maxX,h.maxX)-Math.min(d.minX,h.minX))*(Math.max(d.maxY,h.maxY)-Math.min(d.minY,h.minY))-u)<p?(p=c,l=u<l?u:l,s=a):c===p&&u<l&&(l=u,s=a);e=s||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],a=this._chooseSubtree(i,this.data,e,o);for(a.children.push(t),u(a,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),s=g(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,a(n,this.toBBox),a(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=g([t,e]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,a,u,c,l,p,h,d,g,y,m,v;for(c=l=1/0,r=e;r<=n-e;r++)i=s(t,0,r,this.toBBox),o=s(t,r,n,this.toBBox),h=i,d=o,g=void 0,y=void 0,m=void 0,v=void 0,g=Math.max(h.minX,d.minX),y=Math.max(h.minY,d.minY),m=Math.min(h.maxX,d.maxX),v=Math.min(h.maxY,d.maxY),a=Math.max(0,m-g)*Math.max(0,v-y),u=f(i)+f(o),a<c?(c=a,p=r,l=u<l?u:l):a===c&&u<l&&(l=u,p=r);return p},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:c,i=t.leaf?this.compareMinY:l;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,a=this.toBBox,c=s(t,0,e,a),l=s(t,n-e,n,a),f=p(c)+p(l);for(i=e;i<n-e;i++)o=t.children[i],u(c,t.leaf?a(o):o),f+=p(c);for(i=n-e-1;i>=e;i--)o=t.children[i],u(l,t.leaf?a(o):o),f+=p(l);return f},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)u(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():a(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},function(t,e,n){t.exports=function(){"use strict";function t(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function e(t,e){return t<e?-1:t>e?1:0}return function(n,r,i,o,a){!function e(n,r,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,u=r-i+1,c=Math.log(s),l=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*l*(s-l)/s)*(u-s/2<0?-1:1),p=Math.max(i,Math.floor(r-u*l/s+f)),h=Math.min(o,Math.floor(r+(s-u)*l/s+f));e(n,r,p,h,a)}var d=n[r],g=i,y=o;for(t(n,i,r),a(n[o],d)>0&&t(n,i,o);g<y;){for(t(n,g,y),g++,y--;a(n[g],d)<0;)g++;for(;a(n[y],d)>0;)y--}0===a(n[i],d)?t(n,i,y):(y++,t(n,y,o)),y<=r&&(i=y+1),r<=y&&(o=y-1)}}(n,r,i||0,o||n.length-1,a||e)}}()},function(t,e,n){"use strict";t.exports=function(t){var e=t.length;if(e<3){for(var n=new Array(e),i=0;i<e;++i)n[i]=i;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:n}var o=new Array(e);for(i=0;i<e;++i)o[i]=i;o.sort((function(e,n){var r=t[e][0]-t[n][0];return r||t[e][1]-t[n][1]}));var a=[o[0],o[1]],s=[o[0],o[1]];for(i=2;i<e;++i){for(var u=o[i],c=t[u],l=a.length;l>1&&r(t[a[l-2]],t[a[l-1]],c)<=0;)l-=1,a.pop();for(a.push(u),l=s.length;l>1&&r(t[s[l-2]],t[s[l-1]],c)>=0;)l-=1,s.pop();s.push(u)}n=new Array(s.length+a.length-2);for(var f=0,p=(i=0,a.length);i<p;++i)n[f++]=a[i];for(var h=s.length-2;h>0;--h)n[f++]=s[h];return n};var r=n(122)[3]},function(t,e,n){"use strict";t.exports=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);if(i)return[i,n];return[n]}(t[0],e[0]);var i,o,a=new Array(n+r),s=0,u=0,c=0,l=Math.abs,f=t[u],p=l(f),h=e[c],d=l(h);p<d?(o=f,(u+=1)<n&&(f=t[u],p=l(f))):(o=h,(c+=1)<r&&(h=e[c],d=l(h)));u<n&&p<d||c>=r?(i=f,(u+=1)<n&&(f=t[u],p=l(f))):(i=h,(c+=1)<r&&(h=e[c],d=l(h)));var g,y,m=i+o,v=m-i,_=o-v,b=_,x=m;for(;u<n&&c<r;)p<d?(i=f,(u+=1)<n&&(f=t[u],p=l(f))):(i=h,(c+=1)<r&&(h=e[c],d=l(h))),(_=(o=b)-(v=(m=i+o)-i))&&(a[s++]=_),b=x-((g=x+m)-(y=g-x))+(m-y),x=g;for(;u<n;)(_=(o=b)-(v=(m=(i=f)+o)-i))&&(a[s++]=_),b=x-((g=x+m)-(y=g-x))+(m-y),x=g,(u+=1)<n&&(f=t[u]);for(;c<r;)(_=(o=b)-(v=(m=(i=h)+o)-i))&&(a[s++]=_),b=x-((g=x+m)-(y=g-x))+(m-y),x=g,(c+=1)<r&&(h=e[c]);b&&(a[s++]=b);x&&(a[s++]=x);s||(a[s++]=0);return a.length=s,a}},function(t,e,n){"use strict";var r=n(123),i=n(175);t.exports=function(t,e){var n=t.length;if(1===n){var o=r(t[0],e);return o[0]?o:[o[1]]}var a=new Array(2*n),s=[.1,.1],u=[.1,.1],c=0;r(t[0],e,s),s[0]&&(a[c++]=s[0]);for(var l=1;l<n;++l){r(t[l],e,u);var f=s[1];i(f,u[0],s),s[0]&&(a[c++]=s[0]);var p=u[1],h=s[1],d=p+h,g=h-(d-p);s[1]=d,g&&(a[c++]=g)}s[1]&&(a[c++]=s[1]);0===c&&(a[c++]=0);return a.length=c,a}},function(t,e,n){"use strict";t.exports=function(t,e,n){var r=t+e,i=r-t,o=e-i,a=t-(r-i);if(n)return n[0]=a+o,n[1]=r,n;return[a+o,r]}},function(t,e,n){"use strict";t.exports=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);if(i)return[i,n];return[n]}(t[0],-e[0]);var i,o,a=new Array(n+r),s=0,u=0,c=0,l=Math.abs,f=t[u],p=l(f),h=-e[c],d=l(h);p<d?(o=f,(u+=1)<n&&(f=t[u],p=l(f))):(o=h,(c+=1)<r&&(h=-e[c],d=l(h)));u<n&&p<d||c>=r?(i=f,(u+=1)<n&&(f=t[u],p=l(f))):(i=h,(c+=1)<r&&(h=-e[c],d=l(h)));var g,y,m=i+o,v=m-i,_=o-v,b=_,x=m;for(;u<n&&c<r;)p<d?(i=f,(u+=1)<n&&(f=t[u],p=l(f))):(i=h,(c+=1)<r&&(h=-e[c],d=l(h))),(_=(o=b)-(v=(m=i+o)-i))&&(a[s++]=_),b=x-((g=x+m)-(y=g-x))+(m-y),x=g;for(;u<n;)(_=(o=b)-(v=(m=(i=f)+o)-i))&&(a[s++]=_),b=x-((g=x+m)-(y=g-x))+(m-y),x=g,(u+=1)<n&&(f=t[u]);for(;c<r;)(_=(o=b)-(v=(m=(i=h)+o)-i))&&(a[s++]=_),b=x-((g=x+m)-(y=g-x))+(m-y),x=g,(c+=1)<r&&(h=-e[c]);b&&(a[s++]=b);x&&(a[s++]=x);s||(a[s++]=0);return a.length=s,a}},function(t,e,n){"use strict";function r(t,e){if(!(this instanceof r))return new r(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||i,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function i(t,e){return t<e?-1:t>e?1:0}t.exports=r,t.exports.default=r,r.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r},_down:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),a=o+1,s=e[o];if(a<this.length&&n(e[a],s)<0&&(o=a,s=e[a]),n(s,i)>=0)break;e[t]=s,t=o}e[t]=i}}},function(t,e){t.exports=function(t,e){for(var n=t[0],r=t[1],i=!1,o=0,a=e.length-1;o<e.length;a=o++){var s=e[o][0],u=e[o][1],c=e[a][0],l=e[a][1];u>r!=l>r&&n<(c-s)*(r-u)/(l-u)+s&&(i=!i)}return i}},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n(180),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(51))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,i,o,a,s,u=1,c={},l=!1,f=t.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(t);p=p&&p.setTimeout?p:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick((function(){d(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){d(t.data)},r=function(t){o.port2.postMessage(t)}):f&&"onreadystatechange"in f.createElement("script")?(i=f.documentElement,r=function(t){var e=f.createElement("script");e.onreadystatechange=function(){d(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):r=function(t){setTimeout(d,0,t)}:(a="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&d(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),r=function(e){t.postMessage(a+e,"*")}),p.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return c[u]=i,r(u),u++},p.clearImmediate=h}function h(t){delete c[t]}function d(t){if(l)setTimeout(d,0,t);else{var e=c[t];if(e){l=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{h(t),l=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(51),n(26))},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e,n){"use strict";var r=n(0),i=n(1),o=n(30),a=n(29),s=n(7),u=n(76),c=n(100),l=n(2),f=n(8),p=n(42),h=n(6),d=n(10),g=n(11),y=n(21),m=n(28),v=n(27),_=n(47),b=n(59),x=n(25),w=n(183),E=n(75),S=n(22),I=n(9),C=n(68),N=n(14),A=n(18),O=n(73),P=n(52),T=n(40),M=n(39),L=n(4),R=n(124),D=n(125),F=n(48),k=n(24),j=n(12).forEach,B=P("hidden"),G=L("toPrimitive"),U=k.set,z=k.getterFor("Symbol"),q=Object.prototype,V=i.Symbol,Y=o("JSON","stringify"),X=S.f,J=I.f,W=w.f,H=C.f,$=O("symbols"),K=O("op-symbols"),Z=O("string-to-symbol-registry"),Q=O("symbol-to-string-registry"),tt=O("wks"),et=i.QObject,nt=!et||!et.prototype||!et.prototype.findChild,rt=s&&l((function(){return 7!=_(J({},"a",{get:function(){return J(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=X(q,e);r&&delete q[e],J(t,e,n),r&&t!==q&&J(q,e,r)}:J,it=function(t,e){var n=$[t]=_(V.prototype);return U(n,{type:"Symbol",tag:t,description:e}),s||(n.description=e),n},ot=c?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof V},at=function(t,e,n){t===q&&at(K,e,n),d(t);var r=m(e,!0);return d(n),f($,r)?(n.enumerable?(f(t,B)&&t[B][r]&&(t[B][r]=!1),n=_(n,{enumerable:v(0,!1)})):(f(t,B)||J(t,B,v(1,{})),t[B][r]=!0),rt(t,r,n)):J(t,r,n)},st=function(t,e){d(t);var n=y(e),r=b(n).concat(ft(n));return j(r,(function(e){s&&!ut.call(n,e)||at(t,e,n[e])})),t},ut=function(t){var e=m(t,!0),n=H.call(this,e);return!(this===q&&f($,e)&&!f(K,e))&&(!(n||!f(this,e)||!f($,e)||f(this,B)&&this[B][e])||n)},ct=function(t,e){var n=y(t),r=m(e,!0);if(n!==q||!f($,r)||f(K,r)){var i=X(n,r);return!i||!f($,r)||f(n,B)&&n[B][r]||(i.enumerable=!0),i}},lt=function(t){var e=W(y(t)),n=[];return j(e,(function(t){f($,t)||f(T,t)||n.push(t)})),n},ft=function(t){var e=t===q,n=W(e?K:y(t)),r=[];return j(n,(function(t){!f($,t)||e&&!f(q,t)||r.push($[t])})),r};(u||(A((V=function(){if(this instanceof V)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=M(t),n=function(t){this===q&&n.call(K,t),f(this,B)&&f(this[B],e)&&(this[B][e]=!1),rt(this,e,v(1,t))};return s&&nt&&rt(q,e,{configurable:!0,set:n}),it(e,t)}).prototype,"toString",(function(){return z(this).tag})),A(V,"withoutSetter",(function(t){return it(M(t),t)})),C.f=ut,I.f=at,S.f=ct,x.f=w.f=lt,E.f=ft,R.f=function(t){return it(L(t),t)},s&&(J(V.prototype,"description",{configurable:!0,get:function(){return z(this).description}}),a||A(q,"propertyIsEnumerable",ut,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!u,sham:!u},{Symbol:V}),j(b(tt),(function(t){D(t)})),r({target:"Symbol",stat:!0,forced:!u},{for:function(t){var e=String(t);if(f(Z,e))return Z[e];var n=V(e);return Z[e]=n,Q[n]=e,n},keyFor:function(t){if(!ot(t))throw TypeError(t+" is not a symbol");if(f(Q,t))return Q[t]},useSetter:function(){nt=!0},useSimple:function(){nt=!1}}),r({target:"Object",stat:!0,forced:!u,sham:!s},{create:function(t,e){return void 0===e?_(t):st(_(t),e)},defineProperty:at,defineProperties:st,getOwnPropertyDescriptor:ct}),r({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:lt,getOwnPropertySymbols:ft}),r({target:"Object",stat:!0,forced:l((function(){E.f(1)}))},{getOwnPropertySymbols:function(t){return E.f(g(t))}}),Y)&&r({target:"JSON",stat:!0,forced:!u||l((function(){var t=V();return"[null]"!=Y([t])||"{}"!=Y({a:t})||"{}"!=Y(Object(t))}))},{stringify:function(t,e,n){for(var r,i=[t],o=1;arguments.length>o;)i.push(arguments[o++]);if(r=e,(h(e)||void 0!==t)&&!ot(t))return p(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!ot(e))return e}),i[1]=e,Y.apply(null,i)}});V.prototype[G]||N(V.prototype,G,V.prototype.valueOf),F(V,"Symbol"),T[B]=!0},function(t,e,n){var r=n(21),i=n(25).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return a.slice()}}(t):i(r(t))}},function(t,e,n){"use strict";var r=n(0),i=n(7),o=n(1),a=n(8),s=n(6),u=n(9).f,c=n(97),l=o.Symbol;if(i&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var f={},p=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof p?new l(t):void 0===t?l():l(t);return""===t&&(f[e]=!0),e};c(p,l);var h=p.prototype=l.prototype;h.constructor=p;var d=h.toString,g="Symbol(test)"==String(l("test")),y=/^Symbol\((.*)\)[^)]+$/;u(h,"description",{configurable:!0,get:function(){var t=s(this)?this.valueOf():this,e=d.call(t);if(a(f,t))return"";var n=g?e.slice(7,-1):e.replace(y,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:p})}},function(t,e,n){n(125)("iterator")},function(t,e,n){var r=n(0),i=n(91),o=n(46);r({target:"Array",proto:!0},{fill:i}),o("fill")},function(t,e,n){"use strict";var r=n(0),i=n(12).find,o=n(46),a=n(19),s=!0,u=a("find");"find"in[]&&Array(1).find((function(){s=!1})),r({target:"Array",proto:!0,forced:s||!u},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o("find")},function(t,e,n){"use strict";var r=n(0),i=n(189),o=n(11),a=n(5),s=n(15),u=n(55);r({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,e=o(this),n=a(e.length),r=u(e,0);return r.length=i(r,e,e,n,0,void 0===t?1:s(t)),r}})},function(t,e,n){"use strict";var r=n(42),i=n(5),o=n(32),a=function(t,e,n,s,u,c,l,f){for(var p,h=u,d=0,g=!!l&&o(l,f,3);d<s;){if(d in n){if(p=g?g(n[d],d,e):n[d],c>0&&r(p))h=a(t,e,p,i(p.length),h,c-1)-1;else{if(h>=9007199254740991)throw TypeError("Exceed the acceptable array length");t[h]=p}h++}d++}return h};t.exports=a},function(t,e,n){"use strict";var r=n(0),i=n(126);r({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},function(t,e,n){"use strict";var r=n(0),i=n(41).includes,o=n(46);r({target:"Array",proto:!0,forced:!n(19)("indexOf",{ACCESSORS:!0,1:0})},{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o("includes")},function(t,e,n){var r=n(0),i=n(128);r({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},function(t,e,n){"use strict";var r=n(0),i=n(6),o=n(42),a=n(31),s=n(5),u=n(21),c=n(54),l=n(4),f=n(43),p=n(19),h=f("slice"),d=p("slice",{ACCESSORS:!0,0:0,1:2}),g=l("species"),y=[].slice,m=Math.max;r({target:"Array",proto:!0,forced:!h||!d},{slice:function(t,e){var n,r,l,f=u(this),p=s(f.length),h=a(t,p),d=a(void 0===e?p:e,p);if(o(f)&&("function"!=typeof(n=f.constructor)||n!==Array&&!o(n.prototype)?i(n)&&null===(n=n[g])&&(n=void 0):n=void 0,n===Array||void 0===n))return y.call(f,h,d);for(r=new(void 0===n?Array:n)(m(d-h,0)),l=0;h<d;h++,l++)h in f&&c(r,l,f[h]);return r.length=l,r}})},function(t,e,n){"use strict";var r=n(0),i=n(12).some,o=n(33),a=n(19),s=o("some"),u=a("some");r({target:"Array",proto:!0,forced:!s||!u},{some:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){n(46)("flat")},function(t,e,n){"use strict";var r=n(0),i=n(1),o=n(130),a=n(62),s=o.ArrayBuffer;r({global:!0,forced:i.ArrayBuffer!==s},{ArrayBuffer:s}),a("ArrayBuffer")},function(t,e){var n=Math.abs,r=Math.pow,i=Math.floor,o=Math.log,a=Math.LN2;t.exports={pack:function(t,e,s){var u,c,l,f=new Array(s),p=8*s-e-1,h=(1<<p)-1,d=h>>1,g=23===e?r(2,-24)-r(2,-77):0,y=t<0||0===t&&1/t<0?1:0,m=0;for((t=n(t))!=t||t===1/0?(c=t!=t?1:0,u=h):(u=i(o(t)/a),t*(l=r(2,-u))<1&&(u--,l*=2),(t+=u+d>=1?g/l:g*r(2,1-d))*l>=2&&(u++,l/=2),u+d>=h?(c=0,u=h):u+d>=1?(c=(t*l-1)*r(2,e),u+=d):(c=t*r(2,d-1)*r(2,e),u=0));e>=8;f[m++]=255&c,c/=256,e-=8);for(u=u<<e|c,p+=e;p>0;f[m++]=255&u,u/=256,p-=8);return f[--m]|=128*y,f},unpack:function(t,e){var n,i=t.length,o=8*i-e-1,a=(1<<o)-1,s=a>>1,u=o-7,c=i-1,l=t[c--],f=127&l;for(l>>=7;u>0;f=256*f+t[c],c--,u-=8);for(n=f&(1<<-u)-1,f>>=-u,u+=e;u>0;n=256*n+t[c],c--,u-=8);if(0===f)f=1-s;else{if(f===a)return n?NaN:l?-1/0:1/0;n+=r(2,e),f-=s}return(l?-1:1)*n*r(2,f-e)}}},function(t,e,n){var r=n(7),i=n(9).f,o=Function.prototype,a=o.toString,s=/^\s*function ([^ (]*)/;r&&!("name"in o)&&i(o,"name",{configurable:!0,get:function(){try{return a.call(this).match(s)[1]}catch(t){return""}}})},function(t,e,n){"use strict";var r=n(7),i=n(1),o=n(53),a=n(18),s=n(8),u=n(23),c=n(92),l=n(28),f=n(2),p=n(47),h=n(25).f,d=n(22).f,g=n(9).f,y=n(133).trim,m=i.Number,v=m.prototype,_="Number"==u(p(v)),b=function(t){var e,n,r,i,o,a,s,u,c=l(t,!1);if("string"==typeof c&&c.length>2)if(43===(e=(c=y(c)).charCodeAt(0))||45===e){if(88===(n=c.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+c}for(a=(o=c.slice(2)).length,s=0;s<a;s++)if((u=o.charCodeAt(s))<48||u>i)return NaN;return parseInt(o,r)}return+c};if(o("Number",!m(" 0o1")||!m("0b1")||m("+0x1"))){for(var x,w=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof w&&(_?f((function(){v.valueOf.call(n)})):"Number"!=u(n))?c(new m(b(e)),n,w):b(e)},E=r?h(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),S=0;E.length>S;S++)s(m,x=E[S])&&!s(w,x)&&g(w,x,d(m,x));w.prototype=v,v.constructor=w,a(i,"Number",w)}},function(t,e,n){var r=n(23);t.exports=function(t){if("number"!=typeof t&&"Number"!=r(t))throw TypeError("Incorrect invocation");return+t}},function(t,e,n){var r=n(0),i=n(136),o=n(2),a=n(6),s=n(202).onFreeze,u=Object.freeze;r({target:"Object",stat:!0,forced:o((function(){u(1)})),sham:!i},{freeze:function(t){return u&&a(t)?u(s(t)):t}})},function(t,e,n){var r=n(40),i=n(6),o=n(8),a=n(9).f,s=n(39),u=n(136),c=s("meta"),l=0,f=Object.isExtensible||function(){return!0},p=function(t){a(t,c,{value:{objectID:"O"+ ++l,weakData:{}}})},h=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,c)){if(!f(t))return"F";if(!e)return"E";p(t)}return t[c].objectID},getWeakData:function(t,e){if(!o(t,c)){if(!f(t))return!0;if(!e)return!1;p(t)}return t[c].weakData},onFreeze:function(t){return u&&h.REQUIRED&&f(t)&&!o(t,c)&&p(t),t}};r[c]=!0},function(t,e,n){var r=n(0),i=n(2),o=n(21),a=n(22).f,s=n(7),u=i((function(){a(1)}));r({target:"Object",stat:!0,forced:!s||u,sham:!s},{getOwnPropertyDescriptor:function(t,e){return a(o(t),e)}})},function(t,e,n){var r=n(7),i=n(1),o=n(53),a=n(92),s=n(9).f,u=n(25).f,c=n(90),l=n(88),f=n(115),p=n(18),h=n(2),d=n(24).set,g=n(62),y=n(4)("match"),m=i.RegExp,v=m.prototype,_=/a/g,b=/a/g,x=new m(_)!==_,w=f.UNSUPPORTED_Y;if(r&&o("RegExp",!x||w||h((function(){return b[y]=!1,m(_)!=_||m(b)==b||"/a/i"!=m(_,"i")})))){for(var E=function(t,e){var n,r=this instanceof E,i=c(t),o=void 0===e;if(!r&&i&&t.constructor===E&&o)return t;x?i&&!o&&(t=t.source):t instanceof E&&(o&&(e=l.call(t)),t=t.source),w&&(n=!!e&&e.indexOf("y")>-1)&&(e=e.replace(/y/g,""));var s=a(x?new m(t,e):m(t,e),r?this:v,E);return w&&n&&d(s,{sticky:n}),s},S=function(t){t in E||s(E,t,{configurable:!0,get:function(){return m[t]},set:function(e){m[t]=e}})},I=u(m),C=0;I.length>C;)S(I[C++]);v.constructor=E,E.prototype=v,p(i,"RegExp",E)}g("RegExp")},function(t,e,n){"use strict";var r=n(18),i=n(10),o=n(2),a=n(88),s=RegExp.prototype,u=s.toString,c=o((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),l="toString"!=u.name;(c||l)&&r(RegExp.prototype,"toString",(function(){var t=i(this),e=String(t.source),n=t.flags;return"/"+e+"/"+String(void 0===n&&t instanceof RegExp&&!("flags"in s)?a.call(t):n)}),{unsafe:!0})},function(t,e,n){"use strict";var r=n(0),i=n(137),o=n(13);r({target:"String",proto:!0,forced:!n(138)("includes")},{includes:function(t){return!!~String(o(this)).indexOf(i(t),arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";var r=n(0),i=n(208).start;r({target:"String",proto:!0,forced:n(209)},{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var r=n(5),i=n(93),o=n(13),a=Math.ceil,s=function(t){return function(e,n,s){var u,c,l=String(o(e)),f=l.length,p=void 0===s?" ":String(s),h=r(n);return h<=f||""==p?l:(u=h-f,(c=i.call(p,a(u/p.length))).length>u&&(c=c.slice(0,u)),t?l+c:c+l)}};t.exports={start:s(!1),end:s(!0)}},function(t,e,n){var r=n(77);t.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r)},function(t,e,n){n(0)({target:"String",proto:!0},{repeat:n(93)})},function(t,e,n){"use strict";var r=n(64),i=n(10),o=n(11),a=n(5),s=n(15),u=n(13),c=n(89),l=n(65),f=Math.max,p=Math.min,h=Math.floor,d=/\$([$&'`]|\d\d?|<[^>]*>)/g,g=/\$([$&'`]|\d\d?)/g;r("replace",2,(function(t,e,n,r){var y=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,m=r.REPLACE_KEEPS_$0,v=y?"$":"$0";return[function(n,r){var i=u(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,i,r):e.call(String(i),n,r)},function(t,r){if(!y&&m||"string"==typeof r&&-1===r.indexOf(v)){var o=n(e,t,this,r);if(o.done)return o.value}var u=i(t),h=String(this),d="function"==typeof r;d||(r=String(r));var g=u.global;if(g){var b=u.unicode;u.lastIndex=0}for(var x=[];;){var w=l(u,h);if(null===w)break;if(x.push(w),!g)break;""===String(w[0])&&(u.lastIndex=c(h,a(u.lastIndex),b))}for(var E,S="",I=0,C=0;C<x.length;C++){w=x[C];for(var N=String(w[0]),A=f(p(s(w.index),h.length),0),O=[],P=1;P<w.length;P++)O.push(void 0===(E=w[P])?E:String(E));var T=w.groups;if(d){var M=[N].concat(O,A,h);void 0!==T&&M.push(T);var L=String(r.apply(void 0,M))}else L=_(N,h,A,O,T,r);A>=I&&(S+=h.slice(I,A)+L,I=A+N.length)}return S+h.slice(I)}];function _(t,n,r,i,a,s){var u=r+t.length,c=i.length,l=g;return void 0!==a&&(a=o(a),l=d),e.call(s,l,(function(e,o){var s;switch(o.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,r);case"'":return n.slice(u);case"<":s=a[o.slice(1,-1)];break;default:var l=+o;if(0===l)return e;if(l>c){var f=h(l/10);return 0===f?e:f<=c?void 0===i[f-1]?o.charAt(1):i[f-1]+o.charAt(1):e}s=i[l-1]}return void 0===s?"":s}))}}))},function(t,e,n){"use strict";var r=n(64),i=n(10),o=n(13),a=n(213),s=n(65);r("search",1,(function(t,e,n){return[function(e){var n=o(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var o=i(t),u=String(this),c=o.lastIndex;a(c,0)||(o.lastIndex=0);var l=s(o,u);return a(o.lastIndex,c)||(o.lastIndex=c),null===l?-1:l.index}]}))},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,n){"use strict";var r,i=n(0),o=n(22).f,a=n(5),s=n(137),u=n(13),c=n(138),l=n(29),f="".startsWith,p=Math.min,h=c("startsWith");i({target:"String",proto:!0,forced:!!(l||h||(r=o(String.prototype,"startsWith"),!r||r.writable))&&!h},{startsWith:function(t){var e=String(u(this));s(t);var n=a(p(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return f?f.call(e,r,n):e.slice(n,n+r.length)===r}})},function(t,e,n){"use strict";var r=n(0),i=n(133).trim;r({target:"String",proto:!0,forced:n(216)("trim")},{trim:function(){return i(this)}})},function(t,e,n){var r=n(2),i=n(134);t.exports=function(t){return r((function(){return!!i[t]()||""!=""[t]()||i[t].name!==t}))}},function(t,e,n){"use strict";var r=n(0),i=n(139);r({target:"String",proto:!0,forced:n(140)("anchor")},{anchor:function(t){return i(this,"a","name",t)}})},function(t,e,n){n(50)("Float64",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){var r=n(1),i=n(2),o=n(81),a=n(3).NATIVE_ARRAY_BUFFER_VIEWS,s=r.ArrayBuffer,u=r.Int8Array;t.exports=!a||!i((function(){u(1)}))||!i((function(){new u(-1)}))||!o((function(t){new u,new u(null),new u(1.5),new u(t)}),!0)||i((function(){return 1!==new u(new s(2),1,void 0).length}))},function(t,e,n){var r=n(15);t.exports=function(t){var e=r(t);if(e<0)throw RangeError("The argument can't be less than 0");return e}},function(t,e,n){var r=n(11),i=n(5),o=n(79),a=n(78),s=n(32),u=n(3).aTypedArrayConstructor;t.exports=function(t){var e,n,c,l,f,p,h=r(t),d=arguments.length,g=d>1?arguments[1]:void 0,y=void 0!==g,m=o(h);if(null!=m&&!a(m))for(p=(f=m.call(h)).next,h=[];!(l=p.call(f)).done;)h.push(l.value);for(y&&d>2&&(g=s(g,arguments[2],2)),n=i(h.length),c=new(u(this))(n),e=0;n>e;e++)c[e]=y?g(h[e],e):h[e];return c}},function(t,e,n){n(50)("Int32",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(50)("Uint8",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(50)("Uint16",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(50)("Uint32",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){"use strict";var r=n(3),i=n(227),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("copyWithin",(function(t,e){return i.call(o(this),t,e,arguments.length>2?arguments[2]:void 0)}))},function(t,e,n){"use strict";var r=n(11),i=n(31),o=n(5),a=Math.min;t.exports=[].copyWithin||function(t,e){var n=r(this),s=o(n.length),u=i(t,s),c=i(e,s),l=arguments.length>2?arguments[2]:void 0,f=a((void 0===l?s:i(l,s))-c,s-u),p=1;for(c<u&&u<c+f&&(p=-1,c+=f-1,u+=f-1);f-- >0;)c in n?n[u]=n[c]:delete n[u],u+=p,c+=p;return n}},function(t,e,n){"use strict";var r=n(3),i=n(12).every,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("every",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(3),i=n(91),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("fill",(function(t){return i.apply(o(this),arguments)}))},function(t,e,n){"use strict";var r=n(3),i=n(12).filter,o=n(34),a=r.aTypedArray,s=r.aTypedArrayConstructor;(0,r.exportTypedArrayMethod)("filter",(function(t){for(var e=i(a(this),t,arguments.length>1?arguments[1]:void 0),n=o(this,this.constructor),r=0,u=e.length,c=new(s(n))(u);u>r;)c[r]=e[r++];return c}))},function(t,e,n){"use strict";var r=n(3),i=n(12).find,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("find",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(3),i=n(12).findIndex,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("findIndex",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(3),i=n(12).forEach,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("forEach",(function(t){i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(3),i=n(41).includes,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("includes",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(3),i=n(41).indexOf,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("indexOf",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(1),i=n(3),o=n(58),a=n(4)("iterator"),s=r.Uint8Array,u=o.values,c=o.keys,l=o.entries,f=i.aTypedArray,p=i.exportTypedArrayMethod,h=s&&s.prototype[a],d=!!h&&("values"==h.name||null==h.name),g=function(){return u.call(f(this))};p("entries",(function(){return l.call(f(this))})),p("keys",(function(){return c.call(f(this))})),p("values",g,!d),p(a,g,!d)},function(t,e,n){"use strict";var r=n(3),i=r.aTypedArray,o=r.exportTypedArrayMethod,a=[].join;o("join",(function(t){return a.apply(i(this),arguments)}))},function(t,e,n){"use strict";var r=n(3),i=n(128),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("lastIndexOf",(function(t){return i.apply(o(this),arguments)}))},function(t,e,n){"use strict";var r=n(3),i=n(12).map,o=n(34),a=r.aTypedArray,s=r.aTypedArrayConstructor;(0,r.exportTypedArrayMethod)("map",(function(t){return i(a(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(s(o(t,t.constructor)))(e)}))}))},function(t,e,n){"use strict";var r=n(3),i=n(84).left,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduce",(function(t){return i(o(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(3),i=n(84).right,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduceRight",(function(t){return i(o(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(3),i=r.aTypedArray,o=r.exportTypedArrayMethod,a=Math.floor;o("reverse",(function(){for(var t,e=i(this).length,n=a(e/2),r=0;r<n;)t=this[r],this[r++]=this[--e],this[e]=t;return this}))},function(t,e,n){"use strict";var r=n(3),i=n(5),o=n(141),a=n(11),s=n(2),u=r.aTypedArray;(0,r.exportTypedArrayMethod)("set",(function(t){u(this);var e=o(arguments.length>1?arguments[1]:void 0,1),n=this.length,r=a(t),s=i(r.length),c=0;if(s+e>n)throw RangeError("Wrong length");for(;c<s;)this[e+c]=r[c++]}),s((function(){new Int8Array(1).set({})})))},function(t,e,n){"use strict";var r=n(3),i=n(34),o=n(2),a=r.aTypedArray,s=r.aTypedArrayConstructor,u=r.exportTypedArrayMethod,c=[].slice;u("slice",(function(t,e){for(var n=c.call(a(this),t,e),r=i(this,this.constructor),o=0,u=n.length,l=new(s(r))(u);u>o;)l[o]=n[o++];return l}),o((function(){new Int8Array(1).slice()})))},function(t,e,n){"use strict";var r=n(3),i=n(12).some,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("some",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(3),i=r.aTypedArray,o=r.exportTypedArrayMethod,a=[].sort;o("sort",(function(t){return a.call(i(this),t)}))},function(t,e,n){"use strict";var r=n(3),i=n(5),o=n(31),a=n(34),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("subarray",(function(t,e){var n=s(this),r=n.length,u=o(t,r);return new(a(n,n.constructor))(n.buffer,n.byteOffset+u*n.BYTES_PER_ELEMENT,i((void 0===e?r:o(e,r))-u))}))},function(t,e,n){"use strict";var r=n(1),i=n(3),o=n(2),a=r.Int8Array,s=i.aTypedArray,u=i.exportTypedArrayMethod,c=[].toLocaleString,l=[].slice,f=!!a&&o((function(){c.call(new a(1))}));u("toLocaleString",(function(){return c.apply(f?l.call(s(this)):s(this),arguments)}),o((function(){return[1,2].toLocaleString()!=new a([1,2]).toLocaleString()}))||!o((function(){a.prototype.toLocaleString.call([1,2])})))},function(t,e,n){"use strict";var r=n(3).exportTypedArrayMethod,i=n(2),o=n(1).Uint8Array,a=o&&o.prototype||{},s=[].toString,u=[].join;i((function(){s.call({})}))&&(s=function(){return u.call(this)});var c=a.toString!=s;r("toString",s,c)},function(t,e,n){var r=n(1),i=n(121),o=n(126),a=n(14);for(var s in i){var u=r[s],c=u&&u.prototype;if(c&&c.forEach!==o)try{a(c,"forEach",o)}catch(t){c.forEach=o}}},function(t,e,n){var r=n(0),i=n(1),o=n(86);r({global:!0,bind:!0,enumerable:!0,forced:!i.setImmediate||!i.clearImmediate},{setImmediate:o.set,clearImmediate:o.clear})},function(t,e,n){"use strict";n(0)({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})},function(t,e,n){"use strict";e.byteLength=function(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=c(t),a=r[0],s=r[1],u=new o(function(t,e,n){return 3*(e+n)/4-n}(0,a,s)),l=0,f=s>0?a-4:a;for(n=0;n<f;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=255&e;2===s&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,u[l++]=255&e);1===s&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,u[l++]=e>>8&255,u[l++]=255&e);return u},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],a=0,s=n-i;a<s;a+=16383)o.push(l(t,a,a+16383>s?s:a+16383));1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,n){for(var i,o,a=[],s=e;s<n;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?i-1:0,p=n?-1:1,h=t[e+f];for(f+=p,o=h&(1<<-l)-1,h>>=-l,l+=s;l>0;o=256*o+t[e+f],f+=p,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+t[e+f],f+=p,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=c}return(h?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,d=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+f>=1?p/u:p*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(e*u-1)*Math.pow(2,i),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[n+h]=255&s,h+=d,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[n+h]=255&a,h+=d,a/=256,c-=8);t[n+h-d]|=128*g}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){"use strict";(function(e){var r=n(36).Buffer,i=n(257),o=t.exports;o.encodings=null,o.defaultCharUnicode="",o.defaultCharSingleByte="?",o.encode=function(t,e,n){t=""+(t||"");var i=o.getEncoder(e,n),a=i.write(t),s=i.end();return s&&s.length>0?r.concat([a,s]):a},o.decode=function(t,e,n){"string"==typeof t&&(o.skipDecodeWarning||(console.error("Iconv-lite warning: decode()-ing strings is deprecated. Refer to https://github.com/ashtuchkin/iconv-lite/wiki/Use-Buffers-when-decoding"),o.skipDecodeWarning=!0),t=r.from(""+(t||""),"binary"));var i=o.getDecoder(e,n),a=i.write(t),s=i.end();return s?a+s:a},o.encodingExists=function(t){try{return o.getCodec(t),!0}catch(t){return!1}},o.toEncoding=o.encode,o.fromEncoding=o.decode,o._codecDataCache={},o.getCodec=function(t){o.encodings||(o.encodings=n(258));for(var e=o._canonicalizeEncoding(t),r={};;){var i=o._codecDataCache[e];if(i)return i;var a=o.encodings[e];switch(typeof a){case"string":e=a;break;case"object":for(var s in a)r[s]=a[s];r.encodingName||(r.encodingName=e),e=a.type;break;case"function":return r.encodingName||(r.encodingName=e),i=new a(r,o),o._codecDataCache[r.encodingName]=i,i;default:throw new Error("Encoding not recognized: '"+t+"' (searched as: '"+e+"')")}}},o._canonicalizeEncoding=function(t){return(""+t).toLowerCase().replace(/:\d{4}$|[^0-9a-z]/g,"")},o.getEncoder=function(t,e){var n=o.getCodec(t),r=new n.encoder(e,n);return n.bomAware&&e&&e.addBOM&&(r=new i.PrependBOM(r,e)),r},o.getDecoder=function(t,e){var n=o.getCodec(t),r=new n.decoder(e,n);return!n.bomAware||e&&!1===e.stripBOM||(r=new i.StripBOM(r,e)),r};var a=void 0!==e&&e.versions&&e.versions.node;if(a){var s=a.split(".").map(Number);(s[0]>0||s[1]>=10)&&n(274)(o),n(275)(o)}}).call(this,n(26))},function(t,e,n){"use strict";function r(t,e){this.encoder=t,this.addBOM=!0}function i(t,e){this.decoder=t,this.pass=!1,this.options=e||{}}e.PrependBOM=r,r.prototype.write=function(t){return this.addBOM&&(t="\ufeff"+t,this.addBOM=!1),this.encoder.write(t)},r.prototype.end=function(){return this.encoder.end()},e.StripBOM=i,i.prototype.write=function(t){var e=this.decoder.write(t);return this.pass||!e||("\ufeff"===e[0]&&(e=e.slice(1),"function"==typeof this.options.stripBOM&&this.options.stripBOM()),this.pass=!0),e},i.prototype.end=function(){return this.decoder.end()}},function(t,e,n){"use strict";for(var r=[n(259),n(262),n(263),n(264),n(265),n(266),n(267),n(268)],i=0;i<r.length;i++){t=r[i];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}},function(t,e,n){"use strict";var r=n(36).Buffer;function i(t,e){this.enc=t.encodingName,this.bomAware=t.bomAware,"base64"===this.enc?this.encoder=u:"cesu8"===this.enc&&(this.enc="utf8",this.encoder=c,""!==r.from("eda0bdedb2a9","hex").toString()&&(this.decoder=l,this.defaultCharUnicode=e.defaultCharUnicode))}t.exports={utf8:{type:"_internal",bomAware:!0},cesu8:{type:"_internal",bomAware:!0},unicode11utf8:"utf8",ucs2:{type:"_internal",bomAware:!0},utf16le:"ucs2",binary:{type:"_internal"},base64:{type:"_internal"},hex:{type:"_internal"},_internal:i},i.prototype.encoder=s,i.prototype.decoder=a;var o=n(260).StringDecoder;function a(t,e){o.call(this,e.enc)}function s(t,e){this.enc=e.enc}function u(t,e){this.prevStr=""}function c(t,e){}function l(t,e){this.acc=0,this.contBytes=0,this.accBytes=0,this.defaultCharUnicode=e.defaultCharUnicode}o.prototype.end||(o.prototype.end=function(){}),a.prototype=o.prototype,s.prototype.write=function(t){return r.from(t,this.enc)},s.prototype.end=function(){},u.prototype.write=function(t){var e=(t=this.prevStr+t).length-t.length%4;return this.prevStr=t.slice(e),t=t.slice(0,e),r.from(t,"base64")},u.prototype.end=function(){return r.from(this.prevStr,"base64")},c.prototype.write=function(t){for(var e=r.alloc(3*t.length),n=0,i=0;i<t.length;i++){var o=t.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=192+(o>>>6),e[n++]=128+(63&o)):(e[n++]=224+(o>>>12),e[n++]=128+(o>>>6&63),e[n++]=128+(63&o))}return e.slice(0,n)},c.prototype.end=function(){},l.prototype.write=function(t){for(var e=this.acc,n=this.contBytes,r=this.accBytes,i="",o=0;o<t.length;o++){var a=t[o];128!=(192&a)?(n>0&&(i+=this.defaultCharUnicode,n=0),a<128?i+=String.fromCharCode(a):a<224?(e=31&a,n=1,r=1):a<240?(e=15&a,n=2,r=1):i+=this.defaultCharUnicode):n>0?(e=e<<6|63&a,r++,0===--n&&(i+=2===r&&e<128&&e>0||3===r&&e<2048?this.defaultCharUnicode:String.fromCharCode(e))):i+=this.defaultCharUnicode}return this.acc=e,this.contBytes=n,this.accBytes=r,i},l.prototype.end=function(){var t=0;return this.contBytes>0&&(t+=this.defaultCharUnicode),t}},function(t,e,n){"use strict";var r=n(261).Buffer,i=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=u,this.end=c,e=4;break;case"utf8":this.fillLast=s,e=4;break;case"base64":this.text=l,this.end=f,e=3;break;default:return this.write=p,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function s(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,""}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function c(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function l(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function f(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function p(t){return t.toString(this.encoding)}function h(t){return t&&t.length?this.write(t):""}e.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e},o.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var i=a(e[r]);if(i>=0)return i>0&&(t.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=a(e[r]))>=0)return i>0&&(t.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=a(e[r]))>=0)return i>0&&(2===i?i=0:t.lastNeed=i-3),i;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,n){var r=n(35),i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function a(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=a),o(i,a),a.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},a.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},function(t,e,n){"use strict";var r=n(36).Buffer;function i(){}function o(){}function a(){this.overflowByte=-1}function s(t,e){this.iconv=e}function u(t,e){void 0===(t=t||{}).addBOM&&(t.addBOM=!0),this.encoder=e.iconv.getEncoder("utf-16le",t)}function c(t,e){this.decoder=null,this.initialBytes=[],this.initialBytesLen=0,this.options=t||{},this.iconv=e.iconv}function l(t,e){var n=e||"utf-16le";if(t.length>=2)if(254==t[0]&&255==t[1])n="utf-16be";else if(255==t[0]&&254==t[1])n="utf-16le";else{for(var r=0,i=0,o=Math.min(t.length-t.length%2,64),a=0;a<o;a+=2)0===t[a]&&0!==t[a+1]&&i++,0!==t[a]&&0===t[a+1]&&r++;i>r?n="utf-16be":i<r&&(n="utf-16le")}return n}e.utf16be=i,i.prototype.encoder=o,i.prototype.decoder=a,i.prototype.bomAware=!0,o.prototype.write=function(t){for(var e=r.from(t,"ucs2"),n=0;n<e.length;n+=2){var i=e[n];e[n]=e[n+1],e[n+1]=i}return e},o.prototype.end=function(){},a.prototype.write=function(t){if(0==t.length)return"";var e=r.alloc(t.length+1),n=0,i=0;for(-1!==this.overflowByte&&(e[0]=t[0],e[1]=this.overflowByte,n=1,i=2);n<t.length-1;n+=2,i+=2)e[i]=t[n+1],e[i+1]=t[n];return this.overflowByte=n==t.length-1?t[t.length-1]:-1,e.slice(0,i).toString("ucs2")},a.prototype.end=function(){},e.utf16=s,s.prototype.encoder=u,s.prototype.decoder=c,u.prototype.write=function(t){return this.encoder.write(t)},u.prototype.end=function(){return this.encoder.end()},c.prototype.write=function(t){if(!this.decoder){if(this.initialBytes.push(t),this.initialBytesLen+=t.length,this.initialBytesLen<16)return"";var e=l(t=r.concat(this.initialBytes),this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(e,this.options),this.initialBytes.length=this.initialBytesLen=0}return this.decoder.write(t)},c.prototype.end=function(){if(!this.decoder){var t=r.concat(this.initialBytes),e=l(t,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(e,this.options);var n=this.decoder.write(t),i=this.decoder.end();return i?n+i:n}return this.decoder.end()}},function(t,e,n){"use strict";var r=n(36).Buffer;function i(t,e){this.iconv=e}e.utf7=i,e.unicode11utf7="utf7",i.prototype.encoder=a,i.prototype.decoder=s,i.prototype.bomAware=!0;var o=/[^A-Za-z0-9'\(\),-\.\/:\? \n\r\t]+/g;function a(t,e){this.iconv=e.iconv}function s(t,e){this.iconv=e.iconv,this.inBase64=!1,this.base64Accum=""}a.prototype.write=function(t){return r.from(t.replace(o,function(t){return"+"+("+"===t?"":this.iconv.encode(t,"utf16-be").toString("base64").replace(/=+$/,""))+"-"}.bind(this)))},a.prototype.end=function(){};for(var u=/[A-Za-z0-9\/+]/,c=[],l=0;l<256;l++)c[l]=u.test(String.fromCharCode(l));var f="+".charCodeAt(0),p="-".charCodeAt(0),h="&".charCodeAt(0);function d(t,e){this.iconv=e}function g(t,e){this.iconv=e.iconv,this.inBase64=!1,this.base64Accum=r.alloc(6),this.base64AccumIdx=0}function y(t,e){this.iconv=e.iconv,this.inBase64=!1,this.base64Accum=""}s.prototype.write=function(t){for(var e="",n=0,i=this.inBase64,o=this.base64Accum,a=0;a<t.length;a++)if(i){if(!c[t[a]]){if(a==n&&t[a]==p)e+="+";else{var s=o+t.slice(n,a).toString();e+=this.iconv.decode(r.from(s,"base64"),"utf16-be")}t[a]!=p&&a--,n=a+1,i=!1,o=""}}else t[a]==f&&(e+=this.iconv.decode(t.slice(n,a),"ascii"),n=a+1,i=!0);if(i){var u=(s=o+t.slice(n).toString()).length-s.length%8;o=s.slice(u),s=s.slice(0,u),e+=this.iconv.decode(r.from(s,"base64"),"utf16-be")}else e+=this.iconv.decode(t.slice(n),"ascii");return this.inBase64=i,this.base64Accum=o,e},s.prototype.end=function(){var t="";return this.inBase64&&this.base64Accum.length>0&&(t=this.iconv.decode(r.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",t},e.utf7imap=d,d.prototype.encoder=g,d.prototype.decoder=y,d.prototype.bomAware=!0,g.prototype.write=function(t){for(var e=this.inBase64,n=this.base64Accum,i=this.base64AccumIdx,o=r.alloc(5*t.length+10),a=0,s=0;s<t.length;s++){var u=t.charCodeAt(s);32<=u&&u<=126?(e&&(i>0&&(a+=o.write(n.slice(0,i).toString("base64").replace(/\//g,",").replace(/=+$/,""),a),i=0),o[a++]=p,e=!1),e||(o[a++]=u,u===h&&(o[a++]=p))):(e||(o[a++]=h,e=!0),e&&(n[i++]=u>>8,n[i++]=255&u,i==n.length&&(a+=o.write(n.toString("base64").replace(/\//g,","),a),i=0)))}return this.inBase64=e,this.base64AccumIdx=i,o.slice(0,a)},g.prototype.end=function(){var t=r.alloc(10),e=0;return this.inBase64&&(this.base64AccumIdx>0&&(e+=t.write(this.base64Accum.slice(0,this.base64AccumIdx).toString("base64").replace(/\//g,",").replace(/=+$/,""),e),this.base64AccumIdx=0),t[e++]=p,this.inBase64=!1),t.slice(0,e)};var m=c.slice();m[",".charCodeAt(0)]=!0,y.prototype.write=function(t){for(var e="",n=0,i=this.inBase64,o=this.base64Accum,a=0;a<t.length;a++)if(i){if(!m[t[a]]){if(a==n&&t[a]==p)e+="&";else{var s=o+t.slice(n,a).toString().replace(/,/g,"/");e+=this.iconv.decode(r.from(s,"base64"),"utf16-be")}t[a]!=p&&a--,n=a+1,i=!1,o=""}}else t[a]==h&&(e+=this.iconv.decode(t.slice(n,a),"ascii"),n=a+1,i=!0);if(i){var u=(s=o+t.slice(n).toString().replace(/,/g,"/")).length-s.length%8;o=s.slice(u),s=s.slice(0,u),e+=this.iconv.decode(r.from(s,"base64"),"utf16-be")}else e+=this.iconv.decode(t.slice(n),"ascii");return this.inBase64=i,this.base64Accum=o,e},y.prototype.end=function(){var t="";return this.inBase64&&this.base64Accum.length>0&&(t=this.iconv.decode(r.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",t}},function(t,e,n){"use strict";var r=n(36).Buffer;function i(t,e){if(!t)throw new Error("SBCS codec is called without the data.");if(!t.chars||128!==t.chars.length&&256!==t.chars.length)throw new Error("Encoding '"+t.type+"' has incorrect 'chars' (must be of len 128 or 256)");if(128===t.chars.length){for(var n="",i=0;i<128;i++)n+=String.fromCharCode(i);t.chars=n+t.chars}this.decodeBuf=r.from(t.chars,"ucs2");var o=r.alloc(65536,e.defaultCharSingleByte.charCodeAt(0));for(i=0;i<t.chars.length;i++)o[t.chars.charCodeAt(i)]=i;this.encodeBuf=o}function o(t,e){this.encodeBuf=e.encodeBuf}function a(t,e){this.decodeBuf=e.decodeBuf}e._sbcs=i,i.prototype.encoder=o,i.prototype.decoder=a,o.prototype.write=function(t){for(var e=r.alloc(t.length),n=0;n<t.length;n++)e[n]=this.encodeBuf[t.charCodeAt(n)];return e},o.prototype.end=function(){},a.prototype.write=function(t){for(var e=this.decodeBuf,n=r.alloc(2*t.length),i=0,o=0,a=0;a<t.length;a++)i=2*t[a],n[o=2*a]=e[i],n[o+1]=e[i+1];return n.toString("ucs2")},a.prototype.end=function(){}},function(t,e,n){"use strict";t.exports={10029:"maccenteuro",maccenteuro:{type:"_sbcs",chars:""},808:"cp808",ibm808:"cp808",cp808:{type:"_sbcs",chars:""},mik:{type:"_sbcs",chars:""},ascii8bit:"ascii",usascii:"ascii",ansix34:"ascii",ansix341968:"ascii",ansix341986:"ascii",csascii:"ascii",cp367:"ascii",ibm367:"ascii",isoir6:"ascii",iso646us:"ascii",iso646irv:"ascii",us:"ascii",latin1:"iso88591",latin2:"iso88592",latin3:"iso88593",latin4:"iso88594",latin5:"iso88599",latin6:"iso885910",latin7:"iso885913",latin8:"iso885914",latin9:"iso885915",latin10:"iso885916",csisolatin1:"iso88591",csisolatin2:"iso88592",csisolatin3:"iso88593",csisolatin4:"iso88594",csisolatincyrillic:"iso88595",csisolatinarabic:"iso88596",csisolatingreek:"iso88597",csisolatinhebrew:"iso88598",csisolatin5:"iso88599",csisolatin6:"iso885910",l1:"iso88591",l2:"iso88592",l3:"iso88593",l4:"iso88594",l5:"iso88599",l6:"iso885910",l7:"iso885913",l8:"iso885914",l9:"iso885915",l10:"iso885916",isoir14:"iso646jp",isoir57:"iso646cn",isoir100:"iso88591",isoir101:"iso88592",isoir109:"iso88593",isoir110:"iso88594",isoir144:"iso88595",isoir127:"iso88596",isoir126:"iso88597",isoir138:"iso88598",isoir148:"iso88599",isoir157:"iso885910",isoir166:"tis620",isoir179:"iso885913",isoir199:"iso885914",isoir203:"iso885915",isoir226:"iso885916",cp819:"iso88591",ibm819:"iso88591",cyrillic:"iso88595",arabic:"iso88596",arabic8:"iso88596",ecma114:"iso88596",asmo708:"iso88596",greek:"iso88597",greek8:"iso88597",ecma118:"iso88597",elot928:"iso88597",hebrew:"iso88598",hebrew8:"iso88598",turkish:"iso88599",turkish8:"iso88599",thai:"iso885911",thai8:"iso885911",celtic:"iso885914",celtic8:"iso885914",isoceltic:"iso885914",tis6200:"tis620",tis62025291:"tis620",tis62025330:"tis620",1e4:"macroman",10006:"macgreek",10007:"maccyrillic",10079:"maciceland",10081:"macturkish",cspc8codepage437:"cp437",cspc775baltic:"cp775",cspc850multilingual:"cp850",cspcp852:"cp852",cspc862latinhebrew:"cp862",cpgr:"cp869",msee:"cp1250",mscyrl:"cp1251",msansi:"cp1252",msgreek:"cp1253",msturk:"cp1254",mshebr:"cp1255",msarab:"cp1256",winbaltrim:"cp1257",cp20866:"koi8r",20866:"koi8r",ibm878:"koi8r",cskoi8r:"koi8r",cp21866:"koi8u",21866:"koi8u",ibm1168:"koi8u",strk10482002:"rk1048",tcvn5712:"tcvn",tcvn57121:"tcvn",gb198880:"iso646cn",cn:"iso646cn",csiso14jisc6220ro:"iso646jp",jisc62201969ro:"iso646jp",jp:"iso646jp",cshproman8:"hproman8",r8:"hproman8",roman8:"hproman8",xroman8:"hproman8",ibm1051:"hproman8",mac:"macintosh",csmacintosh:"macintosh"}},function(t,e,n){"use strict";t.exports={437:"cp437",737:"cp737",775:"cp775",850:"cp850",852:"cp852",855:"cp855",856:"cp856",857:"cp857",858:"cp858",860:"cp860",861:"cp861",862:"cp862",863:"cp863",864:"cp864",865:"cp865",866:"cp866",869:"cp869",874:"windows874",922:"cp922",1046:"cp1046",1124:"cp1124",1125:"cp1125",1129:"cp1129",1133:"cp1133",1161:"cp1161",1162:"cp1162",1163:"cp1163",1250:"windows1250",1251:"windows1251",1252:"windows1252",1253:"windows1253",1254:"windows1254",1255:"windows1255",1256:"windows1256",1257:"windows1257",1258:"windows1258",28591:"iso88591",28592:"iso88592",28593:"iso88593",28594:"iso88594",28595:"iso88595",28596:"iso88596",28597:"iso88597",28598:"iso88598",28599:"iso88599",28600:"iso885910",28601:"iso885911",28603:"iso885913",28604:"iso885914",28605:"iso885915",28606:"iso885916",windows874:{type:"_sbcs",chars:""},win874:"windows874",cp874:"windows874",windows1250:{type:"_sbcs",chars:""},win1250:"windows1250",cp1250:"windows1250",windows1251:{type:"_sbcs",chars:""},win1251:"windows1251",cp1251:"windows1251",windows1252:{type:"_sbcs",chars:""},win1252:"windows1252",cp1252:"windows1252",windows1253:{type:"_sbcs",chars:""},win1253:"windows1253",cp1253:"windows1253",windows1254:{type:"_sbcs",chars:""},win1254:"windows1254",cp1254:"windows1254",windows1255:{type:"_sbcs",chars:""},win1255:"windows1255",cp1255:"windows1255",windows1256:{type:"_sbcs",chars:""},win1256:"windows1256",cp1256:"windows1256",windows1257:{type:"_sbcs",chars:""},win1257:"windows1257",cp1257:"windows1257",windows1258:{type:"_sbcs",chars:""},win1258:"windows1258",cp1258:"windows1258",iso88591:{type:"_sbcs",chars:""},cp28591:"iso88591",iso88592:{type:"_sbcs",chars:""},cp28592:"iso88592",iso88593:{type:"_sbcs",chars:""},cp28593:"iso88593",iso88594:{type:"_sbcs",chars:""},cp28594:"iso88594",iso88595:{type:"_sbcs",chars:""},cp28595:"iso88595",iso88596:{type:"_sbcs",chars:""},cp28596:"iso88596",iso88597:{type:"_sbcs",chars:""},cp28597:"iso88597",iso88598:{type:"_sbcs",chars:""},cp28598:"iso88598",iso88599:{type:"_sbcs",chars:""},cp28599:"iso88599",iso885910:{type:"_sbcs",chars:""},cp28600:"iso885910",iso885911:{type:"_sbcs",chars:""},cp28601:"iso885911",iso885913:{type:"_sbcs",chars:""},cp28603:"iso885913",iso885914:{type:"_sbcs",chars:""},cp28604:"iso885914",iso885915:{type:"_sbcs",chars:""},cp28605:"iso885915",iso885916:{type:"_sbcs",chars:""},cp28606:"iso885916",cp437:{type:"_sbcs",chars:""},ibm437:"cp437",csibm437:"cp437",cp737:{type:"_sbcs",chars:""},ibm737:"cp737",csibm737:"cp737",cp775:{type:"_sbcs",chars:""},ibm775:"cp775",csibm775:"cp775",cp850:{type:"_sbcs",chars:""},ibm850:"cp850",csibm850:"cp850",cp852:{type:"_sbcs",chars:""},ibm852:"cp852",csibm852:"cp852",cp855:{type:"_sbcs",chars:""},ibm855:"cp855",csibm855:"cp855",cp856:{type:"_sbcs",chars:""},ibm856:"cp856",csibm856:"cp856",cp857:{type:"_sbcs",chars:""},ibm857:"cp857",csibm857:"cp857",cp858:{type:"_sbcs",chars:""},ibm858:"cp858",csibm858:"cp858",cp860:{type:"_sbcs",chars:""},ibm860:"cp860",csibm860:"cp860",cp861:{type:"_sbcs",chars:""},ibm861:"cp861",csibm861:"cp861",cp862:{type:"_sbcs",chars:""},ibm862:"cp862",csibm862:"cp862",cp863:{type:"_sbcs",chars:""},ibm863:"cp863",csibm863:"cp863",cp864:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},ibm864:"cp864",csibm864:"cp864",cp865:{type:"_sbcs",chars:""},ibm865:"cp865",csibm865:"cp865",cp866:{type:"_sbcs",chars:""},ibm866:"cp866",csibm866:"cp866",cp869:{type:"_sbcs",chars:""},ibm869:"cp869",csibm869:"cp869",cp922:{type:"_sbcs",chars:""},ibm922:"cp922",csibm922:"cp922",cp1046:{type:"_sbcs",chars:""},ibm1046:"cp1046",csibm1046:"cp1046",cp1124:{type:"_sbcs",chars:""},ibm1124:"cp1124",csibm1124:"cp1124",cp1125:{type:"_sbcs",chars:""},ibm1125:"cp1125",csibm1125:"cp1125",cp1129:{type:"_sbcs",chars:""},ibm1129:"cp1129",csibm1129:"cp1129",cp1133:{type:"_sbcs",chars:""},ibm1133:"cp1133",csibm1133:"cp1133",cp1161:{type:"_sbcs",chars:""},ibm1161:"cp1161",csibm1161:"cp1161",cp1162:{type:"_sbcs",chars:""},ibm1162:"cp1162",csibm1162:"cp1162",cp1163:{type:"_sbcs",chars:""},ibm1163:"cp1163",csibm1163:"cp1163",maccroatian:{type:"_sbcs",chars:""},maccyrillic:{type:"_sbcs",chars:""},macgreek:{type:"_sbcs",chars:""},maciceland:{type:"_sbcs",chars:""},macroman:{type:"_sbcs",chars:""},macromania:{type:"_sbcs",chars:""},macthai:{type:"_sbcs",chars:"\ufeff"},macturkish:{type:"_sbcs",chars:""},macukraine:{type:"_sbcs",chars:""},koi8r:{type:"_sbcs",chars:""},koi8u:{type:"_sbcs",chars:""},koi8ru:{type:"_sbcs",chars:""},koi8t:{type:"_sbcs",chars:""},armscii8:{type:"_sbcs",chars:")(.,-"},rk1048:{type:"_sbcs",chars:""},tcvn:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},georgianacademy:{type:"_sbcs",chars:""},georgianps:{type:"_sbcs",chars:""},pt154:{type:"_sbcs",chars:""},viscii:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},iso646cn:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}"},iso646jp:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}"},hproman8:{type:"_sbcs",chars:""},macintosh:{type:"_sbcs",chars:""},ascii:{type:"_sbcs",chars:""},tis620:{type:"_sbcs",chars:""}}},function(t,e,n){"use strict";var r=n(36).Buffer;e._dbcs=a;for(var i=new Array(256),o=0;o<256;o++)i[o]=-1;function a(t,e){if(this.encodingName=t.encodingName,!t)throw new Error("DBCS codec is called without the data.");if(!t.table)throw new Error("Encoding '"+this.encodingName+"' has no data.");var n=t.table();this.decodeTables=[],this.decodeTables[0]=i.slice(0),this.decodeTableSeq=[];for(var r=0;r<n.length;r++)this._addDecodeChunk(n[r]);this.defaultCharUnicode=e.defaultCharUnicode,this.encodeTable=[],this.encodeTableSeq=[];var o={};if(t.encodeSkipVals)for(r=0;r<t.encodeSkipVals.length;r++){var a=t.encodeSkipVals[r];if("number"==typeof a)o[a]=!0;else for(var s=a.from;s<=a.to;s++)o[s]=!0}if(this._fillEncodeTable(0,0,o),t.encodeAdd)for(var u in t.encodeAdd)Object.prototype.hasOwnProperty.call(t.encodeAdd,u)&&this._setEncodeChar(u.charCodeAt(0),t.encodeAdd[u]);if(this.defCharSB=this.encodeTable[0][e.defaultCharSingleByte.charCodeAt(0)],-1===this.defCharSB&&(this.defCharSB=this.encodeTable[0]["?"]),-1===this.defCharSB&&(this.defCharSB="?".charCodeAt(0)),"function"==typeof t.gb18030){this.gb18030=t.gb18030();var c=this.decodeTables.length,l=this.decodeTables[c]=i.slice(0),f=this.decodeTables.length,p=this.decodeTables[f]=i.slice(0);for(r=129;r<=254;r++){var h=-1e3-this.decodeTables[0][r],d=this.decodeTables[h];for(s=48;s<=57;s++)d[s]=-1e3-c}for(r=129;r<=254;r++)l[r]=-1e3-f;for(r=48;r<=57;r++)p[r]=-2}}function s(t,e){this.leadSurrogate=-1,this.seqObj=void 0,this.encodeTable=e.encodeTable,this.encodeTableSeq=e.encodeTableSeq,this.defaultCharSingleByte=e.defCharSB,this.gb18030=e.gb18030}function u(t,e){this.nodeIdx=0,this.prevBuf=r.alloc(0),this.decodeTables=e.decodeTables,this.decodeTableSeq=e.decodeTableSeq,this.defaultCharUnicode=e.defaultCharUnicode,this.gb18030=e.gb18030}function c(t,e){if(t[0]>e)return-1;for(var n=0,r=t.length;n<r-1;){var i=n+Math.floor((r-n+1)/2);t[i]<=e?n=i:r=i}return n}a.prototype.encoder=s,a.prototype.decoder=u,a.prototype._getDecodeTrieNode=function(t){for(var e=[];t>0;t>>=8)e.push(255&t);0==e.length&&e.push(0);for(var n=this.decodeTables[0],r=e.length-1;r>0;r--){var o=n[e[r]];if(-1==o)n[e[r]]=-1e3-this.decodeTables.length,this.decodeTables.push(n=i.slice(0));else{if(!(o<=-1e3))throw new Error("Overwrite byte in "+this.encodingName+", addr: "+t.toString(16));n=this.decodeTables[-1e3-o]}}return n},a.prototype._addDecodeChunk=function(t){var e=parseInt(t[0],16),n=this._getDecodeTrieNode(e);e&=255;for(var r=1;r<t.length;r++){var i=t[r];if("string"==typeof i)for(var o=0;o<i.length;){var a=i.charCodeAt(o++);if(55296<=a&&a<56320){var s=i.charCodeAt(o++);if(!(56320<=s&&s<57344))throw new Error("Incorrect surrogate pair in "+this.encodingName+" at chunk "+t[0]);n[e++]=65536+1024*(a-55296)+(s-56320)}else if(4080<a&&a<=4095){for(var u=4095-a+2,c=[],l=0;l<u;l++)c.push(i.charCodeAt(o++));n[e++]=-10-this.decodeTableSeq.length,this.decodeTableSeq.push(c)}else n[e++]=a}else{if("number"!=typeof i)throw new Error("Incorrect type '"+typeof i+"' given in "+this.encodingName+" at chunk "+t[0]);var f=n[e-1]+1;for(o=0;o<i;o++)n[e++]=f++}}if(e>255)throw new Error("Incorrect chunk in "+this.encodingName+" at addr "+t[0]+": too long"+e)},a.prototype._getEncodeBucket=function(t){var e=t>>8;return void 0===this.encodeTable[e]&&(this.encodeTable[e]=i.slice(0)),this.encodeTable[e]},a.prototype._setEncodeChar=function(t,e){var n=this._getEncodeBucket(t),r=255&t;n[r]<=-10?this.encodeTableSeq[-10-n[r]][-1]=e:-1==n[r]&&(n[r]=e)},a.prototype._setEncodeSequence=function(t,e){var n,r=t[0],i=this._getEncodeBucket(r),o=255&r;i[o]<=-10?n=this.encodeTableSeq[-10-i[o]]:(n={},-1!==i[o]&&(n[-1]=i[o]),i[o]=-10-this.encodeTableSeq.length,this.encodeTableSeq.push(n));for(var a=1;a<t.length-1;a++){var s=n[r];"object"==typeof s?n=s:(n=n[r]={},void 0!==s&&(n[-1]=s))}n[r=t[t.length-1]]=e},a.prototype._fillEncodeTable=function(t,e,n){for(var r=this.decodeTables[t],i=0;i<256;i++){var o=r[i],a=e+i;n[a]||(o>=0?this._setEncodeChar(o,a):o<=-1e3?this._fillEncodeTable(-1e3-o,a<<8,n):o<=-10&&this._setEncodeSequence(this.decodeTableSeq[-10-o],a))}},s.prototype.write=function(t){for(var e=r.alloc(t.length*(this.gb18030?4:3)),n=this.leadSurrogate,i=this.seqObj,o=-1,a=0,s=0;;){if(-1===o){if(a==t.length)break;var u=t.charCodeAt(a++)}else{u=o;o=-1}if(55296<=u&&u<57344)if(u<56320){if(-1===n){n=u;continue}n=u,u=-1}else-1!==n?(u=65536+1024*(n-55296)+(u-56320),n=-1):u=-1;else-1!==n&&(o=u,u=-1,n=-1);var l=-1;if(void 0!==i&&-1!=u){var f=i[u];if("object"==typeof f){i=f;continue}"number"==typeof f?l=f:null==f&&void 0!==(f=i[-1])&&(l=f,o=u),i=void 0}else if(u>=0){var p=this.encodeTable[u>>8];if(void 0!==p&&(l=p[255&u]),l<=-10){i=this.encodeTableSeq[-10-l];continue}if(-1==l&&this.gb18030){var h=c(this.gb18030.uChars,u);if(-1!=h){l=this.gb18030.gbChars[h]+(u-this.gb18030.uChars[h]);e[s++]=129+Math.floor(l/12600),l%=12600,e[s++]=48+Math.floor(l/1260),l%=1260,e[s++]=129+Math.floor(l/10),l%=10,e[s++]=48+l;continue}}}-1===l&&(l=this.defaultCharSingleByte),l<256?e[s++]=l:l<65536?(e[s++]=l>>8,e[s++]=255&l):(e[s++]=l>>16,e[s++]=l>>8&255,e[s++]=255&l)}return this.seqObj=i,this.leadSurrogate=n,e.slice(0,s)},s.prototype.end=function(){if(-1!==this.leadSurrogate||void 0!==this.seqObj){var t=r.alloc(10),e=0;if(this.seqObj){var n=this.seqObj[-1];void 0!==n&&(n<256?t[e++]=n:(t[e++]=n>>8,t[e++]=255&n)),this.seqObj=void 0}return-1!==this.leadSurrogate&&(t[e++]=this.defaultCharSingleByte,this.leadSurrogate=-1),t.slice(0,e)}},s.prototype.findIdx=c,u.prototype.write=function(t){var e=r.alloc(2*t.length),n=this.nodeIdx,i=this.prevBuf,o=this.prevBuf.length,a=-this.prevBuf.length;o>0&&(i=r.concat([i,t.slice(0,10)]));for(var s=0,u=0;s<t.length;s++){var l,f=s>=0?t[s]:i[s+o];if((l=this.decodeTables[n][f])>=0);else if(-1===l)s=a,l=this.defaultCharUnicode.charCodeAt(0);else if(-2===l){var p=a>=0?t.slice(a,s+1):i.slice(a+o,s+1+o),h=12600*(p[0]-129)+1260*(p[1]-48)+10*(p[2]-129)+(p[3]-48),d=c(this.gb18030.gbChars,h);l=this.gb18030.uChars[d]+h-this.gb18030.gbChars[d]}else{if(l<=-1e3){n=-1e3-l;continue}if(!(l<=-10))throw new Error("iconv-lite internal error: invalid decoding table value "+l+" at "+n+"/"+f);for(var g=this.decodeTableSeq[-10-l],y=0;y<g.length-1;y++)l=g[y],e[u++]=255&l,e[u++]=l>>8;l=g[g.length-1]}if(l>65535){l-=65536;var m=55296+Math.floor(l/1024);e[u++]=255&m,e[u++]=m>>8,l=56320+l%1024}e[u++]=255&l,e[u++]=l>>8,n=0,a=s+1}return this.nodeIdx=n,this.prevBuf=a>=0?t.slice(a):i.slice(a+o),e.slice(0,u).toString("ucs2")},u.prototype.end=function(){for(var t="";this.prevBuf.length>0;){t+=this.defaultCharUnicode;var e=this.prevBuf.slice(1);this.prevBuf=r.alloc(0),this.nodeIdx=0,e.length>0&&(t+=this.write(e))}return this.nodeIdx=0,t}},function(t,e,n){"use strict";t.exports={shiftjis:{type:"_dbcs",table:function(){return n(269)},encodeAdd:{"":92,"":126},encodeSkipVals:[{from:60736,to:63808}]},csshiftjis:"shiftjis",mskanji:"shiftjis",sjis:"shiftjis",windows31j:"shiftjis",ms31j:"shiftjis",xsjis:"shiftjis",windows932:"shiftjis",ms932:"shiftjis",932:"shiftjis",cp932:"shiftjis",eucjp:{type:"_dbcs",table:function(){return n(270)},encodeAdd:{"":92,"":126}},gb2312:"cp936",gb231280:"cp936",gb23121980:"cp936",csgb2312:"cp936",csiso58gb231280:"cp936",euccn:"cp936",windows936:"cp936",ms936:"cp936",936:"cp936",cp936:{type:"_dbcs",table:function(){return n(94)}},gbk:{type:"_dbcs",table:function(){return n(94).concat(n(142))}},xgbk:"gbk",isoir58:"gbk",gb18030:{type:"_dbcs",table:function(){return n(94).concat(n(142))},gb18030:function(){return n(271)},encodeSkipVals:[128],encodeAdd:{"":41699}},chinese:"gb18030",windows949:"cp949",ms949:"cp949",949:"cp949",cp949:{type:"_dbcs",table:function(){return n(272)}},cseuckr:"cp949",csksc56011987:"cp949",euckr:"cp949",isoir149:"cp949",korean:"cp949",ksc56011987:"cp949",ksc56011989:"cp949",ksc5601:"cp949",windows950:"cp950",ms950:"cp950",950:"cp950",cp950:{type:"_dbcs",table:function(){return n(143)}},big5:"big5hkscs",big5hkscs:{type:"_dbcs",table:function(){return n(143).concat(n(273))},encodeSkipVals:[41676]},cnbig5:"big5hkscs",csbig5:"big5hkscs",xxbig5:"big5hkscs"}},function(t){t.exports=JSON.parse('[["0","\\u0000",128],["a1","",62],["8140","",9,""],["8180",""],["81b8",""],["81c8",""],["81da",""],["81f0",""],["81fc",""],["824f","",9],["8260","",25],["8281","",25],["829f","",82],["8340","",62],["8380","",22],["839f","",16,"",6],["83bf","",16,"",6],["8440","",5,"",25],["8470","",5,"",7],["8480","",17],["849f",""],["8740","",19,"",9],["875f",""],["877e",""],["8780","",4,""],["889f",""],["8940",""],["8980",""],["8a40",""],["8a80",""],["8b40",""],["8b80",""],["8c40",""],["8c80",""],["8d40",""],["8d80",""],["8e40",""],["8e80",""],["8f40",""],["8f80",""],["9040",""],["9080",""],["9140",""],["9180",""],["9240",""],["9280",""],["9340",""],["9380",""],["9440",""],["9480",""],["9540",""],["9580",""],["9640",""],["9680",""],["9740",""],["9780",""],["9840",""],["989f",""],["9940",""],["9980",""],["9a40",""],["9a80",""],["9b40",""],["9b80",""],["9c40",""],["9c80",""],["9d40",""],["9d80",""],["9e40",""],["9e80",""],["9f40",""],["9f80",""],["e040",""],["e080",""],["e140",""],["e180",""],["e240",""],["e280",""],["e340",""],["e380",""],["e440",""],["e480",""],["e540",""],["e580",""],["e640",""],["e680",""],["e740",""],["e780",""],["e840",""],["e880",""],["e940",""],["e980",""],["ea40",""],["ea80",""],["ed40",""],["ed80",""],["ee40",""],["ee80",""],["eeef","",9,""],["f040","",62],["f080","",124],["f140","",62],["f180","",124],["f240","",62],["f280","",124],["f340","",62],["f380","",124],["f440","",62],["f480","",124],["f540","",62],["f580","",124],["f640","",62],["f680","",124],["f740","",62],["f780","",124],["f840","",62],["f880","",124],["f940",""],["fa40","",9,"",9,""],["fa80",""],["fb40",""],["fb80",""],["fc40",""]]')},function(t){t.exports=JSON.parse('[["0","\\u0000",127],["8ea1","",62],["a1a1","",9,""],["a2a1",""],["a2ba",""],["a2ca",""],["a2dc",""],["a2f2",""],["a2fe",""],["a3b0","",9],["a3c1","",25],["a3e1","",25],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a7a1","",5,"",25],["a7d1","",5,"",25],["a8a1",""],["ada1","",19,"",9],["adc0",""],["addf","",4,""],["b0a1",""],["b1a1",""],["b2a1",""],["b3a1",""],["b4a1",""],["b5a1",""],["b6a1",""],["b7a1",""],["b8a1",""],["b9a1",""],["baa1",""],["bba1",""],["bca1",""],["bda1",""],["bea1",""],["bfa1",""],["c0a1",""],["c1a1",""],["c2a1",""],["c3a1",""],["c4a1",""],["c5a1",""],["c6a1",""],["c7a1",""],["c8a1",""],["c9a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1",""],["d2a1",""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fcf1","",9,""],["8fa2af",""],["8fa2c2",""],["8fa2eb",""],["8fa6e1",""],["8fa6e7",""],["8fa6e9",""],["8fa6ec",""],["8fa6f1",""],["8fa7c2","",10,""],["8fa7f2","",10,""],["8fa9a1",""],["8fa9a4",""],["8fa9a6",""],["8fa9a8",""],["8fa9ab",""],["8fa9af",""],["8fa9c1",""],["8faaa1",""],["8faaba",""],["8faba1",""],["8fabbd",""],["8fabc5",""],["8fb0a1",""],["8fb1a1",""],["8fb2a1","",4,""],["8fb3a1",""],["8fb4a1",""],["8fb5a1",""],["8fb6a1","",5,"",4,""],["8fb7a1","",4,""],["8fb8a1",""],["8fb9a1",""],["8fbaa1","",4,""],["8fbba1",""],["8fbca1","",4,""],["8fbda1","",4,""],["8fbea1","",4,""],["8fbfa1",""],["8fc0a1",""],["8fc1a1",""],["8fc2a1",""],["8fc3a1","",4,""],["8fc4a1",""],["8fc5a1",""],["8fc6a1",""],["8fc7a1",""],["8fc8a1",""],["8fc9a1","",4,"",4,""],["8fcaa1",""],["8fcba1",""],["8fcca1","",9,""],["8fcda1","",5,""],["8fcea1","",6,""],["8fcfa1",""],["8fd0a1",""],["8fd1a1",""],["8fd2a1","",5],["8fd3a1",""],["8fd4a1","",4,""],["8fd5a1",""],["8fd6a1",""],["8fd7a1",""],["8fd8a1",""],["8fd9a1","",4,"",6,""],["8fdaa1","",4,""],["8fdba1","",6,""],["8fdca1","",4,""],["8fdda1","",4,""],["8fdea1","",4,""],["8fdfa1",""],["8fe0a1",""],["8fe1a1","",4,""],["8fe2a1",""],["8fe3a1","",5,"",4,""],["8fe4a1","",4,""],["8fe5a1","",4,""],["8fe6a1",""],["8fe7a1",""],["8fe8a1","",4,""],["8fe9a1","",4],["8feaa1","",4,""],["8feba1","",4,""],["8feca1",""],["8feda1","",4,"",4,""]]')},function(t){t.exports=JSON.parse('{"uChars":[128,165,169,178,184,216,226,235,238,244,248,251,253,258,276,284,300,325,329,334,364,463,465,467,469,471,473,475,477,506,594,610,712,716,730,930,938,962,970,1026,1104,1106,8209,8215,8218,8222,8231,8241,8244,8246,8252,8365,8452,8454,8458,8471,8482,8556,8570,8596,8602,8713,8720,8722,8726,8731,8737,8740,8742,8748,8751,8760,8766,8777,8781,8787,8802,8808,8816,8854,8858,8870,8896,8979,9322,9372,9548,9588,9616,9622,9634,9652,9662,9672,9676,9680,9702,9735,9738,9793,9795,11906,11909,11913,11917,11928,11944,11947,11951,11956,11960,11964,11979,12284,12292,12312,12319,12330,12351,12436,12447,12535,12543,12586,12842,12850,12964,13200,13215,13218,13253,13263,13267,13270,13384,13428,13727,13839,13851,14617,14703,14801,14816,14964,15183,15471,15585,16471,16736,17208,17325,17330,17374,17623,17997,18018,18212,18218,18301,18318,18760,18811,18814,18820,18823,18844,18848,18872,19576,19620,19738,19887,40870,59244,59336,59367,59413,59417,59423,59431,59437,59443,59452,59460,59478,59493,63789,63866,63894,63976,63986,64016,64018,64021,64025,64034,64037,64042,65074,65093,65107,65112,65127,65132,65375,65510,65536],"gbChars":[0,36,38,45,50,81,89,95,96,100,103,104,105,109,126,133,148,172,175,179,208,306,307,308,309,310,311,312,313,341,428,443,544,545,558,741,742,749,750,805,819,820,7922,7924,7925,7927,7934,7943,7944,7945,7950,8062,8148,8149,8152,8164,8174,8236,8240,8262,8264,8374,8380,8381,8384,8388,8390,8392,8393,8394,8396,8401,8406,8416,8419,8424,8437,8439,8445,8482,8485,8496,8521,8603,8936,8946,9046,9050,9063,9066,9076,9092,9100,9108,9111,9113,9131,9162,9164,9218,9219,11329,11331,11334,11336,11346,11361,11363,11366,11370,11372,11375,11389,11682,11686,11687,11692,11694,11714,11716,11723,11725,11730,11736,11982,11989,12102,12336,12348,12350,12384,12393,12395,12397,12510,12553,12851,12962,12973,13738,13823,13919,13933,14080,14298,14585,14698,15583,15847,16318,16434,16438,16481,16729,17102,17122,17315,17320,17402,17418,17859,17909,17911,17915,17916,17936,17939,17961,18664,18703,18814,18962,19043,33469,33470,33471,33484,33485,33490,33497,33501,33505,33513,33520,33536,33550,37845,37921,37948,38029,38038,38064,38065,38066,38069,38075,38076,38078,39108,39109,39113,39114,39115,39116,39265,39394,189000]}')},function(t){t.exports=JSON.parse('[["0","\\u0000",127],["8141","",4,"",6,""],["8161","",9,"",5,""],["8181","",18,"",4,"",6,"",5,"",6,"",7,"",7,"",4,"",4,""],["8241","",7,"",5],["8261","",6,"",5,""],["8281","",7,"",7,"",4,"",10,"",5,"",17,"",7,"",6,"",7,"",18],["8341","",5,"",5,"",7],["8361","",18,""],["8381","",4,"",6,"",5,"",5,"",46,"",6,"",5,"",8],["8441","",5,"",8],["8461","",18],["8481","",7,"",6,"",5,"",10,"",5,"",18,"",5,"",6,"",5,"",26,""],["8541","",5,"",4,"",6,"",4],["8561","",5,"",5,"",6,""],["8581","",6,"",6,"",9,"",26,"",29,"",6,"",5,""],["8641","",6,"",5,""],["8661","",6,"",10],["8681","",22,"",4,"",6,"",5,"",6,"",22,"",4,""],["8741","",9,"",15],["8761","",18,""],["8781","",5,"",7,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",4],["8841","",4,"",5,"",6,"",4],["8861","",4,""],["8881","",15,"",4,"",6,"",5,"",54,""],["8941","",6,"",5,""],["8961","",10,"",5,""],["8981","",21,"",18,"",18,"",6,"",6,"",7,"",15],["8a41","",10,"",6,""],["8a61","",4,"",18,""],["8a81","",4,"",19,"",5,"",7,"",5,"",6,"",5,"",4,"",5,"",26,""],["8b41","",5,"",4,"",6,""],["8b61","",6,"",8],["8b81","",52,"",4,"",6,"",5,"",18,"",18],["8c41","",15,"",4],["8c61","",6,"",5,"",6,"",5],["8c81","",12,"",26,"",50,"",5,"",16],["8d41","",16,"",8],["8d61","",17,""],["8d81","",4,"",33,"",6,"",7,"",6,"",9,"",6,"",5,"",6,""],["8e41","",6,"",5,"",8],["8e61","",4,"",19],["8e81","",13,"",6,"",4,"",6,"",5,"",6,"",5,"",11,"",7,"",6,"",5,"",7],["8f41","",7,"",17],["8f61","",7,"",6,"",4],["8f81","",5,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",5],["9041","",6,"",5,""],["9061","",5,"",15],["9081","",12,"",6,"",5,"",4,"",6,"",4,"",5,"",11,"",33,""],["9141","",6,"",5],["9161","",9,"",5],["9181","",20,"",4,"",5,"",14,"",33,"",7,"",5,"",6],["9241","",7,"",4,""],["9261","",7,"",7,"",4],["9281","",21,"",18,"",6,"",7,"",6,"",35,""],["9341","",4,""],["9361","",6,"",8],["9381","",37,"",4,"",4,"",6,"",5,"",7,"",22,""],["9441","",5,"",5,"",8],["9461","",5,"",6,"",12],["9481","",5,"",6,"",6,"",9,"",22,"",4,"",6,"",10,"",6,"",24],["9541","",11,"",5,""],["9561","",6,"",5,""],["9581","",6,"",35,"",4,"",4,"",4,"",6,"",5,"",13,"",14],["9641","",23,""],["9661","",6,"",5,"",8],["9681","",10,"",5,"",13,"",33,"",6,"",44],["9741","",16,"",8],["9761","",17,"",7],["9781","",11,"",5,"",6,"",89,""],["9841","",16,"",5,""],["9861","",6,"",15],["9881","",21,"",6,"",5,"",4,"",6,"",5,"",6,"",5,"",6,"",5,""],["9941","",6,"",5,""],["9961","",6,"",5,""],["9981","",8,"",5,"",4,"",11,"",5,"",6,"",6,"",6,"",7,"",6,"",5,""],["9a41","",16],["9a61","",6,"",6,""],["9a81","",4,"",6,"",5,"",5,"",6,"",5,"",5,"",33,"",5,"",6,""],["9b41","",6,"",8],["9b61","",17,"",7],["9b81","",25,"",4,"",5,"",50,"",22,""],["9c41","",4,"",5,"",5],["9c61","",8,"",6,"",9],["9c81","",8,"",6,"",6,"",9,"",26,"",6,"",5,"",18,"",6,"",12],["9d41","",13,"",8],["9d61","",25],["9d81","",8,"",5,"",9,"",6,"",10,"",6,"",5,"",6,"",5,""],["9e41","",7,"",9,""],["9e61","",4,"",6,""],["9e81","",6,"",6,"",6,"",5,"",10,"",5,"",6,"",5,"",6,""],["9f41","",5,"",4,"",5,""],["9f61","",6,"",5,""],["9f81","",4,"",5,"",6,"",5,"",6,"",4,"",6,"",7,"",4,"",4,""],["a041","",5,"",6,""],["a061","",5,"",13],["a081","",4,"",4,"",4,"",6,"",5,"",6,"",5,"",26,"",4,"",5,"",7,""],["a141","",18,""],["a161","",6,"",5,""],["a181","",14,"",5,"",4,"",9,""],["a241","",5,"",18],["a261","",6,"",18],["a281","",7,"",6,"",7,""],["a341","",6,"",10,""],["a361","",6,"",16],["a381","",16,"",4,"",58,"",32,""],["a441","",5,""],["a461","",5,"",12],["a481","",28,"",93],["a541","",4,"",6,"",5,""],["a561","",17,"",5,""],["a581","",16,"",14,"",9],["a5b0","",9],["a5c1","",16,"",6],["a5e1","",16,"",6],["a641","",19,""],["a661","",5,"",5,"",6],["a681","",6,"",18,"",7],["a741","",4,"",6,"",7],["a761","",22,""],["a781","",6,"",5,"",7,"",9,"",9,"",4,"",5,"",4,""],["a841","",10,"",14],["a861","",18,"",6],["a881","",19,"",11,""],["a8a6",""],["a8a8",""],["a8b1","",27,"",25,"",14,""],["a941","",14,"",10],["a961","",18],["a981","",14,"",6,"",27,"",25,"",14,""],["aa41","",6,"",4,""],["aa61","",4,"",5,"",6,""],["aa81","",29,"",82],["ab41","",6,"",5,""],["ab61","",6,"",5,"",5],["ab81","",8,"",6,"",12,"",85],["ac41","",5,"",6,""],["ac61","",11,"",4],["ac81","",28,"",5,"",25],["acd1","",5,"",25],["ad41","",6,"",5,"",7],["ad61","",6,"",10,""],["ad81","",5,"",18,""],["ae41","",5,"",16],["ae61","",5,"",6,"",4],["ae81","",6,"",5,""],["af41","",19],["af61","",13,"",5,""],["af81","",5,"",6,"",5,""],["b041","",5,"",5,"",12],["b061","",5,"",19],["b081","",13,"",6,"",5,"",7,"",4,""],["b141","",6,"",5,""],["b161","",6,"",5,"",11],["b181","",14,"",6,""],["b241","",6,"",5,""],["b261","",18,"",5,""],["b281","",5,"",18,"",6,""],["b341","",19,""],["b361","",5,"",5,"",5],["b381","",5,"",5,"",19,"",4,""],["b441","",5,"",6,"",5],["b461","",6,"",10,""],["b481","",6,"",18,"",4,"",4,""],["b541","",14,"",5],["b561","",5,"",5,"",4],["b581","",6,"",5,"",11,""],["b641","",7,"",17],["b661","",15,""],["b681","",5,"",6,"",5,""],["b741","",13,"",6,""],["b761","",20,""],["b781","",6,"",14,""],["b841","",7,"",17],["b861","",8,"",13],["b881","",5,"",24,"",4,""],["b941","",6,"",5,""],["b961","",14,"",6,""],["b981","",22,"",4,"",4,""],["ba41","",5,"",6,""],["ba61","",5,"",4,"",5],["ba81","",6,"",9,""],["bb41","",4,"",5,"",4,""],["bb61","",6,"",5,""],["bb81","",31,""],["bc41","",17,""],["bc61","",5,"",6,""],["bc81","",4,"",6,"",5,"",5,"",4,""],["bd41","",7,"",7,""],["bd61","",5,"",13],["bd81","",5,"",25,""],["be41","",7,"",14],["be61","",7,"",7,""],["be81","",4,"",4,"",5,"",8,"",6,""],["bf41","",10,"",14],["bf61","",18,""],["bf81","",5,"",7,"",6,"",5,""],["c041","",5,"",6,"",5],["c061","",25],["c081","",6,"",5,"",7,""],["c141","",5,"",6,""],["c161","",19,""],["c181","",31,""],["c241","",4,"",5,""],["c261","",4,"",5,"",6,""],["c281","",5,"",7,"",9,""],["c341","",4],["c361","",4,"",5,"",11],["c381","",5,"",7,"",5,""],["c441","",7,"",7,""],["c461","",5,"",4],["c481","",5,"",11,""],["c541","",6,"",5,""],["c561","",6,"",5,"",4],["c581","",6,"",5,""],["c641","",6,"",5],["c6a1",""],["c7a1",""],["c8a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1","",5,"",4,""],["d2a1","",4,"",5,"",10,"",7,"",5,""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f5a1",""],["f6a1",""],["f7a1",""],["f8a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fda1",""]]')},function(t){t.exports=JSON.parse('[["8740",""],["8767",""],["87a1",""],["8840","",4,""],["88a1",""],["8940",""],["8943",""],["8946",""],["894c",""],["89a1",""],["89ab",""],["89b0",""],["89b5",""],["89c1",""],["89c5",""],["8a40",""],["8a43",""],["8a64",""],["8a76",""],["8aa1",""],["8aac",""],["8ab2",""],["8abb",""],["8ac9",""],["8ace",""],["8adf",""],["8af6",""],["8b40",""],["8b55",""],["8ba1",""],["8bde",""],["8c40",""],["8ca1",""],["8ca7",""],["8cc9",""],["8cce",""],["8ce6",""],["8d40",""],["8d42",""],["8da1",""],["8e40",""],["8ea1",""],["8f40",""],["8fa1",""],["9040",""],["90a1",""],["9140",""],["91a1",""],["9240",""],["92a1",""],["9340",""],["93a1",""],["9440",""],["94a1",""],["9540",""],["95a1",""],["9640",""],["96a1",""],["9740",""],["97a1",""],["9840",""],["98a1",""],["9940",""],["99a1",""],["9a40",""],["9aa1",""],["9b40",""],["9b62",""],["9ba1",""],["9c40",""],["9ca1",""],["9d40",""],["9da1",""],["9e40",""],["9ea1",""],["9ead",""],["9ec5",""],["9ef5",""],["9f40",""],["9f4f",""],["9fa1",""],["9fae",""],["9fb2",""],["9fc1",""],["9fc9",""],["9fdb",""],["9fe7",""],["9feb",""],["9ff0",""],["a040",""],["a055",""],["a058",""],["a05b",""],["a063",""],["a073",""],["a0a1",""],["a0a6",""],["a0ae",""],["a0b0",""],["a0d4",""],["a0e2",""],["a3c0","",31,""],["c6a1","",9,"",9,"",9,"",23],["c740","",58,""],["c7a1","",81,"",5,"",4],["c840","",26,"",25,""],["c8a1",""],["c8cd",""],["c8f5",""],["f9fe",""],["fa40",""],["faa1",""],["fb40",""],["fba1",""],["fc40",""],["fca1",""],["fd40",""],["fda1",""],["fe40",""],["fea1",""]]')},function(t,e){},function(t,e){},function(t,e,n){var r=Array.prototype.slice;function i(t,e){return function(n){var i=arguments;return"-"==n&&(i=r.call(i)).splice(0,1,e),t.apply(null,i)}}e.readFile=i(n(145),"/dev/stdin"),e.readFileSync=i(n(147),"/dev/stdin"),e.writeFile=i(n(148),"/dev/stdout"),e.writeFileSync=i(n(150),"/dev/stdout")},function(t,n){t.exports=e},function(t,e,n){"use strict";e.__esModule=!0;var r=n(279),i=n(283),o=FormData;function a(t,e,n){var o,a=new XMLHttpRequest;if("string"!=typeof t)throw new TypeError("The method must be a string.");if(e&&"object"==typeof e&&(e=e.href),"string"!=typeof e)throw new TypeError("The URL/path must be a string.");if(null==n&&(n={}),"object"!=typeof n)throw new TypeError("Options must be an object (or null).");t=t.toUpperCase(),n.headers=n.headers||{};var s=!(!(o=/^([\w-]+:)?\/\/([^\/]+)/.exec(e))||o[2]==location.host);for(var u in s||(n.headers["X-Requested-With"]="XMLHttpRequest"),n.qs&&(e=r.default(e,n.qs)),n.json&&(n.body=JSON.stringify(n.json),n.headers["content-type"]="application/json"),n.form&&(n.body=n.form),a.open(t,e,!1),n.headers)a.setRequestHeader(u.toLowerCase(),""+n.headers[u]);a.send(n.body?n.body:null);var c={};return a.getAllResponseHeaders().split("\r\n").forEach((function(t){var e=t.split(":");e.length>1&&(c[e[0].toLowerCase()]=e.slice(1).join(":").trim())})),new i(a.status,c,a.responseText,e)}e.FormData=o,e.default=a,t.exports=a,t.exports.default=a,t.exports.FormData=o},function(t,e,n){"use strict";e.__esModule=!0;var r=n(280);e.default=function(t,e){var n=t.split("?"),i=n[0],o=n[1],a=(o||"").split("#")[0],s=o&&o.split("#").length>1?"#"+o.split("#")[1]:"",u=r.parse(a);for(var c in e)u[c]=e[c];return""!==(a=r.stringify(u))&&(a="?"+a),i+a+s}},function(t,e,n){"use strict";var r=n(281),i=n(282),o=n(152);t.exports={formats:o,parse:i,stringify:r}},function(t,e,n){"use strict";var r=n(151),i=n(152),o={brackets:function(t){return t+"[]"},indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},a=Date.prototype.toISOString,s={delimiter:"&",encode:!0,encoder:r.encode,encodeValuesOnly:!1,serializeDate:function(t){return a.call(t)},skipNulls:!1,strictNullHandling:!1},u=function t(e,n,i,o,a,u,c,l,f,p,h,d){var g=e;if("function"==typeof c)g=c(n,g);else if(g instanceof Date)g=p(g);else if(null===g){if(o)return u&&!d?u(n,s.encoder):n;g=""}if("string"==typeof g||"number"==typeof g||"boolean"==typeof g||r.isBuffer(g))return u?[h(d?n:u(n,s.encoder))+"="+h(u(g,s.encoder))]:[h(n)+"="+h(String(g))];var y,m=[];if(void 0===g)return m;if(Array.isArray(c))y=c;else{var v=Object.keys(g);y=l?v.sort(l):v}for(var _=0;_<y.length;++_){var b=y[_];a&&null===g[b]||(m=Array.isArray(g)?m.concat(t(g[b],i(n,b),i,o,a,u,c,l,f,p,h,d)):m.concat(t(g[b],n+(f?"."+b:"["+b+"]"),i,o,a,u,c,l,f,p,h,d)))}return m};t.exports=function(t,e){var n=t,a=e?r.assign({},e):{};if(null!==a.encoder&&void 0!==a.encoder&&"function"!=typeof a.encoder)throw new TypeError("Encoder has to be a function.");var c=void 0===a.delimiter?s.delimiter:a.delimiter,l="boolean"==typeof a.strictNullHandling?a.strictNullHandling:s.strictNullHandling,f="boolean"==typeof a.skipNulls?a.skipNulls:s.skipNulls,p="boolean"==typeof a.encode?a.encode:s.encode,h="function"==typeof a.encoder?a.encoder:s.encoder,d="function"==typeof a.sort?a.sort:null,g=void 0!==a.allowDots&&a.allowDots,y="function"==typeof a.serializeDate?a.serializeDate:s.serializeDate,m="boolean"==typeof a.encodeValuesOnly?a.encodeValuesOnly:s.encodeValuesOnly;if(void 0===a.format)a.format=i.default;else if(!Object.prototype.hasOwnProperty.call(i.formatters,a.format))throw new TypeError("Unknown format option provided.");var v,_,b=i.formatters[a.format];"function"==typeof a.filter?n=(_=a.filter)("",n):Array.isArray(a.filter)&&(v=_=a.filter);var x,w=[];if("object"!=typeof n||null===n)return"";x=a.arrayFormat in o?a.arrayFormat:"indices"in a?a.indices?"indices":"repeat":"indices";var E=o[x];v||(v=Object.keys(n)),d&&v.sort(d);for(var S=0;S<v.length;++S){var I=v[S];f&&null===n[I]||(w=w.concat(u(n[I],I,E,l,f,p?h:null,_,d,g,y,b,m)))}var C=w.join(c),N=!0===a.addQueryPrefix?"?":"";return C.length>0?N+C:""}},function(t,e,n){"use strict";var r=n(151),i=Object.prototype.hasOwnProperty,o={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:r.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},a=function(t,e,n){if(t){var r=n.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,o=/(\[[^[\]]*])/g,a=/(\[[^[\]]*])/.exec(r),s=a?r.slice(0,a.index):r,u=[];if(s){if(!n.plainObjects&&i.call(Object.prototype,s)&&!n.allowPrototypes)return;u.push(s)}for(var c=0;null!==(a=o.exec(r))&&c<n.depth;){if(c+=1,!n.plainObjects&&i.call(Object.prototype,a[1].slice(1,-1))&&!n.allowPrototypes)return;u.push(a[1])}return a&&u.push("["+r.slice(a.index)+"]"),function(t,e,n){for(var r=e,i=t.length-1;i>=0;--i){var o,a=t[i];if("[]"===a)o=(o=[]).concat(r);else{o=n.plainObjects?Object.create(null):{};var s="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,u=parseInt(s,10);!isNaN(u)&&a!==s&&String(u)===s&&u>=0&&n.parseArrays&&u<=n.arrayLimit?(o=[])[u]=r:o[s]=r}r=o}return r}(u,e,n)}};t.exports=function(t,e){var n=e?r.assign({},e):{};if(null!==n.decoder&&void 0!==n.decoder&&"function"!=typeof n.decoder)throw new TypeError("Decoder has to be a function.");if(n.ignoreQueryPrefix=!0===n.ignoreQueryPrefix,n.delimiter="string"==typeof n.delimiter||r.isRegExp(n.delimiter)?n.delimiter:o.delimiter,n.depth="number"==typeof n.depth?n.depth:o.depth,n.arrayLimit="number"==typeof n.arrayLimit?n.arrayLimit:o.arrayLimit,n.parseArrays=!1!==n.parseArrays,n.decoder="function"==typeof n.decoder?n.decoder:o.decoder,n.allowDots="boolean"==typeof n.allowDots?n.allowDots:o.allowDots,n.plainObjects="boolean"==typeof n.plainObjects?n.plainObjects:o.plainObjects,n.allowPrototypes="boolean"==typeof n.allowPrototypes?n.allowPrototypes:o.allowPrototypes,n.parameterLimit="number"==typeof n.parameterLimit?n.parameterLimit:o.parameterLimit,n.strictNullHandling="boolean"==typeof n.strictNullHandling?n.strictNullHandling:o.strictNullHandling,""===t||null==t)return n.plainObjects?Object.create(null):{};for(var s="string"==typeof t?function(t,e){for(var n={},r=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,a=e.parameterLimit===1/0?void 0:e.parameterLimit,s=r.split(e.delimiter,a),u=0;u<s.length;++u){var c,l,f=s[u],p=f.indexOf("]="),h=-1===p?f.indexOf("="):p+1;-1===h?(c=e.decoder(f,o.decoder),l=e.strictNullHandling?null:""):(c=e.decoder(f.slice(0,h),o.decoder),l=e.decoder(f.slice(h+1),o.decoder)),i.call(n,c)?n[c]=[].concat(n[c]).concat(l):n[c]=l}return n}(t,n):t,u=n.plainObjects?Object.create(null):{},c=Object.keys(s),l=0;l<c.length;++l){var f=c[l],p=a(f,s[f],n);u=r.merge(u,p,n)}return r.compact(u)}},function(t,e,n){"use strict";var r=function(){function t(t,e,n,r){if("number"!=typeof t)throw new TypeError("statusCode must be a number but was "+typeof t);if(null===e)throw new TypeError("headers cannot be null");if("object"!=typeof e)throw new TypeError("headers must be an object but was "+typeof e);this.statusCode=t;var i={};for(var o in e)i[o.toLowerCase()]=e[o];this.headers=i,this.body=n,this.url=r}return t.prototype.isError=function(){return 0===this.statusCode||this.statusCode>=400},t.prototype.getBody=function(t){var e;if(0===this.statusCode)throw(e=new Error("This request to "+this.url+" resulted in a status code of 0. This usually indicates some kind of network error in a browser (e.g. CORS not being set up or the DNS failing to resolve):\n"+this.body.toString())).statusCode=this.statusCode,e.headers=this.headers,e.body=this.body,e.url=this.url,e;if(this.statusCode>=300)throw(e=new Error("Server responded to "+this.url+" with status code "+this.statusCode+":\n"+this.body.toString())).statusCode=this.statusCode,e.headers=this.headers,e.body=this.body,e.url=this.url,e;return t&&"string"!=typeof this.body?this.body.toString(t):this.body},t}();t.exports=r},function(t,e){t.exports=n},function(t,e,n){"use strict";var r=n(0),i=n(139);r({target:"String",proto:!0,forced:n(140)("sub")},{sub:function(){return i(this,"sub","","")}})},function(t,e,n){"use strict";n.r(e);n(67),n(101),n(102),n(58),n(107),n(82),n(83),n(108),n(109),n(110),n(111),n(87),n(116),n(118),n(119),n(120);function r(t,e,n){if(!c(n=n||{}))throw new Error("options is invalid");var r=n.bbox,i=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");r&&l(r),i&&f(i);var o={type:"Feature"};return i&&(o.id=i),r&&(o.bbox=r),o.properties=e||{},o.geometry=t,o}function i(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!u(t[0])||!u(t[1]))throw new Error("coordinates must contain numbers");return r({type:"Point",coordinates:t},e,n)}function o(t,e,n){if(!t)throw new Error("coordinates is required");for(var i=0;i<t.length;i++){var o=t[i];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++){if(0===i&&0===a&&!u(o[0][0])||!u(o[0][1]))throw new Error("coordinates must contain numbers");if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}}return r({type:"Polygon",coordinates:t},e,n)}function a(t,e,n){if(!t)throw new Error("coordinates is required");if(t.length<2)throw new Error("coordinates must be an array of two or more positions");if(!u(t[0][1])||!u(t[0][1]))throw new Error("coordinates must contain numbers");return r({type:"LineString",coordinates:t},e,n)}function s(t,e){if(!c(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");n&&l(n),r&&f(r);var i={type:"FeatureCollection"};return r&&(i.id=r),n&&(i.bbox=n),i.features=t,i}function u(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function c(t){return!!t&&t.constructor===Object}function l(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!u(t))throw new Error("bbox must only contain numbers")}))}function f(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function p(t){if(!t)throw new Error("obj is required");var e;if(t.length?e=t:t.coordinates?e=t.coordinates:t.geometry&&t.geometry.coordinates&&(e=t.geometry.coordinates),e)return function t(e){if(e.length>1&&u(e[0])&&u(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return t(e[0]);throw new Error("coordinates must only contain numbers")}(e),e;throw new Error("No valid coordinates")}function h(t){if(!t)throw new Error("geojson is required");if(void 0!==t.geometry)return t.geometry;if(t.coordinates||t.geometries)return t;throw new Error("geojson must be a valid Feature or Geometry Object")}function d(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var a=e[i][0],s=e[i][1],u=e[o][0],c=e[o][1];if(t[1]*(a-u)+s*(u-t[0])+c*(t[0]-a)==0&&(a-t[0])*(u-t[0])<=0&&(s-t[1])*(c-t[1])<=0)return!n;s>t[1]!=c>t[1]&&t[0]<(u-a)*(t[1]-s)/(c-s)+a&&(r=!r)}return r}var g=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.ignoreBoundary;if(!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var i=function(t){if(!t)throw new Error("obj is required");var e=p(t);if(e.length>1&&u(e[0])&&u(e[1]))return e;throw new Error("Coordinate is not a valid Point")}(t),o=p(e),a=e.geometry?e.geometry.type:e.type,s=e.bbox;if(s&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(i,s))return!1;"Polygon"===a&&(o=[o]);for(var c=0,l=!1;c<o.length&&!l;c++)if(d(i,o[c][0],r)){for(var f=!1,h=1;h<o[c].length&&!f;)d(i,o[c][h],!r)&&(f=!0),h++;f||(l=!0)}return l};function y(t,e,n){if(null!==t)for(var r,i,o,a,s,u,c,l,f=0,p=0,h=t.type,d="FeatureCollection"===h,g="Feature"===h,m=d?t.features.length:1,v=0;v<m;v++){s=(l=!!(c=d?t.features[v].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var _=0;_<s;_++){var b=0,x=0;if(null!==(a=l?c.geometries[_]:c)){u=a.coordinates;var w=a.type;switch(f=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":e(u,p,v,b,x),p++,b++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++)e(u[r],p,v,b,x),p++,"MultiPoint"===w&&b++;"LineString"===w&&b++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-f;i++)e(u[r][i],p,v,b,x),p++;"MultiLineString"===w&&b++,"Polygon"===w&&x++}"Polygon"===w&&b++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for("MultiPolygon"===w&&(x=0),i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-f;o++)e(u[r][i][o],p,v,b,x),p++;x++}b++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)y(a.geometries[r],e,n);break;default:throw new Error("Unknown Geometry Type")}}}}}function m(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)e(t.features[n],n)}function v(t,e){var n,r,i,o,a,s,u,c,l,f,p=0,h="FeatureCollection"===t.type,d="Feature"===t.type,g=h?t.features.length:1;for(n=0;n<g;n++){for(s=h?t.features[n].geometry:d?t.geometry:t,c=h?t.features[n].properties:d?t.properties:{},l=h?t.features[n].bbox:d?t.bbox:void 0,f=h?t.features[n].id:d?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=u?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":e(o,p,c,l,f);break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)e(o.geometries[r],p,c,l,f);break;default:throw new Error("Unknown Geometry Type")}else e(null,p,c,l,f);p++}}function _(t,e){v(t,(function(t,n,i,o,a){var s,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return void e(r(t,i,{bbox:o,id:a}),n,0)}switch(u){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}t.coordinates.forEach((function(t,o){e(r({type:s,coordinates:t},i),n,o)}))}))}var b=function(t,e){var n=0,r=0,o=0;return y(t,(function(t){n+=t[0],r+=t[1],o++}),!0),i([n/o,r/o],e)},x=n(153),w=n.n(x);var E=function(t,e){if(!c(e=e||{}))throw new Error("options is invalid");var n=e.concavity||1/0,r=[];if(y(t,(function(t){r.push([t[0],t[1]])})),!r.length)return null;var i=w()(r,n);return i.length>3?o([i]):null},S=n(17);function I(t){var e=0;if(t&&t.length>0){e+=Math.abs(C(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(C(t[n]))}return e}function C(t){var e,n,r,i,o,a,s=0,u=t.length;if(u>2){for(a=0;a<u;a++)a===u-2?(r=u-2,i=u-1,o=0):a===u-1?(r=u-1,i=0,o=1):(r=a,i=a+1,o=a+2),e=t[r],n=t[i],s+=(N(t[o][0])-N(e[0]))*Math.sin(N(n[1]));s=6378137*s*6378137/2}return s}function N(t){return t*Math.PI/180}var A=function(t){return function(t,e,n){var r=n;return v(t,(function(t,i,o,a,s){r=0===i&&void 0===n?t:e(r,t,i,o,a,s)})),r}(t,(function(t,e){return t+function t(e){var n,r=0;switch(e.type){case"Polygon":return I(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)r+=I(e.coordinates[n]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)r+=t(e.geometries[n]);return r}}(e)}),0)};function O(t){switch(t.type){case"Polygon":return A(t)>1?t:null;case"MultiPolygon":var e=[];if(_(t,(function(t){A(t)>1&&e.push(t.geometry.coordinates)})),e.length)return{type:"MultiPolygon",coordinates:e}}}var P=function(t,e){var n=h(t),i=h(e),o=t.properties||{};if(n=O(n),i=O(i),!n)return null;if(!i)return r(n,o);var a=new S.GeoJSONReader,s=a.read(n),u=a.read(i),c=S.OverlayOp.difference(s,u);return c.isEmpty()?null:r((new S.GeoJSONWriter).write(c),o)};var T=function(t,e){if(!c(e=e||{}))throw new Error("options is invalid");var n=e.precision,r=e.coordinates,i=e.mutate;if(n=null==n||isNaN(n)?6:n,r=null==r||isNaN(r)?3:r,!t)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof r)throw new Error("<coordinates> must be a number");!1!==i&&void 0!==i||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,n);return y(t,(function(t){!function(t,e,n){t.length>n&&t.splice(n,t.length);for(var r=0;r<t.length;r++)t[r]=Math.round(t[r]*e)/e}(t,o,r)})),t};function M(t){var e,n,r,i,o,a=p(t);if(2===a.length&&(e=a[0],n=a[1],e[0]!==n[0]||e[1]!==n[1]))return a;var s=[],u=a.length-1;s.push(a[0]);for(var c=1;c<u;c++)r=a[c-1],i=a[c],L(r,o=a[c+1],i)||s.push(i);return s.push(o),s}function L(t,e,n){var r=n[0],i=n[1],o=t[0],a=t[1],s=e[0],u=e[1],c=s-o,l=u-a;return 0===(r-o)*l-(i-a)*c&&(Math.abs(c)>=Math.abs(l)?c>0?o<=r&&r<=s:s<=r&&r<=o:l>0?a<=i&&i<=u:u<=i&&i<=a)}var R=function(t,e){var n="object"==typeof e?e.mutate:e;if(!t)throw new Error("geojson is required");var i=function(t,e){if(!t)throw new Error((e||"geojson")+" is required");if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error((e||"geojson")+" is invalid")}(t),o=[];switch(i){case"LineString":o=M(t);break;case"MultiLineString":case"Polygon":p(t).forEach((function(t){o.push(M(t))}));break;case"MultiPolygon":p(t).forEach((function(t){var e=[];t.forEach((function(t){e.push(M(t))})),o.push(e)}));break;case"Point":return t;case"MultiPoint":var a={};p(t).forEach((function(t){var e=t.join("-");a.hasOwnProperty(e)||(o.push(t),a[e]=!0)}));break;default:throw new Error(i+" geometry not supported")}return t.coordinates?!0===n?(t.coordinates=o,t):{type:i,coordinates:o}:!0===n?(t.geometry.coordinates=o,t):r({type:i,coordinates:o},t.properties,t.bbox,t.id)};var D=function(t,e){var n=h(t),i=h(e);if(R(T(i,{precision:4})).coordinates[0].length<4)return null;if(R(T(n,{precision:4})).coordinates[0].length<4)return null;var o=new S.GeoJSONReader,a=o.read(T(n)),s=o.read(T(i)),u=S.OverlayOp.intersection(a,s);return u.isEmpty()?null:r((new S.GeoJSONWriter).write(u))};function F(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function k(t,e){return t<e?-1:t>e?1:0}var j=function(t,e,n,r,i){!function t(e,n,r,i,o){for(;i>r;){if(i-r>600){var a=i-r+1,s=n-r+1,u=Math.log(a),c=.5*Math.exp(2*u/3),l=.5*Math.sqrt(u*c*(a-c)/a)*(s-a/2<0?-1:1),f=Math.max(r,Math.floor(n-s*c/a+l)),p=Math.min(i,Math.floor(n+(a-s)*c/a+l));t(e,n,f,p,o)}var h=e[n],d=r,g=i;for(F(e,r,n),o(e[i],h)>0&&F(e,r,i);d<g;){for(F(e,d,g),d++,g--;o(e[d],h)<0;)d++;for(;o(e[g],h)>0;)g--}0===o(e[r],h)?F(e,r,g):(g++,F(e,g,i)),g<=n&&(r=g+1),n<=g&&(i=g-1)}}(t,e,n||0,r||t.length-1,i||k)};function B(t,e){if(!(this instanceof B))return new B(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function G(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function U(t,e){z(t,0,t.children.length,e,t)}function z(t,e,n,r,i){i||(i=$(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,a=e;a<n;a++)o=t.children[a],q(i,t.leaf?r(o):o);return i}function q(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function V(t,e){return t.minX-e.minX}function Y(t,e){return t.minY-e.minY}function X(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function J(t){return t.maxX-t.minX+(t.maxY-t.minY)}function W(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function H(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function $(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function K(t,e,n,r,i){for(var o,a=[e,n];a.length;)(n=a.pop())-(e=a.pop())<=r||(o=e+Math.ceil((n-e)/r/2)*r,j(t,o,e,n,i),a.push(e,o,o,n))}B.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!H(t,e))return n;for(var i,o,a,s,u=[];e;){for(i=0,o=e.children.length;i<o;i++)a=e.children[i],H(t,s=e.leaf?r(a):a)&&(e.leaf?n.push(a):W(t,s)?this._all(a,n):u.push(a));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!H(t,e))return!1;for(var r,i,o,a,s=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],H(t,a=e.leaf?n(o):o)){if(e.leaf||W(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=$([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,a=this.data,s=this.toBBox(t),u=[],c=[];a||u.length;){if(a||(a=u.pop(),r=u[u.length-1],n=c.pop(),o=!0),a.leaf&&-1!==(i=G(t,a.children,e)))return a.children.splice(i,1),u.push(a),this._condense(u),this;o||a.leaf||!W(a,s)?r?(n++,a=r.children[n],o=!1):a=null:(u.push(a),c.push(n),n=0,r=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:V,compareMinY:Y,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,a=this._maxEntries;if(o<=a)return U(i=$(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),(i=$([])).leaf=!1,i.height=r;var s,u,c,l,f=Math.ceil(o/a),p=f*Math.ceil(Math.sqrt(a));for(K(t,e,n,p,this.compareMinX),s=e;s<=n;s+=p)for(K(t,s,c=Math.min(s+p-1,n),f,this.compareMinY),u=s;u<=c;u+=f)l=Math.min(u+f-1,c),i.children.push(this._build(t,u,l,r-1));return U(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,a,s,u,c,l,f,p,h;r.push(e),!e.leaf&&r.length-1!==n;){for(l=f=1/0,i=0,o=e.children.length;i<o;i++)u=X(a=e.children[i]),p=t,h=a,(c=(Math.max(h.maxX,p.maxX)-Math.min(h.minX,p.minX))*(Math.max(h.maxY,p.maxY)-Math.min(h.minY,p.minY))-u)<f?(f=c,l=u<l?u:l,s=a):c===f&&u<l&&(l=u,s=a);e=s||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],a=this._chooseSubtree(i,this.data,e,o);for(a.children.push(t),q(a,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),a=$(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,U(n,this.toBBox),U(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(t,e){this.data=$([t,e]),this.data.height=t.height+1,this.data.leaf=!1,U(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,a,s,u,c,l,f,p,h,d,g,y;for(u=c=1/0,r=e;r<=n-e;r++)i=z(t,0,r,this.toBBox),o=z(t,r,n,this.toBBox),f=i,p=o,h=void 0,d=void 0,g=void 0,y=void 0,h=Math.max(f.minX,p.minX),d=Math.max(f.minY,p.minY),g=Math.min(f.maxX,p.maxX),y=Math.min(f.maxY,p.maxY),a=Math.max(0,g-h)*Math.max(0,y-d),s=X(i)+X(o),a<u?(u=a,l=r,c=s<c?s:c):a===u&&s<c&&(c=s,l=r);return l},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:V,i=t.leaf?this.compareMinY:Y;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,a=this.toBBox,s=z(t,0,e,a),u=z(t,n-e,n,a),c=J(s)+J(u);for(i=e;i<n-e;i++)o=t.children[i],q(s,t.leaf?a(o):o),c+=J(s);for(i=n-e-1;i>=e;i--)o=t.children[i],q(u,t.leaf?a(o):o),c+=J(u);return c},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)q(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():U(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var Z=B;function Q(t){var e=[t[0],t[1]],n=[t[0],t[3]],r=[t[2],t[3]];return{type:"Feature",bbox:t,properties:{},geometry:{type:"Polygon",coordinates:[[e,[t[2],t[1]],r,n,e]]}}}function tt(t){var e=[1/0,1/0,-1/0,-1/0];return y(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}var et=function(t){var e=Z(t);return e.insert=function(t){if(Array.isArray(t)){var e=t;(t=Q(e)).bbox=e}else t.bbox=t.bbox?t.bbox:tt(t);return Z.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){var n=Q(t);n.bbox=t,e.push(n)})):m(t,(function(t){t.bbox=t.bbox?t.bbox:tt(t),e.push(t)})),Z.prototype.load.call(this,e)},e.remove=function(t){if(Array.isArray(t)){var e=t;(t=Q(e)).bbox=e}return Z.prototype.remove.call(this,t)},e.clear=function(){return Z.prototype.clear.call(this)},e.search=function(t){return{type:"FeatureCollection",features:Z.prototype.search.call(this,this.toBBox(t))}},e.collides=function(t){return Z.prototype.collides.call(this,this.toBBox(t))},e.all=function(){return{type:"FeatureCollection",features:Z.prototype.all.call(this)}},e.toJSON=function(){return Z.prototype.toJSON.call(this)},e.fromJSON=function(t){return Z.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;return{minX:(e=t.bbox?t.bbox:Array.isArray(t)&&4===t.length?t:tt(t))[0],minY:e[1],maxX:e[2],maxY:e[3]}},e};var nt=function(t){if(!t)throw new Error("geojson is required");var e=[];return _(t,(function(t){!function(t,e){var n=[],r=t.geometry;switch(r.type){case"Polygon":n=p(r);break;case"LineString":n=[p(r)]}n.forEach((function(n){(function(t,e){var n=[];return t.reduce((function(t,r){var i,o,s,u,c,l,f=a([t,r],e);return f.bbox=(o=r,s=(i=t)[0],u=i[1],c=o[0],l=o[1],[s<c?s:c,u<l?u:l,s>c?s:c,u>l?u:l]),n.push(f),r})),n})(n,t.properties).forEach((function(t){t.id=e.length,e.push(t)}))}))}(t,e)})),s(e)};function rt(t,e){var n=p(t),r=p(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==r.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var o=n[0][0],a=n[0][1],s=n[1][0],u=n[1][1],c=r[0][0],l=r[0][1],f=r[1][0],h=r[1][1],d=(h-l)*(s-o)-(f-c)*(u-a),g=(f-c)*(a-l)-(h-l)*(o-c),y=(s-o)*(a-l)-(u-a)*(o-c);if(0===d)return null;var m=g/d,v=y/d;return m>=0&&m<=1&&v>=0&&v<=1?i([o+m*(s-o),a+m*(u-a)]):null}var it=function(t,e){var n={},i=[];if("LineString"===t.type&&(t=r(t)),"LineString"===e.type&&(e=r(e)),"Feature"===t.type&&"Feature"===e.type&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var o=rt(t,e);return o&&i.push(o),s(i)}var a=et();return a.load(nt(e)),m(nt(t),(function(t){m(a.search(t),(function(e){var r=rt(t,e);if(r){var o=p(r).join(",");n[o]||(n[o]=!0,i.push(r))}}))})),s(i)};var ot=function(){for(var t=new S.GeoJSONReader,e=t.read(JSON.stringify(arguments[0].geometry)),n=1;n<arguments.length;n++)e=S.UnionOp.union(e,t.read(JSON.stringify(arguments[n].geometry)));var r=new S.GeoJSONWriter;return{type:"Feature",geometry:e=r.write(e),properties:arguments[0].properties}},at=n(66);n(127),n(129),n(135),n(285);function st(t){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ut(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ct=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=n}var e,n,r;return e=t,(n=[{key:"dot",value:function(t){return this.x*t.x+this.y*t.y}},{key:"add",value:function(e){return new t(this.x+e.x,this.y+e.y)}},{key:"sub",value:function(e){return new t(this.x-e.x,this.y-e.y)}},{key:"scale",value:function(e){return new t(this.x*e,this.y*e)}},{key:"sqDistanceTo",value:function(t){return(this.x-t.x)*(this.x-t.x)+(this.y-t.y)*(this.y-t.y)}},{key:"toStr",value:function(){return"(".concat(this.x.toFixed(3),", ").concat(this.y.toFixed(3),")")}},{key:"copyFrom",value:function(t){this.x=t.x,this.y=t.y}}])&&ut(e.prototype,n),r&&ut(e,r),t}();function lt(t,e){return t.x*e.y-t.y*e.x}function ft(t,e){return lt(t[1].sub(t[0]),e.sub(t[0]))}var pt=new ct(0,0);function ht(t,e){return t.bin==e.bin?0:t.bin<e.bin?-1:1}function dt(t,e){var n=t[1].sub(t[0]),r=e[0].sub(t[0]),i=e[1].sub(t[0]),o=lt(n,r),a=lt(n,i);if(o>0&&a>0||o<0&&a<0)return!1;var s=e[1].sub(e[0]),u=t[0].sub(e[0]),c=t[1].sub(e[0]),l=lt(s,u),f=lt(s,c);if(l>0&&f>0||l<0&&f<0)return!1;if(Math.abs(o)<1e-14&&Math.abs(a)<1e-14){if(Math.max(e[0].x,e[1].x)<Math.min(t[0].x,t[1].x)||Math.min(e[0].x,e[1].x)>Math.max(t[0].x,t[1].x))return!1;if(Math.max(e[0].y,e[1].y)<Math.min(t[0].y,t[1].y)||Math.min(e[0].y,e[1].y)>Math.max(t[0].y,t[1].y))return!1}return!0}function gt(t){!function(t){for(var e=t.vert.length,n=Math.round(Math.pow(e,.25)),r=[],i=[],o=0;o<e;o++){var a=(t.vert[o].x-pt.x)/1,s=(t.vert[o].y-pt.y)/1;r.push(new ct(a,s));var u=Math.round((n-1)*a),c=Math.round((n-1)*s),l=void 0;l=c%2==0?c*n+u:(c+1)*n-u-1,i.push({ind:o,bin:l})}var f=1e3;r.push(new ct(-999.5,-f/Math.sqrt(3)+.5)),r.push(new ct(1000.5,-f/Math.sqrt(3)+.5)),r.push(new ct(.5,2e3/Math.sqrt(3)+.5));for(var p=e;p<e+3;p++)t.vert.push(new ct(1*r[p].x+pt.x,1*r[p].y+pt.y));i.sort(ht),t.scaled_vert=r,t.bin=i,t.tri=[[e,e+1,e+2]],t.adj=[[-1,-1,-1]],t.vert_to_tri=[]}(t);for(var e=t.scaled_vert,n=t.bin,r=t.tri,i=t.adj,o=e.length-3,a=0,s=0;s<o;s++){var u=n[s].ind;if(-1===(a=yt(e[u],t,a)[0]))throw"Could not find a triangle containing the new vertex!";var c=r[a],l=[c[0],c[1],u],f=[u,c[1],c[2]],p=[c[0],u,c[2]];r[a]=l;var h=r.length,d=i[a];i[a]=[h,h+1,d[2]],r.push(f),r.push(p),i.push([d[0],h+1,a]),i.push([h,d[1],a]);var g=[];if(d[2]>=0){var y=i[d[2]].indexOf(a);g.push([d[2],y])}if(d[0]>=0){var m=i[d[0]].indexOf(a);i[d[0]][m]=h,g.push([d[0],m])}if(d[1]>=0){var v=i[d[1]].indexOf(a);i[d[1]][v]=h+1,g.push([d[1],v])}mt(u,t,g)}!function(t){for(var e=t.scaled_vert,n=t.tri,r=t.adj,i=e.length-3,o=0,a=[],s=0;s<n.length;s++){for(var u=o,c=s;c<n.length;c++){if(n[c][0]<i&&n[c][1]<i&&n[c][2]<i){a[s+o]=s;break}a[s+o]=-1,o++}var l=o-u;l>0&&(n.splice(s,l),r.splice(s,l))}for(var f=0;f<r.length;f++)for(var p=0;p<3;p++)r[f][p]=a[r[f][p]];t.scaled_vert.splice(-3,3),t.vert.splice(-3,3)}(t)}function yt(t,e,n){for(var r=e.scaled_vert,i=e.tri,o=e.adj,a=Math.max(10,o.length),s=0,u=[];s<a;){if(-1===n)return[n,s];var c=i[n],l=[ft([r[c[1]],r[c[2]]],t),ft([r[c[2]],r[c[0]]],t),ft([r[c[0]],r[c[1]]],t)];if(l[0]>=0&&l[1]>=0&&l[2]>=0)return[n,s];for(var f=-1,p=0;p<3;p++)if(l[p]>=0){f=p;break}var h=(f+1)%3,d=(f+2)%3;if(l[h]>=0&&l[d]<0)n=o[n][d],u[s]=r[c[f]].add(r[c[h]]).scale(.5);else if(l[h]<0&&l[d]>=0)n=o[n][h],u[s]=r[c[d]].add(r[c[f]]).scale(.5);else{var g=r[c[h]].sub(r[c[f]]),y=t.sub(r[c[f]]);g.dot(y)>0?(n=o[n][d],u[s]=r[c[f]].add(r[c[h]]).scale(.5)):(n=o[n][h],u[s]=r[c[d]].add(r[c[f]]).scale(.5))}s++}throw"Could not locate the triangle that encloses (".concat(t.x,", ").concat(t.y,")!")}function mt(t,e,n){for(var r=e.scaled_vert,i=e.tri,o=e.adj,a=r[t];n.length>0;){for(var s=n.pop(),u=s[0],c=i[u],l=[],f=0;f<3;f++)l[f]=r[c[f]];if(!_t(l,a)){var p=s[1],h=o[u][p];if(h<0)throw"negative index";vt(e,u,h);var d=i[u].indexOf(t),g=o[u][d];if(g>=0){var y=o[g].indexOf(u);n.push([g,y])}var m=i[h].indexOf(t),v=o[h][m];if(v>=0){var _=o[v].indexOf(h);n.push([v,_])}}}}function vt(t,e,n){var r=t.tri,i=t.adj,o=t.vert_to_tri,a=i[e].indexOf(n),s=i[n].indexOf(e),u=(a+1)%3,c=(a+2)%3,l=(s+1)%3,f=(s+2)%3;r[e][c]=r[n][s],r[n][f]=r[e][a],i[e][a]=i[n][l],i[n][s]=i[e][u];var p=i[e][u];if(p>=0){var h=i[p].indexOf(e);i[p][h]=n}var d=i[n][l];if(d>=0){var g=i[d].indexOf(n);i[d][g]=e}if(i[e][u]=n,i[n][l]=e,o.length>0){o[r[e][a]].push(n),o[r[n][s]].push(e);var y=o[r[e][u]].indexOf(n);o[r[e][u]].splice(y,1),y=o[r[n][l]].indexOf(e),o[r[n][l]].splice(y,1)}}function _t(t,e){var n=t[0].sub(e),r=t[1].sub(e),i=t[2].sub(e),o=n.x*n.x+n.y*n.y,a=r.x*r.x+r.y*r.y,s=i.x*i.x+i.y*i.y;return n.x*(r.y*s-a*i.y)-n.y*(r.x*s-a*i.x)+o*(r.x*i.y-r.y*i.x)<=0}function bt(t){if(0!=t.con_edge.length){!function(t){var e=t.tri;t.vert_to_tri=[];for(var n=t.vert_to_tri,r=0;r<e.length;r++)for(var i=0;i<3;i++)null==n[e[r][i]]?n[e[r][i]]=[r]:n[e[r][i]].push(r)}(t);for(var e,n,r=t.con_edge,i=t.tri,o=t.scaled_vert,a=t.adj,s=t.vert_to_tri,u=[],c=0;c<r.length;c++){for(var l=xt(t,c),f=0,p=Math.max(l.length,1);l.length>0&&f<p;)wt(t,l,c,u),l=xt(t,c),f++;if(l.length>0)throw"Could not add edge ".concat(c," to triangulation after ").concat(p," iterations!")}for(;;){for(var h=0,d=0;d<u.length;d++){for(var g=u[d],y=!1,m=0;m<r.length;m++)if(e=g,n=r[m],e[0]==n[0]&&e[1]==n[1]||e[1]==n[0]&&e[0]==n[1]){y=!0;break}if(!y){for(var v=s[g[0]],_=0,b=[-1,-1],x=0;x<v.length;x++){var w=i[v[x]];if((w[0]==g[1]||w[1]==g[1]||w[2]==g[1])&&(b[_]=v[x],2==++_))break}if(-1!=b[0]){var E=[o[i[b[0]][0]],o[i[b[0]][1]],o[i[b[0]][2]]],S=a[b[1]].indexOf(b[0]);if(!_t(E,o[i[b[1]][S]])){var I=a[b[0]].indexOf(b[1]);vt(t,b[0],b[1]),h++,u[d]=[i[b[0]][I],i[b[1]][S]]}}}}if(0==h)break}}}function xt(t,e){for(var n=t.tri,r=t.scaled_vert,i=t.adj,o=t.con_edge,a=t.vert_to_tri,s=o[e][0],u=o[e][1],c=[r[s],r[u]],l=a[s],f=!1,p=[],h=0;h<l.length;h++){var d=n[l[h]],g=d.indexOf(s),y=(g+1)%3,m=(g+2)%3;if(u==d[y]){f=!0;break}if(u==d[m]){f=!0;break}if(dt(c,[r[d[y]],r[d[m]]])){p.push([l[h],g]);break}}if(!f){if(0==p.length)throw"Cannot have no intersections!";for(;;){var v=p[p.length-1],_=i[v[0]][v[1]];if(n[_][0]==u||n[_][1]==u||n[_][2]==u)break;var b=i[_].indexOf(v[0]);if(-1==b)throw"Could not find edge!";for(var x=n[_],w=1;w<3;w++){var E=(b+w+2)%3;if(dt(c,[r[x[(b+w+1)%3]],r[x[E]]])){p.push([_,(b+w)%3]);break}}}}return p}function wt(t,e,n,r){for(var i=t.tri,o=t.scaled_vert,a=t.adj,s=t.con_edge[n],u=[o[s[0]],o[s[1]]],c=e.length,l=0;l<c;l++){var f=e[c-1-l][0],p=e[c-1-l][1],h=a[f][p],d=a[h].indexOf(f),g=o[i[f][p]],y=o[i[f][(p+1)%3]],m=o[i[h][d]],v=o[i[f][(p+2)%3]];if(dt([g,m],[y,v])){vt(t,f,h);var _=[i[f][p],i[h][d]],b=[g,m];!(_[0]==s[0]||_[0]==s[1]||_[1]==s[0]||_[1]==s[1])&&dt(u,b)||r.push([_[0],_[1]])}}}function Et(t,e,n){for(var r=[n[t[0]],n[t[1]]],i=0;i<e.length;i++){if(e[i][0]==t[0]&&e[i][1]==t[1]||e[i][0]==t[1]&&e[i][1]==t[0])return!1;var o=e[i][0]==t[0]||e[i][0]==t[1]||e[i][1]==t[0]||e[i][1]==t[1],a=[n[e[i][0]],n[e[i][1]]];if(!o&&dt(a,r))return!1}return!0}var St=function(t,e,n){if(e||(e=[]),"object"!==st(t)||"FeatureCollection"!==t.type)throw"Argument points must be FeatureCollection";if(!Array.isArray(e))throw"Argument points must be Array of Array";var r=!1,i=t.features.reduce((function(t,e){var i=e.geometry.coordinates;return t[0].push(i[0]),t[1].push(i[1]),n?t[2].push(e.properties[n]):3===i.length&&(r=!0,t[2].push(e.geometry.coordinates[2])),t}),[[],[],[]]),a=Math.max.apply(null,i[0]),u=Math.min.apply(null,i[0]),c=Math.max.apply(null,i[1]),l=Math.min.apply(null,i[1]),f=a-u,p=(a+u)/2,h=c-l,d=(c+l)/2,g=1.1*Math.max(f,h),y={vert:t.features.map((function(t){var e=t.geometry.coordinates,n=[(e[0]-p)/g+.5,(e[1]-d)/g+.5];return new ct(n[0],n[1])}))};!function(t,e){var n=t.vert.length;t.con_edge=[];for(var r=0;r<e.length;r++){var i=e[r];if(i[0]<0||i[0]>=n||i[1]<0||i[1]>=n)throw"Vertex indices of edge ".concat(r," need to be non-negative and less than the number of input vertices.");if(i[0]===i[1])throw"Edge ".concat(r," is degenerate!");if(!Et(i,t.con_edge,t.vert))throw"Edge ".concat(r," already exists or intersects with an existing edge!");t.con_edge.push([i[0],i[1]])}}(y,e),gt(y),bt(y);var m=["a","b","c"];return s(y.tri.map((function(t){var e={},n=t.map((function(t,n){var o=[i[0][t],i[1][t]];return void 0!==i[2][t]&&(r?o[2]=i[2][t]:e[m[n]]=i[2][t]),o}));return n[3]=n[0],o([n],e)})))};function It(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ct(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Nt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var At=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};It(this,t),Nt(this,"bounds",void 0),Nt(this,"boundsPolygon",void 0),Nt(this,"centroid",void 0),Nt(this,"edgeNodes",void 0),Nt(this,"edges",void 0),Nt(this,"importance",void 0),Nt(this,"indexedTins",void 0),Nt(this,"kinks",void 0),Nt(this,"points",void 0),Nt(this,"pointsWeightBuffer",void 0),Nt(this,"priority",void 0),Nt(this,"stateBackward",void 0),Nt(this,"stateFull",void 0),Nt(this,"stateTriangle",void 0),Nt(this,"strictMode",void 0),Nt(this,"strict_status",void 0),Nt(this,"tins",void 0),Nt(this,"vertexMode",void 0),Nt(this,"vertices_params",void 0),Nt(this,"wh",void 0),Nt(this,"xy",void 0),Nt(this,"yaxisMode",void 0),Nt(this,"pointsSet",void 0),e.bounds?this.setBounds(e.bounds):(this.setWh(e.wh),this.vertexMode=e.vertexMode||t.VERTEX_PLAIN),this.strictMode=e.strictMode||t.MODE_AUTO,this.yaxisMode=e.yaxisMode||t.YAXIS_INVERT,this.importance=e.importance||0,this.priority=e.priority||0,this.stateFull=e.stateFull,e.points&&this.setPoints(e.points),e.edges&&this.setEdges(e.edges)}var e,n,r;return e=t,(n=[{key:"setPoints",value:function(e){this.yaxisMode==t.YAXIS_FOLLOW&&(e=e.map((function(t){return[t[0],[t[1][0],-1*t[1][1]]]}))),this.points=e,this.tins=void 0,this.indexedTins=void 0}},{key:"setEdges",value:function(t){t||(t=[]),this.edges=t,this.edgeNodes=void 0,this.tins=void 0,this.indexedTins=void 0}},{key:"setBounds",value:function(e){this.bounds=e;for(var n=e[0][0],r=n,i=e[0][1],a=i,s=[e[0]],u=1;u<e.length;u++){var c=e[u];c[0]<n&&(n=c[0]),c[0]>r&&(r=c[0]),c[1]<i&&(i=c[1]),c[1]>a&&(a=c[1]),s.push(c)}s.push(e[0]),this.boundsPolygon=o([s]),this.xy=[n,i],this.wh=[r-n,a-i],this.vertexMode=t.VERTEX_PLAIN,this.tins=void 0,this.indexedTins=void 0}},{key:"setCompiled",value:function(e){var n=this;if(!e.tins&&e.points&&e.tins_points){this.points=e.points,this.pointsWeightBuffer=e.weight_buffer,e.strict_status?this.strict_status=e.strict_status:e.kinks_points?this.strict_status=t.STATUS_ERROR:2==e.tins_points.length?this.strict_status=t.STATUS_LOOSE:this.strict_status=t.STATUS_STRICT,this.vertices_params={forw:[e.vertices_params[0]],bakw:[e.vertices_params[1]]},this.vertices_params.forw[1]=[0,1,2,3].map((function(t){var n=(t+1)%4;return s([Gt(["cent","bbox".concat(t),"bbox".concat(n)],e.points,e.edgeNodes||[],e.centroid_point,e.vertices_points,!1)])})),this.vertices_params.bakw[1]=[0,1,2,3].map((function(t){var n=(t+1)%4;return s([Gt(["cent","bbox".concat(t),"bbox".concat(n)],e.points,e.edgeNodes||[],e.centroid_point,e.vertices_points,!0)])})),this.centroid={forw:i(e.centroid_point[0],{target:{geom:e.centroid_point[1],index:"cent"}}),bakw:i(e.centroid_point[1],{target:{geom:e.centroid_point[0],index:"cent"}})},this.edges=e.edges||[],this.edgeNodes=e.edgeNodes||[];var r=1==e.tins_points.length?0:1;this.tins={forw:s(e.tins_points[0].map((function(t){return Gt(t,e.points,e.edgeNodes||[],e.centroid_point,e.vertices_points,!1)}))),bakw:s(e.tins_points[r].map((function(t){return Gt(t,e.points,e.edgeNodes||[],e.centroid_point,e.vertices_points,!0)})))},this.addIndexedTin(),e.kinks_points&&(this.kinks={bakw:s(e.kinks_points.map((function(t){return i(t)})))}),e.yaxisMode?this.yaxisMode=e.yaxisMode:this.yaxisMode=t.YAXIS_INVERT,e.bounds?(this.bounds=e.bounds,this.boundsPolygon=e.boundsPolygon,this.xy=e.xy,this.wh=e.wh):(this.xy=[0,0],e.xy&&(this.wh=e.wh),this.bounds=void 0,this.boundsPolygon=void 0)}else!function(){n.tins=e.tins,n.addIndexedTin(),n.strict_status=e.strict_status,n.pointsWeightBuffer=e.weight_buffer,n.vertices_params=e.vertices_params,n.centroid=e.centroid,n.kinks=e.kinks;for(var t=[],r=function(e){var r=n.tins.forw.features[e];["a","b","c"].map((function(e,n){var i=r.geometry.coordinates[0][n],o=r.properties[e].geom,a=r.properties[e].index;t[a]=[i,o]}))},i=0;i<n.tins.forw.features.length;i++)r(i);n.points=t}();return{tins:this.tins,strict_status:this.strict_status,weight_buffer:this.pointsWeightBuffer,vertices_params:this.vertices_params,centroid:this.centroid,kinks:this.kinks}}},{key:"getCompiled",value:function(){var e={};e.points=this.points,e.weight_buffer=this.pointsWeightBuffer,e.centroid_point=[this.centroid.forw.geometry.coordinates,this.centroid.forw.properties.target.geom],e.vertices_params=[this.vertices_params.forw[0],this.vertices_params.bakw[0]],e.vertices_points=[];var n=this.vertices_params.forw[1];return[0,1,2,3].map((function(t){var r=n[t].features[0],i=r.geometry.coordinates[0][1],o=r.properties.b.geom;e.vertices_points[t]=[i,o]})),e.strict_status=this.strict_status,e.tins_points=[[]],this.tins.forw.features.map((function(t){e.tins_points[0].push(["a","b","c"].map((function(e){return t.properties[e].index})))})),this.strict_status==t.STATUS_LOOSE?(e.tins_points[1]=[],this.tins.bakw.features.map((function(t){e.tins_points[1].push(["a","b","c"].map((function(e){return t.properties[e].index})))}))):this.strict_status==t.STATUS_ERROR&&(e.kinks_points=this.kinks.bakw.features.map((function(t){return t.geometry.coordinates}))),this.yaxisMode==t.YAXIS_FOLLOW&&(e.yaxisMode=t.YAXIS_FOLLOW),this.bounds?(e.bounds=this.bounds,e.boundsPolygon=this.boundsPolygon,e.xy=this.xy,e.wh=this.wh):e.wh=this.wh,e.edges=this.edges,e.edgeNodes=this.edgeNodes,e}},{key:"addIndexedTin",value:function(){var t=this.tins,e=t.forw,n=t.bakw,r=Math.ceil(Math.sqrt(e.features.length));if(r<3)this.indexedTins=void 0;else{var i=null,o=null,a=e.features.map((function(t){var e=null;return p(t)[0].map((function(t){null==i?i=[Array.from(t),Array.from(t)]:(t[0]<i[0][0]&&(i[0][0]=t[0]),t[0]>i[1][0]&&(i[1][0]=t[0]),t[1]<i[0][1]&&(i[0][1]=t[1]),t[1]>i[1][1]&&(i[1][1]=t[1])),null==e?e=[Array.from(t),Array.from(t)]:(t[0]<e[0][0]&&(e[0][0]=t[0]),t[0]>e[1][0]&&(e[1][0]=t[0]),t[1]<e[0][1]&&(e[0][1]=t[1]),t[1]>e[1][1]&&(e[1][1]=t[1]))})),e})),s=(i[1][0]-i[0][0])/r,u=(i[1][1]-i[0][1])/r,c=a.reduce((function(t,e,n){for(var o=kt(e[0][0],i[0][0],s,r),a=kt(e[1][0],i[0][0],s,r),c=kt(e[0][1],i[0][1],u,r),l=kt(e[1][1],i[0][1],u,r),f=o;f<=a;f++){t[f]||(t[f]=[]);for(var p=c;p<=l;p++)t[f][p]||(t[f][p]=[]),t[f][p].push(n)}return t}),[]),l=n.features.map((function(t){var e=null;return p(t)[0].map((function(t){null==o?o=[Array.from(t),Array.from(t)]:(t[0]<o[0][0]&&(o[0][0]=t[0]),t[0]>o[1][0]&&(o[1][0]=t[0]),t[1]<o[0][1]&&(o[0][1]=t[1]),t[1]>o[1][1]&&(o[1][1]=t[1])),null==e?e=[Array.from(t),Array.from(t)]:(t[0]<e[0][0]&&(e[0][0]=t[0]),t[0]>e[1][0]&&(e[1][0]=t[0]),t[1]<e[0][1]&&(e[0][1]=t[1]),t[1]>e[1][1]&&(e[1][1]=t[1]))})),e})),f=(o[1][0]-o[0][0])/r,h=(o[1][1]-o[0][1])/r,d=l.reduce((function(t,e,n){for(var i=kt(e[0][0],o[0][0],f,r),a=kt(e[1][0],o[0][0],f,r),s=kt(e[0][1],o[0][1],h,r),u=kt(e[1][1],o[0][1],h,r),c=i;c<=a;c++){t[c]||(t[c]=[]);for(var l=s;l<=u;l++)t[c][l]||(t[c][l]=[]),t[c][l].push(n)}return t}),[]);this.indexedTins={forw:{gridNum:r,xOrigin:i[0][0],yOrigin:i[0][1],xUnit:s,yUnit:u,gridCache:c},bakw:{gridNum:r,xOrigin:o[0][0],yOrigin:o[0][1],xUnit:f,yUnit:h,gridCache:d}}}}},{key:"setWh",value:function(t){this.wh=t,this.xy=[0,0],this.bounds=void 0,this.boundsPolygon=void 0,this.tins=void 0,this.indexedTins=void 0}},{key:"setVertexMode",value:function(t){this.vertexMode=t,this.tins=void 0,this.indexedTins=void 0}},{key:"setStrictMode",value:function(t){this.strictMode=t,this.tins=void 0,this.indexedTins=void 0}},{key:"calcurateStrictTinAsync",value:function(){var e=this,n=this.pointsSet.edges;return Promise.all(this.tins.forw.features.map((function(t){return Promise.resolve(Bt(t))}))).then((function(t){e.tins.bakw=s(t)})).then((function(){var t={};return Promise.all(e.tins.forw.features.map((function(n,r){var i=e.tins.bakw.features[r];return Promise.resolve(zt(t,{forw:n,bakw:i}))}))).then((function(){return t})).catch((function(t){throw t}))})).then((function(t){return[Ut(t),t]})).then((function(r){var a=r[0],u=r[1];return a.bakw&&Object.keys(a.bakw).map((function(t){if("Not include case"!=a.bakw[t]){var r=u[t],i=ot(r[0].forw,r[1].forw),c=E(s([r[0].forw,r[1].forw]));if(!P(c,i)){var l=t.split("-");if(l[0].match(/^[0-9]+$/)&&l[1].match(/^[0-9]+$/))for(var f=l.map((function(t){return parseInt(t)})).sort((function(t,e){return t<e?-1:1})),p=0;p<n.length-1;p++)if(f[0]==n[p][0]&&f[1]==n[p][1])return;var h=l.map((function(t){return["a","b","c"].map((function(t,e){var n=r[0].bakw.properties[t];return{geom:r[0].bakw.geometry.coordinates[0][e],prop:n}})).filter((function(e){return e.prop.index==t}))[0]})),d=r.map((function(t){return["a","b","c"].map((function(e,n){var r=t.bakw.properties[e];return{geom:t.bakw.geometry.coordinates[0][n],prop:r}})).filter((function(t){return t.prop.index!=h[0].prop.index&&t.prop.index!=h[1].prop.index}))[0]}));qt(u,r[0],e.tins),qt(u,r[1],e.tins),h.map((function(t){var n=o([[t.geom,d[0].geom,d[1].geom,t.geom]],{a:t.prop,b:d[0].prop,c:d[1].prop}),r=Bt(n);zt(u,{forw:r,bakw:n},e.tins)}))}}})),Promise.all(["forw","bakw"].map((function(t){return new Promise((function(n){var r=function(t){var e=new at.internal.ArcCollection(t);return at.internal.findSegmentIntersections(e)}(e.tins[t].features.map((function(t){return t.geometry.coordinates[0]})));n(at.internal.dedupIntersections(r).reduce((function(t,e,n,r){return t||(t={}),t["".concat(e.x,":").concat(e.y)]=e,n!=r.length-1?t:Object.keys(t).map((function(e){return i([t[e].x,t[e].y])}))}),[]))})).catch((function(t){throw t}))}))).then((function(n){0==n[0].length&&0==n[1].length?(e.strict_status=t.STATUS_STRICT,delete e.kinks):(e.strict_status=t.STATUS_ERROR,e.kinks={},n[0].length>0&&(e.kinks.forw=s(n[0])),n[1].length>0&&(e.kinks.bakw=s(n[1])))})).catch((function(t){throw t}))})).catch((function(t){throw t}))}},{key:"generatePointsSet",value:function(){for(var t=this,e={forw:[],bakw:[]},n=0;n<this.points.length;n++){var r=Mt(this.points[n][0],this.points[n][1],n);e.forw.push(r),e.bakw.push(Lt(r))}var i=[],o=0;this.edgeNodes=[],this.edges||(this.edges=[]);for(var a=function(n){var r=t.edges[n].startEnd,a=Object.assign([],t.edges[n].illstNodes),s=Object.assign([],t.edges[n].mercNodes);if(0===a.length&&0===s.length)return i.push(r),"continue";a.unshift(t.points[r[0]][0]),a.push(t.points[r[1]][0]),s.unshift(t.points[r[0]][1]),s.push(t.points[r[1]][1]);var u=[a,s].map((function(t){var e=t.map((function(t,e,n){if(0===e)return 0;var r=n[e-1];return Math.sqrt(Math.pow(t[0]-r[0],2)+Math.pow(t[1]-r[1],2))})),n=e.reduce((function(t,e,n){return 0===n?[0]:(t.push(t[n-1]+e),t)}),[]);return n.map((function(r,i,o){var a=r/o[o.length-1];return[t[i],e[i],n[i],a]}))}));u.map((function(t,e){var n=u[e?0:1];return t.filter((function(e,n){return!(0===n||n===t.length-1||"handled"===e[4])})).map((function(t){var r=t[0],i=t[3],o=n.reduce((function(t,e,n,r){if(t)return t;var o=r[n+1];return e[3]===i?(e[4]="handled",[e]):e[3]<i&&o[3]>i?[e,o]:void 0}),void 0);if(1===o.length)return 0===e?[r,o[0][0],i]:[o[0][0],r,i];var a=o[0],s=o[1],u=(i-a[3])/(s[3]-a[3]),c=[(s[0][0]-a[0][0])*u+a[0][0],(s[0][1]-a[0][1])*u+a[0][1]];return 0===e?[r,c,i]:[c,r,i]}))})).reduce((function(t,e){return t.concat(e)}),[]).sort((function(t,e){return t[2]<e[2]?-1:1})).map((function(n,a,s){t.edgeNodes[o]=[n[0],n[1]];var u=Mt(n[0],n[1],"edgeNode".concat(o));o++,e.forw.push(u),e.bakw.push(Lt(u)),0===a?i.push([r[0],e.forw.length-1]):i.push([e.forw.length-2,e.forw.length-1]),a===s.length-1&&i.push([e.forw.length-1,r[1]])}))},u=0;u<this.edges.length;u++)a(u);return{forw:s(e.forw),bakw:s(e.bakw),edges:i}}},{key:"updateTinAsync",value:function(){var e=this,n=this.strictMode,r=this.xy[0]-.05*this.wh[0],o=this.xy[0]+1.05*this.wh[0],s=this.xy[1]-.05*this.wh[1],u=this.xy[1]+1.05*this.wh[1],c=this.bounds?function(t){return g(t,e.boundsPolygon)}:function(t){return t[0]>=e.xy[0]&&t[0]<=e.xy[0]+e.wh[0]&&t[1]>=e.xy[1]&&t[1]<=e.xy[1]+e.wh[1]};return this.points.reduce((function(t,e){return t&&c(e[0])}),!0)?new Promise((function(i){n!=t.MODE_STRICT&&n!=t.MODE_LOOSE&&(n=t.MODE_AUTO);var a=[];e.wh&&(a=[[r,s],[o,s],[r,u],[o,u]]),i([e.generatePointsSet(),a])})).then((function(t){var e=t[0];return Promise.all([new Promise((function(t){t(St(e.forw,e.edges,"target"))})),new Promise((function(t){t(St(e.bakw,e.edges,"target"))})),new Promise((function(t){t(b(e.forw))})),Promise.resolve(t)]).catch((function(t){throw t}))})).then((function(t){var n=t[0],r=t[1],o=t[2],a=t[3],s=a[0];if(0==n.features.length||0==r.features.length)throw"TOO LINEAR1";var u={forw:o.geometry.coordinates};u.bakw=jt(o,n),e.centroid={forw:Mt(u.forw,u.bakw,"cent")},e.centroid.bakw=Lt(e.centroid.forw);var c={};return Promise.all([new Promise((function(t){var e,r=E(s.forw).geometry.coordinates[0];try{e=r.map((function(t){return{forw:t,bakw:jt(i(t),n)}}))}catch(t){throw"TOO LINEAR2"}e.map((function(t){c["".concat(t.forw[0],":").concat(t.forw[1])]=t})),t(void 0)})),new Promise((function(t){var e,n=E(s.bakw).geometry.coordinates[0];try{e=n.map((function(t){return{bakw:t,forw:jt(i(t),r)}}))}catch(t){throw"TOO LINEAR2"}e.map((function(t){c["".concat(t.forw[0],":").concat(t.forw[1])]=t})),t(void 0)}))]).then((function(){return[u,c,a]})).catch((function(t){throw t}))})).then((function(n){var i=n[0],a=n[1],c=n[2],l=Object.keys(a).reduce((function(t,e,n,c){var l=a[e].forw,f=a[e].bakw,p={forw:[l[0]-i.forw[0],l[1]-i.forw[1]]};p.bakw=[f[0]-i.bakw[0],f[1]-i.bakw[1]];var h=0==p.forw[0]?1/0:((p.forw[0]<0?r:o)-i.forw[0])/p.forw[0],d=0==p.forw[1]?1/0:((p.forw[1]<0?s:u)-i.forw[1])/p.forw[1];if(Math.abs(h)/Math.abs(d)<1.1){var g={forw:[p.forw[0]*h+i.forw[0],p.forw[1]*h+i.forw[1]],bakw:[p.bakw[0]*h+i.bakw[0],p.bakw[1]*h+i.bakw[1]]};p.forw[0]<0?t[3].push(g):t[1].push(g)}if(Math.abs(d)/Math.abs(h)<1.1){var y={forw:[p.forw[0]*d+i.forw[0],p.forw[1]*d+i.forw[1]],bakw:[p.bakw[0]*d+i.bakw[0],p.bakw[1]*d+i.bakw[1]]};p.forw[1]<0?t[0].push(y):t[2].push(y)}return t}),[[],[],[],[]]),f=Object.keys(a).reduce((function(n,r,o,s){var u=a[r].forw,c=a[r].bakw,l={forw:[u[0]-i.forw[0],u[1]-i.forw[1]]};if(l.bakw=[c[0]-i.bakw[0],i.bakw[1]-c[1]],0==l.forw[0]||0==l.forw[1])return n;var f=0;return l.forw[0]>0&&(f+=1),l.forw[1]>0&&(f+=2),n[f].push([l.forw,l.bakw]),o==s.length-1?n.length==n.filter((function(t){return t.length>0})).length&&e.vertexMode==t.VERTEX_BIRDEYE?n:n.reduce((function(t,e){return[t[0].concat(e)]}),[[]]):n}),[[],[],[],[]]).map((function(t){return t.reduce((function(t,e,n,r){t||(t=[1/0,0,0]);var i=Math.sqrt(Math.pow(e[0][0],2)+Math.pow(e[0][1],2))/Math.sqrt(Math.pow(e[1][0],2)+Math.pow(e[1][1],2));i=i<t[0]?i:t[0];var o=Math.atan2(e[0][0],e[0][1])-Math.atan2(e[1][0],e[1][1]),a=t[1]+Math.cos(o),s=t[2]+Math.sin(o);return n==r.length-1?[i,Math.atan2(s,a)]:[i,a,s]}),null)}));return 1==f.length&&(f=[f[0],f[0],f[0],f[0]]),[f,i,l,c]})).then((function(t){var e=t[0],n=t[1],r=t[2],i=t[3][0],o=t[3][1],s=e.map((function(t,e){var r=o[e],i=[r[0]-n.forw[0],r[1]-n.forw[1]],a=Math.sqrt(Math.pow(i[0],2)+Math.pow(i[1],2))/t[0],s=Math.atan2(i[0],i[1])-t[1];return{forw:r,bakw:[n.bakw[0]+a*Math.sin(s),n.bakw[1]-a*Math.cos(s)]}})),u=s[2];s[2]=s[3],s[3]=u;for(var c=[1,1,1,1],l=function(t){var e=(t+1)%4,i=a([s[t].bakw,s[e].bakw]);r[t].map((function(r){var o=a([n.bakw,r.bakw]),s=it(i,o);if(s.features.length>0&&s.features[0].geometry){var u=s.features[0],l=Math.sqrt(Math.pow(r.bakw[0]-n.bakw[0],2)+Math.pow(r.bakw[1]-n.bakw[1],2))/Math.sqrt(Math.pow(u.geometry.coordinates[0]-n.bakw[0],2)+Math.pow(u.geometry.coordinates[1]-n.bakw[1],2));l>c[t]&&(c[t]=l),l>c[e]&&(c[e]=l)}}))},f=0;f<4;f++)l(f);return[s=s.map((function(t,e){var r=c[e],i=[(t.bakw[0]-n.bakw[0])*r+n.bakw[0],(t.bakw[1]-n.bakw[1])*r+n.bakw[1]];return{forw:t.forw,bakw:i}})),i]})).then((function(r){for(var i=r[0],o=r[1],a={forw:[],bakw:[]},s=0;s<i.length;s++){var u=Mt(i[s].forw,i[s].bakw,"bbox".concat(s)),c=Lt(u);o.forw.features.push(u),o.bakw.features.push(c),a.forw.push(u),a.bakw.push(c)}return e.pointsSet=o,e.tins={forw:Ot(St(o.forw,o.edges,"target"))},(n==t.MODE_STRICT||n==t.MODE_AUTO?e.calcurateStrictTinAsync():Promise.resolve()).then((function(){return(n==t.MODE_LOOSE||n==t.MODE_AUTO&&e.strict_status==t.STATUS_ERROR)&&(e.tins.bakw=Ot(St(o.bakw,o.edges,"target")),delete e.kinks,e.strict_status=t.STATUS_LOOSE),e.vertices_params={forw:Pt(a.forw,e.centroid.forw),bakw:Pt(a.bakw,e.centroid.bakw)},e.addIndexedTin(),e.calculatePointsWeightAsync()})).catch((function(t){throw t}))})).catch((function(t){throw t})):new Promise((function(t,e){e("SOME POINTS OUTSIDE")}))}},{key:"transform",value:function(e,n,r){var o=this;if(n&&this.strict_status==t.STATUS_ERROR)throw'Backward transform is not allowed if strict_status == "strict_error"';this.yaxisMode==t.YAXIS_FOLLOW&&n&&(e=[e[0],-1*e[1]]);var a=i(e);if(this.bounds&&!n&&!r&&!g(a,this.boundsPolygon))return!1;var s=n?this.tins.bakw:this.tins.forw,u=n?this.indexedTins.bakw:this.indexedTins.forw,c=n?this.vertices_params.bakw:this.vertices_params.forw,l=n?this.centroid.bakw:this.centroid.forw,f=n?this.pointsWeightBuffer.bakw:this.pointsWeightBuffer.forw,p=void 0,h=void 0;this.stateFull&&(this.stateBackward==n?p=this.stateTriangle:(this.stateBackward=n,this.stateTriangle=void 0),h=function(t){o.stateTriangle=t});var d=jt(a,s,u,c,l,f,p,h);if(this.bounds&&n&&!r){var y=i(d);if(!g(y,this.boundsPolygon))return!1}else this.yaxisMode!=t.YAXIS_FOLLOW||n||(d=[d[0],-1*d[1]]);return d}},{key:"calculatePointsWeightAsync",value:function(){var e=this,n=["forw"];this.strict_status==t.STATUS_LOOSE&&n.push("bakw");var r={};return Promise.all(n.map((function(t){r[t]={};var n={},i=e.tins[t];return Promise.all(i.features.map((function(e){var i=["a","b","c"];return new Promise((function(o){for(var a=0;a<3;a++){var s=(a+1)%3,u=i[a],c=i[s],l=e.properties[u].index,f=e.properties[c].index,p=[l,f].sort().join("-");if(!n[p]){var h=e.geometry.coordinates[0][a],d=e.geometry.coordinates[0][s],g=e.properties[u].geom,y=e.properties[c].geom;n[p]=1;var m=Math.sqrt(Math.pow(g[0]-y[0],2)+Math.pow(g[1]-y[1],2))/Math.sqrt(Math.pow(h[0]-d[0],2)+Math.pow(h[1]-d[1],2));r[t][l]||(r[t][l]={}),r[t][f]||(r[t][f]={}),r[t][l][p]=m,r[t][f][p]=m}}o(void 0)}))}))).catch((function(t){throw t}))}))).then((function(){var i={};n.map((function(n){i[n]={},e.strict_status==t.STATUS_STRICT&&(i.bakw={}),Object.keys(r[n]).map((function(o){i[n][o]=Object.keys(r[n][o]).reduce((function(t,e,i,a){return t+=r[n][o][e],i==a.length-1?t/a.length:t}),0),e.strict_status==t.STATUS_STRICT&&(i.bakw[o]=1/i[n][o])})),i[n].cent=[0,1,2,3].reduce((function(t,e){var r="bbox".concat(e);return t+=i[n][r],3==e?t/4:t}),0),e.strict_status==t.STATUS_STRICT&&(i.bakw.cent=1/i[n].cent)})),e.pointsWeightBuffer=i})).catch((function(t){throw t}))}}])&&Ct(e.prototype,n),r&&Ct(e,r),t}();function Ot(t){for(var e=t.features,n=0;n<e.length;n++){var r=e[n];"bbox"=="".concat(r.properties.a.index).substring(0,4)&&"bbox"=="".concat(r.properties.b.index).substring(0,4)?e[n]={geometry:{type:"Polygon",coordinates:[[r.geometry.coordinates[0][2],r.geometry.coordinates[0][0],r.geometry.coordinates[0][1],r.geometry.coordinates[0][2]]]},properties:{a:{geom:r.properties.c.geom,index:r.properties.c.index},b:{geom:r.properties.a.geom,index:r.properties.a.index},c:{geom:r.properties.b.geom,index:r.properties.b.index}},type:"Feature"}:"bbox"=="".concat(r.properties.c.index).substring(0,4)&&"bbox"=="".concat(r.properties.a.index).substring(0,4)&&(e[n]={geometry:{type:"Polygon",coordinates:[[r.geometry.coordinates[0][1],r.geometry.coordinates[0][2],r.geometry.coordinates[0][0],r.geometry.coordinates[0][1]]]},properties:{a:{geom:r.properties.b.geom,index:r.properties.b.index},b:{geom:r.properties.c.geom,index:r.properties.c.index},c:{geom:r.properties.a.geom,index:r.properties.a.index}},type:"Feature"})}return t}function Pt(t,e){var n=e.geometry.coordinates;return[0,1,2,3].map((function(r){var i=(r+1)%4,a=t[r],u=t[i],c=a.geometry.coordinates;return[Math.atan2(c[0]-n[0],c[1]-n[1]),s([o([[e,a,u,e].map((function(t){return t.geometry.coordinates}))],{a:{geom:e.properties.target.geom,index:e.properties.target.index},b:{geom:a.properties.target.geom,index:a.properties.target.index},c:{geom:u.properties.target.geom,index:u.properties.target.index}})])]})).reduce((function(t,e){return t[0].push(e[0]),t[1].push(e[1]),t}),[[],[]])}function Tt(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e?function(t){return!(t>=0&&t<2*Math.PI)}:function(t){return!(t>-1*Math.PI&&t<=Math.PI)};n(t);)t+=2*Math.PI*(t>0?-1:1);return t}function Mt(t,e,n){return i(t,{target:{geom:e,index:n}})}function Lt(t){return i(t.properties.target.geom,{target:{geom:t.geometry.coordinates,index:t.properties.target.index}})}function Rt(t,e,n){var r=e.geometry.coordinates[0][0],i=e.geometry.coordinates[0][1],o=e.geometry.coordinates[0][2],a=t.geometry.coordinates,s=e.properties.a.geom,u=e.properties.b.geom,c=e.properties.c.geom,l=[i[0]-r[0],i[1]-r[1]],f=[o[0]-r[0],o[1]-r[1]],p=[a[0]-r[0],a[1]-r[1]],h=[u[0]-s[0],u[1]-s[1]],d=[c[0]-s[0],c[1]-s[1]],g=(f[1]*p[0]-f[0]*p[1])/(l[0]*f[1]-l[1]*f[0]),y=(l[0]*p[1]-l[1]*p[0])/(l[0]*f[1]-l[1]*f[0]);if(n){var m,v=n[e.properties.a.index],_=n[e.properties.b.index],b=n[e.properties.c.index];if(g<0||y<0||1-g-y<0){var x=g/(g+y),w=y/(g+y);m=g/_/(x/_+w/b),y=y/b/(x/_+w/b)}else m=g/_/(g/_+y/b+(1-g-y)/v),y=y/b/(g/_+y/b+(1-g-y)/v);g=m}return[g*h[0]+y*d[0]+s[0],g*h[1]+y*d[1]+s[1]]}function Dt(t,e,n,r){var i=t.geometry.coordinates,o=n.geometry.coordinates,a=function(t,e){for(var n,r=Tt(t-e[0]),i=2*Math.PI,o=0;o<e.length;o++){var a=Tt(t-e[(o+1)%e.length]),s=Math.min(Math.abs(r),Math.abs(a));r*a<=0&&s<i&&(i=s,n=o),r=a}return n}(Math.atan2(i[0]-o[0],i[1]-o[1]),e[0]);return Rt(t,e[1][a].features[0],r)}function Ft(t,e){for(var n=0;n<e.features.length;n++){if(g(t,e.features[n]))return e.features[n]}}function kt(t,e,n,r){var i=Math.floor((t-e)/n);return i>=r&&(i=r-1),i}function jt(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:void 0;if(s&&(n=Ft(t,{features:[s]})),!n){if(r){var c=t.geometry.coordinates,l=r.gridNum,f=r.xOrigin,p=r.yOrigin,h=r.xUnit,d=r.yUnit,g=r.gridCache,y=kt(c[0],f,h,l),m=kt(c[1],p,d,l),v=g[y]&&g[y][m]?g[y][m]:[];e={features:v.map((function(t){return e.features[t]}))}}n=Ft(t,e)}return u&&u(n),n?Rt(t,n,a):Dt(t,i,o,a)}function Bt(t){var e=["a","b","c","a"].map((function(e){return t.properties[e].geom})),n=t.geometry.coordinates[0],r=t.properties;return o([e],{a:{geom:n[0],index:r.a.index},b:{geom:n[1],index:r.b.index},c:{geom:n[2],index:r.c.index}})}function Gt(t,e,n,r,i,a){return function(t){return o([[0,1,2,0].map((function(e){return t[e][0][0]}))],{a:{geom:t[0][0][1],index:t[0][1]},b:{geom:t[1][0][1],index:t[1][1]},c:{geom:t[2][0][1],index:t[2][1]}})}(t.map((function(t){var o=isFinite(t)?e[t]:"cent"==t?r:"bbox0"==t?i[0]:"bbox1"==t?i[1]:"bbox2"==t?i[2]:"bbox3"==t?i[3]:function(){var e=t.match(/edgeNode(\d+)/);if(e){var r=parseInt(e[1]);return n[r]}}();return a?[[o[1],o[0]],t]:[[o[0],o[1]],t]})))}function Ut(t){var e={forw:{},bakw:{}};return Promise.all(Object.keys(t).map((function(e){return new Promise((function(n){var r=t[e];if(r.length<2)return n(void 0);["forw","bakw"].map((function(t){var e=D(r[0][t],r[1][t]);if(!e||"Point"==e.geometry.type||"LineString"==e.geometry.type)return n(void 0);n(void 0)}))}))}))).then((function(){return 0==Object.keys(e.forw).length&&delete e.forw,0==Object.keys(e.bakw).length&&delete e.bakw,e})).catch((function(t){throw t}))}function zt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=Vt(e.forw),i=Vt(e.bakw);if(JSON.stringify(r)!=JSON.stringify(i))throw"".concat(JSON.stringify(e,null,2),"\n").concat(JSON.stringify(r),"\n").concat(JSON.stringify(i));for(var o=0;o<r.length;o++){var a=r[o];t[a]||(t[a]=[]),t[a].push(e)}n&&(n.forw.features.push(e.forw),n.bakw.features.push(e.bakw))}function qt(t,e,n){var r=Vt(e.forw),i=Vt(e.bakw);if(JSON.stringify(r)!=JSON.stringify(i))throw"".concat(JSON.stringify(e,null,2),"\n").concat(JSON.stringify(r),"\n").concat(JSON.stringify(i));for(var o=0;o<r.length;o++){var a=r[o],s=t[a].filter((function(t){return t.forw!=e.forw}));0==s.length?delete t[a]:t[a]=s}if(n){var u=n.forw.features.filter((function(t){return t!=e.forw}));n.forw.features=u,u=n.bakw.features.filter((function(t){return t!=e.bakw})),n.bakw.features=u}}function Vt(t){var e=["a","b","c"].map((function(e){return t.properties[e].index}));return[[0,1],[0,2],[1,2],[0,1,2]].map((function(t){return t.map((function(t){return e[t]})).sort().join("-")})).sort()}Nt(At,"VERTEX_PLAIN","plain"),Nt(At,"VERTEX_BIRDEYE","birdeye"),Nt(At,"MODE_STRICT","strict"),Nt(At,"MODE_AUTO","auto"),Nt(At,"MODE_LOOSE","loose"),Nt(At,"STATUS_STRICT","strict"),Nt(At,"STATUS_ERROR","strict_error"),Nt(At,"STATUS_LOOSE","loose"),Nt(At,"YAXIS_FOLLOW","follow"),Nt(At,"YAXIS_INVERT","invert");e.default=At}]).default}));
//# sourceMappingURL=index.js.map